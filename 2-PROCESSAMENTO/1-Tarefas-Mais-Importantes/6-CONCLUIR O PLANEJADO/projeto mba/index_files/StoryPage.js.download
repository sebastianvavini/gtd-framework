var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)},StoryPageMain;!function(e){var t=StoryApp.View.ViewElements,i=function(){function e(){}return e.prototype.getDataArgs=function(t,i){return{clientDevice:CommonSettings.ClientDevice,width:t.toString(),height:i.toString(),isAccessibleMode:StoryApp.Utilities.query.fetch(StoryApp.Common.UrlHelper.URLParamAccessible)===StoryApp.Common.UrlHelper.URLParamValueTrue,knownRenderModelKeys:[],inEmbedHostMode:StoryApp.Utilities.query.fetch(StoryApp.Common.UrlHelper.URLParamHost)===StoryApp.Common.UrlHelper.URLParamValueTrue,returnPerformanceDetails:void 0!=PerformanceMetrics,viewOptionOverrides:this.getViewOptionOverrides().toJson(),isEmbedded:e.isEmbedded(StoryPageSettings),countView:e.determineCountViewParameter()}},e.determineCountViewParameter=function(){return StoryApp.Utilities.query.fetch(StoryApp.Common.UrlHelper.URLParamCountView).toLowerCase()!==StoryApp.Common.UrlHelper.URLParamValueFalse},e.isEmbedded=function(e){return e.Mode===StoryViewMode.Embedded},e.prototype.getViewOptionOverrides=function(){return t.ViewModel?t.ViewModel.viewOptionOverridesWatchable.getValue():new ViewOptionOverrides},e}();e.RenderModelDataArgsFactory=i}(StoryPageMain||(StoryPageMain={}));var StoryPageMain;!function(e){var t=function(){function t(e,t,i,n,o,r,a){this.renderModelManager=e,this.perfLogger=t,this.layoutElementLogger=i,this.urlHelper=n,this.performanceManager=o,this.dataArgs=r,this.eventManager=a,this.getNewRenderModelTask=void 0,this.initialRequestResized=!1}return t.prototype.cancelDownload=function(){this.getNewRenderModelTask&&(this.getNewRenderModelTask.reject(),this.getNewRenderModelTask=void 0)},t.prototype.getNewRenderModel=function(e,t){var i=this;if(this.getNewRenderModelTask)throw StoryApp.RethrowLogger.createError("renderModelTask should not be set");this.initialRequestResized=void 0;var n,o=this.getNewRenderModelTask=$.Deferred();return $.ajax({type:"POST",timeout:CommonSettings.LoadTimeoutMilliseconds,url:this.urlHelper.getStoryUrl(StoryPageSettings.LookupId,StoryPageSettings.ClientVersion),data:this.dataArgs.getDataArgs(e,t),cache:!1,dataType:"json",traditional:!0,beforeSend:function(){return platform.setImmediate(function(){FontLoadTest.registerCustomFont("SwayIcons,SwayIcons Bold,SwayIcons Semibold,SwayIcons Semilight,SwayIcons Thin","î€€",3,30)}),n=platform.now(),!0},dataFilter:function(e){return n=platform.now()-n,e},success:function(e,t,r){i.performanceManager.measurePerformance("getNewRenderModel:onSuccess",function(){if(i.perfLogger.logGetRenderModelPerformance(r,n),i.getNewRenderModelTask==o){var t=i.perfLogger.removeAndSavePerformanceMetricsFromRenderModelResponse(e);o.resolve(t),i.getNewRenderModelTask=null}})},error:function(e,t,n){if(i.getNewRenderModelTask){var r={status:e.status,textStatus:t,errorThrown:n};StoryLog.StructuredTraceTag(596476369,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Call to GetStory didn't complete.",r),o.resolve(null),i.getNewRenderModelTask=null}}}),o},t.prototype.getRenderModel=function(t,i,n){var o=this;if("undefined"!=typeof swayConsumptionFirstModel){if(swayConsumptionFirstModel.data){StoryApp.Utilities.weblog(e.RenderModelManager.FirstModelWeblogTag,"First model already loaded.");var r=this.renderModelManager.processRenderModelResponse(swayConsumptionFirstModel.data);return swayConsumptionFirstModel=void 0,$.Deferred().resolve(r).promise()}if(swayConsumptionFirstModel.xhr&&swayConsumptionFirstModel.width===t&&swayConsumptionFirstModel.height===i)return StoryApp.Utilities.weblog(e.RenderModelManager.FirstModelWeblogTag,"First model not loaded yet, setting promise to wait for the XHR to raise event."),this.eventManager.setListenerForFirstModelLoad();if(swayConsumptionFirstModel.xhr&&4===swayConsumptionFirstModel.xhr.readyState)return StoryApp.Utilities.weblog(e.RenderModelManager.FirstModelWeblogTag,"Error loading the model. Status: "+swayConsumptionFirstModel.xhr.status+"."),$.Deferred().reject(swayConsumptionFirstModel.xhr.status).promise();swayConsumptionFirstModel.xhr&&(StoryApp.Utilities.weblog(e.RenderModelManager.FirstModelWeblogTag,"We asked for a new model before the initial load started. Aborting the initial request."),this.abortFirstModelLoad())}if(this.getNewRenderModelTask&&(this.getNewRenderModelTask.reject(),this.getNewRenderModelTask=null),this.renderModelManager.canSkipResize(n))return $.Deferred().resolve(null);var a=platform.now();return this.getNewRenderModel(t,i).then(function(e){return StoryApp.Utilities.weblog("performance","Network request for render model took "+(platform.now()-a)),o.renderModelManager.processRenderModelResponse(e)})},t.prototype.abortFirstModelLoad=function(){StoryApp.Utilities.weblog(e.RenderModelManager.FirstModelWeblogTag,"First model didn't load yet but the screen size changed. Aborting."),swayConsumptionFirstModel.xhr.abort(),swayConsumptionFirstModel=void 0},t}();e.RenderModelDownloader=t}(StoryPageMain||(StoryPageMain={}));var StoryPageMain;!function(e){var t=function(){function t(e){this.renderModelManager=e}return t.prototype.registerResizeEvent=function(){var e=this;StoryApp.Utilities.throttledEvent(this,StoryApp.Utilities.onResize,StoryApp.Utilities.defaultEventThrottleDelay,function(){return e.renderModelManager.startWaiting()},function(){return e.renderModelManager.getAndApplyNewRenderModel(!0)})},t.prototype.setListenerForFirstModelLoad=function(){var e=$.Deferred();return this.firstModelReadyEventListener=this.modelReadyEventListener.bind(this,e),this.firstModelFailedEventListener=this.modelFailedEventListener.bind(this,e),document.addEventListener(FirstModel.FirstModelReadyEventName,this.firstModelReadyEventListener),document.addEventListener(FirstModel.FirstModelFailedEventName,this.firstModelFailedEventListener),e},t.prototype.modelReadyEventListener=function(t,i){"undefined"!=typeof swayConsumptionFirstModel&&(StoryApp.Utilities.weblog(e.RenderModelManager.FirstModelWeblogTag,"firstModelReady event fired, resolving the promise."),t.resolve(this.renderModelManager.processRenderModelResponse(swayConsumptionFirstModel.data)),document.removeEventListener(FirstModel.FirstModelReadyEventName,this.firstModelReadyEventListener),document.removeEventListener(FirstModel.FirstModelFailedEventName,this.firstModelFailedEventListener),swayConsumptionFirstModel=void 0)},t.prototype.modelFailedEventListener=function(t,i){"undefined"!=typeof swayConsumptionFirstModel&&(StoryApp.Utilities.weblog(e.RenderModelManager.FirstModelWeblogTag,"firstModelFailed event fired, rejecting the promise."),t.reject(swayConsumptionFirstModel.xhr.status),document.removeEventListener(FirstModel.FirstModelReadyEventName,this.firstModelReadyEventListener),document.removeEventListener(FirstModel.FirstModelFailedEventName,this.firstModelFailedEventListener),swayConsumptionFirstModel=void 0)},t}();e.RenderModelEventManager=t}(StoryPageMain||(StoryPageMain={}));var StoryPageMain;!function(e){var t=function(){function e(e,t){this.bandwidthCalculator=e,this.environment=t}return e.prototype.logGetRenderModelPerformance=function(e,t){var i=this.bandwidthCalculator.calculate(e,t);this.environment.setAvailableBandwidth(i.availableBandwidthKbps);var n={operationName:"RenderModelLoaded",elapsedTimeMs:t+"",serverTimeMs:i.serverTimeMs+"",contentLengthBytes:i.contentLengthBytes+"",availableBandwidthKbps:i.availableBandwidthKbps+""};StoryLog.StructuredTraceTag(22370502,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"API Performance : Call Metrics :",n)},e.prototype.removeAndSavePerformanceMetricsFromRenderModelResponse=function(e){return StoryApp.Model.WP.isPerformanceMeasuredRenderModelResponse(e)?(PerformanceMetrics=PerformanceMetrics?PerformanceMetrics.concat(e.PerfMetrics):e.PerfMetrics,e.Result):e},e}();e.RenderModelPerformanceMetricsLogger=t}(StoryPageMain||(StoryPageMain={}));var StoryApp;!function(e){!function(e){var t=function(){function e(e){"string"==typeof e?(this.stringVal=e,this.intVal=-1):(this.stringVal=null,this.intVal=e)}return Object.defineProperty(e.prototype,"StringValue",{get:function(){return this.stringVal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IntValue",{get:function(){return this.intVal},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){return this.stringVal===e.stringVal&&this.intVal===e.intVal},e.prototype.createCopy=function(){return new e(-1===this.intVal?this.stringVal:this.intVal)},e.prototype.serialize=function(e){return-1===this.intVal?this.stringVal:e(this.intVal)},e}();e.EnumWrapper=t}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){function i(t,i){for(var o=t.getParentContainer();o;){if(!i.handleContainerSceneGraphElement(o,t))return!1;o=(t=o).getParentContainer()}var r=t.getParentProjection();if(r)return!!i.handleProjectionLayoutElement(r,t)&&n(r,i);throw e.RethrowLogger.createError("couldn't find parent for scene graph element")}function n(t,o){for(var r=t.getParentContainer();r;){if(!o.handleContainerLayoutElement(r,t))return!1;r=(t=r).getParentContainer()}var a=t.getParentViewport();if(a)return!!o.handleViewportLayoutElement(a,t)&&n(a,o);var s=t.getParentTexture();if(s)return!!o.handleTextureSceneGraphElement(s,t)&&i(s,o);var l=ArrayExtensions.firstOrDefault(t.model.layoutTrees.getCollection(),function(e){return e.getRootContainer()===t});if(l)return o.handleLayoutTree(l,t)&&o.handleRoot(t.model,l);throw e.RethrowLogger.createError("couldn't find parent for layout element")}t.traverseParents=n}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){e.LandingPageAddedInServiceVersion=162;var t=function(){function e(){}return e.AudioAccesibilityInfoAddedInServiceVersion=114,e}();e.RenderModel=t}(e.ServiceVersionConstants||(e.ServiceVersionConstants={}))}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){function t(e){return e&&e.Result&&e.PerfMetrics}e.isPerformanceMeasuredRenderModelResponse=t}(e.WP||(e.WP={}))}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(){function t(e){this.storyLeft=!1,this.leaveUrl=e}return t.prototype.leaveStory=function(e){this.storyLeft||(this.storyLeft=!0,this.sendLeaveStoryRequest(e))},t.prototype.sendLeaveStoryRequest=function(t){$.ajax(this.leaveUrl,{name:"LeaveStory",description:"Leave story request.",type:"POST",data:{},contentType:e.RequestManager.JsonContentType,dataType:"json",async:t||!e.Utilities.browser.isSafari&&!e.Utilities.browser.isFirefox})},t}();t.StoryLeaveManager=i}(t.StoryLeaveManager||(t.StoryLeaveManager={}))}(e.Server||(e.Server={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(){function i(e,t,i){this.updateNotifier=i,this._storyPageSettings=e,this._overrideRenderModel=TDB.watchableTag(596476292,this,null),this._renderModelRoot=t}return i.prototype.getRenderModel=function(e){var t=this._overrideRenderModel.getWatchedValue(e);return t||this._renderModelRoot.getWatchedValue(e)},i.prototype.overrideRenderModel=function(e){var i=this,n=t.LayoutElementLogger.getInstance();n&&n.start(),TDB.applyUpdate(function(){i._overrideRenderModel.setValue(e)})},i.prototype.renderModelOverriden=function(e){return!!this._overrideRenderModel.getWatchedValue(e)},i.prototype.watchForSync=function(e){this.updateNotifier.watchForUpdate(e)},i.prototype.getLastSyncTime=function(e){return""},i.prototype.getStoryId=function(){return this._storyPageSettings.StoryId},i.prototype.getLookupId=function(){return this._storyPageSettings.LookupId},i.prototype.openAccessibilityView=function(t){var i,n=this.getLookupId(),o=e.Common.UrlHelper.getInstance().accessibilityViewUrl(n,!1,StoryPageSettings.EmbedHostMode);return t?i=window.open(o,"_blank"):e.Utilities.assignWindowLocation(o),i},i.prototype.leaveAccessibilityView=function(){var t=this.getLookupId(),i=e.Common.UrlHelper.getInstance().accessibilityViewUrl(t,!0,StoryPageSettings.EmbedHostMode);e.Utilities.assignWindowLocation(i)},i.prototype.handleAccessibilityLink=function(){return!0},i.prototype.shouldValidateLayout=function(){return!0},i.prototype.onLayoutValidating=function(){},i.prototype.onLayoutValidationError=function(e){},i.prototype.getLayoutV2=function(){var t=$.Deferred(),i=e.Common.Environment.getInstance().getWindowSize();return $.ajax({type:"POST",timeout:CommonSettings.LoadTimeoutMilliseconds,url:e.Common.UrlHelper.getInstance().getLayoutUrl(StoryPageSettings.LookupId,StoryPageSettings.ClientVersion,""),data:{width:i.w,height:i.h},cache:!1,dataType:"text",success:function(e,i,n){t.resolve(n.responseText)},error:function(e,i,n){t.reject(n)}}),t.promise()},i}();t.CurrentStory=i}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=function(i){function n(e,t,o){var r=i.call(this)||this;r._store=e,r._propDefaultValues=t,r._propNotifierMaps=o,r._parents={},r._propNotifiers={},r._childNotifiers={},r._parentNotifiers={};for(var a=e.getPropBagIds(),s=a.length,l=0;l<s;l++)r.initializeObjectState(a[l]);for(l=0;l<s;l++){var u=a[l],d=e.getPropBag(u);if(n.IsNodeBag(d))for(var c=d.children,p=c.length,g=0;g<p;g++){var h=c[g],y=e.getPropBag(h),m=r.getMeaningFromEdgeBag(y);r.notifyParentsChanged(u,m,[],y.children)}}return r._store.registerUpdateCallback(function(e){r.updatePropBags(e)}),r._store.registerDisposalCallback(function(e){r.disposePropBags(e)}),r}return __extends(n,i),n.prototype.createObject=function(i,o){var r=this._store;if(o||(o=IdGenerator.generate().substr(0,n.MaxNodeIdLength)),o.length>n.MaxNodeIdLength)throw e.RethrowLogger.createError("Invalid ID.");if(this.containsObject(o))throw e.RethrowLogger.createError("Object already exists.");var a=Object.create(this._propDefaultValues[i]),s=new t.PropBag(o,n.NodeTypePrefix+i,a,[]);return r.addPropBag(s),r.markPropBagDirty(o),this.initializeObjectState(o),o},n.prototype.containsObject=function(e){return void 0!==this._store.getPropBag(e)},n.prototype.getObjectType=function(t){if(!this.containsObject(t))throw e.RethrowLogger.createError("Object doesn't exist.");return this.stripTypePrefix(this._store.getPropBag(t).type)},n.prototype.getProperty=function(t,i,n){if(!this.containsObject(t))throw e.RethrowLogger.createError("Object doesn't exist.");var o=this._store.getPropBag(t).props[i];if(n){var r=this.getObjectType(t),a=this._propNotifierMaps[r][i],s=this._propNotifiers[t],l=s[a];l||(l=s[a]=TDB.notifierTag(596476365,t)),n.watch(l)}return o},n.prototype.arePropsEqual=function(e,t){return e===t||e&&"object"==typeof e&&e.equals(t)},n.prototype.setProperty=function(t,i,n,o){void 0===o&&(o=!0);var r=this._store;if(!this.containsObject(t))throw e.RethrowLogger.createError("Object doesn't exist.");var a=r.getPropBag(t),s=a.props,l=this.getObjectType(a.id),u=a.createCopy(),d=!this.arePropsEqual(n,s[i]);this.arePropsEqual(n,this._propDefaultValues[l][i])?delete s[i]:s[i]=n,d&&o&&(r.markPropBagDirty(t,u),this.notifyPropertyChanged(t,i))},n.prototype.updateProperty=function(t,i){var n=this._store;if(!this.containsObject(t))throw e.RethrowLogger.createError("Object doesn't exist.");var o=n.getPropBag(t),r=o.props,a=o.createCopy();if(!r.hasOwnProperty(i))throw e.RethrowLogger.createError("Property not set");n.markPropBagDirty(t,a),this.notifyPropertyChanged(t,i)},n.prototype.resetProperty=function(t,i){var n=this._store;if(!this.containsObject(t))throw e.RethrowLogger.createError("Object doesn't exist.");var o=n.getPropBag(t),r=o.props,a=o.createCopy();r.hasOwnProperty(i)&&(delete r[i],n.markPropBagDirty(t,a),this.notifyPropertyChanged(t,i))},n.prototype.addRelationship=function(t,i,o,r){var a=this._store;if(!this.containsObject(t))throw e.RethrowLogger.createError("Source object doesn't exist.");if(!this.containsObject(i))throw e.RethrowLogger.createError("Target object doesn't exist.");if(!o||o.length>n._maxEdgeMeaningLength)throw e.RethrowLogger.createError("Invalid meaning.");var s=this.getEdgeBag(t,o,!0),l=s.children,u=s.createCopy();if(-1!==l.indexOf(i))throw e.RethrowLogger.createError("Relationship already exists.");void 0===r?l.push(i):l.splice(r,0,i),a.markPropBagDirty(s.id,u),this.notifyChildrenChanged(t,o),this.notifyParentChanged(t,i,o,!0)},n.prototype.removeRelationship=function(t,i,o){var r=this._store;if(!this.containsObject(t))throw e.RethrowLogger.createError("Source object doesn't exist.");if(!this.containsObject(i))throw e.RethrowLogger.createError("Target object doesn't exist.");if(!o||o.length>n._maxEdgeMeaningLength)throw e.RethrowLogger.createError("Invalid meaning.");var a=this.getEdgeBag(t,o);if(!a)throw e.RethrowLogger.createError("Relationship doesn't exist.");var s=a.createCopy(),l=a.children,u=l.indexOf(i);if(-1===u)throw e.RethrowLogger.createError("Relationship doesn't exist.");if(l.splice(u,1),r.markPropBagDirty(a.id,s),0===l.length){var d=r.getPropBag(t),c=d.createCopy(),p=d.children,g=p.indexOf(a.id);p.splice(g,1),r.markPropBagDirty(t,c)}this.notifyChildrenChanged(t,o),this.notifyParentChanged(t,i,o,!1)},n.prototype.setRelationships=function(t,i,o){var r=this._store;if(!this.containsObject(t))throw e.RethrowLogger.createError("Source object doesn't exist.");for(var a=0;a<i.length;a++)if(!this.containsObject(i[a]))throw e.RethrowLogger.createError("Target object doesn't exist.");if(!o||o.length>n._maxEdgeMeaningLength)throw e.RethrowLogger.createError("Invalid meaning.");var s,l=0===i.length,u=this.getEdgeBag(t,o,!l);if(u){var d=u.createCopy();if(s=u.children,u.children=i,r.markPropBagDirty(u.id,d),l){var c=r.getPropBag(t),p=c.createCopy(),g=c.children,h=g.indexOf(u.id);g.splice(h,1),r.markPropBagDirty(t,p)}}else s=[];this.notifyChildrenChanged(t,o),this.notifyParentsChanged(t,o,s,i)},n.prototype.getObjectsRelatedFrom=function(t,i,o){if(!this.containsObject(t))throw e.RethrowLogger.createError("Source object doesn't exist.");if(!i||i.length>n._maxEdgeMeaningLength)throw e.RethrowLogger.createError("Invalid meaning.");if(o){var r=this._childNotifiers[t],a=r[i];a||(a=r[i]=TDB.notifierTag(596476366,t+" "+i)),o.watch(a)}var s=this.getEdgeBag(t,i);return s?s.children:null},n.prototype.getObjectsRelatedTo=function(t,i,o){if(!this.containsObject(t))throw e.RethrowLogger.createError("Target object doesn't exist.");if(!i||i.length>n._maxEdgeMeaningLength)throw e.RethrowLogger.createError("Invalid meaning.");if(o){var r=this._parentNotifiers[t],a=r[i];a||(a=r[i]=TDB.notifierTag(596476367,t+" "+i)),o.watch(a)}return this._parents[t][i]||null},n.prototype.isExternalObject=function(t){if(!this.containsObject(t))throw e.RethrowLogger.createError("Object doesn't exist.");return void 0!==this._store.getPropBag(t).externalDataId},n.prototype.getExternalDataId=function(t){if(!this.containsObject(t))throw e.RethrowLogger.createError("Object doesn't exist.");if(!this.isExternalObject(t))throw e.RethrowLogger.createError("Object is not externally backed.");return this._store.getPropBag(t).externalDataId},n.prototype.registerObjectDisposalCallback=function(e){this._objectDisposalCallback=e},n.prototype.updatePropBags=function(e){for(var t=0,i=e.length;t<i;t++){r=e[t];(n.IsNodeBag(r)||n.IsExternalDataBag(r))&&this.updatePropBag(r)}for(var t=0,o=e.length;t<o;t++){var r=e[t];n.IsEdgeBag(r)&&this.updatePropBag(r)}},n.prototype.isEmpty=function(){return 0===this._store.getPropBagIds().length},n.GetObjectTypeFromPropBagType=function(e){var t=n.NodeTypePrefix;return e&&e.substr(0,t.length)===t?e.substr(t.length):void 0},n.prototype.notifyPropertiesChanged=function(e,t,i){var n,o=this.getObjectType(e),r=this._propNotifierMaps[o],a=this._propNotifiers[e];for(var s in t)if(!this.arePropsEqual(t[s],i[s])){n||(n={});var l=r[s];if(!n[l]){var u=a[l];u&&u.notify(),n[l]=!0}}},n.prototype.notifyPropertyChanged=function(e,t){var i=this.getObjectType(e),n=this._propNotifierMaps[i],o=this._propNotifiers[e][n[t]];o&&o.notify()},n.prototype.notifyChildrenChanged=function(e,t){var i=this._childNotifiers[e];if(i){var n=i[t];n&&n.notify()}},n.prototype.notifyParentsChanged=function(e,t,i,n){for(var o=n.length,r=0;r<o;r++){var a=n[r];i&&-1!==i.indexOf(a)||this.notifyParentChanged(e,a,t,!0)}for(var s=i.length,l=0;l<s;l++){var u=i[l];n&&-1!==n.indexOf(u)||this.notifyParentChanged(e,u,t,!1)}},n.prototype.notifyParentChanged=function(e,t,i,n){var o=this._parentNotifiers[t];if(o){var r=this._parents[t],a=o[i],s=r[i];s||(s=r[i]=[]),n?s.push(e):s.splice(s.indexOf(e),1),a&&a.notify()}},n.IsNodeBag=function(e){return void 0!==e.type&&e.type.substr(0,n.NodeTypePrefix.length)==n.NodeTypePrefix},n.IsEdgeBag=function(e){return void 0!==e.type&&e.type.substr(0,n.NodeTypePrefix.length)==n.EdgeTypePrefix},n.IsExternalDataBag=function(e){return void 0!==e.externalDataId},n.prototype.initializeObjectState=function(t){var i=this._store.getPropBag(t);if(n.IsNodeBag(i)||n.IsExternalDataBag(i)){if(void 0!==this._propNotifiers[t])throw e.RethrowLogger.createError("Property notifiers already added for object "+t);if(this._propNotifiers[t]={},void 0!==this._parents[t])throw e.RethrowLogger.createError("Parents already added for object "+t);if(this._parents[t]={},void 0!==this._childNotifiers[t])throw e.RethrowLogger.createError("Child notifiers already added for object "+t);if(this._childNotifiers[t]={},void 0!==this._parentNotifiers[t])throw e.RethrowLogger.createError("Parent notifiers already added for object "+t);this._parentNotifiers[t]={}}},n.prototype.clearObjectState=function(e){delete this._parents[e],delete this._propNotifiers[e],delete this._childNotifiers[e],delete this._parentNotifiers[e]},n.prototype.clearParentReferencesTo=function(e){for(var t=this._store.getPropBag(e).children,i=0;i<t.length;++i){var n=this._store.getPropBag(t[i]);if(n)for(var o=n.children,r=0;r<o.length;++r){var a=this._parents[o[r]];for(var s in a)a[s].removefirst(e)}}},n.prototype.getEdgeBag=function(e,i,n){for(var o=this._store,r=o.getPropBag(e),a=r.children,s=0;s<a.length;s++){var l=a[s],u=o.getPropBag(l);if(this.getMeaningFromEdgeBag(u)===i)return u}if(n){var d=new t.PropBag(e+i,"Edge-"+i,{},[]);o.addPropBag(d),o.markPropBagDirty(d.id);var c=r.createCopy();return r.children.push(d.id),o.markPropBagDirty(r.id,c),d}},n.prototype.stripTypePrefix=function(e){return e.substring(n.NodeTypePrefix.length)},n.prototype.getMeaningFromEdgeBag=function(e){return this.stripTypePrefix(e.type)},n.prototype.getObjectIdFromEdgeBag=function(e){var t=e.id,i=e.type,n=this.stripTypePrefix(i);return t.substr(0,t.length-n.length)},n.prototype.updatePropBag=function(t){if(n.IsNodeBag(t))this.updateNodeBag(t);else if(n.IsEdgeBag(t))this.updateEdgeBag(t);else{if(!n.IsExternalDataBag(t))throw e.RethrowLogger.createError("Unknown type of bag.");this.updateExternalDataBag(t)}},n.prototype.updateNodeBag=function(e){var t=this._store,i=e.id,n=t.getPropBag(i);if(n){var o=n.props,r=n.children,a=r.length,s=e.children;t.addPropBag(e),this.notifyPropertiesChanged(i,o,e.props);for(var l=0;l<a;l++){var u=r[l];if(-1===s.indexOf(u)){var d=t.getPropBag(u),c=this.getMeaningFromEdgeBag(d);this.notifyChildrenChanged(i,c),this.notifyParentsChanged(i,c,d.children,[])}}}else t.addPropBag(e),this.initializeObjectState(i)},n.prototype.updateEdgeBag=function(e){var t=this._store,i=e.id,n=this.getObjectIdFromEdgeBag(e),o=this.getMeaningFromEdgeBag(e),r=t.getPropBag(i),a=r?r.children:[],s=e.children;t.addPropBag(e),this.notifyChildrenChanged(n,o),this.notifyParentsChanged(n,o,a,s)},n.prototype.updateExternalDataBag=function(e){var t=this._store,i=e.id,n=t.getPropBag(i);t.addPropBag(e),n||this.initializeObjectState(i)},n.prototype.disposePropBags=function(e){var t=this,i=e.filter(function(e){var i=t._store.getPropBag(e);return i&&(n.IsNodeBag(i)||n.IsExternalDataBag(i))});this._objectDisposalCallback&&this._objectDisposalCallback(i);for(var o=0;o<i.length;o++){var r=i[o];this.clearObjectState(r),this.clearParentReferencesTo(r)}},n.NodeTypePrefix="Node-",n.EdgeTypePrefix="Edge-",n._maxEdgeMeaningLength=6,n.MaxNodeIdLength=14,n}(ObjectOM);t.GraphModel=i}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.GraphModel,n=e.Model.EnumWrapper;!function(e){var t;!function(e){e[e.RenderModelRoot=0]="RenderModelRoot",e[e.ToCElement=1]="ToCElement",e[e.ToCBackgroundElement=2]="ToCBackgroundElement",e[e.LayoutTree=3]="LayoutTree",e[e.LayoutNode=4]="LayoutNode",e[e.LayoutElement=5]="LayoutElement",e[e.ContainerLayoutElement=6]="ContainerLayoutElement",e[e.PanelLayoutElement=7]="PanelLayoutElement",e[e.RegionLayoutElement=8]="RegionLayoutElement",e[e.MediaViewportLayoutElement=9]="MediaViewportLayoutElement",e[e.TextLayoutElement=10]="TextLayoutElement",e[e.TextRunElement=11]="TextRunElement",e[e.TextBlockLayoutElement=12]="TextBlockLayoutElement",e[e.TextSection=13]="TextSection",e[e.TextParagraph=14]="TextParagraph",e[e.TextList=15]="TextList",e[e.DecorationLayoutElement=16]="DecorationLayoutElement",e[e.GraphicsLayoutElement=17]="GraphicsLayoutElement",e[e.ImageLayoutElement=18]="ImageLayoutElement",e[e.VideoLayoutElement=19]="VideoLayoutElement",e[e.MapLayoutElement=20]="MapLayoutElement",e[e.ProjectionLayoutElement=21]="ProjectionLayoutElement",e[e.ViewportLayoutElement=22]="ViewportLayoutElement",e[e.EmbedLayoutElement=23]="EmbedLayoutElement",e[e.ClientLayoutElement=24]="ClientLayoutElement",e[e.AgaveLayoutElement=25]="AgaveLayoutElement",e[e.StatusUpdateLayoutElement=26]="StatusUpdateLayoutElement",e[e.SceneGraphElement=27]="SceneGraphElement",e[e.ContainerSceneGraphElement=28]="ContainerSceneGraphElement",e[e.TextureSceneGraphElement=29]="TextureSceneGraphElement",e[e.AnimationSequence=30]="AnimationSequence",e[e.Animation=31]="Animation",e[e.AnimationExternalAction=32]="AnimationExternalAction",e[e.AnimationTarget=33]="AnimationTarget",e[e.AnimationFunction=34]="AnimationFunction",e[e.AnimationTransition=35]="AnimationTransition",e[e.TransitionContainer=36]="TransitionContainer",e[e.TransitionEffect=37]="TransitionEffect",e[e.AnimationParameter=38]="AnimationParameter",e[e.StaticImage=39]="StaticImage",e[e.Path=40]="Path",e[e.LayoutDebugInfo=41]="LayoutDebugInfo",e[e.RuleResult=42]="RuleResult",e[e.InteractionModel=43]="InteractionModel",e[e.FsmNode=44]="FsmNode",e[e.FsmEdge=45]="FsmEdge",e[e.KeyFrame=46]="KeyFrame",e[e.TriggerSet=47]="TriggerSet",e[e.Trigger=48]="Trigger",e[e.DefaultAction=49]="DefaultAction",e[e.SelectMethod=50]="SelectMethod",e[e.TargetSelectMethod=51]="TargetSelectMethod",e[e.SwipeSelectMethod=52]="SwipeSelectMethod",e[e.ClientSelectMethod=53]="ClientSelectMethod",e[e.ClientSignal=54]="ClientSignal",e[e.EditModeClientSignal=55]="EditModeClientSignal",e[e.AutoAdvanceClientSignal=56]="AutoAdvanceClientSignal",e[e.KeyboardSelectMethod=57]="KeyboardSelectMethod",e[e.KeyClick=58]="KeyClick",e[e.MouseSelectMethod=59]="MouseSelectMethod",e[e.CameraSelect=60]="CameraSelect",e[e.CameraSelectMethod=61]="CameraSelectMethod",e[e.TimingSelect=62]="TimingSelect",e[e.TimingSelectMethod=63]="TimingSelectMethod",e[e.StatelessRule=64]="StatelessRule",e[e.Transform=65]="Transform",e[e.RotationTransform2D=66]="RotationTransform2D",e[e.TranslateTransform2D=67]="TranslateTransform2D",e[e.ScaleTransform2D=68]="ScaleTransform2D",e[e.RotationTransform3D=69]="RotationTransform3D",e[e.TranslateTransform3D=70]="TranslateTransform3D",e[e.ScaleTransform3D=71]="ScaleTransform3D",e[e.LayoutContext=72]="LayoutContext",e[e.ContentProxy=73]="ContentProxy",e[e.AudioLayoutElement=74]="AudioLayoutElement",e[e.CodeBlockLayoutElement=75]="CodeBlockLayoutElement",e[e.Root=76]="Root"}(t=e.ObjectType||(e.ObjectType={}));!function(e){e[e.BorderRadius=0]="BorderRadius",e[e.MapPin=1]="MapPin",e[e.PaletteColorValue=2]="PaletteColorValue",e[e.SnapPoint=3]="SnapPoint",e[e.ClientState=4]="ClientState",e[e.TextStyle=5]="TextStyle",e[e.GeoCoordinate=6]="GeoCoordinate",e[e.Transition=7]="Transition",e[e.AnimationContainer=8]="AnimationContainer",e[e.AnimationEffect=9]="AnimationEffect",e[e.TransformOrigin=10]="TransformOrigin",e[e.NavigationMarker=11]="NavigationMarker",e[e.ContentNavigationMarkerCollection=12]="ContentNavigationMarkerCollection",e[e.AccessibilityInfo=13]="AccessibilityInfo",e[e.AriaAttribute=14]="AriaAttribute",e[e.LivingImageMediaElement=15]="LivingImageMediaElement",e[e.ViewOptions=16]="ViewOptions",e[e.AutoPlaySettings=17]="AutoPlaySettings",e[e.ClosedCaptionDescriptor=18]="ClosedCaptionDescriptor",e[e.Storyboard=19]="Storyboard",e[e.StoryboardAction=20]="StoryboardAction",e[e.AnimateOpacity=21]="AnimateOpacity",e[e.AnimateHidden=22]="AnimateHidden",e[e.AnimateUniformScale2D=23]="AnimateUniformScale2D",e[e.SetSymbol=24]="SetSymbol",e[e.SetCropDescriptorSymbol=25]="SetCropDescriptorSymbol",e[e.AttributeValuePair=26]="AttributeValuePair",e[e.ApplyAnimator=27]="ApplyAnimator",e[e.StoryboardExternalAction=28]="StoryboardExternalAction",e[e.IfAction=29]="IfAction",e[e.ElseAction=30]="ElseAction",e[e.AnimateValues=31]="AnimateValues",e[e.AnimateTransform=32]="AnimateTransform",e[e.AnimateZOrder=33]="AnimateZOrder",e[e.AnimateDimension=34]="AnimateDimension",e[e.KeyframeSelector=35]="KeyframeSelector",e[e.SelectionDirective=36]="SelectionDirective",e[e.ByKeyframeType=37]="ByKeyframeType",e[e.MatchingKeyframe=38]="MatchingKeyframe",e[e.ComputedValue=39]="ComputedValue",e[e.EvaluationContext=40]="EvaluationContext",e[e.RpnToken=41]="RpnToken",e[e.KeyframeMetaData=42]="KeyframeMetaData",e[e.StoryboardExecutionContext=43]="StoryboardExecutionContext"}(e.StructType||(e.StructType={}));var o;!function(e){e[e.WorldId=0]="WorldId",e[e.DefaultWorldId=1]="DefaultWorldId",e[e.LayoutStyleId=2]="LayoutStyleId",e[e.StyleVersion=3]="StyleVersion",e[e.WorldVersion=4]="WorldVersion",e[e.EditVersion=5]="EditVersion",e[e.RemoteDesignObjects=6]="RemoteDesignObjects",e[e.Title=7]="Title",e[e.Culture=8]="Culture",e[e.PaletteColors=9]="PaletteColors",e[e.DefaultViewOptions=10]="DefaultViewOptions",e[e.CurrentViewOptions=11]="CurrentViewOptions",e[e.Storyboards=12]="Storyboards",e[e.RTL=13]="RTL",e[e.ForceNativeScrolling=14]="ForceNativeScrolling",e[e.AutoPlaySettings=15]="AutoPlaySettings",e[e.NavigationTargetId=16]="NavigationTargetId",e[e.SubTitle=17]="SubTitle",e[e.Device=18]="Device",e[e.ViewportHeight=19]="ViewportHeight",e[e.ViewportWidth=20]="ViewportWidth",e[e.PreviousLayoutSucceeded=21]="PreviousLayoutSucceeded",e[e.LayoutFailed=22]="LayoutFailed",e[e.ErrorMessage=23]="ErrorMessage",e[e.TextStyles=24]="TextStyles",e[e.UnhashedId=25]="UnhashedId",e[e.KeyFrameType=26]="KeyFrameType",e[e.ContentId=27]="ContentId",e[e.Opacity=28]="Opacity",e[e.Hidden=29]="Hidden",e[e.Animated=30]="Animated",e[e.ContentType=31]="ContentType",e[e.Flags=32]="Flags",e[e.Cursor=33]="Cursor",e[e.TransformOrigin=34]="TransformOrigin",e[e.AccessibilityInfo=35]="AccessibilityInfo",e[e.PositionLeft=36]="PositionLeft",e[e.PositionTop=37]="PositionTop",e[e.PositionWidth=38]="PositionWidth",e[e.PositionHeight=39]="PositionHeight",e[e.BorderRadius=40]="BorderRadius",e[e.DropShadowXOff=41]="DropShadowXOff",e[e.DropShadowYOff=42]="DropShadowYOff",e[e.DropShadowBlur=43]="DropShadowBlur",e[e.DropShadowColor=44]="DropShadowColor",e[e.DropShadowSpread=45]="DropShadowSpread",e[e.DropShadowInset=46]="DropShadowInset",e[e.BackgroundPathShadowXOff=47]="BackgroundPathShadowXOff",e[e.BackgroundPathShadowYOff=48]="BackgroundPathShadowYOff",e[e.BackgroundPathShadowBlur=49]="BackgroundPathShadowBlur",e[e.BackgroundPathShadowColor=50]="BackgroundPathShadowColor",e[e.ZOrder=51]="ZOrder",e[e.FillOpacityOverride=52]="FillOpacityOverride",e[e.FillColorOverride=53]="FillColorOverride",e[e.IsOverlay=54]="IsOverlay",e[e.IsClickThrough=55]="IsClickThrough",e[e.FillColorName=56]="FillColorName",e[e.DownscaleFactor=57]="DownscaleFactor",e[e.VisibleCullingRegionLeft=58]="VisibleCullingRegionLeft",e[e.VisibleCullingRegionTop=59]="VisibleCullingRegionTop",e[e.VisibleCullingRegionWidth=60]="VisibleCullingRegionWidth",e[e.VisibleCullingRegionHeight=61]="VisibleCullingRegionHeight",e[e.Type=62]="Type",e[e.CanVisualize=63]="CanVisualize",e[e.ContainerType=64]="ContainerType",e[e.Scrollability=65]="Scrollability",e[e.Overflow=66]="Overflow",e[e.Text=67]="Text",e[e.FontKey=68]="FontKey",e[e.TextColorName=69]="TextColorName",e[e.TextOpacityOverride=70]="TextOpacityOverride",e[e.TextColorOverride=71]="TextColorOverride",e[e.TextShadowXOff=72]="TextShadowXOff",e[e.TextShadowYOff=73]="TextShadowYOff",e[e.TextShadowBlur=74]="TextShadowBlur",e[e.TextShadowColor=75]="TextShadowColor",e[e.HyperlinkUri=76]="HyperlinkUri",e[e.TextStyle=77]="TextStyle",e[e.TextStyleId=78]="TextStyleId",e[e.TextColorId=79]="TextColorId",e[e.LineHeight=80]="LineHeight",e[e.SpacingRatioAfter=81]="SpacingRatioAfter",e[e.SpacingAfter=82]="SpacingAfter",e[e.ParagraphStyle=83]="ParagraphStyle",e[e.Direction=84]="Direction",e[e.IsPullQuote=85]="IsPullQuote",e[e.Style=86]="Style",e[e.StartNum=87]="StartNum",e[e.ImageId=88]="ImageId",e[e.ImageUrl=89]="ImageUrl",e[e.ImageOriginalWidth=90]="ImageOriginalWidth",e[e.ImageOriginalHeight=91]="ImageOriginalHeight",e[e.ImageCropLeft=92]="ImageCropLeft",e[e.ImageCropTop=93]="ImageCropTop",e[e.ImageCropWidth=94]="ImageCropWidth",e[e.ImageCropHeight=95]="ImageCropHeight",e[e.FilterColorName=96]="FilterColorName",e[e.LivingImageMediaElements=97]="LivingImageMediaElements",e[e.RichImagePlayerType=98]="RichImagePlayerType",e[e.FilterEffects=99]="FilterEffects",e[e.VideoPlayerDescriptor=100]="VideoPlayerDescriptor",e[e.VideoPlayerType=101]="VideoPlayerType",e[e.ClosedCaptionDescriptors=102]="ClosedCaptionDescriptors",e[e.Pins=103]="Pins",e[e.HorizontalAlignment=104]="HorizontalAlignment",e[e.VerticalAlignment=105]="VerticalAlignment",e[e.ContentStretch=106]="ContentStretch",e[e.BackgroundType=107]="BackgroundType",e[e.SafeViewportLeft=108]="SafeViewportLeft",e[e.SafeViewportTop=109]="SafeViewportTop",e[e.SafeViewportWidth=110]="SafeViewportWidth",e[e.SafeViewportHeight=111]="SafeViewportHeight",e[e.EmbedSourceUrl=112]="EmbedSourceUrl",e[e.Height=113]="Height",e[e.Width=114]="Width",e[e.AllowFullScreen=115]="AllowFullScreen",e[e.Scrolling=116]="Scrolling",e[e.ShouldScale=117]="ShouldScale",e[e.Sandboxed=118]="Sandboxed",e[e.ClientRecipe=119]="ClientRecipe",e[e.AgaveId=120]="AgaveId",e[e.Manifest=121]="Manifest",e[e.AgaveData=122]="AgaveData",e[e.AgaveSettings=123]="AgaveSettings",e[e.SourceId=124]="SourceId",e[e.Name=125]="Name",e[e.AnimationsCompleteFunction=126]="AnimationsCompleteFunction",e[e.ClientRequirements=127]="ClientRequirements",e[e.AnimationName=128]="AnimationName",e[e.LocalStoryboards=129]="LocalStoryboards",e[e.StoryboardExecutionContexts=130]="StoryboardExecutionContexts",e[e.AnimationTrigger=131]="AnimationTrigger",e[e.TransitionIds=132]="TransitionIds",e[e.ClientState=133]="ClientState",e[e.Behaviors=134]="Behaviors",e[e.ActionType=135]="ActionType",e[e.ActionTargetId=136]="ActionTargetId",e[e.ElementId=137]="ElementId",e[e.AnimatablePropertyName=138]="AnimatablePropertyName",e[e.TransformIndex=139]="TransformIndex",e[e.TransformComponent=140]="TransformComponent",e[e.FunctionId=141]="FunctionId",e[e.Expression=142]="Expression",e[e.MaintainStateOnStart=143]="MaintainStateOnStart",e[e.Curve=144]="Curve",e[e.Duration=145]="Duration",e[e.Delay=146]="Delay",e[e.StartValue=147]="StartValue",e[e.EndValue=148]="EndValue",e[e.ParameterName=149]="ParameterName",e[e.ParameterValue=150]="ParameterValue",e[e.Filename=151]="Filename",e[e.FillStyle=152]="FillStyle",e[e.Tiling=153]="Tiling",e[e.StrokeWidth=154]="StrokeWidth",e[e.PathType=155]="PathType",e[e.Values=156]="Values",e[e.RecipeId=157]="RecipeId",e[e.IsCulled=158]="IsCulled",e[e.IsAborted=159]="IsAborted",e[e.TotalScore=160]="TotalScore",e[e.CropDescription=161]="CropDescription",e[e.CropName=162]="CropName",e[e.Description=163]="Description",e[e.Weight=164]="Weight",e[e.Level=165]="Level",e[e.Score=166]="Score",e[e.NormalizedScore=167]="NormalizedScore",e[e.ExecutionStage=168]="ExecutionStage",e[e.RequiresParallax=169]="RequiresParallax",e[e.Transitions=170]="Transitions",e[e.AnimationContainers=171]="AnimationContainers",e[e.AnimationEffects=172]="AnimationEffects",e[e.ContentNavigationMarkerCollections=173]="ContentNavigationMarkerCollections",e[e.CanNavigateTo=174]="CanNavigateTo",e[e.AllowDeferredExit=175]="AllowDeferredExit",e[e.IsModal=176]="IsModal",e[e.ResetDescendants=177]="ResetDescendants",e[e.AllowBubbling=178]="AllowBubbling",e[e.PreFetchAnimations=179]="PreFetchAnimations",e[e.HistoricallyRelevant=180]="HistoricallyRelevant",e[e.MetaData=181]="MetaData",e[e.ScrollWidth=182]="ScrollWidth",e[e.ScrollHeight=183]="ScrollHeight",e[e.CoverageMethod=184]="CoverageMethod",e[e.SnapPointsHorizontal=185]="SnapPointsHorizontal",e[e.SnapPointsVertical=186]="SnapPointsVertical",e[e.IsDefaultNavigation=187]="IsDefaultNavigation",e[e.AlwaysTryDefaultAction=188]="AlwaysTryDefaultAction",e[e.Action=189]="Action",e[e.Method=190]="Method",e[e.Target=191]="Target",e[e.KeyNames=192]="KeyNames",e[e.TargetId=193]="TargetId",e[e.TriggerTarget=194]="TriggerTarget",e[e.TriggerTargetId=195]="TriggerTargetId",e[e.IsReset=196]="IsReset",e[e.Key=197]="Key",e[e.Modifier=198]="Modifier",e[e.KeyDown=199]="KeyDown",e[e.Button=200]="Button",e[e.MouseWheelReactionDistance=201]="MouseWheelReactionDistance",e[e.VisibilityRatio=202]="VisibilityRatio",e[e.ViewportScaleX=203]="ViewportScaleX",e[e.ViewportScaleY=204]="ViewportScaleY",e[e.ViewportOffsetRatioX=205]="ViewportOffsetRatioX",e[e.ViewportOffsetRatioY=206]="ViewportOffsetRatioY",e[e.CheckOnEntry=207]="CheckOnEntry",e[e.Time=208]="Time",e[e.Variance=209]="Variance",e[e.FireOnStart=210]="FireOnStart",e[e.Value=211]="Value",e[e.TranslateX=212]="TranslateX",e[e.TranslateY=213]="TranslateY",e[e.ScaleX=214]="ScaleX",e[e.ScaleY=215]="ScaleY",e[e.ProjectX=216]="ProjectX",e[e.ProjectY=217]="ProjectY",e[e.ProjectZ=218]="ProjectZ",e[e.TranslateZ=219]="TranslateZ",e[e.ScaleZ=220]="ScaleZ",e[e.AudioPlayerDescriptor=221]="AudioPlayerDescriptor",e[e.AudioPlayerType=222]="AudioPlayerType",e[e.Content=223]="Content",e[e.Language=224]="Language",e[e.SchemaVersion=225]="SchemaVersion"}(o=e.Prop||(e.Prop={}));var r;!function(e){e[e.RenderModelRootHasAnimationSequence=0]="RenderModelRootHasAnimationSequence",e[e.RenderModelRootHasLayoutTree=1]="RenderModelRootHasLayoutTree",e[e.RenderModelRootHasToCElement=2]="RenderModelRootHasToCElement",e[e.ToCElementhasToCBackgroundElement=3]="ToCElementhasToCBackgroundElement",e[e.ToCElementHasToCElement=4]="ToCElementHasToCElement",e[e.LayoutTreeHasContainerLayoutElement=5]="LayoutTreeHasContainerLayoutElement",e[e.LayoutTreeHasInteractionModel=6]="LayoutTreeHasInteractionModel",e[e.LayoutNodeHasTransform=7]="LayoutNodeHasTransform",e[e.LayoutNodeLayoutContextPointsToLayoutContext=8]="LayoutNodeLayoutContextPointsToLayoutContext",e[e.LayoutElementBackgroundPointsToStaticImage=9]="LayoutElementBackgroundPointsToStaticImage",e[e.LayoutElementBackgroundPathPointsToPath=10]="LayoutElementBackgroundPathPointsToPath",e[e.LayoutElementBackgroundFilterPointsToPath=11]="LayoutElementBackgroundFilterPointsToPath",e[e.ContainerLayoutElementHasLayoutElement=12]="ContainerLayoutElementHasLayoutElement",e[e.ContainerLayoutElementHasLayoutDebugInfo=13]="ContainerLayoutElementHasLayoutDebugInfo",e[e.TextBlockLayoutElementHasTextList=14]="TextBlockLayoutElementHasTextList",e[e.TextParagraphHasTextLayoutElement=15]="TextParagraphHasTextLayoutElement",e[e.TextParagraphHasTextRunElement=16]="TextParagraphHasTextRunElement",e[e.TextParagraphLayoutContextPointsToLayoutContext=17]="TextParagraphLayoutContextPointsToLayoutContext",e[e.TextListHasTextSection=18]="TextListHasTextSection",e[e.ImageLayoutElementPathPointsToPath=19]="ImageLayoutElementPathPointsToPath",e[e.ImageLayoutElementFilterPathPointsToPath=20]="ImageLayoutElementFilterPathPointsToPath",e[e.ProjectionLayoutElementHasSceneGraphElement=21]="ProjectionLayoutElementHasSceneGraphElement",e[e.ViewportLayoutElementHasLayoutElement=22]="ViewportLayoutElementHasLayoutElement",e[e.ContainerSceneGraphElementHasSceneGraphElement=23]="ContainerSceneGraphElementHasSceneGraphElement",e[e.TextureSceneGraphElementHasLayoutElement=24]="TextureSceneGraphElementHasLayoutElement",e[e.AnimationSequenceHasAnimation=25]="AnimationSequenceHasAnimation",e[e.AnimationHasAnimationParameter=26]="AnimationHasAnimationParameter",e[e.AnimationHasAnimationFunction=27]="AnimationHasAnimationFunction",e[e.AnimationHasAnimationTransition=28]="AnimationHasAnimationTransition",e[e.AnimationFunctionHasAnimationTarget=29]="AnimationFunctionHasAnimationTarget",e[e.AnimationTransitionHasTransitionContainer=30]="AnimationTransitionHasTransitionContainer",e[e.TransitionContainerHasTransitionEffect=31]="TransitionContainerHasTransitionEffect",e[e.LayoutDebugInfoHasRuleResult=32]="LayoutDebugInfoHasRuleResult",e[e.InteractionModelHasKeyFrame=33]="InteractionModelHasKeyFrame",e[e.InteractionModelHasTriggerSet=34]="InteractionModelHasTriggerSet",e[e.InteractionModelHasFsmNode=35]="InteractionModelHasFsmNode",e[e.InteractionModelStartFsmNode=36]="InteractionModelStartFsmNode",e[e.FsmNodePointsToFsmNode=37]="FsmNodePointsToFsmNode",e[e.FsmNodeHasFsmNode=38]="FsmNodeHasFsmNode",e[e.FsmNodeHasFsmEdge=39]="FsmNodeHasFsmEdge",e[e.FsmNodeHasKeyFrame=40]="FsmNodeHasKeyFrame",e[e.FsmNodeAmbientPointsToAnimationSequence=41]="FsmNodeAmbientPointsToAnimationSequence",e[e.FsmNodeExitPointsToAnimationSequence=42]="FsmNodeExitPointsToAnimationSequence",e[e.FsmEdgePointsToFsmNode=43]="FsmEdgePointsToFsmNode",e[e.FsmEdgePointsToTriggerSet=44]="FsmEdgePointsToTriggerSet",e[e.FsmEdgeHasTriggerSet=45]="FsmEdgeHasTriggerSet",e[e.FsmEdgeOutPointsToAnimationSequence=46]="FsmEdgeOutPointsToAnimationSequence",e[e.FsmEdgeInPointsToAnimationSequence=47]="FsmEdgeInPointsToAnimationSequence",e[e.FsmEdgeHasKeyFrame=48]="FsmEdgeHasKeyFrame",e[e.KeyFramePointsToLayoutNode=49]="KeyFramePointsToLayoutNode",e[e.KeyFrameHasKeyFrame=50]="KeyFrameHasKeyFrame",e[e.TriggerSetHasTrigger=51]="TriggerSetHasTrigger",e[e.TriggerHasSelectMethod=52]="TriggerHasSelectMethod",e[e.TriggerHasDefaultAction=53]="TriggerHasDefaultAction",e[e.DefaultActionHasAnimationParameter=54]="DefaultActionHasAnimationParameter",e[e.SelectMethodHasCameraSelect=55]="SelectMethodHasCameraSelect",e[e.SelectMethodHasTimingSelect=56]="SelectMethodHasTimingSelect",e[e.ClientSelectMethodHasClientSignal=57]="ClientSelectMethodHasClientSignal",e[e.KeyboardSelectMethodHasKeyClick=58]="KeyboardSelectMethodHasKeyClick",e[e.StatelessRuleHasTriggerSet=59]="StatelessRuleHasTriggerSet",e[e.StatelessRuleHasAnimationSequence=60]="StatelessRuleHasAnimationSequence",e[e.LayoutContextLayoutPointsToContentProxy=61]="LayoutContextLayoutPointsToContentProxy",e[e.ModelRoot=62]="ModelRoot",e[e.ExternalData=63]="ExternalData"}(r=e.Meaning||(e.Meaning={}));var a;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Override=0]="Override",e[e.Desktop=1]="Desktop",e[e.Mobile=2]="Mobile",e[e.Tablet=3]="Tablet"}(a=e.ClientDevice||(e.ClientDevice={}));var s;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.YouTube=0]="YouTube",e[e.OneDrive=1]="OneDrive",e[e.Azure=2]="Azure"}(s=e.VideoPlayerType||(e.VideoPlayerType={}));var l;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Browser=0]="Browser",e[e.AzureCustomControls=1]="AzureCustomControls"}(l=e.AudioPlayerType||(e.AudioPlayerType={}));var u;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.PlayOnce=1]="PlayOnce",e[e.Looping=2]="Looping"}(u=e.RichImagePlayerType||(e.RichImagePlayerType={}));var d;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.GenericGroup=0]="GenericGroup",e[e.ClipPreview=1]="ClipPreview",e[e.TextBlock=2]="TextBlock",e[e.TextGroup=3]="TextGroup",e[e.TextLine=4]="TextLine",e[e.TextRun=5]="TextRun",e[e.Viewports=6]="Viewports",e[e.Map=7]="Map"}(d=e.LayoutContainerType||(e.LayoutContainerType={}));var c;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(c=e.LayoutScrollability||(e.LayoutScrollability={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Enter=0]="Enter",e[e.Exit=1]="Exit",e[e.Continuous=2]="Continuous",e[e.ViewportBound=3]="ViewportBound",e[e.EnterExit=4]="EnterExit"}(e.AnimationTrigger||(e.AnimationTrigger={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Near=0]="Near",e[e.Center=1]="Center",e[e.Far=2]="Far",e[e.Justified=3]="Justified"}(e.LayoutTextAlignment||(e.LayoutTextAlignment={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Thin=0]="Thin",e[e.ExtraThin=1]="ExtraThin",e[e.UltraThin=2]="UltraThin",e[e.ExtraLight=3]="ExtraLight",e[e.UltraLight=4]="UltraLight",e[e.Light=5]="Light",e[e.SemiLight=6]="SemiLight",e[e.Normal=7]="Normal",e[e.Regular=8]="Regular",e[e.Medium=9]="Medium",e[e.DemiBold=10]="DemiBold",e[e.SemiBold=11]="SemiBold",e[e.Bold=12]="Bold",e[e.ExtraBold=13]="ExtraBold",e[e.UltraBold=14]="UltraBold",e[e.Black=15]="Black",e[e.Heavy=16]="Heavy",e[e.ExtraBlack=17]="ExtraBlack",e[e.UltraBlack=18]="UltraBlack"}(e.FontWeight||(e.FontWeight={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Normal=0]="Normal",e[e.Oblique=1]="Oblique",e[e.Italic=2]="Italic"}(e.FontStyle||(e.FontStyle={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Undefined=0]="Undefined",e[e.UltraCondensed=1]="UltraCondensed",e[e.ExtraCompressed=2]="ExtraCompressed",e[e.UltraCompressed=3]="UltraCompressed",e[e.ExtraCondensed=4]="ExtraCondensed",e[e.Compressed=5]="Compressed",e[e.Condensed=6]="Condensed",e[e.SemiCondensed=7]="SemiCondensed",e[e.Narrow=8]="Narrow",e[e.Compact=9]="Compact",e[e.Normal=10]="Normal",e[e.Medium=11]="Medium",e[e.SemiExpanded=12]="SemiExpanded",e[e.Wide=13]="Wide",e[e.Expanded=14]="Expanded",e[e.Extended=15]="Extended",e[e.ExtraExpanded=16]="ExtraExpanded",e[e.ExtraExtended=17]="ExtraExtended",e[e.UltraExpanded=18]="UltraExpanded",e[e.UltraExtended=19]="UltraExtended"}(e.FontStretch||(e.FontStretch={}));var p;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Near=0]="Near",e[e.Center=1]="Center",e[e.Far=2]="Far"}(p=e.Alignment||(e.Alignment={}));var g;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Fit=0]="Fit",e[e.Fill=1]="Fill",e[e.Stretch=2]="Stretch",e[e.Fixed=3]="Fixed",e[e.None=4]="None"}(g=e.ContentStretch||(e.ContentStretch={}));var h;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.HorizontalFill=1]="HorizontalFill",e[e.VerticalFill=2]="VerticalFill"}(h=e.ViewportBackgroundType||(e.ViewportBackgroundType={}));var y;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.FillHorizontal=1]="FillHorizontal",e[e.FillVertical=2]="FillVertical",e[e.Fill=3]="Fill",e[e.Fit=4]="Fit",e[e.Stretch=5]="Stretch"}(y=e.ImageFillStyle||(e.ImageFillStyle={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Undefined=0]="Undefined",e[e.Level1=1]="Level1",e[e.Level2=2]="Level2",e[e.Level3=3]="Level3"}(e.RuleLevel||(e.RuleLevel={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Unacceptable=0]="Unacceptable",e[e.Undesirable=1]="Undesirable",e[e.Bad=2]="Bad",e[e.Ok=3]="Ok",e[e.Good=4]="Good",e[e.Great=5]="Great",e[e.Perfect=6]="Perfect",e[e.Skip=7]="Skip",e[e.Abort=8]="Abort"}(e.NormalizedScore||(e.NormalizedScore={}));var m;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Keypress=0]="Keypress",e[e.Swipe=1]="Swipe",e[e.Click=2]="Click",e[e.DoubleClick=3]="DoubleClick",e[e.Left=4]="Left",e[e.Right=5]="Right",e[e.Camera=6]="Camera",e[e.WheelUp=7]="WheelUp",e[e.WheelDown=8]="WheelDown",e[e.Timing=9]="Timing",e[e.Client=10]="Client"}(m=e.TriggerMethod||(e.TriggerMethod={}));var f;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.SourceKeyframe=1]="SourceKeyframe",e[e.TargetKeyframe=2]="TargetKeyframe",e[e.TriggerKeyframe=3]="TriggerKeyframe"}(f=e.TriggerTarget||(e.TriggerTarget={}));var v;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.XButton1=3]="XButton1",e[e.XButton2=4]="XButton2"}(v=e.MouseButton||(e.MouseButton={}));var S;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Click=0]="Click",e[e.DoubleClick=1]="DoubleClick"}(S=e.MouseAction||(e.MouseAction={}));var w;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.Shift=1]="Shift",e[e.Alt=2]="Alt",e[e.Control=3]="Control",e[e.Windows=4]="Windows"}(w=e.Modifier||(e.Modifier={}));var T;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.Cancel=1]="Cancel",e[e.Back=2]="Back",e[e.Tab=3]="Tab",e[e.LineFeed=4]="LineFeed",e[e.Clear=5]="Clear",e[e.Return=6]="Return",e[e.Enter=7]="Enter",e[e.Pause=8]="Pause",e[e.CapsLock=9]="CapsLock",e[e.Capital=10]="Capital",e[e.HangulMode=11]="HangulMode",e[e.KanaMode=12]="KanaMode",e[e.JunjaMode=13]="JunjaMode",e[e.FinalMode=14]="FinalMode",e[e.KanjiMode=15]="KanjiMode",e[e.HanjaMode=16]="HanjaMode",e[e.Escape=17]="Escape",e[e.ImeConvert=18]="ImeConvert",e[e.ImeNonConvert=19]="ImeNonConvert",e[e.ImeAccept=20]="ImeAccept",e[e.ImeModeChange=21]="ImeModeChange",e[e.Space=22]="Space",e[e.PageUp=23]="PageUp",e[e.Prior=24]="Prior",e[e.PageDown=25]="PageDown",e[e.Next=26]="Next",e[e.End=27]="End",e[e.Home=28]="Home",e[e.Left=29]="Left",e[e.Up=30]="Up",e[e.Right=31]="Right",e[e.Down=32]="Down",e[e.Select=33]="Select",e[e.Print=34]="Print",e[e.Execute=35]="Execute",e[e.Snapshot=36]="Snapshot",e[e.PrintScreen=37]="PrintScreen",e[e.Insert=38]="Insert",e[e.Delete=39]="Delete",e[e.Help=40]="Help",e[e.D0=41]="D0",e[e.D1=42]="D1",e[e.D2=43]="D2",e[e.D3=44]="D3",e[e.D4=45]="D4",e[e.D5=46]="D5",e[e.D6=47]="D6",e[e.D7=48]="D7",e[e.D8=49]="D8",e[e.D9=50]="D9",e[e.A=51]="A",e[e.B=52]="B",e[e.C=53]="C",e[e.D=54]="D",e[e.E=55]="E",e[e.F=56]="F",e[e.G=57]="G",e[e.H=58]="H",e[e.I=59]="I",e[e.J=60]="J",e[e.K=61]="K",e[e.L=62]="L",e[e.M=63]="M",e[e.N=64]="N",e[e.O=65]="O",e[e.P=66]="P",e[e.Q=67]="Q",e[e.R=68]="R",e[e.S=69]="S",e[e.T=70]="T",e[e.U=71]="U",e[e.V=72]="V",e[e.W=73]="W",e[e.X=74]="X",e[e.Y=75]="Y",e[e.Z=76]="Z",e[e.LWin=77]="LWin",e[e.RWin=78]="RWin",e[e.Apps=79]="Apps",e[e.Sleep=80]="Sleep",e[e.NumPad0=81]="NumPad0",e[e.NumPad1=82]="NumPad1",e[e.NumPad2=83]="NumPad2",e[e.NumPad3=84]="NumPad3",e[e.NumPad4=85]="NumPad4",e[e.NumPad5=86]="NumPad5",e[e.NumPad6=87]="NumPad6",e[e.NumPad7=88]="NumPad7",e[e.NumPad8=89]="NumPad8",e[e.NumPad9=90]="NumPad9",e[e.Multiply=91]="Multiply",e[e.Add=92]="Add",e[e.Separator=93]="Separator",e[e.Subtract=94]="Subtract",e[e.Decimal=95]="Decimal",e[e.Divide=96]="Divide",e[e.F1=97]="F1",e[e.F2=98]="F2",e[e.F3=99]="F3",e[e.F4=100]="F4",e[e.F5=101]="F5",e[e.F6=102]="F6",e[e.F7=103]="F7",e[e.F8=104]="F8",e[e.F9=105]="F9",e[e.F10=106]="F10",e[e.F11=107]="F11",e[e.F12=108]="F12",e[e.F13=109]="F13",e[e.F14=110]="F14",e[e.F15=111]="F15",e[e.F16=112]="F16",e[e.F17=113]="F17",e[e.F18=114]="F18",e[e.F19=115]="F19",e[e.F20=116]="F20",e[e.F21=117]="F21",e[e.F22=118]="F22",e[e.F23=119]="F23",e[e.F24=120]="F24",e[e.NumLock=121]="NumLock",e[e.Scroll=122]="Scroll",e[e.LeftShift=123]="LeftShift",e[e.RightShift=124]="RightShift",e[e.LeftCtrl=125]="LeftCtrl",e[e.RightCtrl=126]="RightCtrl",e[e.LeftAlt=127]="LeftAlt",e[e.RightAlt=128]="RightAlt",e[e.BrowserBack=129]="BrowserBack",e[e.BrowserForward=130]="BrowserForward",e[e.BrowserRefresh=131]="BrowserRefresh",e[e.BrowserStop=132]="BrowserStop",e[e.BrowserSearch=133]="BrowserSearch",e[e.BrowserFavorites=134]="BrowserFavorites",e[e.BrowserHome=135]="BrowserHome",e[e.VolumeMute=136]="VolumeMute",e[e.VolumeDown=137]="VolumeDown",e[e.VolumeUp=138]="VolumeUp",e[e.MediaNextTrack=139]="MediaNextTrack",e[e.MediaPreviousTrack=140]="MediaPreviousTrack",e[e.MediaStop=141]="MediaStop",e[e.MediaPlayPause=142]="MediaPlayPause",e[e.LaunchMail=143]="LaunchMail",e[e.SelectMedia=144]="SelectMedia",e[e.LaunchApplication1=145]="LaunchApplication1",e[e.LaunchApplication2=146]="LaunchApplication2",e[e.OemSemicolon=147]="OemSemicolon",e[e.Oem1=148]="Oem1",e[e.OemPlus=149]="OemPlus",e[e.OemComma=150]="OemComma",e[e.OemMinus=151]="OemMinus",e[e.OemPeriod=152]="OemPeriod",e[e.OemQuestion=153]="OemQuestion",e[e.Oem2=154]="Oem2",e[e.OemTilde=155]="OemTilde",e[e.Oem3=156]="Oem3",e[e.AbntC1=157]="AbntC1",e[e.AbntC2=158]="AbntC2",e[e.OemOpenBrackets=159]="OemOpenBrackets",e[e.Oem4=160]="Oem4",e[e.OemPipe=161]="OemPipe",e[e.Oem5=162]="Oem5",e[e.OemCloseBrackets=163]="OemCloseBrackets",e[e.Oem6=164]="Oem6",e[e.OemQuotes=165]="OemQuotes",e[e.Oem7=166]="Oem7",e[e.Oem8=167]="Oem8",e[e.OemBackslash=168]="OemBackslash",e[e.Oem102=169]="Oem102",e[e.ImeProcessed=170]="ImeProcessed",e[e.System=171]="System",e[e.OemAttn=172]="OemAttn",e[e.DbeAlphanumeric=173]="DbeAlphanumeric",e[e.OemFinish=174]="OemFinish",e[e.DbeKatakana=175]="DbeKatakana",e[e.DbeHiragana=176]="DbeHiragana",e[e.OemCopy=177]="OemCopy",e[e.DbeSbcsChar=178]="DbeSbcsChar",e[e.OemAuto=179]="OemAuto",e[e.DbeDbcsChar=180]="DbeDbcsChar",e[e.OemEnlw=181]="OemEnlw",e[e.OemBackTab=182]="OemBackTab",e[e.DbeRoman=183]="DbeRoman",e[e.DbeNoRoman=184]="DbeNoRoman",e[e.Attn=185]="Attn",e[e.CrSel=186]="CrSel",e[e.DbeEnterWordRegisterMode=187]="DbeEnterWordRegisterMode",e[e.ExSel=188]="ExSel",e[e.DbeEnterImeConfigureMode=189]="DbeEnterImeConfigureMode",e[e.EraseEof=190]="EraseEof",e[e.DbeFlushString=191]="DbeFlushString",e[e.Play=192]="Play",e[e.DbeCodeInput=193]="DbeCodeInput",e[e.DbeNoCodeInput=194]="DbeNoCodeInput",e[e.Zoom=195]="Zoom",e[e.NoName=196]="NoName",e[e.DbeDetermineString=197]="DbeDetermineString",e[e.DbeEnterDialogConversionMode=198]="DbeEnterDialogConversionMode",e[e.Pa1=199]="Pa1",e[e.OemClear=200]="OemClear",e[e.DeadCharProcessed=201]="DeadCharProcessed"}(T=e.KeyName||(e.KeyName={}));var C;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Enter=0]="Enter",e[e.Exit=1]="Exit"}(C=e.ViewAction||(e.ViewAction={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Top=2]="Top",e[e.Bottom=3]="Bottom",e[e.Front=4]="Front",e[e.Rear=5]="Rear"}(e.CameraSide||(e.CameraSide={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Object=0]="Object",e[e.Camera=1]="Camera"}(e.RelativeTo||(e.RelativeTo={}));var _;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Polygon=0]="Polygon",e[e.Ellipse=1]="Ellipse",e[e.RoundedRect=2]="RoundedRect",e[e.SvgPath=3]="SvgPath"}(_=e.PathType||(e.PathType={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.Cutout=1]="Cutout",e[e.Clip=2]="Clip"}(e.MaskNext||(e.MaskNext={}));var b;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical",e[e.Both=3]="Both"}(b=e.ImageTiling||(e.ImageTiling={}));var A;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Transform=0]="Transform",e[e.Opacity=1]="Opacity",e[e.Hidden=2]="Hidden",e[e.ZOrder=3]="ZOrder",e[e.Width=4]="Width",e[e.Height=5]="Height"}(A=e.AnimatableProperty||(e.AnimatableProperty={}));var P;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z",e[e.Value=3]="Value"}(P=e.AnimatableTransformComponent||(e.AnimatableTransformComponent={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.SnapOnStart=1]="SnapOnStart",e[e.SnapOnMiddle=2]="SnapOnMiddle",e[e.SnapOnEnd=3]="SnapOnEnd",e[e.StraightLine=4]="StraightLine",e[e.Staircase=5]="Staircase",e[e.EaseIn=6]="EaseIn",e[e.EaseInRadial=7]="EaseInRadial",e[e.EaseInOut=8]="EaseInOut",e[e.EaseOut=9]="EaseOut",e[e.EaseCenter=10]="EaseCenter",e[e.SquarePulse=11]="SquarePulse",e[e.WaveSin=12]="WaveSin",e[e.ThreeStateWaveSin=13]="ThreeStateWaveSin",e[e.Elastic=14]="Elastic",e[e.Bounce=15]="Bounce",e[e.CustomEase=16]="CustomEase"}(e.AnimationCurve||(e.AnimationCurve={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.DontCare=0]="DontCare",e[e.True=1]="True",e[e.False=2]="False"}(e.ClientStateValue||(e.ClientStateValue={}));var I;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.SetInterrogable=0]="SetInterrogable",e[e.OffSetInterrogable=1]="OffSetInterrogable",e[e.SnapInterrogable=2]="SnapInterrogable",e[e.MoveToEnd=3]="MoveToEnd",e[e.ExternalAction=4]="ExternalAction"}(I=e.DefaultTriggerAction||(e.DefaultTriggerAction={}));var E;!function(e){e[e.None=1]="None",e[e.DisabledWhenEmbedHostMode=2]="DisabledWhenEmbedHostMode",e[e.IsDefaultNavigationTriggerSet=4]="IsDefaultNavigationTriggerSet",e[e.IsRevealTriggerSet=8]="IsRevealTriggerSet"}(E=e.TriggerSetBehaviors||(e.TriggerSetBehaviors={}));var D;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.Image=1]="Image",e[e.Text=2]="Text",e[e.Video=3]="Video",e[e.Caption=4]="Caption",e[e.Embed=5]="Embed",e[e.StatusUpdate=6]="StatusUpdate",e[e.Title=7]="Title",e[e.Audio=8]="Audio",e[e.BingLocalEntity=9]="BingLocalEntity"}(D=e.ContentType||(e.ContentType={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Auto=0]="Auto",e[e.Less=1]="Less",e[e.None=2]="None",e[e.More=3]="More",e[e.Very=4]="Very"}(e.EmphasisLevel||(e.EmphasisLevel={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Auto=0]="Auto",e[e.Map=1]="Map",e[e.Stack=2]="Stack",e[e.Comparison=3]="Comparison"}(e.Visualization||(e.Visualization={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Light1=0]="Light1",e[e.Light2=1]="Light2",e[e.Dark1=2]="Dark1",e[e.Dark2=3]="Dark2",e[e.Accent1=4]="Accent1",e[e.Accent2=5]="Accent2",e[e.Accent3=6]="Accent3",e[e.Accent4=7]="Accent4",e[e.Accent5=8]="Accent5",e[e.Accent6=9]="Accent6",e[e.Hyperlink=10]="Hyperlink",e[e.FollowedHyperlink=11]="FollowedHyperlink"}(e.PaletteColor||(e.PaletteColor={}));var B;!function(e){e[e.ParallaxRoot=1]="ParallaxRoot",e[e.Parallaxed=2]="Parallaxed",e[e.Optional=4]="Optional",e[e.Cullable=8]="Cullable",e[e.HardwareAccelerate=16]="HardwareAccelerate",e[e.ForceImageAnimation=32]="ForceImageAnimation",e[e.Button=64]="Button",e[e.ScrollableX=128]="ScrollableX",e[e.ScrollableY=256]="ScrollableY",e[e.ChunkedScroller=512]="ChunkedScroller",e[e.ClickTarget=1024]="ClickTarget",e[e.ClickTargetParent=2048]="ClickTargetParent",e[e.Zoomable=4096]="Zoomable",e[e.DetailViewOverlay=8192]="DetailViewOverlay",e[e.ButtonSingleClick=16384]="ButtonSingleClick",e[e.HideOnHighContrast=32768]="HideOnHighContrast",e[e.HighContrastInvariant=65536]="HighContrastInvariant",e[e.RightJustified=131072]="RightJustified",e[e.HideInAutoplay=262144]="HideInAutoplay",e[e.DraggableEdge=524288]="DraggableEdge",e[e.DynamicallyFocusable=1048576]="DynamicallyFocusable"}(B=e.LayoutFlags||(e.LayoutFlags={}));var V;!function(e){e[e.CameraParallax=1]="CameraParallax",e[e.Parallax=2]="Parallax"}(V=e.AnimationFlags||(e.AnimationFlags={}));var M;!function(e){e[e.VisibilityDetection=1]="VisibilityDetection"}(M=e.ClientCapabilities||(e.ClientCapabilities={}));var L;!function(e){e[e.Parallax=1]="Parallax",e[e.Optional=2]="Optional"}(L=e.TransformFlags||(e.TransformFlags={}));var k;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Right=0]="Right",e[e.Left=1]="Left",e[e.Up=2]="Up",e[e.Down=3]="Down"}(k=e.Direction||(e.Direction={}));var x;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.LeftToRight=0]="LeftToRight",e[e.RightToLeft=1]="RightToLeft",e[e.None=2]="None"}(x=e.TextDirection||(e.TextDirection={}));var R;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.Flat=1]="Flat",e[e.Bulleted=2]="Bulleted",e[e.Numbered=3]="Numbered"}(R=e.ListStyle||(e.ListStyle={}));var O;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Normal=0]="Normal",e[e.ListItem=1]="ListItem"}(O=e.ParagraphStyle||(e.ParagraphStyle={}));var F;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Default=0]="Default",e[e.Pointer=1]="Pointer",e[e.Wait=2]="Wait",e[e.Progress=3]="Progress",e[e.Text=4]="Text"}(F=e.Cursor||(e.Cursor={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Content=0]="Content",e[e.Section=1]="Section"}(e.SnapPointType||(e.SnapPointType={}));var U;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.Visited=1]="Visited",e[e.Scrolled=2]="Scrolled"}(U=e.CoverageMethod||(e.CoverageMethod={}));var N;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Auto=0]="Auto",e[e.Yes=1]="Yes",e[e.No=2]="No"}(N=e.EmbedScrolling||(e.EmbedScrolling={}));var z;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.EndOfStory=1]="EndOfStory",e[e.MadeWithSway=2]="MadeWithSway",e[e.HelpUsImproveSurvey=3]="HelpUsImproveSurvey",e[e.Audio=4]="Audio"}(z=e.ClientRecipe||(e.ClientRecipe={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Translation=0]="Translation",e[e.Rotation=1]="Rotation",e[e.Scale=2]="Scale"}(e.TransformType||(e.TransformType={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Width=0]="Width",e[e.Height=1]="Height"}(e.AnimatableDimension||(e.AnimatableDimension={}));var H;!function(e){e[e.ZeroDurationInEditMode=1]="ZeroDurationInEditMode",e[e.ExternalAction=2]="ExternalAction",e[e.SuppressWhenDirty=4]="SuppressWhenDirty"}(H=e.AnimationBehaviors||(e.AnimationBehaviors={}));var W;!function(e){e[e.AutoFollowInEditMode=1]="AutoFollowInEditMode",e[e.ResetDescendants=2]="ResetDescendants",e[e.AllowBubbling=4]="AllowBubbling",e[e.PreFetchAnimations=8]="PreFetchAnimations",e[e.HistoricallyRelevant=16]="HistoricallyRelevant",e[e.IsTweeningEdge=32]="IsTweeningEdge",e[e.FinalTweeningEdge=64]="FinalTweeningEdge",e[e.UpdateVisibility=128]="UpdateVisibility",e[e.ShowAppBar=256]="ShowAppBar",e[e.HideAppBar=512]="HideAppBar",e[e.ShowMadeWithSway=1024]="ShowMadeWithSway",e[e.HideMadeWithSway=2048]="HideMadeWithSway",e[e.NoFocusOnTransition=4096]="NoFocusOnTransition",e[e.NoFocusChangeOnTransitionIfFocusDefined=8192]="NoFocusChangeOnTransitionIfFocusDefined",e[e.PrimaryNavigationNext=16384]="PrimaryNavigationNext",e[e.PrimaryNavigationPrevious=32768]="PrimaryNavigationPrevious"}(W=e.EdgeBehaviors||(e.EdgeBehaviors={}));var K;!function(e){e[e.CanNavigateTo=1]="CanNavigateTo",e[e.AllowDeferredExit=2]="AllowDeferredExit",e[e.IsModal=4]="IsModal",e[e.AutoResetFsmWhenEntered=8]="AutoResetFsmWhenEntered",e[e.WorldEntryState=16]="WorldEntryState",e[e.IsFinalNavigationState=32]="IsFinalNavigationState",e[e.CanBeDirtied=64]="CanBeDirtied",e[e.YieldFocusControl=128]="YieldFocusControl"}(K=e.StateBehaviors||(e.StateBehaviors={}));var j;!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.FRE_PhotoStackSeen=1]="FRE_PhotoStackSeen",e[e.FRE_ExpoNavigated=2]="FRE_ExpoNavigated",e[e.LivingImage_Seen=3]="LivingImage_Seen",e[e.DetailView_Enter=4]="DetailView_Enter",e[e.DetailView_Exit=5]="DetailView_Exit",e[e.DetailView_Next=6]="DetailView_Next",e[e.DetailView_Previous=7]="DetailView_Previous",e[e.ModalDialog_Enter=8]="ModalDialog_Enter",e[e.ModalDialog_Exit=9]="ModalDialog_Exit",e[e.ToCView_ButtonPressed=10]="ToCView_ButtonPressed",e[e.NavigateToContent=11]="NavigateToContent"}(j=e.ExternalAction||(e.ExternalAction={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Boolean=0]="Boolean",e[e.Integer=1]="Integer",e[e.FloatingPoint=2]="FloatingPoint",e[e.String=3]="String"}(e.ComputedValueType||(e.ComputedValueType={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Unsupported=0]="Unsupported",e[e.Identifier=1]="Identifier",e[e.String=2]="String",e[e.Literal=3]="Literal",e[e.Ternary=4]="Ternary",e[e.Add=5]="Add",e[e.Subtract=6]="Subtract",e[e.Mutiply=7]="Mutiply",e[e.Divide=8]="Divide",e[e.Mod=9]="Mod",e[e.Equal=10]="Equal",e[e.NotEqual=11]="NotEqual",e[e.Greater=12]="Greater",e[e.GreaterOrEqual=13]="GreaterOrEqual",e[e.Less=14]="Less",e[e.LessOrEqual=15]="LessOrEqual",e[e.And=16]="And",e[e.Or=17]="Or"}(e.RpnTokenType||(e.RpnTokenType={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.NotSpecified=0]="NotSpecified",e[e.TransitionSource=1]="TransitionSource",e[e.TransitionTarget=2]="TransitionTarget",e[e.Select=3]="Select",e[e.Inherit=4]="Inherit"}(e.KeyframeTarget||(e.KeyframeTarget={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Undefined=0]="Undefined",e[e.Reveal=1]="Reveal",e[e.Appear=2]="Appear",e[e.Hide=3]="Hide",e[e.Disappear=4]="Disappear"}(e.AnimationAction||(e.AnimationAction={}));!function(e){e[e._GridRow=1]="_GridRow",e[e._GridRowCount=2]="_GridRowCount",e[e._BorderWidth=4]="_BorderWidth",e[e._RowIndex=8]="_RowIndex"}(e.BuiltInSymbols||(e.BuiltInSymbols={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.ByContentId=1]="ByContentId",e[e.ByLod=2]="ByLod"}(e.MatchMethod||(e.MatchMethod={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Equality=0]="Equality",e[e.InEquality=1]="InEquality"}(e.MatchOperation||(e.MatchOperation={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.Current=0]="Current",e[e.Children=1]="Children",e[e.Parent=2]="Parent",e[e.Siblings=3]="Siblings",e[e.Ancestors=4]="Ancestors",e[e.Descendants=5]="Descendants"}(e.AppliesTo||(e.AppliesTo={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.CropAnimator=0]="CropAnimator"}(e.AnimatorNames||(e.AnimatorNames={}));!function(e){e[e.UnknownValue=-1]="UnknownValue",e[e.None=0]="None",e[e.Negate=1]="Negate",e[e.RightJustifyImageViewport=2]="RightJustifyImageViewport"}(e.RtlAdjustment||(e.RtlAdjustment={}));!function(e){e[e.IsStandAloneClip=1]="IsStandAloneClip",e[e.IsImageKeyframe=2]="IsImageKeyframe"}(e.KeyframeFlags||(e.KeyframeFlags={}));var q=function(){function e(){}return e.prototype.serializeProperties=function(e,t){return G.SerializeProperties(e,t)},e.prototype.deserializeProperties=function(e,t){return G.DeserializeProperties(e,t)},e}(),G=function(){function G(e){this._model=new i(e,G.DefaultProps,G.PropNotifierMappings),this._model.isEmpty()&&(this.createObject(t.Root,"ModelRoot"),this.createObject(t.RenderModelRoot,"RenderRoot"),this.addRelationship("ModelRoot","RenderRoot",r.ModelRoot))}return G.prototype.createObject=function(e,i){return this._model.createObject(t[e],i)},G.prototype.containsObject=function(e){return this._model.containsObject(e)},G.prototype.getObjectType=function(e){return t[this._model.getObjectType(e)]},G.prototype.getProperty=function(e,t,i){return this._model.getProperty(e,o[t],i)},G.prototype.setProperty=function(e,t,i,n){void 0===n&&(n=!0),this._model.setProperty(e,o[t],i,n)},G.prototype.updateProperty=function(e,t){this._model.updateProperty(e,o[t])},G.prototype.resetProperty=function(e,t){this._model.resetProperty(e,o[t])},G.prototype.addRelationship=function(e,t,i,n){this._model.addRelationship(e,t,G.HashedMeanings[i],n)},G.prototype.removeRelationship=function(e,t,i){this._model.removeRelationship(e,t,G.HashedMeanings[i])},G.prototype.setRelationships=function(e,t,i){this._model.setRelationships(e,t,G.HashedMeanings[i])},G.prototype.getObjectsRelatedFrom=function(e,t,i){return this._model.getObjectsRelatedFrom(e,G.HashedMeanings[t],i)},G.prototype.getObjectsRelatedTo=function(e,t,i){return this._model.getObjectsRelatedTo(e,G.HashedMeanings[t],i)},G.prototype.isExternalObject=function(e){return this._model.isExternalObject(e)},G.prototype.getExternalDataId=function(e){return this._model.getExternalDataId(e)},G.prototype.registerObjectDisposalCallback=function(e){this._model.registerObjectDisposalCallback(e)},G.SerializeProperties=function(e,t){var n=i.GetObjectTypeFromPropBagType(e);if(n){var o={},r=0;for(var a in t)if(t.hasOwnProperty(a)){var s=G.EnumValues[n][a],l=G.StructValues[n][a],u=G.StructCollectionValues[n][a],d=G.PropertyCollectionValues[n][a],c=G.EnumCollectionValues[n][a];s?s.flags?o[a]=Flags.serialize(s,t[a]):-1===t[a].IntValue?o[a]=t[a].StringValue:o[a]=s.type[t[a].IntValue]:o[a]=l?t[a].serialize():u?t[a].serialize():d?t[a].serialize():c?t[a].serialize(function(e){return G.EnumCollectionValueTypes[n][a].type[e]}):t[a],r++}return r>0?o:void 0}},G.DeserializeProperties=function(t,o){var r=i.GetObjectTypeFromPropBagType(t);if(r){var a=G.DefaultProps[r];if(a){var s=Object.create(a);for(var l in o){var u=G.EnumValues[r][l],d=G.StructValues[r][l],c=G.StructCollectionValues[r][l],p=G.PropertyCollectionValues[r][l],g=G.EnumCollectionValues[r][l];if(u)if(u.flags)s[l]=Flags.deserialize(u.type,o[l]);else{var h=o[l];s[l]=new n(u.type[h]||h)}else if(d)s[l]=d.Deserialize(o[l]);else if(c)s[l]=new e.StructCollection,s[l].deserializeStructCollection(o[l],c.Deserialize);else if(p)s[l]=new e.PropertyCollection,s[l].deserializePropertyCollection(o[l]);else if(g){var y=G.EnumCollectionValueTypes[r][l].type;s[l]=new e.EnumCollection,s[l].deserializeEnumCollection(o[l],y)}else s[l]=o[l]}return s}}},G.getHashedMeanings=function(){var e={};return e[r.RenderModelRootHasAnimationSequence]="AlRUTI",e[r.RenderModelRootHasLayoutTree]="RUetQy",e[r.RenderModelRootHasToCElement]="SYGeF8",e[r.ToCElementhasToCBackgroundElement]="K0I7cb",e[r.ToCElementHasToCElement]="GErEnV",e[r.LayoutTreeHasContainerLayoutElement]="Ov99Ai",e[r.LayoutTreeHasInteractionModel]="CUAYmB",e[r.LayoutNodeHasTransform]="3GzvKJ",e[r.LayoutNodeLayoutContextPointsToLayoutContext]="6WgBOz",e[r.LayoutElementBackgroundPointsToStaticImage]="87gsGH",e[r.LayoutElementBackgroundPathPointsToPath]="hvDC0w",e[r.LayoutElementBackgroundFilterPointsToPath]="UF8l1l",e[r.ContainerLayoutElementHasLayoutElement]="3Lvhsc",e[r.ContainerLayoutElementHasLayoutDebugInfo]="A92Ktc",e[r.TextBlockLayoutElementHasTextList]="7d0Hrv",e[r.TextParagraphHasTextLayoutElement]="JNTYvB",e[r.TextParagraphHasTextRunElement]="6mjsNi",e[r.TextParagraphLayoutContextPointsToLayoutContext]="79FtFs",e[r.TextListHasTextSection]="CXueRx",e[r.ImageLayoutElementPathPointsToPath]="OnpQ5k",e[r.ImageLayoutElementFilterPathPointsToPath]="SSi6Tf",e[r.ProjectionLayoutElementHasSceneGraphElement]="FEJawz",e[r.ViewportLayoutElementHasLayoutElement]="FQEZST",e[r.ContainerSceneGraphElementHasSceneGraphElement]="Nwp6tR",e[r.TextureSceneGraphElementHasLayoutElement]="Du4EGy",e[r.AnimationSequenceHasAnimation]="A2M9Ji",e[r.AnimationHasAnimationParameter]="1ULJsD",e[r.AnimationHasAnimationFunction]="DsoHu8",e[r.AnimationHasAnimationTransition]="7EH7bw",e[r.AnimationFunctionHasAnimationTarget]="B5oxiW",e[r.AnimationTransitionHasTransitionContainer]="PNlDMp",e[r.TransitionContainerHasTransitionEffect]="6ttih1",e[r.LayoutDebugInfoHasRuleResult]="SjJwdJ",e[r.InteractionModelHasKeyFrame]="Exr3FQ",e[r.InteractionModelHasTriggerSet]="Iif34w",e[r.InteractionModelHasFsmNode]="Da5GO9",e[r.InteractionModelStartFsmNode]="6DyJeV",e[r.FsmNodePointsToFsmNode]="Ip5aAY",e[r.FsmNodeHasFsmNode]="RC1cmv",e[r.FsmNodeHasFsmEdge]="Oz1PIq",e[r.FsmNodeHasKeyFrame]="Ay0hSo",e[r.FsmNodeAmbientPointsToAnimationSequence]="GghDgN",e[r.FsmNodeExitPointsToAnimationSequence]="OHU6RM",e[r.FsmEdgePointsToFsmNode]="MC5W3Y",e[r.FsmEdgePointsToTriggerSet]="HeIKjp",e[r.FsmEdgeHasTriggerSet]="5pYVdm",e[r.FsmEdgeOutPointsToAnimationSequence]="PeEYxs",e[r.FsmEdgeInPointsToAnimationSequence]="1Dt15n",e[r.FsmEdgeHasKeyFrame]="Tk1mfT",e[r.KeyFramePointsToLayoutNode]="Cya7gg",e[r.KeyFrameHasKeyFrame]="U6DYsN",e[r.TriggerSetHasTrigger]="QxaZwi",e[r.TriggerHasSelectMethod]="ON43vi",e[r.TriggerHasDefaultAction]="AAm4Cx",e[r.DefaultActionHasAnimationParameter]="QXLWeR",e[r.SelectMethodHasCameraSelect]="Irz8PI",e[r.SelectMethodHasTimingSelect]="B0f8NI",e[r.ClientSelectMethodHasClientSignal]="S3MshQ",e[r.KeyboardSelectMethodHasKeyClick]="BHOdqD",e[r.StatelessRuleHasTriggerSet]="BNzLsq",e[r.StatelessRuleHasAnimationSequence]="1sDXiR",e[r.LayoutContextLayoutPointsToContentProxy]="PK5lSk",e[r.ModelRoot]="2SLmQk",e[r.ExternalData]="9w0IDE",e},G.getDefaultProps=function(){return{RenderModelRoot:{LayoutStyleId:"",StyleVersion:"",WorldVersion:"",EditVersion:0,RemoteDesignObjects:!1,Title:"",Culture:"",PaletteColors:null,DefaultViewOptions:null,CurrentViewOptions:null,Storyboards:null,RTL:!1,ForceNativeScrolling:!1,AutoPlaySettings:null},ToCElement:{NavigationTargetId:"",Title:"",SubTitle:""},ToCBackgroundElement:{ImageId:"",ImageUrl:"",ImageOriginalWidth:0,ImageOriginalHeight:0,ImageCropLeft:0,ImageCropTop:0,ImageCropWidth:0,ImageCropHeight:0,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},LayoutTree:{Device:new n(a.Override),ViewportHeight:720,ViewportWidth:1280,LayoutFailed:!1,ErrorMessage:"",TextStyles:null},ContainerLayoutElement:{Type:"",ContainerType:new n(d.GenericGroup),Scrollability:new n(c.None),Overflow:!1,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},PanelLayoutElement:{Type:"",ContainerType:new n(d.GenericGroup),Scrollability:new n(c.None),Overflow:!1,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},RegionLayoutElement:{Type:"",ContainerType:new n(d.GenericGroup),Scrollability:new n(c.None),Overflow:!1,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},MediaViewportLayoutElement:{Type:"",ContainerType:new n(d.GenericGroup),Scrollability:new n(c.None),Overflow:!1,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},TextRunElement:{Text:"",FontKey:"",TextColorName:"",TextOpacityOverride:0,TextColorOverride:"",TextShadowXOff:0,TextShadowYOff:0,TextShadowBlur:0,TextShadowColor:"",HyperlinkUri:""},TextBlockLayoutElement:{TextStyleId:"",TextColorId:"",LineHeight:0,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},TextSection:{},TextParagraph:{SpacingAfter:0,ParagraphStyle:new n(O.Normal),Direction:new n(x.LeftToRight),IsPullQuote:!1},TextList:{Style:new n(R.None),StartNum:1,Direction:new n(x.LeftToRight)},DecorationLayoutElement:{PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},ImageLayoutElement:{FilterColorName:"",LivingImageMediaElements:null,RichImagePlayerType:new n(u.None),FilterEffects:"",ImageId:"",ImageUrl:"",ImageOriginalWidth:0,ImageOriginalHeight:0,ImageCropLeft:0,ImageCropTop:0,ImageCropWidth:0,ImageCropHeight:0,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},VideoLayoutElement:{VideoPlayerDescriptor:"",VideoPlayerType:new n(s.YouTube),ClosedCaptionDescriptors:null,ImageId:"",ImageUrl:"",ImageOriginalWidth:0,ImageOriginalHeight:0,ImageCropLeft:0,ImageCropTop:0,ImageCropWidth:0,ImageCropHeight:0,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},MapLayoutElement:{Pins:null,Type:"",ContainerType:new n(d.GenericGroup),Scrollability:new n(c.None),Overflow:!1,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},ProjectionLayoutElement:{PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},ViewportLayoutElement:{HorizontalAlignment:new n(p.Near),VerticalAlignment:new n(p.Near),ContentStretch:new n(g.Fit),BackgroundType:new n(h.None),PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},EmbedLayoutElement:{EmbedSourceUrl:"",Height:"",Width:"",AllowFullScreen:!1,Scrolling:new n(N.Auto),ShouldScale:!1,Sandboxed:!1,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},ClientLayoutElement:{ClientRecipe:new n(z.None),PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},AgaveLayoutElement:{AgaveId:"",Manifest:"",AgaveData:"",AgaveSettings:"",PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},StatusUpdateLayoutElement:{SourceId:"",PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},ContainerSceneGraphElement:{UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},TextureSceneGraphElement:{UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},AnimationSequence:{Name:"",AnimationsCompleteFunction:"",ClientRequirements:0},Animation:{AnimationName:"",StoryboardExecutionContexts:null,TransitionIds:null,ClientState:null,Behaviors:0},AnimationExternalAction:{ActionType:new n(j.None),ActionTargetId:"",AnimationName:"",StoryboardExecutionContexts:null,TransitionIds:null,ClientState:null,Behaviors:0},AnimationTarget:{ElementId:"",AnimatablePropertyName:new n(A.Transform),TransformIndex:0,TransformComponent:new n(P.X)},AnimationFunction:{Name:"",FunctionId:"",Expression:"",MaintainStateOnStart:!1,Flags:0},AnimationParameter:{ParameterName:"",ParameterValue:""},StaticImage:{Name:"",Filename:"",FillStyle:new n(y.None),HorizontalAlignment:new n(p.Near),VerticalAlignment:new n(p.Near),Tiling:new n(b.None)},Path:{Name:"",StrokeWidth:0,PathType:new n(_.Polygon),Values:""},InteractionModel:{RequiresParallax:!0,Transitions:null,AnimationContainers:null,AnimationEffects:null,ContentNavigationMarkerCollections:null},FsmNode:{Name:"",CanNavigateTo:!0,AllowDeferredExit:!1,IsModal:!1,Behaviors:0},FsmEdge:{Name:"",ResetDescendants:!1,AllowBubbling:!1,PreFetchAnimations:!1,HistoricallyRelevant:!1,Behaviors:0},KeyFrame:{Type:"",MetaData:null,ScrollWidth:0,ScrollHeight:0,Scrollability:new n(c.None),CoverageMethod:new n(U.None),SnapPointsHorizontal:null,SnapPointsVertical:null,IsDefaultNavigation:!1},TriggerSet:{Name:"",AlwaysTryDefaultAction:!1,ClientState:null,Behaviors:0},Trigger:{},DefaultAction:{Action:new n(I.SetInterrogable)},SelectMethod:{Method:new n(m.Keypress),Target:new n(f.None),KeyNames:"",TargetId:""},SwipeSelectMethod:{Direction:new n(k.Right),Method:new n(m.Keypress),Target:new n(f.None),KeyNames:"",TargetId:""},ClientSelectMethod:{Method:new n(m.Keypress),Target:new n(f.None),KeyNames:"",TargetId:""},EditModeClientSignal:{},AutoAdvanceClientSignal:{IsReset:!1},KeyboardSelectMethod:{TriggerTarget:new n(f.None),TriggerTargetId:"",Method:new n(m.Keypress),Target:new n(f.None),KeyNames:"",TargetId:""},KeyClick:{Key:new n(T.None),Modifier:new n(w.None),KeyDown:!1},MouseSelectMethod:{Action:new n(S.Click),Button:new n(v.Left),MouseWheelReactionDistance:0,TriggerTarget:new n(f.None),TriggerTargetId:"",Method:new n(m.Keypress),Target:new n(f.None),KeyNames:"",TargetId:""},CameraSelect:{Action:new n(C.Enter),VisibilityRatio:0,ViewportScaleX:0,ViewportScaleY:0,ViewportOffsetRatioX:0,ViewportOffsetRatioY:0,CheckOnEntry:!1},CameraSelectMethod:{Action:new n(C.Enter),VisibilityRatio:0,ViewportScaleX:0,ViewportScaleY:0,ViewportOffsetRatioX:0,ViewportOffsetRatioY:0,CheckOnEntry:!1,TriggerTarget:new n(f.None),TriggerTargetId:"",Method:new n(m.Keypress),Target:new n(f.None),KeyNames:"",TargetId:""},TimingSelect:{Time:"",Variance:0,FireOnStart:!1},TimingSelectMethod:{Time:"",Variance:0,FireOnStart:!1,Method:new n(m.Keypress),Target:new n(f.None),KeyNames:"",TargetId:""},StatelessRule:{},RotationTransform2D:{Value:0,Flags:0},TranslateTransform2D:{TranslateX:0,TranslateY:0,Flags:0},ScaleTransform2D:{ScaleX:0,ScaleY:0,Flags:0},RotationTransform3D:{Value:0,ProjectX:0,ProjectY:0,ProjectZ:0,Flags:0},TranslateTransform3D:{TranslateX:0,TranslateY:0,TranslateZ:0,Flags:0},ScaleTransform3D:{ScaleX:0,ScaleY:0,ScaleZ:0,Flags:0},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{AudioPlayerDescriptor:"",AudioPlayerType:new n(l.Browser),ClosedCaptionDescriptors:null,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},CodeBlockLayoutElement:{Content:"",Language:"",PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:new n(D.None),Flags:0,Cursor:new n(F.Default),TransformOrigin:null,AccessibilityInfo:null},Root:{SchemaVersion:0}}},G.getPropNotifierMappings=function(){return{RenderModelRoot:{LayoutStyleId:"Main",StyleVersion:"Main",WorldVersion:"Main",EditVersion:"Main",RemoteDesignObjects:"RemoteDesignObjectsChanged",Title:"Main",Culture:"Main",PaletteColors:"ColorsChanged",DefaultViewOptions:"Main",CurrentViewOptions:"Main",Storyboards:"Main",RTL:"Main",ForceNativeScrolling:"Main",AutoPlaySettings:"Main"},ToCElement:{NavigationTargetId:"Main",Title:"Main",SubTitle:"Main"},ToCBackgroundElement:{ImageId:"Main",ImageUrl:"Main",ImageOriginalWidth:"Main",ImageOriginalHeight:"Main",ImageCropLeft:"Main",ImageCropTop:"Main",ImageCropWidth:"Main",ImageCropHeight:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},LayoutTree:{Device:"Main",ViewportHeight:"Main",ViewportWidth:"Main",LayoutFailed:"Main",ErrorMessage:"Main",TextStyles:"Main"},ContainerLayoutElement:{Type:"Main",ContainerType:"Main",Scrollability:"ScrollabilityNotifier",Overflow:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},PanelLayoutElement:{Type:"Main",ContainerType:"Main",Scrollability:"ScrollabilityNotifier",Overflow:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},RegionLayoutElement:{Type:"Main",ContainerType:"Main",Scrollability:"ScrollabilityNotifier",Overflow:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},MediaViewportLayoutElement:{Type:"Main",ContainerType:"Main",Scrollability:"ScrollabilityNotifier",Overflow:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},TextRunElement:{Text:"Main",FontKey:"Main",TextColorName:"Main",TextOpacityOverride:"Main",TextColorOverride:"Main",TextShadowXOff:"Main",TextShadowYOff:"Main",TextShadowBlur:"Main",TextShadowColor:"Main",HyperlinkUri:"Main"},TextBlockLayoutElement:{TextStyleId:"Main",TextColorId:"Main",LineHeight:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},TextSection:{},TextParagraph:{SpacingAfter:"Main",ParagraphStyle:"Main",Direction:"Main",IsPullQuote:"Main"},TextList:{Style:"Main",StartNum:"Main",Direction:"Main"},DecorationLayoutElement:{PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},ImageLayoutElement:{FilterColorName:"complex",LivingImageMediaElements:"Main",RichImagePlayerType:"Main",FilterEffects:"Main",ImageId:"Main",ImageUrl:"Main",ImageOriginalWidth:"Main",ImageOriginalHeight:"Main",ImageCropLeft:"Main",ImageCropTop:"Main",ImageCropWidth:"Main",ImageCropHeight:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},VideoLayoutElement:{VideoPlayerDescriptor:"createPlayer",VideoPlayerType:"Main",ClosedCaptionDescriptors:"Main",ImageId:"Main",ImageUrl:"Main",ImageOriginalWidth:"Main",ImageOriginalHeight:"Main",ImageCropLeft:"Main",ImageCropTop:"Main",ImageCropWidth:"Main",ImageCropHeight:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},MapLayoutElement:{Pins:"Main",Type:"Main",ContainerType:"Main",Scrollability:"ScrollabilityNotifier",Overflow:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},ProjectionLayoutElement:{PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},ViewportLayoutElement:{HorizontalAlignment:"Main",VerticalAlignment:"Main",ContentStretch:"Main",BackgroundType:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},EmbedLayoutElement:{EmbedSourceUrl:"Main",Height:"Main",Width:"Main",AllowFullScreen:"Main",Scrolling:"Main",ShouldScale:"Main",Sandboxed:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},ClientLayoutElement:{ClientRecipe:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},AgaveLayoutElement:{AgaveId:"Main",Manifest:"Main",AgaveData:"Main",AgaveSettings:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},StatusUpdateLayoutElement:{SourceId:"sourceId",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},ContainerSceneGraphElement:{UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},TextureSceneGraphElement:{UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},AnimationSequence:{Name:"Main",AnimationsCompleteFunction:"Main",ClientRequirements:"Main"},Animation:{AnimationName:"Main",StoryboardExecutionContexts:"Main",TransitionIds:"Main",ClientState:"Main",Behaviors:"Main"},AnimationExternalAction:{ActionType:"Main",ActionTargetId:"Main",AnimationName:"Main",StoryboardExecutionContexts:"Main",TransitionIds:"Main",ClientState:"Main",Behaviors:"Main"},AnimationTarget:{ElementId:"Main",AnimatablePropertyName:"Main",TransformIndex:"Main",TransformComponent:"Main"},AnimationFunction:{Name:"Main",FunctionId:"Main",Expression:"Main",MaintainStateOnStart:"Main",Flags:"Main"},AnimationParameter:{ParameterName:"Main",ParameterValue:"Main"},StaticImage:{Name:"Main",Filename:"Main",FillStyle:"Main",HorizontalAlignment:"Main",VerticalAlignment:"Main",Tiling:"Main"},Path:{Name:"Main",StrokeWidth:"Main",PathType:"Main",Values:"Main"},InteractionModel:{RequiresParallax:"Main",Transitions:"Main",AnimationContainers:"Main",AnimationEffects:"Main",ContentNavigationMarkerCollections:"Main"},FsmNode:{Name:"Main",CanNavigateTo:"Main",AllowDeferredExit:"Main",IsModal:"Main",Behaviors:"Main"},FsmEdge:{Name:"Main",ResetDescendants:"Main",AllowBubbling:"Main",PreFetchAnimations:"Main",HistoricallyRelevant:"Main",Behaviors:"Main"},KeyFrame:{Type:"Main",MetaData:"Main",ScrollWidth:"Main",ScrollHeight:"Main",Scrollability:"Main",CoverageMethod:"Main",SnapPointsHorizontal:"Main",SnapPointsVertical:"Main",IsDefaultNavigation:"Main"},TriggerSet:{Name:"Main",AlwaysTryDefaultAction:"Main",ClientState:"Main",Behaviors:"Main"},Trigger:{},DefaultAction:{Action:"Main"},SelectMethod:{Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},SwipeSelectMethod:{Direction:"Main",Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},ClientSelectMethod:{Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},EditModeClientSignal:{},AutoAdvanceClientSignal:{IsReset:"Main"},KeyboardSelectMethod:{TriggerTarget:"Main",TriggerTargetId:"Main",Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},KeyClick:{Key:"Main",Modifier:"Main",KeyDown:"Main"},MouseSelectMethod:{Action:"Main",Button:"Main",MouseWheelReactionDistance:"Main",TriggerTarget:"Main",TriggerTargetId:"Main",Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},CameraSelect:{Action:"Main",VisibilityRatio:"Main",ViewportScaleX:"Main",ViewportScaleY:"Main",ViewportOffsetRatioX:"Main",ViewportOffsetRatioY:"Main",CheckOnEntry:"Main"},CameraSelectMethod:{Action:"Main",VisibilityRatio:"Main",ViewportScaleX:"Main",ViewportScaleY:"Main",ViewportOffsetRatioX:"Main",ViewportOffsetRatioY:"Main",CheckOnEntry:"Main",TriggerTarget:"Main",TriggerTargetId:"Main",Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},TimingSelect:{Time:"Main",Variance:"Main",FireOnStart:"Main"},TimingSelectMethod:{Time:"Main",Variance:"Main",FireOnStart:"Main",Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},StatelessRule:{},RotationTransform2D:{Value:"Main",Flags:"Main"},TranslateTransform2D:{TranslateX:"Main",TranslateY:"Main",Flags:"Main"},ScaleTransform2D:{ScaleX:"Main",ScaleY:"Main",Flags:"Main"},RotationTransform3D:{Value:"Main",ProjectX:"Main",ProjectY:"Main",ProjectZ:"Main",Flags:"Main"},TranslateTransform3D:{TranslateX:"Main",TranslateY:"Main",TranslateZ:"Main",Flags:"Main"},ScaleTransform3D:{ScaleX:"Main",ScaleY:"Main",ScaleZ:"Main",Flags:"Main"},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{AudioPlayerDescriptor:"Main",AudioPlayerType:"Main",ClosedCaptionDescriptors:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},CodeBlockLayoutElement:{Content:"Main",Language:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},Root:{SchemaVersion:"Main"}}},G.getEnumValues=function(){return{RenderModelRoot:{},ToCElement:{},ToCBackgroundElement:{ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},LayoutTree:{Device:{flags:!1,type:a}},ContainerLayoutElement:{ContainerType:{flags:!1,type:d},Scrollability:{flags:!1,type:c},ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},PanelLayoutElement:{ContainerType:{flags:!1,type:d},Scrollability:{flags:!1,type:c},ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},RegionLayoutElement:{ContainerType:{flags:!1,type:d},Scrollability:{flags:!1,type:c},ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},MediaViewportLayoutElement:{ContainerType:{flags:!1,type:d},Scrollability:{flags:!1,type:c},ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},TextRunElement:{},TextBlockLayoutElement:{ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},TextSection:{},TextParagraph:{ParagraphStyle:{flags:!1,type:O},Direction:{flags:!1,type:x}},TextList:{Style:{flags:!1,type:R},Direction:{flags:!1,type:x}},DecorationLayoutElement:{ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},ImageLayoutElement:{RichImagePlayerType:{flags:!1,type:u},ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},VideoLayoutElement:{VideoPlayerType:{flags:!1,type:s},ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},MapLayoutElement:{ContainerType:{flags:!1,type:d},Scrollability:{flags:!1,type:c},ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},ProjectionLayoutElement:{ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},ViewportLayoutElement:{HorizontalAlignment:{flags:!1,type:p},VerticalAlignment:{flags:!1,type:p},ContentStretch:{flags:!1,type:g},BackgroundType:{flags:!1,type:h},ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},EmbedLayoutElement:{Scrolling:{flags:!1,type:N},ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},ClientLayoutElement:{ClientRecipe:{flags:!1,type:z},ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},AgaveLayoutElement:{ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},StatusUpdateLayoutElement:{ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},ContainerSceneGraphElement:{ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},TextureSceneGraphElement:{ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},AnimationSequence:{ClientRequirements:{flags:!0,type:M}},Animation:{Behaviors:{flags:!0,type:H}},AnimationExternalAction:{ActionType:{flags:!1,type:j},Behaviors:{flags:!0,type:H}},AnimationTarget:{AnimatablePropertyName:{flags:!1,type:A},TransformComponent:{flags:!1,type:P}},AnimationFunction:{Flags:{flags:!0,type:V}},AnimationParameter:{},StaticImage:{FillStyle:{flags:!1,type:y},HorizontalAlignment:{flags:!1,type:p},VerticalAlignment:{flags:!1,type:p},Tiling:{flags:!1,type:b}},Path:{PathType:{flags:!1,type:_}},InteractionModel:{},FsmNode:{Behaviors:{flags:!0,type:K}},FsmEdge:{Behaviors:{flags:!0,type:W}},KeyFrame:{Scrollability:{flags:!1,type:c},CoverageMethod:{flags:!1,type:U}},TriggerSet:{Behaviors:{flags:!0,type:E}},Trigger:{},DefaultAction:{Action:{flags:!1,type:I}},SelectMethod:{Method:{flags:!1,type:m},Target:{flags:!1,type:f}},SwipeSelectMethod:{Direction:{flags:!1,type:k},Method:{flags:!1,type:m},Target:{flags:!1,type:f}},ClientSelectMethod:{Method:{flags:!1,type:m},Target:{flags:!1,type:f}},EditModeClientSignal:{},AutoAdvanceClientSignal:{},KeyboardSelectMethod:{TriggerTarget:{flags:!1,type:f},Method:{flags:!1,type:m},Target:{flags:!1,type:f}},KeyClick:{Key:{flags:!1,type:T},Modifier:{flags:!1,type:w}},MouseSelectMethod:{Action:{flags:!1,type:S},Button:{flags:!1,type:v},TriggerTarget:{flags:!1,type:f},Method:{flags:!1,type:m},Target:{flags:!1,type:f}},CameraSelect:{Action:{flags:!1,type:C}},CameraSelectMethod:{Action:{flags:!1,type:C},TriggerTarget:{flags:!1,type:f},Method:{flags:!1,type:m},Target:{flags:!1,type:f}},TimingSelect:{},TimingSelectMethod:{Method:{flags:!1,type:m},Target:{flags:!1,type:f}},StatelessRule:{},RotationTransform2D:{Flags:{flags:!0,type:L}},TranslateTransform2D:{Flags:{flags:!0,type:L}},ScaleTransform2D:{Flags:{flags:!0,type:L}},RotationTransform3D:{Flags:{flags:!0,type:L}},TranslateTransform3D:{Flags:{flags:!0,type:L}},ScaleTransform3D:{Flags:{flags:!0,type:L}},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{AudioPlayerType:{flags:!1,type:l},ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},CodeBlockLayoutElement:{ContentType:{flags:!1,type:D},Flags:{flags:!0,type:B},Cursor:{flags:!1,type:F}},Root:{}}},G.getEnumCollectionValues=function(){return{RenderModelRoot:{},ToCElement:{},ToCBackgroundElement:{},LayoutTree:{},ContainerLayoutElement:{},PanelLayoutElement:{},RegionLayoutElement:{},MediaViewportLayoutElement:{},TextRunElement:{},TextBlockLayoutElement:{},TextSection:{},TextParagraph:{},TextList:{},DecorationLayoutElement:{},ImageLayoutElement:{},VideoLayoutElement:{},MapLayoutElement:{},ProjectionLayoutElement:{},ViewportLayoutElement:{},EmbedLayoutElement:{},ClientLayoutElement:{},AgaveLayoutElement:{},StatusUpdateLayoutElement:{},ContainerSceneGraphElement:{},TextureSceneGraphElement:{},AnimationSequence:{},Animation:{},AnimationExternalAction:{},AnimationTarget:{},AnimationFunction:{},AnimationParameter:{},StaticImage:{},Path:{},InteractionModel:{},FsmNode:{},FsmEdge:{},KeyFrame:{},TriggerSet:{},Trigger:{},DefaultAction:{},SelectMethod:{},SwipeSelectMethod:{},ClientSelectMethod:{},EditModeClientSignal:{},AutoAdvanceClientSignal:{},KeyboardSelectMethod:{},KeyClick:{},MouseSelectMethod:{},CameraSelect:{},CameraSelectMethod:{},TimingSelect:{},TimingSelectMethod:{},StatelessRule:{},RotationTransform2D:{},TranslateTransform2D:{},ScaleTransform2D:{},RotationTransform3D:{},TranslateTransform3D:{},ScaleTransform3D:{},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{},CodeBlockLayoutElement:{},Root:{}}},G.SetStructValues=function(){G.StructValues={RenderModelRoot:{DefaultViewOptions:e.ViewOptions,CurrentViewOptions:e.ViewOptions,AutoPlaySettings:e.AutoPlaySettings},ToCElement:{},ToCBackgroundElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},LayoutTree:{},ContainerLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},PanelLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},RegionLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},MediaViewportLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},TextRunElement:{},TextBlockLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},TextSection:{},TextParagraph:{},TextList:{},DecorationLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},ImageLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},VideoLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},MapLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},ProjectionLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},ViewportLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},EmbedLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},ClientLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},AgaveLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},StatusUpdateLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},ContainerSceneGraphElement:{TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},TextureSceneGraphElement:{TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},AnimationSequence:{},Animation:{ClientState:e.ClientState},AnimationExternalAction:{ClientState:e.ClientState},AnimationTarget:{},AnimationFunction:{},AnimationParameter:{},StaticImage:{},Path:{},InteractionModel:{},FsmNode:{},FsmEdge:{},KeyFrame:{MetaData:e.KeyframeMetaData},TriggerSet:{ClientState:e.ClientState},Trigger:{},DefaultAction:{},SelectMethod:{},SwipeSelectMethod:{},ClientSelectMethod:{},EditModeClientSignal:{},AutoAdvanceClientSignal:{},KeyboardSelectMethod:{},KeyClick:{},MouseSelectMethod:{},CameraSelect:{},CameraSelectMethod:{},TimingSelect:{},TimingSelectMethod:{},StatelessRule:{},RotationTransform2D:{},TranslateTransform2D:{},ScaleTransform2D:{},RotationTransform3D:{},TranslateTransform3D:{},ScaleTransform3D:{},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},CodeBlockLayoutElement:{BorderRadius:e.BorderRadius,TransformOrigin:e.TransformOrigin,AccessibilityInfo:e.AccessibilityInfo},Root:{}}},G.SetStructCollectionValues=function(){G.StructCollectionValues={RenderModelRoot:{PaletteColors:e.PaletteColorValue,Storyboards:e.Storyboard},ToCElement:{},ToCBackgroundElement:{},LayoutTree:{TextStyles:e.TextStyle},ContainerLayoutElement:{},PanelLayoutElement:{},RegionLayoutElement:{},MediaViewportLayoutElement:{},TextRunElement:{},TextBlockLayoutElement:{},TextSection:{},TextParagraph:{},TextList:{},DecorationLayoutElement:{},ImageLayoutElement:{LivingImageMediaElements:e.LivingImageMediaElement},VideoLayoutElement:{ClosedCaptionDescriptors:e.ClosedCaptionDescriptor},MapLayoutElement:{Pins:e.MapPin},ProjectionLayoutElement:{},ViewportLayoutElement:{},EmbedLayoutElement:{},ClientLayoutElement:{},AgaveLayoutElement:{},StatusUpdateLayoutElement:{},ContainerSceneGraphElement:{},TextureSceneGraphElement:{},AnimationSequence:{},Animation:{StoryboardExecutionContexts:e.StoryboardExecutionContext},AnimationExternalAction:{StoryboardExecutionContexts:e.StoryboardExecutionContext},AnimationTarget:{},AnimationFunction:{},AnimationParameter:{},StaticImage:{},Path:{},InteractionModel:{Transitions:e.Transition,AnimationContainers:e.AnimationContainer,AnimationEffects:e.AnimationEffect,ContentNavigationMarkerCollections:e.ContentNavigationMarkerCollection},FsmNode:{},FsmEdge:{},KeyFrame:{SnapPointsHorizontal:e.SnapPoint,SnapPointsVertical:e.SnapPoint},TriggerSet:{},Trigger:{},DefaultAction:{},SelectMethod:{},SwipeSelectMethod:{},ClientSelectMethod:{},EditModeClientSignal:{},AutoAdvanceClientSignal:{},KeyboardSelectMethod:{},KeyClick:{},MouseSelectMethod:{},CameraSelect:{},CameraSelectMethod:{},TimingSelect:{},TimingSelectMethod:{},StatelessRule:{},RotationTransform2D:{},TranslateTransform2D:{},ScaleTransform2D:{},RotationTransform3D:{},TranslateTransform3D:{},ScaleTransform3D:{},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{ClosedCaptionDescriptors:e.ClosedCaptionDescriptor},CodeBlockLayoutElement:{},Root:{}}},G.SetPropertyCollectionValues=function(){G.PropertyCollectionValues={RenderModelRoot:{},ToCElement:{},ToCBackgroundElement:{},LayoutTree:{},ContainerLayoutElement:{},PanelLayoutElement:{},RegionLayoutElement:{},MediaViewportLayoutElement:{},TextRunElement:{},TextBlockLayoutElement:{},TextSection:{},TextParagraph:{},TextList:{},DecorationLayoutElement:{},ImageLayoutElement:{},VideoLayoutElement:{},MapLayoutElement:{},ProjectionLayoutElement:{},ViewportLayoutElement:{},EmbedLayoutElement:{},ClientLayoutElement:{},AgaveLayoutElement:{},StatusUpdateLayoutElement:{},ContainerSceneGraphElement:{},TextureSceneGraphElement:{},AnimationSequence:{},Animation:{TransitionIds:!0},AnimationExternalAction:{TransitionIds:!0},AnimationTarget:{},AnimationFunction:{},AnimationParameter:{},StaticImage:{},Path:{},InteractionModel:{},FsmNode:{},FsmEdge:{},KeyFrame:{},TriggerSet:{},Trigger:{},DefaultAction:{},SelectMethod:{},SwipeSelectMethod:{},ClientSelectMethod:{},EditModeClientSignal:{},AutoAdvanceClientSignal:{},KeyboardSelectMethod:{},KeyClick:{},MouseSelectMethod:{},CameraSelect:{},CameraSelectMethod:{},TimingSelect:{},TimingSelectMethod:{},StatelessRule:{},RotationTransform2D:{},TranslateTransform2D:{},ScaleTransform2D:{},RotationTransform3D:{},TranslateTransform3D:{},ScaleTransform3D:{},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{},CodeBlockLayoutElement:{},Root:{}}},G.SetEnumCollectionValues=function(){G.EnumCollectionValues={RenderModelRoot:{},ToCElement:{},ToCBackgroundElement:{},LayoutTree:{},ContainerLayoutElement:{},PanelLayoutElement:{},RegionLayoutElement:{},MediaViewportLayoutElement:{},TextRunElement:{},TextBlockLayoutElement:{},TextSection:{},TextParagraph:{},TextList:{},DecorationLayoutElement:{},ImageLayoutElement:{},VideoLayoutElement:{},MapLayoutElement:{},ProjectionLayoutElement:{},ViewportLayoutElement:{},EmbedLayoutElement:{},ClientLayoutElement:{},AgaveLayoutElement:{},StatusUpdateLayoutElement:{},ContainerSceneGraphElement:{},TextureSceneGraphElement:{},AnimationSequence:{},Animation:{},AnimationExternalAction:{},AnimationTarget:{},AnimationFunction:{},AnimationParameter:{},StaticImage:{},Path:{},InteractionModel:{},FsmNode:{},FsmEdge:{},KeyFrame:{},TriggerSet:{},Trigger:{},DefaultAction:{},SelectMethod:{},SwipeSelectMethod:{},ClientSelectMethod:{},EditModeClientSignal:{},AutoAdvanceClientSignal:{},KeyboardSelectMethod:{},KeyClick:{},MouseSelectMethod:{},CameraSelect:{},CameraSelectMethod:{},TimingSelect:{},TimingSelectMethod:{},StatelessRule:{},RotationTransform2D:{},TranslateTransform2D:{},ScaleTransform2D:{},RotationTransform3D:{},TranslateTransform3D:{},ScaleTransform3D:{},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{},CodeBlockLayoutElement:{},Root:{}}},G.PropSerializer=new q,G.DefaultProps=G.getDefaultProps(),G.PropNotifierMappings=G.getPropNotifierMappings(),G.EnumValues=G.getEnumValues(),G.EnumCollectionValueTypes=G.getEnumCollectionValues(),G.HashedMeanings=G.getHashedMeanings(),G.RootId="ModelRoot",G}();e.RenderGraph=G}(t.RM||(t.RM={}))}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.GraphModel,n=e.Model.EnumWrapper;!function(t){function o(e,t){var i=e.prototype;for(var n in t)i[n]=t[n]}var r={getLayoutStyleId:function(e){return this.getProperty(t.Prop.LayoutStyleId,e)},setLayoutStyleId:function(e){this.setProperty(t.Prop.LayoutStyleId,e)},getStyleVersion:function(e){return this.getProperty(t.Prop.StyleVersion,e)},setStyleVersion:function(e){this.setProperty(t.Prop.StyleVersion,e)},getWorldVersion:function(e){return this.getProperty(t.Prop.WorldVersion,e)},setWorldVersion:function(e){this.setProperty(t.Prop.WorldVersion,e)},getEditVersion:function(e){return this.getProperty(t.Prop.EditVersion,e)},setEditVersion:function(e){this.setProperty(t.Prop.EditVersion,e)},getRemoteDesignObjects:function(e){return this.getProperty(t.Prop.RemoteDesignObjects,e)},setRemoteDesignObjects:function(e){this.setProperty(t.Prop.RemoteDesignObjects,e)},getTitle:function(e){return this.getProperty(t.Prop.Title,e)},setTitle:function(e){this.setProperty(t.Prop.Title,e)},getCulture:function(e){return this.getProperty(t.Prop.Culture,e)},setCulture:function(e){this.setProperty(t.Prop.Culture,e)},getPaletteColors:function(e){var i=this.getProperty(t.Prop.PaletteColors,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.PaletteColors,i,!1)),i.setObjectProperty(this,t.Prop.PaletteColors),i},getDefaultViewOptions:function(e){var i=this.getProperty(t.Prop.DefaultViewOptions,e);return null!=i&&i.setObjectProperty(this,t.Prop.DefaultViewOptions),i},setDefaultViewOptions:function(e){null!=e&&e.setObjectProperty(this,t.Prop.DefaultViewOptions),this.setProperty(t.Prop.DefaultViewOptions,e)},getCurrentViewOptions:function(e){var i=this.getProperty(t.Prop.CurrentViewOptions,e);return null!=i&&i.setObjectProperty(this,t.Prop.CurrentViewOptions),i},setCurrentViewOptions:function(e){null!=e&&e.setObjectProperty(this,t.Prop.CurrentViewOptions),this.setProperty(t.Prop.CurrentViewOptions,e)},getStoryboards:function(e){var i=this.getProperty(t.Prop.Storyboards,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.Storyboards,i,!1)),i.setObjectProperty(this,t.Prop.Storyboards),i},getRTL:function(e){return this.getProperty(t.Prop.RTL,e)},setRTL:function(e){this.setProperty(t.Prop.RTL,e)},getForceNativeScrolling:function(e){return this.getProperty(t.Prop.ForceNativeScrolling,e)},setForceNativeScrolling:function(e){this.setProperty(t.Prop.ForceNativeScrolling,e)},getAutoPlaySettings:function(e){var i=this.getProperty(t.Prop.AutoPlaySettings,e);return null!=i&&i.setObjectProperty(this,t.Prop.AutoPlaySettings),i},setAutoPlaySettings:function(e){null!=e&&e.setObjectProperty(this,t.Prop.AutoPlaySettings),this.setProperty(t.Prop.AutoPlaySettings,e)}},a={getNavigationTargetId:function(e){return this.getProperty(t.Prop.NavigationTargetId,e)},setNavigationTargetId:function(e){this.setProperty(t.Prop.NavigationTargetId,e)},getTitle:function(e){return this.getProperty(t.Prop.Title,e)},setTitle:function(e){this.setProperty(t.Prop.Title,e)},getSubTitle:function(e){return this.getProperty(t.Prop.SubTitle,e)},setSubTitle:function(e){this.setProperty(t.Prop.SubTitle,e)},getBackground:function(e){return this.getRelationshipFrom(t.Meaning.ToCElementhasToCBackgroundElement,e)},setBackground:function(e){this.setRelationships(e?[e]:[],t.Meaning.ToCElementhasToCBackgroundElement)}},s={},l={getDevice:function(e){return this.getProperty(t.Prop.Device,e).IntValue},setDevice:function(e){this.setProperty(t.Prop.Device,new n(e))},setDeviceInternal:function(e){this.setProperty(t.Prop.Device,e)},getViewportHeight:function(e){return this.getProperty(t.Prop.ViewportHeight,e)},setViewportHeight:function(e){this.setProperty(t.Prop.ViewportHeight,e)},getViewportWidth:function(e){return this.getProperty(t.Prop.ViewportWidth,e)},setViewportWidth:function(e){this.setProperty(t.Prop.ViewportWidth,e)},getLayoutFailed:function(e){return this.getProperty(t.Prop.LayoutFailed,e)},setLayoutFailed:function(e){this.setProperty(t.Prop.LayoutFailed,e)},getErrorMessage:function(e){return this.getProperty(t.Prop.ErrorMessage,e)},setErrorMessage:function(e){this.setProperty(t.Prop.ErrorMessage,e)},getTextStyles:function(e){var i=this.getProperty(t.Prop.TextStyles,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.TextStyles,i,!1)),i.setObjectProperty(this,t.Prop.TextStyles),i},getRootContainer:function(e){return this.getRelationshipFrom(t.Meaning.LayoutTreeHasContainerLayoutElement,e)},setRootContainer:function(e){this.setRelationships(e?[e]:[],t.Meaning.LayoutTreeHasContainerLayoutElement)},getInteractionModel:function(e){return this.getRelationshipFrom(t.Meaning.LayoutTreeHasInteractionModel,e)},setInteractionModel:function(e){this.setRelationships(e?[e]:[],t.Meaning.LayoutTreeHasInteractionModel)}},u={getUnhashedId:function(e){return this.getProperty(t.Prop.UnhashedId,e)},setUnhashedId:function(e){this.setProperty(t.Prop.UnhashedId,e)},getKeyFrameType:function(e){return this.getProperty(t.Prop.KeyFrameType,e)},setKeyFrameType:function(e){this.setProperty(t.Prop.KeyFrameType,e)},getContentId:function(e){return this.getProperty(t.Prop.ContentId,e)},setContentId:function(e){this.setProperty(t.Prop.ContentId,e)},getOpacity:function(e){return this.getProperty(t.Prop.Opacity,e)},setOpacity:function(e){this.setProperty(t.Prop.Opacity,e)},getHidden:function(e){return this.getProperty(t.Prop.Hidden,e)},setHidden:function(e){this.setProperty(t.Prop.Hidden,e)},getAnimated:function(e){return this.getProperty(t.Prop.Animated,e)},setAnimated:function(e){this.setProperty(t.Prop.Animated,e)},getContentType:function(e){return this.getProperty(t.Prop.ContentType,e).IntValue},setContentType:function(e){this.setProperty(t.Prop.ContentType,new n(e))},setContentTypeInternal:function(e){this.setProperty(t.Prop.ContentType,e)},getFlags:function(e){return new Flags(t.LayoutFlags,this.getProperty(t.Prop.Flags,e))},setFlags:function(e){this.setProperty(t.Prop.Flags,e.raw())},getCursor:function(e){return this.getProperty(t.Prop.Cursor,e).IntValue},setCursor:function(e){this.setProperty(t.Prop.Cursor,new n(e))},setCursorInternal:function(e){this.setProperty(t.Prop.Cursor,e)},getTransformOrigin:function(e){var i=this.getProperty(t.Prop.TransformOrigin,e);return null!=i&&i.setObjectProperty(this,t.Prop.TransformOrigin),i},setTransformOrigin:function(e){null!=e&&e.setObjectProperty(this,t.Prop.TransformOrigin),this.setProperty(t.Prop.TransformOrigin,e)},getAccessibilityInfo:function(e){var i=this.getProperty(t.Prop.AccessibilityInfo,e);return null!=i&&i.setObjectProperty(this,t.Prop.AccessibilityInfo),i},setAccessibilityInfo:function(e){null!=e&&e.setObjectProperty(this,t.Prop.AccessibilityInfo),this.setProperty(t.Prop.AccessibilityInfo,e)},getLayoutContext:function(e){return this.getRelationshipFrom(t.Meaning.LayoutNodeLayoutContextPointsToLayoutContext,e)},setLayoutContext:function(e){this.setRelationships(e?[e]:[],t.Meaning.LayoutNodeLayoutContextPointsToLayoutContext)}},d={getBorderRadius:function(e){var i=this.getProperty(t.Prop.BorderRadius,e);return null!=i&&i.setObjectProperty(this,t.Prop.BorderRadius),i},setBorderRadius:function(e){null!=e&&e.setObjectProperty(this,t.Prop.BorderRadius),this.setProperty(t.Prop.BorderRadius,e)},getDropShadowXOff:function(e){return this.getProperty(t.Prop.DropShadowXOff,e)},setDropShadowXOff:function(e){this.setProperty(t.Prop.DropShadowXOff,e)},getDropShadowYOff:function(e){return this.getProperty(t.Prop.DropShadowYOff,e)},setDropShadowYOff:function(e){this.setProperty(t.Prop.DropShadowYOff,e)},getDropShadowBlur:function(e){return this.getProperty(t.Prop.DropShadowBlur,e)},setDropShadowBlur:function(e){this.setProperty(t.Prop.DropShadowBlur,e)},getDropShadowColor:function(e){return this.getProperty(t.Prop.DropShadowColor,e)},setDropShadowColor:function(e){this.setProperty(t.Prop.DropShadowColor,e)},getDropShadowSpread:function(e){return this.getProperty(t.Prop.DropShadowSpread,e)},setDropShadowSpread:function(e){this.setProperty(t.Prop.DropShadowSpread,e)},getDropShadowInset:function(e){return this.getProperty(t.Prop.DropShadowInset,e)},setDropShadowInset:function(e){this.setProperty(t.Prop.DropShadowInset,e)},getBackgroundPathShadowXOff:function(e){return this.getProperty(t.Prop.BackgroundPathShadowXOff,e)},setBackgroundPathShadowXOff:function(e){this.setProperty(t.Prop.BackgroundPathShadowXOff,e)},getBackgroundPathShadowYOff:function(e){return this.getProperty(t.Prop.BackgroundPathShadowYOff,e)},setBackgroundPathShadowYOff:function(e){this.setProperty(t.Prop.BackgroundPathShadowYOff,e)},getBackgroundPathShadowBlur:function(e){return this.getProperty(t.Prop.BackgroundPathShadowBlur,e)},setBackgroundPathShadowBlur:function(e){this.setProperty(t.Prop.BackgroundPathShadowBlur,e)},getBackgroundPathShadowColor:function(e){return this.getProperty(t.Prop.BackgroundPathShadowColor,e)},setBackgroundPathShadowColor:function(e){this.setProperty(t.Prop.BackgroundPathShadowColor,e)},getZOrder:function(e){return this.getProperty(t.Prop.ZOrder,e)},setZOrder:function(e){this.setProperty(t.Prop.ZOrder,e)},getFillOpacityOverride:function(e){return this.getProperty(t.Prop.FillOpacityOverride,e)},setFillOpacityOverride:function(e){this.setProperty(t.Prop.FillOpacityOverride,e)},getFillColorOverride:function(e){return this.getProperty(t.Prop.FillColorOverride,e)},setFillColorOverride:function(e){this.setProperty(t.Prop.FillColorOverride,e)},getIsOverlay:function(e){return this.getProperty(t.Prop.IsOverlay,e)},setIsOverlay:function(e){this.setProperty(t.Prop.IsOverlay,e)},getIsClickThrough:function(e){return this.getProperty(t.Prop.IsClickThrough,e)},setIsClickThrough:function(e){this.setProperty(t.Prop.IsClickThrough,e)},getFillColorName:function(e){return this.getProperty(t.Prop.FillColorName,e)},setFillColorName:function(e){this.setProperty(t.Prop.FillColorName,e)},getDownscaleFactor:function(e){return this.getProperty(t.Prop.DownscaleFactor,e)},setDownscaleFactor:function(e){this.setProperty(t.Prop.DownscaleFactor,e)},getBackgroundImage:function(e){return this.getRelationshipFrom(t.Meaning.LayoutElementBackgroundPointsToStaticImage,e)},setBackgroundImage:function(e){this.setRelationships(e?[e]:[],t.Meaning.LayoutElementBackgroundPointsToStaticImage)},getBackgroundPath:function(e){return this.getRelationshipFrom(t.Meaning.LayoutElementBackgroundPathPointsToPath,e)},setBackgroundPath:function(e){this.setRelationships(e?[e]:[],t.Meaning.LayoutElementBackgroundPathPointsToPath)},getBackgroundFilterPath:function(e){return this.getRelationshipFrom(t.Meaning.LayoutElementBackgroundFilterPointsToPath,e)},setBackgroundFilterPath:function(e){this.setRelationships(e?[e]:[],t.Meaning.LayoutElementBackgroundFilterPointsToPath)},getParentContainer:function(e){return this.getRelationshipTo(t.Meaning.ContainerLayoutElementHasLayoutElement,e)},getParentViewport:function(e){return this.getRelationshipTo(t.Meaning.ViewportLayoutElementHasLayoutElement,e)},getParentTexture:function(e){return this.getRelationshipTo(t.Meaning.TextureSceneGraphElementHasLayoutElement,e)}},c={getType:function(e){return this.getProperty(t.Prop.Type,e)},setType:function(e){this.setProperty(t.Prop.Type,e)},getContainerType:function(e){return this.getProperty(t.Prop.ContainerType,e).IntValue},setContainerType:function(e){this.setProperty(t.Prop.ContainerType,new n(e))},setContainerTypeInternal:function(e){this.setProperty(t.Prop.ContainerType,e)},getScrollability:function(e){return this.getProperty(t.Prop.Scrollability,e).IntValue},setScrollability:function(e){this.setProperty(t.Prop.Scrollability,new n(e))},setScrollabilityInternal:function(e){this.setProperty(t.Prop.Scrollability,e)},getOverflow:function(e){return this.getProperty(t.Prop.Overflow,e)},setOverflow:function(e){this.setProperty(t.Prop.Overflow,e)}},p={},g={},h={},y={getText:function(e){return this.getProperty(t.Prop.Text,e)},setText:function(e){this.setProperty(t.Prop.Text,e)},getFontKey:function(e){return this.getProperty(t.Prop.FontKey,e)},setFontKey:function(e){this.setProperty(t.Prop.FontKey,e)},getTextColorName:function(e){return this.getProperty(t.Prop.TextColorName,e)},setTextColorName:function(e){this.setProperty(t.Prop.TextColorName,e)},getTextOpacityOverride:function(e){return this.getProperty(t.Prop.TextOpacityOverride,e)},setTextOpacityOverride:function(e){this.setProperty(t.Prop.TextOpacityOverride,e)},getTextColorOverride:function(e){return this.getProperty(t.Prop.TextColorOverride,e)},setTextColorOverride:function(e){this.setProperty(t.Prop.TextColorOverride,e)},getTextShadowXOff:function(e){return this.getProperty(t.Prop.TextShadowXOff,e)},setTextShadowXOff:function(e){this.setProperty(t.Prop.TextShadowXOff,e)},getTextShadowYOff:function(e){return this.getProperty(t.Prop.TextShadowYOff,e)},setTextShadowYOff:function(e){this.setProperty(t.Prop.TextShadowYOff,e)},getTextShadowBlur:function(e){return this.getProperty(t.Prop.TextShadowBlur,e)},setTextShadowBlur:function(e){this.setProperty(t.Prop.TextShadowBlur,e)},getTextShadowColor:function(e){return this.getProperty(t.Prop.TextShadowColor,e)},setTextShadowColor:function(e){this.setProperty(t.Prop.TextShadowColor,e)},getHyperlinkUri:function(e){return this.getProperty(t.Prop.HyperlinkUri,e)},setHyperlinkUri:function(e){this.setProperty(t.Prop.HyperlinkUri,e)},getParentParagraph:function(e){return this.getRelationshipTo(t.Meaning.TextParagraphHasTextRunElement,e)}},m={getTextStyleId:function(e){return this.getProperty(t.Prop.TextStyleId,e)},setTextStyleId:function(e){this.setProperty(t.Prop.TextStyleId,e)},getTextColorId:function(e){return this.getProperty(t.Prop.TextColorId,e)},setTextColorId:function(e){this.setProperty(t.Prop.TextColorId,e)},getLineHeight:function(e){return this.getProperty(t.Prop.LineHeight,e)},setLineHeight:function(e){this.setProperty(t.Prop.LineHeight,e)},getSectionList:function(e){return this.getRelationshipFrom(t.Meaning.TextBlockLayoutElementHasTextList,e)},setSectionList:function(e){this.setRelationships(e?[e]:[],t.Meaning.TextBlockLayoutElementHasTextList)}},f={getParentList:function(e){return this.getRelationshipTo(t.Meaning.TextListHasTextSection,e)}},v={getSpacingAfter:function(e){return this.getProperty(t.Prop.SpacingAfter,e)},setSpacingAfter:function(e){this.setProperty(t.Prop.SpacingAfter,e)},getParagraphStyle:function(e){return this.getProperty(t.Prop.ParagraphStyle,e).IntValue},setParagraphStyle:function(e){this.setProperty(t.Prop.ParagraphStyle,new n(e))},setParagraphStyleInternal:function(e){this.setProperty(t.Prop.ParagraphStyle,e)},getDirection:function(e){return this.getProperty(t.Prop.Direction,e).IntValue},setDirection:function(e){this.setProperty(t.Prop.Direction,new n(e))},setDirectionInternal:function(e){this.setProperty(t.Prop.Direction,e)},getIsPullQuote:function(e){return this.getProperty(t.Prop.IsPullQuote,e)},setIsPullQuote:function(e){this.setProperty(t.Prop.IsPullQuote,e)},getLayoutContext:function(e){return this.getRelationshipFrom(t.Meaning.TextParagraphLayoutContextPointsToLayoutContext,e)},setLayoutContext:function(e){this.setRelationships(e?[e]:[],t.Meaning.TextParagraphLayoutContextPointsToLayoutContext)}},S={getStyle:function(e){return this.getProperty(t.Prop.Style,e).IntValue},setStyle:function(e){this.setProperty(t.Prop.Style,new n(e))},setStyleInternal:function(e){this.setProperty(t.Prop.Style,e)},getStartNum:function(e){return this.getProperty(t.Prop.StartNum,e)},setStartNum:function(e){this.setProperty(t.Prop.StartNum,e)},getDirection:function(e){return this.getProperty(t.Prop.Direction,e).IntValue},setDirection:function(e){this.setProperty(t.Prop.Direction,new n(e))},setDirectionInternal:function(e){this.setProperty(t.Prop.Direction,e)},getParentBlock:function(e){return this.getRelationshipTo(t.Meaning.TextBlockLayoutElementHasTextList,e)}},w={},T={getImageId:function(e){return this.getProperty(t.Prop.ImageId,e)},setImageId:function(e){this.setProperty(t.Prop.ImageId,e)},getImageUrl:function(e){return this.getProperty(t.Prop.ImageUrl,e)},setImageUrl:function(e){this.setProperty(t.Prop.ImageUrl,e)},getImageOriginalWidth:function(e){return this.getProperty(t.Prop.ImageOriginalWidth,e)},setImageOriginalWidth:function(e){this.setProperty(t.Prop.ImageOriginalWidth,e)},getImageOriginalHeight:function(e){return this.getProperty(t.Prop.ImageOriginalHeight,e)},setImageOriginalHeight:function(e){this.setProperty(t.Prop.ImageOriginalHeight,e)}},C={getFilterColorName:function(e){return this.getProperty(t.Prop.FilterColorName,e)},setFilterColorName:function(e){this.setProperty(t.Prop.FilterColorName,e)},getLivingImageMediaElements:function(e){var i=this.getProperty(t.Prop.LivingImageMediaElements,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.LivingImageMediaElements,i,!1)),i.setObjectProperty(this,t.Prop.LivingImageMediaElements),i},getRichImagePlayerType:function(e){return this.getProperty(t.Prop.RichImagePlayerType,e).IntValue},setRichImagePlayerType:function(e){this.setProperty(t.Prop.RichImagePlayerType,new n(e))},setRichImagePlayerTypeInternal:function(e){this.setProperty(t.Prop.RichImagePlayerType,e)},getFilterEffects:function(e){return this.getProperty(t.Prop.FilterEffects,e)},setFilterEffects:function(e){this.setProperty(t.Prop.FilterEffects,e)},getPath:function(e){return this.getRelationshipFrom(t.Meaning.ImageLayoutElementPathPointsToPath,e)},setPath:function(e){this.setRelationships(e?[e]:[],t.Meaning.ImageLayoutElementPathPointsToPath)},getFilterPath:function(e){return this.getRelationshipFrom(t.Meaning.ImageLayoutElementFilterPathPointsToPath,e)},setFilterPath:function(e){this.setRelationships(e?[e]:[],t.Meaning.ImageLayoutElementFilterPathPointsToPath)}},_={getVideoPlayerDescriptor:function(e){return this.getProperty(t.Prop.VideoPlayerDescriptor,e)},setVideoPlayerDescriptor:function(e){this.setProperty(t.Prop.VideoPlayerDescriptor,e)},getVideoPlayerType:function(e){return this.getProperty(t.Prop.VideoPlayerType,e).IntValue},setVideoPlayerType:function(e){this.setProperty(t.Prop.VideoPlayerType,new n(e))},setVideoPlayerTypeInternal:function(e){this.setProperty(t.Prop.VideoPlayerType,e)},getClosedCaptionDescriptors:function(e){var i=this.getProperty(t.Prop.ClosedCaptionDescriptors,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.ClosedCaptionDescriptors,i,!1)),i.setObjectProperty(this,t.Prop.ClosedCaptionDescriptors),i}},b={getPins:function(e){var i=this.getProperty(t.Prop.Pins,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.Pins,i,!1)),i.setObjectProperty(this,t.Prop.Pins),i}},A={getScene3D:function(e){return this.getRelationshipFrom(t.Meaning.ProjectionLayoutElementHasSceneGraphElement,e)},setScene3D:function(e){this.setRelationships(e?[e]:[],t.Meaning.ProjectionLayoutElementHasSceneGraphElement)}},P={getHorizontalAlignment:function(e){return this.getProperty(t.Prop.HorizontalAlignment,e).IntValue},setHorizontalAlignment:function(e){this.setProperty(t.Prop.HorizontalAlignment,new n(e))},setHorizontalAlignmentInternal:function(e){this.setProperty(t.Prop.HorizontalAlignment,e)},getVerticalAlignment:function(e){return this.getProperty(t.Prop.VerticalAlignment,e).IntValue},setVerticalAlignment:function(e){this.setProperty(t.Prop.VerticalAlignment,new n(e))},setVerticalAlignmentInternal:function(e){this.setProperty(t.Prop.VerticalAlignment,e)},getContentStretch:function(e){return this.getProperty(t.Prop.ContentStretch,e).IntValue},setContentStretch:function(e){this.setProperty(t.Prop.ContentStretch,new n(e))},setContentStretchInternal:function(e){this.setProperty(t.Prop.ContentStretch,e)},getBackgroundType:function(e){return this.getProperty(t.Prop.BackgroundType,e).IntValue},setBackgroundType:function(e){this.setProperty(t.Prop.BackgroundType,new n(e))},setBackgroundTypeInternal:function(e){this.setProperty(t.Prop.BackgroundType,e)},getChild:function(e){return this.getRelationshipFrom(t.Meaning.ViewportLayoutElementHasLayoutElement,e)},setChild:function(e){this.setRelationships(e?[e]:[],t.Meaning.ViewportLayoutElementHasLayoutElement)}},I={getEmbedSourceUrl:function(e){return this.getProperty(t.Prop.EmbedSourceUrl,e)},setEmbedSourceUrl:function(e){this.setProperty(t.Prop.EmbedSourceUrl,e)},getHeight:function(e){return this.getProperty(t.Prop.Height,e)},setHeight:function(e){this.setProperty(t.Prop.Height,e)},getWidth:function(e){return this.getProperty(t.Prop.Width,e)},setWidth:function(e){this.setProperty(t.Prop.Width,e)},getAllowFullScreen:function(e){return this.getProperty(t.Prop.AllowFullScreen,e)},setAllowFullScreen:function(e){this.setProperty(t.Prop.AllowFullScreen,e)},getScrolling:function(e){return this.getProperty(t.Prop.Scrolling,e).IntValue},setScrolling:function(e){this.setProperty(t.Prop.Scrolling,new n(e))},setScrollingInternal:function(e){this.setProperty(t.Prop.Scrolling,e)},getShouldScale:function(e){return this.getProperty(t.Prop.ShouldScale,e)},setShouldScale:function(e){this.setProperty(t.Prop.ShouldScale,e)},getSandboxed:function(e){return this.getProperty(t.Prop.Sandboxed,e)},setSandboxed:function(e){this.setProperty(t.Prop.Sandboxed,e)}},E={getClientRecipe:function(e){return this.getProperty(t.Prop.ClientRecipe,e).IntValue},setClientRecipe:function(e){this.setProperty(t.Prop.ClientRecipe,new n(e))},setClientRecipeInternal:function(e){this.setProperty(t.Prop.ClientRecipe,e)}},D={getAgaveId:function(e){return this.getProperty(t.Prop.AgaveId,e)},setAgaveId:function(e){this.setProperty(t.Prop.AgaveId,e)},getManifest:function(e){return this.getProperty(t.Prop.Manifest,e)},setManifest:function(e){this.setProperty(t.Prop.Manifest,e)},getAgaveData:function(e){return this.getProperty(t.Prop.AgaveData,e)},setAgaveData:function(e){this.setProperty(t.Prop.AgaveData,e)},getAgaveSettings:function(e){return this.getProperty(t.Prop.AgaveSettings,e)},setAgaveSettings:function(e){this.setProperty(t.Prop.AgaveSettings,e)}},B={getSourceId:function(e){return this.getProperty(t.Prop.SourceId,e)},setSourceId:function(e){this.setProperty(t.Prop.SourceId,e)}},V={getParentProjection:function(e){return this.getRelationshipTo(t.Meaning.ProjectionLayoutElementHasSceneGraphElement,e)},getParentContainer:function(e){return this.getRelationshipTo(t.Meaning.ContainerSceneGraphElementHasSceneGraphElement,e)}},M={},L={getTexture:function(e){return this.getRelationshipFrom(t.Meaning.TextureSceneGraphElementHasLayoutElement,e)},setTexture:function(e){this.setRelationships(e?[e]:[],t.Meaning.TextureSceneGraphElementHasLayoutElement)}},k={getName:function(e){return this.getProperty(t.Prop.Name,e)},setName:function(e){this.setProperty(t.Prop.Name,e)},getAnimationsCompleteFunction:function(e){return this.getProperty(t.Prop.AnimationsCompleteFunction,e)},setAnimationsCompleteFunction:function(e){this.setProperty(t.Prop.AnimationsCompleteFunction,e)},getClientRequirements:function(e){return new Flags(t.ClientCapabilities,this.getProperty(t.Prop.ClientRequirements,e))},setClientRequirements:function(e){this.setProperty(t.Prop.ClientRequirements,e.raw())}},x={getAnimationName:function(e){return this.getProperty(t.Prop.AnimationName,e)},setAnimationName:function(e){this.setProperty(t.Prop.AnimationName,e)},getStoryboardExecutionContexts:function(e){var i=this.getProperty(t.Prop.StoryboardExecutionContexts,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.StoryboardExecutionContexts,i,!1)),i.setObjectProperty(this,t.Prop.StoryboardExecutionContexts),i},getTransitionIds:function(e){var i=this.getProperty(t.Prop.TransitionIds,e);return null==i&&(i=new Rt,this.setProperty(t.Prop.TransitionIds,i,!1)),i.setObjectProperty(this,t.Prop.TransitionIds),i},getClientState:function(e){var i=this.getProperty(t.Prop.ClientState,e);return null!=i&&i.setObjectProperty(this,t.Prop.ClientState),i},setClientState:function(e){null!=e&&e.setObjectProperty(this,t.Prop.ClientState),this.setProperty(t.Prop.ClientState,e)},getBehaviors:function(e){return new Flags(t.AnimationBehaviors,this.getProperty(t.Prop.Behaviors,e))},setBehaviors:function(e){this.setProperty(t.Prop.Behaviors,e.raw())},getParentAnimationSequence:function(e){return this.getRelationshipTo(t.Meaning.AnimationSequenceHasAnimation,e)}},R={getActionType:function(e){return this.getProperty(t.Prop.ActionType,e).IntValue},setActionType:function(e){this.setProperty(t.Prop.ActionType,new n(e))},setActionTypeInternal:function(e){this.setProperty(t.Prop.ActionType,e)},getActionTargetId:function(e){return this.getProperty(t.Prop.ActionTargetId,e)},setActionTargetId:function(e){this.setProperty(t.Prop.ActionTargetId,e)}},O={getElementId:function(e){return this.getProperty(t.Prop.ElementId,e)},setElementId:function(e){this.setProperty(t.Prop.ElementId,e)},getAnimatablePropertyName:function(e){return this.getProperty(t.Prop.AnimatablePropertyName,e).IntValue},setAnimatablePropertyName:function(e){this.setProperty(t.Prop.AnimatablePropertyName,new n(e))},setAnimatablePropertyNameInternal:function(e){this.setProperty(t.Prop.AnimatablePropertyName,e)},getTransformIndex:function(e){return this.getProperty(t.Prop.TransformIndex,e)},setTransformIndex:function(e){this.setProperty(t.Prop.TransformIndex,e)},getTransformComponent:function(e){return this.getProperty(t.Prop.TransformComponent,e).IntValue},setTransformComponent:function(e){this.setProperty(t.Prop.TransformComponent,new n(e))},setTransformComponentInternal:function(e){this.setProperty(t.Prop.TransformComponent,e)}},F={getName:function(e){return this.getProperty(t.Prop.Name,e)},setName:function(e){this.setProperty(t.Prop.Name,e)},getFunctionId:function(e){return this.getProperty(t.Prop.FunctionId,e)},setFunctionId:function(e){this.setProperty(t.Prop.FunctionId,e)},getExpression:function(e){return this.getProperty(t.Prop.Expression,e)},setExpression:function(e){this.setProperty(t.Prop.Expression,e)},getMaintainStateOnStart:function(e){return this.getProperty(t.Prop.MaintainStateOnStart,e)},setMaintainStateOnStart:function(e){this.setProperty(t.Prop.MaintainStateOnStart,e)},getFlags:function(e){return new Flags(t.AnimationFlags,this.getProperty(t.Prop.Flags,e))},setFlags:function(e){this.setProperty(t.Prop.Flags,e.raw())},getTarget:function(e){return this.getRelationshipFrom(t.Meaning.AnimationFunctionHasAnimationTarget,e)},setTarget:function(e){this.setRelationships(e?[e]:[],t.Meaning.AnimationFunctionHasAnimationTarget)}},U={getParameterName:function(e){return this.getProperty(t.Prop.ParameterName,e)},setParameterName:function(e){this.setProperty(t.Prop.ParameterName,e)},getParameterValue:function(e){return this.getProperty(t.Prop.ParameterValue,e)},setParameterValue:function(e){this.setProperty(t.Prop.ParameterValue,e)},getParentAnimation:function(e){return this.getRelationshipTo(t.Meaning.AnimationHasAnimationParameter,e)}},N={getName:function(e){return this.getProperty(t.Prop.Name,e)},setName:function(e){this.setProperty(t.Prop.Name,e)},getFilename:function(e){return this.getProperty(t.Prop.Filename,e)},setFilename:function(e){this.setProperty(t.Prop.Filename,e)},getFillStyle:function(e){return this.getProperty(t.Prop.FillStyle,e).IntValue},setFillStyle:function(e){this.setProperty(t.Prop.FillStyle,new n(e))},setFillStyleInternal:function(e){this.setProperty(t.Prop.FillStyle,e)},getHorizontalAlignment:function(e){return this.getProperty(t.Prop.HorizontalAlignment,e).IntValue},setHorizontalAlignment:function(e){this.setProperty(t.Prop.HorizontalAlignment,new n(e))},setHorizontalAlignmentInternal:function(e){this.setProperty(t.Prop.HorizontalAlignment,e)},getVerticalAlignment:function(e){return this.getProperty(t.Prop.VerticalAlignment,e).IntValue},setVerticalAlignment:function(e){this.setProperty(t.Prop.VerticalAlignment,new n(e))},setVerticalAlignmentInternal:function(e){this.setProperty(t.Prop.VerticalAlignment,e)},getTiling:function(e){return this.getProperty(t.Prop.Tiling,e).IntValue},setTiling:function(e){this.setProperty(t.Prop.Tiling,new n(e))},setTilingInternal:function(e){this.setProperty(t.Prop.Tiling,e)}},z={getName:function(e){return this.getProperty(t.Prop.Name,e)},setName:function(e){this.setProperty(t.Prop.Name,e)},getStrokeWidth:function(e){return this.getProperty(t.Prop.StrokeWidth,e)},setStrokeWidth:function(e){this.setProperty(t.Prop.StrokeWidth,e)},getPathType:function(e){return this.getProperty(t.Prop.PathType,e).IntValue},setPathType:function(e){this.setProperty(t.Prop.PathType,new n(e))},setPathTypeInternal:function(e){this.setProperty(t.Prop.PathType,e)},getValues:function(e){return this.getProperty(t.Prop.Values,e)},setValues:function(e){this.setProperty(t.Prop.Values,e)}},H={getRequiresParallax:function(e){return this.getProperty(t.Prop.RequiresParallax,e)},setRequiresParallax:function(e){this.setProperty(t.Prop.RequiresParallax,e)},getTransitions:function(e){var i=this.getProperty(t.Prop.Transitions,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.Transitions,i,!1)),i.setObjectProperty(this,t.Prop.Transitions),i},getAnimationContainers:function(e){var i=this.getProperty(t.Prop.AnimationContainers,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.AnimationContainers,i,!1)),i.setObjectProperty(this,t.Prop.AnimationContainers),i},getAnimationEffects:function(e){var i=this.getProperty(t.Prop.AnimationEffects,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.AnimationEffects,i,!1)),i.setObjectProperty(this,t.Prop.AnimationEffects),i},getContentNavigationMarkerCollections:function(e){var i=this.getProperty(t.Prop.ContentNavigationMarkerCollections,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.ContentNavigationMarkerCollections,i,!1)),i.setObjectProperty(this,t.Prop.ContentNavigationMarkerCollections),i},getStartNode:function(e){return this.getRelationshipFrom(t.Meaning.InteractionModelStartFsmNode,e)},setStartNode:function(e){this.setRelationships(e?[e]:[],t.Meaning.InteractionModelStartFsmNode)},getParentLayoutTree:function(e){return this.getRelationshipTo(t.Meaning.LayoutTreeHasInteractionModel,e)}},W={getName:function(e){return this.getProperty(t.Prop.Name,e)},setName:function(e){this.setProperty(t.Prop.Name,e)},getCanNavigateTo:function(e){return this.getProperty(t.Prop.CanNavigateTo,e)},setCanNavigateTo:function(e){this.setProperty(t.Prop.CanNavigateTo,e)},getAllowDeferredExit:function(e){return this.getProperty(t.Prop.AllowDeferredExit,e)},setAllowDeferredExit:function(e){this.setProperty(t.Prop.AllowDeferredExit,e)},getIsModal:function(e){return this.getProperty(t.Prop.IsModal,e)},setIsModal:function(e){this.setProperty(t.Prop.IsModal,e)},getBehaviors:function(e){return new Flags(t.StateBehaviors,this.getProperty(t.Prop.Behaviors,e))},setBehaviors:function(e){this.setProperty(t.Prop.Behaviors,e.raw())},getStartState:function(e){return this.getRelationshipFrom(t.Meaning.FsmNodePointsToFsmNode,e)},setStartState:function(e){this.setRelationships(e?[e]:[],t.Meaning.FsmNodePointsToFsmNode)},getKeyFrame:function(e){return this.getRelationshipFrom(t.Meaning.FsmNodeHasKeyFrame,e)},setKeyFrame:function(e){this.setRelationships(e?[e]:[],t.Meaning.FsmNodeHasKeyFrame)},getAmbientAnimationSequence:function(e){return this.getRelationshipFrom(t.Meaning.FsmNodeAmbientPointsToAnimationSequence,e)},setAmbientAnimationSequence:function(e){this.setRelationships(e?[e]:[],t.Meaning.FsmNodeAmbientPointsToAnimationSequence)},getExitAnimationSequence:function(e){return this.getRelationshipFrom(t.Meaning.FsmNodeExitPointsToAnimationSequence,e)},setExitAnimationSequence:function(e){this.setRelationships(e?[e]:[],t.Meaning.FsmNodeExitPointsToAnimationSequence)}},K={getName:function(e){return this.getProperty(t.Prop.Name,e)},setName:function(e){this.setProperty(t.Prop.Name,e)},getResetDescendants:function(e){return this.getProperty(t.Prop.ResetDescendants,e)},setResetDescendants:function(e){this.setProperty(t.Prop.ResetDescendants,e)},getAllowBubbling:function(e){return this.getProperty(t.Prop.AllowBubbling,e)},setAllowBubbling:function(e){this.setProperty(t.Prop.AllowBubbling,e)},getPreFetchAnimations:function(e){return this.getProperty(t.Prop.PreFetchAnimations,e)},setPreFetchAnimations:function(e){this.setProperty(t.Prop.PreFetchAnimations,e)},getHistoricallyRelevant:function(e){return this.getProperty(t.Prop.HistoricallyRelevant,e)},setHistoricallyRelevant:function(e){this.setProperty(t.Prop.HistoricallyRelevant,e)},getBehaviors:function(e){return new Flags(t.EdgeBehaviors,this.getProperty(t.Prop.Behaviors,e))},setBehaviors:function(e){this.setProperty(t.Prop.Behaviors,e.raw())},getTarget:function(e){return this.getRelationshipFrom(t.Meaning.FsmEdgePointsToFsmNode,e)},setTarget:function(e){this.setRelationships(e?[e]:[],t.Meaning.FsmEdgePointsToFsmNode)},getTransitionOutAnimationSequence:function(e){return this.getRelationshipFrom(t.Meaning.FsmEdgeOutPointsToAnimationSequence,e)},setTransitionOutAnimationSequence:function(e){this.setRelationships(e?[e]:[],t.Meaning.FsmEdgeOutPointsToAnimationSequence)},getTransitionInAnimationSequence:function(e){return this.getRelationshipFrom(t.Meaning.FsmEdgeInPointsToAnimationSequence,e)},setTransitionInAnimationSequence:function(e){this.setRelationships(e?[e]:[],t.Meaning.FsmEdgeInPointsToAnimationSequence)},getFocusTarget:function(e){return this.getRelationshipFrom(t.Meaning.FsmEdgeHasKeyFrame,e)},setFocusTarget:function(e){this.setRelationships(e?[e]:[],t.Meaning.FsmEdgeHasKeyFrame)},getParentNode:function(e){return this.getRelationshipTo(t.Meaning.FsmNodeHasFsmEdge,e)}},j={getType:function(e){return this.getProperty(t.Prop.Type,e)},setType:function(e){this.setProperty(t.Prop.Type,e)},getMetaData:function(e){var i=this.getProperty(t.Prop.MetaData,e);return null!=i&&i.setObjectProperty(this,t.Prop.MetaData),i},setMetaData:function(e){null!=e&&e.setObjectProperty(this,t.Prop.MetaData),this.setProperty(t.Prop.MetaData,e)},getScrollWidth:function(e){return this.getProperty(t.Prop.ScrollWidth,e)},setScrollWidth:function(e){this.setProperty(t.Prop.ScrollWidth,e)},getScrollHeight:function(e){return this.getProperty(t.Prop.ScrollHeight,e)},setScrollHeight:function(e){this.setProperty(t.Prop.ScrollHeight,e)},getScrollability:function(e){return this.getProperty(t.Prop.Scrollability,e).IntValue},setScrollability:function(e){this.setProperty(t.Prop.Scrollability,new n(e))},setScrollabilityInternal:function(e){this.setProperty(t.Prop.Scrollability,e)},getCoverageMethod:function(e){return this.getProperty(t.Prop.CoverageMethod,e).IntValue},setCoverageMethod:function(e){this.setProperty(t.Prop.CoverageMethod,new n(e))},setCoverageMethodInternal:function(e){this.setProperty(t.Prop.CoverageMethod,e)},getSnapPointsHorizontal:function(e){var i=this.getProperty(t.Prop.SnapPointsHorizontal,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.SnapPointsHorizontal,i,!1)),i.setObjectProperty(this,t.Prop.SnapPointsHorizontal),i},getSnapPointsVertical:function(e){var i=this.getProperty(t.Prop.SnapPointsVertical,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.SnapPointsVertical,i,!1)),i.setObjectProperty(this,t.Prop.SnapPointsVertical),i},getIsDefaultNavigation:function(e){return this.getProperty(t.Prop.IsDefaultNavigation,e)},setIsDefaultNavigation:function(e){this.setProperty(t.Prop.IsDefaultNavigation,e)}},q={getName:function(e){return this.getProperty(t.Prop.Name,e)},setName:function(e){this.setProperty(t.Prop.Name,e)},getAlwaysTryDefaultAction:function(e){return this.getProperty(t.Prop.AlwaysTryDefaultAction,e)},setAlwaysTryDefaultAction:function(e){this.setProperty(t.Prop.AlwaysTryDefaultAction,e)},getClientState:function(e){var i=this.getProperty(t.Prop.ClientState,e);return null!=i&&i.setObjectProperty(this,t.Prop.ClientState),i},setClientState:function(e){null!=e&&e.setObjectProperty(this,t.Prop.ClientState),this.setProperty(t.Prop.ClientState,e)},getBehaviors:function(e){return new Flags(t.TriggerSetBehaviors,this.getProperty(t.Prop.Behaviors,e))},setBehaviors:function(e){this.setProperty(t.Prop.Behaviors,e.raw())}},G={},X={getAction:function(e){return this.getProperty(t.Prop.Action,e).IntValue},setAction:function(e){this.setProperty(t.Prop.Action,new n(e))},setActionInternal:function(e){this.setProperty(t.Prop.Action,e)}},Y={getMethod:function(e){return this.getProperty(t.Prop.Method,e).IntValue},setMethod:function(e){this.setProperty(t.Prop.Method,new n(e))},setMethodInternal:function(e){this.setProperty(t.Prop.Method,e)},getTarget:function(e){return this.getProperty(t.Prop.Target,e).IntValue},setTarget:function(e){this.setProperty(t.Prop.Target,new n(e))},setTargetInternal:function(e){this.setProperty(t.Prop.Target,e)},getKeyNames:function(e){return this.getProperty(t.Prop.KeyNames,e)},setKeyNames:function(e){this.setProperty(t.Prop.KeyNames,e)},getTargetId:function(e){return this.getProperty(t.Prop.TargetId,e)},setTargetId:function(e){this.setProperty(t.Prop.TargetId,e)},getCameraSelect:function(e){return this.getRelationshipFrom(t.Meaning.SelectMethodHasCameraSelect,e)},setCameraSelect:function(e){this.setRelationships(e?[e]:[],t.Meaning.SelectMethodHasCameraSelect)},getTimingSelect:function(e){return this.getRelationshipFrom(t.Meaning.SelectMethodHasTimingSelect,e)},setTimingSelect:function(e){this.setRelationships(e?[e]:[],t.Meaning.SelectMethodHasTimingSelect)}},Z={getTriggerTarget:function(e){return this.getProperty(t.Prop.TriggerTarget,e).IntValue},setTriggerTarget:function(e){this.setProperty(t.Prop.TriggerTarget,new n(e))},setTriggerTargetInternal:function(e){this.setProperty(t.Prop.TriggerTarget,e)},getTriggerTargetId:function(e){return this.getProperty(t.Prop.TriggerTargetId,e)},setTriggerTargetId:function(e){this.setProperty(t.Prop.TriggerTargetId,e)}},$={getDirection:function(e){return this.getProperty(t.Prop.Direction,e).IntValue},setDirection:function(e){this.setProperty(t.Prop.Direction,new n(e))},setDirectionInternal:function(e){this.setProperty(t.Prop.Direction,e)}},J={getSignal:function(e){return this.getRelationshipFrom(t.Meaning.ClientSelectMethodHasClientSignal,e)},setSignal:function(e){this.setRelationships(e?[e]:[],t.Meaning.ClientSelectMethodHasClientSignal)}},Q={},ee={},te={getIsReset:function(e){return this.getProperty(t.Prop.IsReset,e)},setIsReset:function(e){this.setProperty(t.Prop.IsReset,e)}},ie={},ne={getKey:function(e){return this.getProperty(t.Prop.Key,e).IntValue},setKey:function(e){this.setProperty(t.Prop.Key,new n(e))},setKeyInternal:function(e){this.setProperty(t.Prop.Key,e)},getModifier:function(e){return this.getProperty(t.Prop.Modifier,e).IntValue},setModifier:function(e){this.setProperty(t.Prop.Modifier,new n(e))},setModifierInternal:function(e){this.setProperty(t.Prop.Modifier,e)},getKeyDown:function(e){return this.getProperty(t.Prop.KeyDown,e)},setKeyDown:function(e){this.setProperty(t.Prop.KeyDown,e)}},oe={getAction:function(e){return this.getProperty(t.Prop.Action,e).IntValue},setAction:function(e){this.setProperty(t.Prop.Action,new n(e))},setActionInternal:function(e){this.setProperty(t.Prop.Action,e)},getButton:function(e){return this.getProperty(t.Prop.Button,e).IntValue},setButton:function(e){this.setProperty(t.Prop.Button,new n(e))},setButtonInternal:function(e){this.setProperty(t.Prop.Button,e)},getMouseWheelReactionDistance:function(e){return this.getProperty(t.Prop.MouseWheelReactionDistance,e)},setMouseWheelReactionDistance:function(e){this.setProperty(t.Prop.MouseWheelReactionDistance,e)}},re={getAction:function(e){return this.getProperty(t.Prop.Action,e).IntValue},setAction:function(e){this.setProperty(t.Prop.Action,new n(e))},setActionInternal:function(e){this.setProperty(t.Prop.Action,e)},getVisibilityRatio:function(e){return this.getProperty(t.Prop.VisibilityRatio,e)},setVisibilityRatio:function(e){this.setProperty(t.Prop.VisibilityRatio,e)},getViewportScaleX:function(e){return this.getProperty(t.Prop.ViewportScaleX,e)},setViewportScaleX:function(e){this.setProperty(t.Prop.ViewportScaleX,e)},getViewportScaleY:function(e){return this.getProperty(t.Prop.ViewportScaleY,e)},setViewportScaleY:function(e){this.setProperty(t.Prop.ViewportScaleY,e)},getViewportOffsetRatioX:function(e){return this.getProperty(t.Prop.ViewportOffsetRatioX,e)},setViewportOffsetRatioX:function(e){this.setProperty(t.Prop.ViewportOffsetRatioX,e)},getViewportOffsetRatioY:function(e){return this.getProperty(t.Prop.ViewportOffsetRatioY,e)},setViewportOffsetRatioY:function(e){this.setProperty(t.Prop.ViewportOffsetRatioY,e)},getCheckOnEntry:function(e){return this.getProperty(t.Prop.CheckOnEntry,e)},setCheckOnEntry:function(e){this.setProperty(t.Prop.CheckOnEntry,e)}},ae={getAction:function(e){return this.getProperty(t.Prop.Action,e).IntValue},setAction:function(e){this.setProperty(t.Prop.Action,new n(e))},setActionInternal:function(e){this.setProperty(t.Prop.Action,e)},getVisibilityRatio:function(e){return this.getProperty(t.Prop.VisibilityRatio,e)},setVisibilityRatio:function(e){this.setProperty(t.Prop.VisibilityRatio,e)},getViewportScaleX:function(e){return this.getProperty(t.Prop.ViewportScaleX,e)},setViewportScaleX:function(e){this.setProperty(t.Prop.ViewportScaleX,e)},getViewportScaleY:function(e){return this.getProperty(t.Prop.ViewportScaleY,e)},setViewportScaleY:function(e){this.setProperty(t.Prop.ViewportScaleY,e)},getViewportOffsetRatioX:function(e){return this.getProperty(t.Prop.ViewportOffsetRatioX,e)},setViewportOffsetRatioX:function(e){this.setProperty(t.Prop.ViewportOffsetRatioX,e)},getViewportOffsetRatioY:function(e){return this.getProperty(t.Prop.ViewportOffsetRatioY,e)},setViewportOffsetRatioY:function(e){this.setProperty(t.Prop.ViewportOffsetRatioY,e)},getCheckOnEntry:function(e){return this.getProperty(t.Prop.CheckOnEntry,e)},setCheckOnEntry:function(e){this.setProperty(t.Prop.CheckOnEntry,e)}},se={getTime:function(e){return this.getProperty(t.Prop.Time,e)},setTime:function(e){this.setProperty(t.Prop.Time,e)},getVariance:function(e){return this.getProperty(t.Prop.Variance,e)},setVariance:function(e){this.setProperty(t.Prop.Variance,e)},getFireOnStart:function(e){return this.getProperty(t.Prop.FireOnStart,e)},setFireOnStart:function(e){this.setProperty(t.Prop.FireOnStart,e)}},le={getTime:function(e){return this.getProperty(t.Prop.Time,e)},setTime:function(e){this.setProperty(t.Prop.Time,e)},getVariance:function(e){return this.getProperty(t.Prop.Variance,e)},setVariance:function(e){this.setProperty(t.Prop.Variance,e)},getFireOnStart:function(e){return this.getProperty(t.Prop.FireOnStart,e)},setFireOnStart:function(e){this.setProperty(t.Prop.FireOnStart,e)}},ue={getTriggerSet:function(e){return this.getRelationshipFrom(t.Meaning.StatelessRuleHasTriggerSet,e)},setTriggerSet:function(e){this.setRelationships(e?[e]:[],t.Meaning.StatelessRuleHasTriggerSet)},getAnimationSequence:function(e){return this.getRelationshipFrom(t.Meaning.StatelessRuleHasAnimationSequence,e)},setAnimationSequence:function(e){this.setRelationships(e?[e]:[],t.Meaning.StatelessRuleHasAnimationSequence)}},de={getFlags:function(e){return new Flags(t.TransformFlags,this.getProperty(t.Prop.Flags,e))},setFlags:function(e){this.setProperty(t.Prop.Flags,e.raw())}},ce={getValue:function(e){return this.getProperty(t.Prop.Value,e)},setValue:function(e){this.setProperty(t.Prop.Value,e)}},pe={getTranslateX:function(e){return this.getProperty(t.Prop.TranslateX,e)},setTranslateX:function(e){this.setProperty(t.Prop.TranslateX,e)},getTranslateY:function(e){return this.getProperty(t.Prop.TranslateY,e)},setTranslateY:function(e){this.setProperty(t.Prop.TranslateY,e)}},ge={getScaleX:function(e){return this.getProperty(t.Prop.ScaleX,e)},setScaleX:function(e){this.setProperty(t.Prop.ScaleX,e)},getScaleY:function(e){return this.getProperty(t.Prop.ScaleY,e)},setScaleY:function(e){this.setProperty(t.Prop.ScaleY,e)}},he={getValue:function(e){return this.getProperty(t.Prop.Value,e)},setValue:function(e){this.setProperty(t.Prop.Value,e)},getProjectX:function(e){return this.getProperty(t.Prop.ProjectX,e)},setProjectX:function(e){this.setProperty(t.Prop.ProjectX,e)},getProjectY:function(e){return this.getProperty(t.Prop.ProjectY,e)},setProjectY:function(e){this.setProperty(t.Prop.ProjectY,e)},getProjectZ:function(e){return this.getProperty(t.Prop.ProjectZ,e)},setProjectZ:function(e){this.setProperty(t.Prop.ProjectZ,e)}},ye={getTranslateX:function(e){return this.getProperty(t.Prop.TranslateX,e)},setTranslateX:function(e){this.setProperty(t.Prop.TranslateX,e)},getTranslateY:function(e){return this.getProperty(t.Prop.TranslateY,e)},setTranslateY:function(e){this.setProperty(t.Prop.TranslateY,e)},getTranslateZ:function(e){return this.getProperty(t.Prop.TranslateZ,e)},setTranslateZ:function(e){this.setProperty(t.Prop.TranslateZ,e)}},me={getScaleX:function(e){return this.getProperty(t.Prop.ScaleX,e)},setScaleX:function(e){this.setProperty(t.Prop.ScaleX,e)},getScaleY:function(e){return this.getProperty(t.Prop.ScaleY,e)},setScaleY:function(e){this.setProperty(t.Prop.ScaleY,e)},getScaleZ:function(e){return this.getProperty(t.Prop.ScaleZ,e)},setScaleZ:function(e){this.setProperty(t.Prop.ScaleZ,e)}},fe={getContentProxy:function(e){return this.getRelationshipFrom(t.Meaning.LayoutContextLayoutPointsToContentProxy,e)},setContentProxy:function(e){this.setRelationships(e?[e]:[],t.Meaning.LayoutContextLayoutPointsToContentProxy)}},ve={},Se={getAudioPlayerDescriptor:function(e){return this.getProperty(t.Prop.AudioPlayerDescriptor,e)},setAudioPlayerDescriptor:function(e){this.setProperty(t.Prop.AudioPlayerDescriptor,e)},getAudioPlayerType:function(e){return this.getProperty(t.Prop.AudioPlayerType,e).IntValue},setAudioPlayerType:function(e){this.setProperty(t.Prop.AudioPlayerType,new n(e))},setAudioPlayerTypeInternal:function(e){this.setProperty(t.Prop.AudioPlayerType,e)},getClosedCaptionDescriptors:function(e){var i=this.getProperty(t.Prop.ClosedCaptionDescriptors,e);return null==i&&(i=new Ot,this.setProperty(t.Prop.ClosedCaptionDescriptors,i,!1)),i.setObjectProperty(this,t.Prop.ClosedCaptionDescriptors),i}},we={getContent:function(e){return this.getProperty(t.Prop.Content,e)},setContent:function(e){this.setProperty(t.Prop.Content,e)},getLanguage:function(e){return this.getProperty(t.Prop.Language,e)},setLanguage:function(e){this.setProperty(t.Prop.Language,e)}},Te=function(e){function i(t,i,n){var o=e.call(this,null)||this;if(!i.graph.containsObject(t))throw new Error("Object does not exist.");return o.id=t,o.renderModel=i,o.objectType=n,o}return __extends(i,e),i.prototype.getProperty=function(e,t){var i=this;return i.renderModel.graph.getProperty(i.id,e,t)},i.prototype.setProperty=function(e,t,i){void 0===i&&(i=!0);var n=this;n.renderModel.graph.setProperty(n.id,e,t,i)},i.prototype.updateProperty=function(e){var t=this;t.renderModel.graph.updateProperty(t.id,e)},i.prototype.getRelationshipsFrom=function(e,t){var i=this,n=i.renderModel.graph.getObjectsRelatedFrom(i.id,e,t);if(!n)return[];for(var o=n.length,r=[],a=i.renderModel,s=0;s<o;s++)r.push(a.getModelObject(n[s]));return r},i.prototype.getRelationshipsTo=function(e,t){var i=this,n=i.renderModel.graph.getObjectsRelatedTo(i.id,e,t);if(!n)return[];for(var o=n.length,r=[],a=i.renderModel,s=0;s<o;s++)r.push(a.getModelObject(n[s]));return r},i.prototype.getRelationshipFrom=function(e,t){var i=this,n=i.renderModel.graph.getObjectsRelatedFrom(i.id,e,t);if(n&&0!=n.length)return i.renderModel.getModelObject(n[0])},i.prototype.getRelationshipTo=function(e,t){var i=this,n=i.renderModel.graph.getObjectsRelatedTo(i.id,e,t);if(n&&0!=n.length)return i.renderModel.getModelObject(n[0])},i.prototype.addRelationship=function(e,t,i){var n=this;n.renderModel.graph.addRelationship(n.id,e.id,t,i)},i.prototype.removeRelationship=function(e,t){var i=this;i.renderModel.graph.removeRelationship(i.id,e.id,t)},i.prototype.setRelationships=function(e,t){for(var i=this,n=e.length,o=[],r=0;r<n;r++)o.push(e[r].id);i.renderModel.graph.setRelationships(i.id,o,t)},i.prototype.getExternalDataId=function(e){var i=this,n=i.renderModel.graph,o=n.getObjectsRelatedFrom(i.id,t.Meaning.ExternalData,e);return o&&o.length>0?n.getExternalDataId(o[0]):void 0},i}(DisposableObjectOM);t.ModelObject=Te;var Ce=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.RenderModelRoot)||this;return o.model=n.renderModelRoot,o.layoutTrees=new xt(o,t.Meaning.RenderModelRootHasLayoutTree),o.toCElements=new xt(o,t.Meaning.RenderModelRootHasToCElement),o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.RenderModelRoot,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.RenderModelRoot],e[i.id]=!0,n.layoutStyleId=i.getLayoutStyleId(),n.styleVersion=i.getStyleVersion(),n.worldVersion=i.getWorldVersion(),n.editVersion=i.getEditVersion(),n.remoteDesignObjects=i.getRemoteDesignObjects(),n.title=i.getTitle(),n.culture=i.getCulture(),null!=i.getPaletteColors()&&(n.paletteColors=i.getPaletteColors().serialize()),null!=i.getDefaultViewOptions()&&(n.defaultViewOptions=i.getDefaultViewOptions().serialize()),null!=i.getCurrentViewOptions()&&(n.currentViewOptions=i.getCurrentViewOptions().serialize()),null!=i.getStoryboards()&&(n.storyboards=i.getStoryboards().serialize()),n.rTL=i.getRTL(),n.forceNativeScrolling=i.getForceNativeScrolling(),null!=i.getAutoPlaySettings()&&(n.autoPlaySettings=i.getAutoPlaySettings().serialize()),n.layoutTrees=i.layoutTrees.serialize(e),n.toCElements=i.toCElements.serialize(e),n)},n.Deserialize=function(e,t,n){var o=t.id;if(n&&(n[t.id]||(n[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),o=n[t.id]),t.ref)return e.getModelObject(o);var r=e.getModelObject("RenderRoot");return void 0!==t.layoutStyleId&&r.setLayoutStyleId(t.layoutStyleId),void 0!==t.styleVersion&&r.setStyleVersion(t.styleVersion),void 0!==t.worldVersion&&r.setWorldVersion(t.worldVersion),void 0!==t.editVersion&&r.setEditVersion(t.editVersion),void 0!==t.remoteDesignObjects&&r.setRemoteDesignObjects(t.remoteDesignObjects),void 0!==t.title&&r.setTitle(t.title),void 0!==t.culture&&r.setCulture(t.culture),void 0!==t.paletteColors&&r.getPaletteColors().deserializeStructCollection(t.paletteColors,Mi.Deserialize),void 0!==t.defaultViewOptions&&r.setDefaultViewOptions(qi.Deserialize(t.defaultViewOptions)),void 0!==t.currentViewOptions&&r.setCurrentViewOptions(qi.Deserialize(t.currentViewOptions)),void 0!==t.storyboards&&r.getStoryboards().deserializeStructCollection(t.storyboards,Yi.Deserialize),void 0!==t.rTL&&r.setRTL(t.rTL),void 0!==t.forceNativeScrolling&&r.setForceNativeScrolling(t.forceNativeScrolling),void 0!==t.autoPlaySettings&&r.setAutoPlaySettings(Gi.Deserialize(t.autoPlaySettings)),void 0!==t.layoutTrees&&r.layoutTrees.deserialize(t.layoutTrees,n),void 0!==t.toCElements&&r.toCElements.deserialize(t.toCElements,n),r},n}(Te);t.RenderModelRoot=Ce,o(Ce,r);var _e=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.ToCElement)||this;return o.model=n.renderModelRoot,o.children=new xt(o,t.Meaning.ToCElementHasToCElement),o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ToCElement,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.ToCElement],e[i.id]=!0,n.navigationTargetId=i.getNavigationTargetId(),n.title=i.getTitle(),n.subTitle=i.getSubTitle(),void 0!==i.getBackground()&&(n.background=i.getBackground().serialize(e)),n.children=i.children.serialize(e),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.ToCElement,r),s=e.getModelObject(a);return void 0!==n.navigationTargetId&&s.setNavigationTargetId(n.navigationTargetId),void 0!==n.title&&s.setTitle(n.title),void 0!==n.subTitle&&s.setSubTitle(n.subTitle),void 0!==n.background&&s.setBackground(e.deserialize(n.background,o)),void 0!==n.children&&s.children.deserialize(n.children,o),s},n}(Te);t.ToCElement=_e,o(_e,a);var be=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.ToCBackgroundElement)||this;return o.model=n.renderModelRoot,o.imageCrop=new Mt(o,t.Prop.ImageCropLeft,t.Prop.ImageCropTop,t.Prop.ImageCropWidth,t.Prop.ImageCropHeight),o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ToCBackgroundElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.ToCBackgroundElement],e[i.id]=!0,n.imageId=i.getImageId(),n.imageUrl=i.getImageUrl(),n.imageOriginalWidth=i.getImageOriginalWidth(),n.imageOriginalHeight=i.getImageOriginalHeight(),n.imageCrop={left:i.imageCrop.getLeft(),top:i.imageCrop.getTop(),width:i.imageCrop.getWidth(),height:i.imageCrop.getHeight()},n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var o=i.getProperty(t.Prop.ContentType);-1===o.IntValue?n.contentType=o.StringValue:n.contentType=t.ContentType[o.IntValue],n.flags=i.getFlags().serialize();var r=i.getProperty(t.Prop.Cursor);return-1===r.IntValue?n.cursor=r.StringValue:n.cursor=t.Cursor[r.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.ToCBackgroundElement,a),l=e.getModelObject(s);if(void 0!==o.imageId&&l.setImageId(o.imageId),void 0!==o.imageUrl&&l.setImageUrl(o.imageUrl),void 0!==o.imageOriginalWidth&&l.setImageOriginalWidth(o.imageOriginalWidth),void 0!==o.imageOriginalHeight&&l.setImageOriginalHeight(o.imageOriginalHeight),void 0!==o.imageCrop&&(l.imageCrop.setLeft(o.imageCrop.left),l.imageCrop.setTop(o.imageCrop.top),l.imageCrop.setWidth(o.imageCrop.width),l.imageCrop.setHeight(o.imageCrop.height)),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.ToCBackgroundElement=be,o(be,T),o(be,d),o(be,u),o(be,s);var Ae=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.LayoutTree)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.LayoutTree,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.LayoutTree],e[i.id]=!0;var o=i.getProperty(t.Prop.Device);return-1===o.IntValue?n.device=o.StringValue:n.device=t.ClientDevice[o.IntValue],n.viewportHeight=i.getViewportHeight(),n.viewportWidth=i.getViewportWidth(),n.layoutFailed=i.getLayoutFailed(),n.errorMessage=i.getErrorMessage(),null!=i.getTextStyles()&&(n.textStyles=i.getTextStyles().serialize()),void 0!==i.getRootContainer()&&(n.rootContainer=i.getRootContainer().serialize(e)),void 0!==i.getInteractionModel()&&(n.interactionModel=i.getInteractionModel().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.LayoutTree,a),l=e.getModelObject(s);if(void 0!==o.device){var u=t.ClientDevice[o.device];void 0!==u?l.setDeviceInternal(new n(u)):l.setDeviceInternal(new n(o.device))}return void 0!==o.viewportHeight&&l.setViewportHeight(o.viewportHeight),void 0!==o.viewportWidth&&l.setViewportWidth(o.viewportWidth),void 0!==o.layoutFailed&&l.setLayoutFailed(o.layoutFailed),void 0!==o.errorMessage&&l.setErrorMessage(o.errorMessage),void 0!==o.textStyles&&l.getTextStyles().deserializeStructCollection(o.textStyles,xi.Deserialize),void 0!==o.rootContainer&&l.setRootContainer(e.deserialize(o.rootContainer,r)),void 0!==o.interactionModel&&l.setInteractionModel(e.deserialize(o.interactionModel,r)),l},o}(Te);t.LayoutTree=Ae,o(Ae,l);var Pe=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.ContainerLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.children=new xt(o,t.Meaning.ContainerLayoutElementHasLayoutElement),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ContainerLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.ContainerLayoutElement],e[i.id]=!0,n.type=i.getType();var o=i.getProperty(t.Prop.ContainerType);-1===o.IntValue?n.containerType=o.StringValue:n.containerType=t.LayoutContainerType[o.IntValue];var r=i.getProperty(t.Prop.Scrollability);-1===r.IntValue?n.scrollability=r.StringValue:n.scrollability=t.LayoutScrollability[r.IntValue],n.overflow=i.getOverflow(),n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var a=i.getProperty(t.Prop.ContentType);-1===a.IntValue?n.contentType=a.StringValue:n.contentType=t.ContentType[a.IntValue],n.flags=i.getFlags().serialize();var s=i.getProperty(t.Prop.Cursor);return-1===s.IntValue?n.cursor=s.StringValue:n.cursor=t.Cursor[s.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),n.children=i.children.serialize(e),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.ContainerLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.type&&l.setType(o.type),void 0!==o.containerType&&(void 0!==(u=t.LayoutContainerType[o.containerType])?l.setContainerTypeInternal(new n(u)):l.setContainerTypeInternal(new n(o.containerType))),void 0!==o.scrollability&&(void 0!==(u=t.LayoutScrollability[o.scrollability])?l.setScrollabilityInternal(new n(u)):l.setScrollabilityInternal(new n(o.scrollability))),void 0!==o.overflow&&l.setOverflow(o.overflow),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.children&&l.children.deserialize(o.children,r),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.ContainerLayoutElement=Pe,o(Pe,d),o(Pe,u),o(Pe,c);var Ie=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.PanelLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.children=new xt(o,t.Meaning.ContainerLayoutElementHasLayoutElement),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.PanelLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.PanelLayoutElement],e[i.id]=!0,n.type=i.getType();var o=i.getProperty(t.Prop.ContainerType);-1===o.IntValue?n.containerType=o.StringValue:n.containerType=t.LayoutContainerType[o.IntValue];var r=i.getProperty(t.Prop.Scrollability);-1===r.IntValue?n.scrollability=r.StringValue:n.scrollability=t.LayoutScrollability[r.IntValue],n.overflow=i.getOverflow(),n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var a=i.getProperty(t.Prop.ContentType);-1===a.IntValue?n.contentType=a.StringValue:n.contentType=t.ContentType[a.IntValue],n.flags=i.getFlags().serialize();var s=i.getProperty(t.Prop.Cursor);return-1===s.IntValue?n.cursor=s.StringValue:n.cursor=t.Cursor[s.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),n.children=i.children.serialize(e),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.PanelLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.type&&l.setType(o.type),void 0!==o.containerType&&(void 0!==(u=t.LayoutContainerType[o.containerType])?l.setContainerTypeInternal(new n(u)):l.setContainerTypeInternal(new n(o.containerType))),void 0!==o.scrollability&&(void 0!==(u=t.LayoutScrollability[o.scrollability])?l.setScrollabilityInternal(new n(u)):l.setScrollabilityInternal(new n(o.scrollability))),void 0!==o.overflow&&l.setOverflow(o.overflow),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.children&&l.children.deserialize(o.children,r),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.PanelLayoutElement=Ie,o(Ie,c),o(Ie,d),o(Ie,u),o(Ie,p);var Ee=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.RegionLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.children=new xt(o,t.Meaning.ContainerLayoutElementHasLayoutElement),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.RegionLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.RegionLayoutElement],e[i.id]=!0,n.type=i.getType();var o=i.getProperty(t.Prop.ContainerType);-1===o.IntValue?n.containerType=o.StringValue:n.containerType=t.LayoutContainerType[o.IntValue];var r=i.getProperty(t.Prop.Scrollability);-1===r.IntValue?n.scrollability=r.StringValue:n.scrollability=t.LayoutScrollability[r.IntValue],n.overflow=i.getOverflow(),n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var a=i.getProperty(t.Prop.ContentType);-1===a.IntValue?n.contentType=a.StringValue:n.contentType=t.ContentType[a.IntValue],n.flags=i.getFlags().serialize();var s=i.getProperty(t.Prop.Cursor);return-1===s.IntValue?n.cursor=s.StringValue:n.cursor=t.Cursor[s.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),n.children=i.children.serialize(e),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.RegionLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.type&&l.setType(o.type),void 0!==o.containerType&&(void 0!==(u=t.LayoutContainerType[o.containerType])?l.setContainerTypeInternal(new n(u)):l.setContainerTypeInternal(new n(o.containerType))),void 0!==o.scrollability&&(void 0!==(u=t.LayoutScrollability[o.scrollability])?l.setScrollabilityInternal(new n(u)):l.setScrollabilityInternal(new n(o.scrollability))),void 0!==o.overflow&&l.setOverflow(o.overflow),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.children&&l.children.deserialize(o.children,r),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.RegionLayoutElement=Ee,o(Ee,c),o(Ee,d),o(Ee,u),o(Ee,g);var De=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.MediaViewportLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.children=new xt(o,t.Meaning.ContainerLayoutElementHasLayoutElement),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.MediaViewportLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.MediaViewportLayoutElement],e[i.id]=!0,n.type=i.getType();var o=i.getProperty(t.Prop.ContainerType);-1===o.IntValue?n.containerType=o.StringValue:n.containerType=t.LayoutContainerType[o.IntValue];var r=i.getProperty(t.Prop.Scrollability);-1===r.IntValue?n.scrollability=r.StringValue:n.scrollability=t.LayoutScrollability[r.IntValue],n.overflow=i.getOverflow(),n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var a=i.getProperty(t.Prop.ContentType);-1===a.IntValue?n.contentType=a.StringValue:n.contentType=t.ContentType[a.IntValue],n.flags=i.getFlags().serialize();var s=i.getProperty(t.Prop.Cursor);return-1===s.IntValue?n.cursor=s.StringValue:n.cursor=t.Cursor[s.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),n.children=i.children.serialize(e),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.MediaViewportLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.type&&l.setType(o.type),void 0!==o.containerType&&(void 0!==(u=t.LayoutContainerType[o.containerType])?l.setContainerTypeInternal(new n(u)):l.setContainerTypeInternal(new n(o.containerType))),void 0!==o.scrollability&&(void 0!==(u=t.LayoutScrollability[o.scrollability])?l.setScrollabilityInternal(new n(u)):l.setScrollabilityInternal(new n(o.scrollability))),void 0!==o.overflow&&l.setOverflow(o.overflow),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.children&&l.children.deserialize(o.children,r),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.MediaViewportLayoutElement=De,o(De,c),o(De,d),o(De,u),o(De,h);var Be=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.TextRunElement)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.TextRunElement,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.TextRunElement],e[i.id]=!0,n.text=i.getText(),n.fontKey=i.getFontKey(),n.textColorName=i.getTextColorName(),n.textOpacityOverride=i.getTextOpacityOverride(),n.textColorOverride=i.getTextColorOverride(),n.textShadowXOff=i.getTextShadowXOff(),n.textShadowYOff=i.getTextShadowYOff(),n.textShadowBlur=i.getTextShadowBlur(),n.textShadowColor=i.getTextShadowColor(),n.hyperlinkUri=i.getHyperlinkUri(),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.TextRunElement,r),s=e.getModelObject(a);return void 0!==n.text&&s.setText(n.text),void 0!==n.fontKey&&s.setFontKey(n.fontKey),void 0!==n.textColorName&&s.setTextColorName(n.textColorName),void 0!==n.textOpacityOverride&&s.setTextOpacityOverride(n.textOpacityOverride),void 0!==n.textColorOverride&&s.setTextColorOverride(n.textColorOverride),void 0!==n.textShadowXOff&&s.setTextShadowXOff(n.textShadowXOff),void 0!==n.textShadowYOff&&s.setTextShadowYOff(n.textShadowYOff),void 0!==n.textShadowBlur&&s.setTextShadowBlur(n.textShadowBlur),void 0!==n.textShadowColor&&s.setTextShadowColor(n.textShadowColor),void 0!==n.hyperlinkUri&&s.setHyperlinkUri(n.hyperlinkUri),s},n}(Te);t.TextRunElement=Be,o(Be,y);var Ve=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.TextBlockLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.TextBlockLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.TextBlockLayoutElement],e[i.id]=!0,n.textStyleId=i.getTextStyleId(),n.textColorId=i.getTextColorId(),n.lineHeight=i.getLineHeight(),n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var o=i.getProperty(t.Prop.ContentType);-1===o.IntValue?n.contentType=o.StringValue:n.contentType=t.ContentType[o.IntValue],n.flags=i.getFlags().serialize();var r=i.getProperty(t.Prop.Cursor);return-1===r.IntValue?n.cursor=r.StringValue:n.cursor=t.Cursor[r.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getSectionList()&&(n.sectionList=i.getSectionList().serialize(e)),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.TextBlockLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.textStyleId&&l.setTextStyleId(o.textStyleId),void 0!==o.textColorId&&l.setTextColorId(o.textColorId),void 0!==o.lineHeight&&l.setLineHeight(o.lineHeight),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.sectionList&&l.setSectionList(e.deserialize(o.sectionList,r)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.TextBlockLayoutElement=Ve,o(Ve,d),o(Ve,u),o(Ve,m);var Me=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.TextSection)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.TextSection,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.TextSection],e[i.id]=!0,n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.TextSection,r);return e.getModelObject(a)},n}(Te);t.TextSection=Me,o(Me,f);var Le=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.TextParagraph)||this;return o.model=n.renderModelRoot,o.runs=new xt(o,t.Meaning.TextParagraphHasTextRunElement),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.TextParagraph,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.TextParagraph],e[i.id]=!0,n.spacingAfter=i.getSpacingAfter();var o=i.getProperty(t.Prop.ParagraphStyle);-1===o.IntValue?n.paragraphStyle=o.StringValue:n.paragraphStyle=t.ParagraphStyle[o.IntValue];var r=i.getProperty(t.Prop.Direction);return-1===r.IntValue?n.direction=r.StringValue:n.direction=t.TextDirection[r.IntValue],n.isPullQuote=i.getIsPullQuote(),n.runs=i.runs.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.TextParagraph,a),l=e.getModelObject(s);if(void 0!==o.spacingAfter&&l.setSpacingAfter(o.spacingAfter),void 0!==o.paragraphStyle&&(void 0!==(u=t.ParagraphStyle[o.paragraphStyle])?l.setParagraphStyleInternal(new n(u)):l.setParagraphStyleInternal(new n(o.paragraphStyle))),void 0!==o.direction){var u=t.TextDirection[o.direction];void 0!==u?l.setDirectionInternal(new n(u)):l.setDirectionInternal(new n(o.direction))}return void 0!==o.isPullQuote&&l.setIsPullQuote(o.isPullQuote),void 0!==o.runs&&l.runs.deserialize(o.runs,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.TextParagraph=Le,o(Le,f),o(Le,v);var ke=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.TextList)||this;return o.model=n.renderModelRoot,o.children=new xt(o,t.Meaning.TextListHasTextSection),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.TextList,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.TextList],e[i.id]=!0;var o=i.getProperty(t.Prop.Style);-1===o.IntValue?n.style=o.StringValue:n.style=t.ListStyle[o.IntValue],n.startNum=i.getStartNum();var r=i.getProperty(t.Prop.Direction);return-1===r.IntValue?n.direction=r.StringValue:n.direction=t.TextDirection[r.IntValue],n.children=i.children.serialize(e),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.TextList,a),l=e.getModelObject(s);if(void 0!==o.style&&(void 0!==(u=t.ListStyle[o.style])?l.setStyleInternal(new n(u)):l.setStyleInternal(new n(o.style))),void 0!==o.startNum&&l.setStartNum(o.startNum),void 0!==o.direction){var u=t.TextDirection[o.direction];void 0!==u?l.setDirectionInternal(new n(u)):l.setDirectionInternal(new n(o.direction))}return void 0!==o.children&&l.children.deserialize(o.children,r),l},o}(Te);t.TextList=ke,o(ke,f),o(ke,S);var xe=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.DecorationLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.DecorationLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.DecorationLayoutElement],e[i.id]=!0,n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var o=i.getProperty(t.Prop.ContentType);-1===o.IntValue?n.contentType=o.StringValue:n.contentType=t.ContentType[o.IntValue],n.flags=i.getFlags().serialize();var r=i.getProperty(t.Prop.Cursor);return-1===r.IntValue?n.cursor=r.StringValue:n.cursor=t.Cursor[r.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.DecorationLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.DecorationLayoutElement=xe,o(xe,d),o(xe,u),o(xe,w);var Re=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.ImageLayoutElement)||this;return o.model=n.renderModelRoot,o.imageCrop=new Mt(o,t.Prop.ImageCropLeft,t.Prop.ImageCropTop,t.Prop.ImageCropWidth,t.Prop.ImageCropHeight),o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ImageLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.ImageLayoutElement],e[i.id]=!0,n.filterColorName=i.getFilterColorName(),null!=i.getLivingImageMediaElements()&&(n.livingImageMediaElements=i.getLivingImageMediaElements().serialize());var o=i.getProperty(t.Prop.RichImagePlayerType);-1===o.IntValue?n.richImagePlayerType=o.StringValue:n.richImagePlayerType=t.RichImagePlayerType[o.IntValue],n.filterEffects=i.getFilterEffects(),n.imageId=i.getImageId(),n.imageUrl=i.getImageUrl(),n.imageOriginalWidth=i.getImageOriginalWidth(),n.imageOriginalHeight=i.getImageOriginalHeight(),n.imageCrop={left:i.imageCrop.getLeft(),top:i.imageCrop.getTop(),width:i.imageCrop.getWidth(),height:i.imageCrop.getHeight()},n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var r=i.getProperty(t.Prop.ContentType);-1===r.IntValue?n.contentType=r.StringValue:n.contentType=t.ContentType[r.IntValue],n.flags=i.getFlags().serialize();var a=i.getProperty(t.Prop.Cursor);return-1===a.IntValue?n.cursor=a.StringValue:n.cursor=t.Cursor[a.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getPath()&&(n.path=i.getPath().serialize(e)),void 0!==i.getFilterPath()&&(n.filterPath=i.getFilterPath().serialize(e)),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.ImageLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.filterColorName&&l.setFilterColorName(o.filterColorName),void 0!==o.livingImageMediaElements&&l.getLivingImageMediaElements().deserializeStructCollection(o.livingImageMediaElements,ji.Deserialize),void 0!==o.richImagePlayerType&&(void 0!==(u=t.RichImagePlayerType[o.richImagePlayerType])?l.setRichImagePlayerTypeInternal(new n(u)):l.setRichImagePlayerTypeInternal(new n(o.richImagePlayerType))),void 0!==o.filterEffects&&l.setFilterEffects(o.filterEffects),void 0!==o.imageId&&l.setImageId(o.imageId),void 0!==o.imageUrl&&l.setImageUrl(o.imageUrl),void 0!==o.imageOriginalWidth&&l.setImageOriginalWidth(o.imageOriginalWidth),void 0!==o.imageOriginalHeight&&l.setImageOriginalHeight(o.imageOriginalHeight),void 0!==o.imageCrop&&(l.imageCrop.setLeft(o.imageCrop.left),l.imageCrop.setTop(o.imageCrop.top),l.imageCrop.setWidth(o.imageCrop.width),l.imageCrop.setHeight(o.imageCrop.height)),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.path&&l.setPath(e.deserialize(o.path,r)),void 0!==o.filterPath&&l.setFilterPath(e.deserialize(o.filterPath,r)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.ImageLayoutElement=Re,o(Re,T),o(Re,d),o(Re,u),o(Re,C);var Oe=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.VideoLayoutElement)||this;return o.model=n.renderModelRoot,o.imageCrop=new Mt(o,t.Prop.ImageCropLeft,t.Prop.ImageCropTop,t.Prop.ImageCropWidth,t.Prop.ImageCropHeight),o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.VideoLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.VideoLayoutElement],e[i.id]=!0,n.videoPlayerDescriptor=i.getVideoPlayerDescriptor();var o=i.getProperty(t.Prop.VideoPlayerType);-1===o.IntValue?n.videoPlayerType=o.StringValue:n.videoPlayerType=t.VideoPlayerType[o.IntValue],null!=i.getClosedCaptionDescriptors()&&(n.closedCaptionDescriptors=i.getClosedCaptionDescriptors().serialize()),n.imageId=i.getImageId(),n.imageUrl=i.getImageUrl(),n.imageOriginalWidth=i.getImageOriginalWidth(),n.imageOriginalHeight=i.getImageOriginalHeight(),n.imageCrop={left:i.imageCrop.getLeft(),top:i.imageCrop.getTop(),width:i.imageCrop.getWidth(),height:i.imageCrop.getHeight()},n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var r=i.getProperty(t.Prop.ContentType);-1===r.IntValue?n.contentType=r.StringValue:n.contentType=t.ContentType[r.IntValue],n.flags=i.getFlags().serialize();var a=i.getProperty(t.Prop.Cursor);return-1===a.IntValue?n.cursor=a.StringValue:n.cursor=t.Cursor[a.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.VideoLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.videoPlayerDescriptor&&l.setVideoPlayerDescriptor(o.videoPlayerDescriptor),void 0!==o.videoPlayerType&&(void 0!==(u=t.VideoPlayerType[o.videoPlayerType])?l.setVideoPlayerTypeInternal(new n(u)):l.setVideoPlayerTypeInternal(new n(o.videoPlayerType))),void 0!==o.closedCaptionDescriptors&&l.getClosedCaptionDescriptors().deserializeStructCollection(o.closedCaptionDescriptors,Xi.Deserialize),void 0!==o.imageId&&l.setImageId(o.imageId),void 0!==o.imageUrl&&l.setImageUrl(o.imageUrl),void 0!==o.imageOriginalWidth&&l.setImageOriginalWidth(o.imageOriginalWidth),void 0!==o.imageOriginalHeight&&l.setImageOriginalHeight(o.imageOriginalHeight),void 0!==o.imageCrop&&(l.imageCrop.setLeft(o.imageCrop.left),l.imageCrop.setTop(o.imageCrop.top),l.imageCrop.setWidth(o.imageCrop.width),l.imageCrop.setHeight(o.imageCrop.height)),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.VideoLayoutElement=Oe,o(Oe,T),o(Oe,d),o(Oe,u),o(Oe,_);var Fe=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.MapLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.children=new xt(o,t.Meaning.ContainerLayoutElementHasLayoutElement),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.MapLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.MapLayoutElement],e[i.id]=!0,null!=i.getPins()&&(n.pins=i.getPins().serialize()),n.type=i.getType();var o=i.getProperty(t.Prop.ContainerType);-1===o.IntValue?n.containerType=o.StringValue:n.containerType=t.LayoutContainerType[o.IntValue];var r=i.getProperty(t.Prop.Scrollability);-1===r.IntValue?n.scrollability=r.StringValue:n.scrollability=t.LayoutScrollability[r.IntValue],n.overflow=i.getOverflow(),n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var a=i.getProperty(t.Prop.ContentType);-1===a.IntValue?n.contentType=a.StringValue:n.contentType=t.ContentType[a.IntValue],n.flags=i.getFlags().serialize();var s=i.getProperty(t.Prop.Cursor);return-1===s.IntValue?n.cursor=s.StringValue:n.cursor=t.Cursor[s.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),n.children=i.children.serialize(e),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.MapLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.pins&&l.getPins().deserializeStructCollection(o.pins,Vi.Deserialize),void 0!==o.type&&l.setType(o.type),void 0!==o.containerType&&(void 0!==(u=t.LayoutContainerType[o.containerType])?l.setContainerTypeInternal(new n(u)):l.setContainerTypeInternal(new n(o.containerType))),void 0!==o.scrollability&&(void 0!==(u=t.LayoutScrollability[o.scrollability])?l.setScrollabilityInternal(new n(u)):l.setScrollabilityInternal(new n(o.scrollability))),void 0!==o.overflow&&l.setOverflow(o.overflow),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.children&&l.children.deserialize(o.children,r),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.MapLayoutElement=Fe,o(Fe,c),o(Fe,d),o(Fe,u),o(Fe,b);var Ue=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.ProjectionLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ProjectionLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.ProjectionLayoutElement],e[i.id]=!0,n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var o=i.getProperty(t.Prop.ContentType);-1===o.IntValue?n.contentType=o.StringValue:n.contentType=t.ContentType[o.IntValue],n.flags=i.getFlags().serialize();var r=i.getProperty(t.Prop.Cursor);return-1===r.IntValue?n.cursor=r.StringValue:n.cursor=t.Cursor[r.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getScene3D()&&(n.scene3D=i.getScene3D().serialize(e)),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.ProjectionLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.scene3D&&l.setScene3D(e.deserialize(o.scene3D,r)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.ProjectionLayoutElement=Ue,o(Ue,d),o(Ue,u),o(Ue,A);var Ne=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.ViewportLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ViewportLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.ViewportLayoutElement],e[i.id]=!0;var o=i.getProperty(t.Prop.HorizontalAlignment);-1===o.IntValue?n.horizontalAlignment=o.StringValue:n.horizontalAlignment=t.Alignment[o.IntValue];var r=i.getProperty(t.Prop.VerticalAlignment);-1===r.IntValue?n.verticalAlignment=r.StringValue:n.verticalAlignment=t.Alignment[r.IntValue];var a=i.getProperty(t.Prop.ContentStretch);-1===a.IntValue?n.contentStretch=a.StringValue:n.contentStretch=t.ContentStretch[a.IntValue];var s=i.getProperty(t.Prop.BackgroundType);-1===s.IntValue?n.backgroundType=s.StringValue:n.backgroundType=t.ViewportBackgroundType[s.IntValue],n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var l=i.getProperty(t.Prop.ContentType);-1===l.IntValue?n.contentType=l.StringValue:n.contentType=t.ContentType[l.IntValue],n.flags=i.getFlags().serialize();var u=i.getProperty(t.Prop.Cursor);return-1===u.IntValue?n.cursor=u.StringValue:n.cursor=t.Cursor[u.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getChild()&&(n.child=i.getChild().serialize(e)),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.ViewportLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.horizontalAlignment&&(void 0!==(u=t.Alignment[o.horizontalAlignment])?l.setHorizontalAlignmentInternal(new n(u)):l.setHorizontalAlignmentInternal(new n(o.horizontalAlignment))),void 0!==o.verticalAlignment&&(void 0!==(u=t.Alignment[o.verticalAlignment])?l.setVerticalAlignmentInternal(new n(u)):l.setVerticalAlignmentInternal(new n(o.verticalAlignment))),void 0!==o.contentStretch&&(void 0!==(u=t.ContentStretch[o.contentStretch])?l.setContentStretchInternal(new n(u)):l.setContentStretchInternal(new n(o.contentStretch))),void 0!==o.backgroundType&&(void 0!==(u=t.ViewportBackgroundType[o.backgroundType])?l.setBackgroundTypeInternal(new n(u)):l.setBackgroundTypeInternal(new n(o.backgroundType))),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.child&&l.setChild(e.deserialize(o.child,r)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.ViewportLayoutElement=Ne,o(Ne,d),o(Ne,u),o(Ne,P);var ze=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.EmbedLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.EmbedLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.EmbedLayoutElement],e[i.id]=!0,n.embedSourceUrl=i.getEmbedSourceUrl(),n.height=i.getHeight(),n.width=i.getWidth(),n.allowFullScreen=i.getAllowFullScreen();var o=i.getProperty(t.Prop.Scrolling);-1===o.IntValue?n.scrolling=o.StringValue:n.scrolling=t.EmbedScrolling[o.IntValue],n.shouldScale=i.getShouldScale(),n.sandboxed=i.getSandboxed(),n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var r=i.getProperty(t.Prop.ContentType);-1===r.IntValue?n.contentType=r.StringValue:n.contentType=t.ContentType[r.IntValue],n.flags=i.getFlags().serialize();var a=i.getProperty(t.Prop.Cursor);return-1===a.IntValue?n.cursor=a.StringValue:n.cursor=t.Cursor[a.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.EmbedLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.embedSourceUrl&&l.setEmbedSourceUrl(o.embedSourceUrl),void 0!==o.height&&l.setHeight(o.height),void 0!==o.width&&l.setWidth(o.width),void 0!==o.allowFullScreen&&l.setAllowFullScreen(o.allowFullScreen),void 0!==o.scrolling&&(void 0!==(u=t.EmbedScrolling[o.scrolling])?l.setScrollingInternal(new n(u)):l.setScrollingInternal(new n(o.scrolling))),void 0!==o.shouldScale&&l.setShouldScale(o.shouldScale),void 0!==o.sandboxed&&l.setSandboxed(o.sandboxed),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.EmbedLayoutElement=ze,o(ze,d),o(ze,u),o(ze,I);var He=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.ClientLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ClientLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.ClientLayoutElement],e[i.id]=!0;var o=i.getProperty(t.Prop.ClientRecipe);-1===o.IntValue?n.clientRecipe=o.StringValue:n.clientRecipe=t.ClientRecipe[o.IntValue],n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var r=i.getProperty(t.Prop.ContentType);-1===r.IntValue?n.contentType=r.StringValue:n.contentType=t.ContentType[r.IntValue],n.flags=i.getFlags().serialize();var a=i.getProperty(t.Prop.Cursor);return-1===a.IntValue?n.cursor=a.StringValue:n.cursor=t.Cursor[a.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.ClientLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.clientRecipe&&(void 0!==(u=t.ClientRecipe[o.clientRecipe])?l.setClientRecipeInternal(new n(u)):l.setClientRecipeInternal(new n(o.clientRecipe))),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.ClientLayoutElement=He,o(He,d),o(He,u),o(He,E);var We=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.AgaveLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.AgaveLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.AgaveLayoutElement],e[i.id]=!0,n.agaveId=i.getAgaveId(),n.manifest=i.getManifest(),n.agaveData=i.getAgaveData(),n.agaveSettings=i.getAgaveSettings(),n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var o=i.getProperty(t.Prop.ContentType);-1===o.IntValue?n.contentType=o.StringValue:n.contentType=t.ContentType[o.IntValue],n.flags=i.getFlags().serialize();var r=i.getProperty(t.Prop.Cursor);return-1===r.IntValue?n.cursor=r.StringValue:n.cursor=t.Cursor[r.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.AgaveLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.agaveId&&l.setAgaveId(o.agaveId),void 0!==o.manifest&&l.setManifest(o.manifest),void 0!==o.agaveData&&l.setAgaveData(o.agaveData),void 0!==o.agaveSettings&&l.setAgaveSettings(o.agaveSettings),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.AgaveLayoutElement=We,o(We,d),o(We,u),o(We,D);var Ke=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.StatusUpdateLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.StatusUpdateLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.StatusUpdateLayoutElement],e[i.id]=!0,n.sourceId=i.getSourceId(),n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var o=i.getProperty(t.Prop.ContentType);-1===o.IntValue?n.contentType=o.StringValue:n.contentType=t.ContentType[o.IntValue],n.flags=i.getFlags().serialize();var r=i.getProperty(t.Prop.Cursor);return-1===r.IntValue?n.cursor=r.StringValue:n.cursor=t.Cursor[r.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.StatusUpdateLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.sourceId&&l.setSourceId(o.sourceId),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.StatusUpdateLayoutElement=Ke,o(Ke,d),o(Ke,u),o(Ke,B);var je=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.ContainerSceneGraphElement)||this;return o.model=n.renderModelRoot,o.children=new xt(o,t.Meaning.ContainerSceneGraphElementHasSceneGraphElement),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ContainerSceneGraphElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.ContainerSceneGraphElement],e[i.id]=!0,n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var o=i.getProperty(t.Prop.ContentType);-1===o.IntValue?n.contentType=o.StringValue:n.contentType=t.ContentType[o.IntValue],n.flags=i.getFlags().serialize();var r=i.getProperty(t.Prop.Cursor);return-1===r.IntValue?n.cursor=r.StringValue:n.cursor=t.Cursor[r.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),n.children=i.children.serialize(e),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.ContainerSceneGraphElement,a),l=e.getModelObject(s);if(void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.children&&l.children.deserialize(o.children,r),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.ContainerSceneGraphElement=je,o(je,V),o(je,u),o(je,M);var qe=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.TextureSceneGraphElement)||this;return o.model=n.renderModelRoot,o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.TextureSceneGraphElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.TextureSceneGraphElement],e[i.id]=!0,n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var o=i.getProperty(t.Prop.ContentType);-1===o.IntValue?n.contentType=o.StringValue:n.contentType=t.ContentType[o.IntValue],n.flags=i.getFlags().serialize();var r=i.getProperty(t.Prop.Cursor);return-1===r.IntValue?n.cursor=r.StringValue:n.cursor=t.Cursor[r.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getTexture()&&(n.texture=i.getTexture().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.TextureSceneGraphElement,a),l=e.getModelObject(s);if(void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.texture&&l.setTexture(e.deserialize(o.texture,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.TextureSceneGraphElement=qe,o(qe,V),o(qe,u),o(qe,L);var Ge=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.AnimationSequence)||this;return o.model=n.renderModelRoot,o.animations=new xt(o,t.Meaning.AnimationSequenceHasAnimation),o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.AnimationSequence,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.AnimationSequence],e[i.id]=!0,n.name=i.getName(),n.animationsCompleteFunction=i.getAnimationsCompleteFunction(),n.clientRequirements=i.getClientRequirements().serialize(),n.animations=i.animations.serialize(e),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.AnimationSequence,r),s=e.getModelObject(a);return void 0!==n.name&&s.setName(n.name),void 0!==n.animationsCompleteFunction&&s.setAnimationsCompleteFunction(n.animationsCompleteFunction),void 0!==n.clientRequirements&&s.setClientRequirements(new Flags(t.ClientCapabilities,Flags.deserialize(t.ClientCapabilities,n.clientRequirements))),void 0!==n.animations&&s.animations.deserialize(n.animations,o),s},n}(Te);t.AnimationSequence=Ge,o(Ge,k);var Xe=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.Animation)||this;return o.model=n.renderModelRoot,o.parameters=new xt(o,t.Meaning.AnimationHasAnimationParameter),o.animationFunctions=new xt(o,t.Meaning.AnimationHasAnimationFunction),o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.Animation,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.Animation],e[i.id]=!0,n.animationName=i.getAnimationName(),null!=i.getStoryboardExecutionContexts()&&(n.storyboardExecutionContexts=i.getStoryboardExecutionContexts().serialize()),null!=i.getTransitionIds()&&(n.transitionIds=i.getTransitionIds().serialize()),null!=i.getClientState()&&(n.clientState=i.getClientState().serialize()),n.behaviors=i.getBehaviors().serialize(),n.parameters=i.parameters.serialize(e),n.animationFunctions=i.animationFunctions.serialize(e),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.Animation,r),s=e.getModelObject(a);return void 0!==n.animationName&&s.setAnimationName(n.animationName),void 0!==n.storyboardExecutionContexts&&s.getStoryboardExecutionContexts().deserializeStructCollection(n.storyboardExecutionContexts,wn.Deserialize),void 0!==n.transitionIds&&s.getTransitionIds().deserializePropertyCollection(n.transitionIds),void 0!==n.clientState&&s.setClientState(ki.Deserialize(n.clientState)),void 0!==n.behaviors&&s.setBehaviors(new Flags(t.AnimationBehaviors,Flags.deserialize(t.AnimationBehaviors,n.behaviors))),void 0!==n.parameters&&s.parameters.deserialize(n.parameters,o),void 0!==n.animationFunctions&&s.animationFunctions.deserialize(n.animationFunctions,o),s},n}(Te);t.Animation=Xe,o(Xe,x);var Ye=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.AnimationExternalAction)||this;return o.model=n.renderModelRoot,o.parameters=new xt(o,t.Meaning.AnimationHasAnimationParameter),o.animationFunctions=new xt(o,t.Meaning.AnimationHasAnimationFunction),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.AnimationExternalAction,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.AnimationExternalAction],e[i.id]=!0;var o=i.getProperty(t.Prop.ActionType);return-1===o.IntValue?n.actionType=o.StringValue:n.actionType=t.ExternalAction[o.IntValue],n.actionTargetId=i.getActionTargetId(),n.animationName=i.getAnimationName(),null!=i.getStoryboardExecutionContexts()&&(n.storyboardExecutionContexts=i.getStoryboardExecutionContexts().serialize()),null!=i.getTransitionIds()&&(n.transitionIds=i.getTransitionIds().serialize()),null!=i.getClientState()&&(n.clientState=i.getClientState().serialize()),n.behaviors=i.getBehaviors().serialize(),n.parameters=i.parameters.serialize(e),n.animationFunctions=i.animationFunctions.serialize(e),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.AnimationExternalAction,a),l=e.getModelObject(s);if(void 0!==o.actionType){var u=t.ExternalAction[o.actionType];void 0!==u?l.setActionTypeInternal(new n(u)):l.setActionTypeInternal(new n(o.actionType))}return void 0!==o.actionTargetId&&l.setActionTargetId(o.actionTargetId),void 0!==o.animationName&&l.setAnimationName(o.animationName),void 0!==o.storyboardExecutionContexts&&l.getStoryboardExecutionContexts().deserializeStructCollection(o.storyboardExecutionContexts,wn.Deserialize),void 0!==o.transitionIds&&l.getTransitionIds().deserializePropertyCollection(o.transitionIds),void 0!==o.clientState&&l.setClientState(ki.Deserialize(o.clientState)),void 0!==o.behaviors&&l.setBehaviors(new Flags(t.AnimationBehaviors,Flags.deserialize(t.AnimationBehaviors,o.behaviors))),void 0!==o.parameters&&l.parameters.deserialize(o.parameters,r),void 0!==o.animationFunctions&&l.animationFunctions.deserialize(o.animationFunctions,r),l},o}(Te);t.AnimationExternalAction=Ye,o(Ye,x),o(Ye,R);var Ze=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.AnimationTarget)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.AnimationTarget,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.AnimationTarget],e[i.id]=!0,n.elementId=i.getElementId();var o=i.getProperty(t.Prop.AnimatablePropertyName);-1===o.IntValue?n.animatablePropertyName=o.StringValue:n.animatablePropertyName=t.AnimatableProperty[o.IntValue],n.transformIndex=i.getTransformIndex();var r=i.getProperty(t.Prop.TransformComponent);return-1===r.IntValue?n.transformComponent=r.StringValue:n.transformComponent=t.AnimatableTransformComponent[r.IntValue],n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.AnimationTarget,a),l=e.getModelObject(s);if(void 0!==o.elementId&&l.setElementId(o.elementId),void 0!==o.animatablePropertyName&&(void 0!==(u=t.AnimatableProperty[o.animatablePropertyName])?l.setAnimatablePropertyNameInternal(new n(u)):l.setAnimatablePropertyNameInternal(new n(o.animatablePropertyName))),void 0!==o.transformIndex&&l.setTransformIndex(o.transformIndex),void 0!==o.transformComponent){var u=t.AnimatableTransformComponent[o.transformComponent];void 0!==u?l.setTransformComponentInternal(new n(u)):l.setTransformComponentInternal(new n(o.transformComponent))}return l},o}(Te);t.AnimationTarget=Ze,o(Ze,O);var $e=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.AnimationFunction)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.AnimationFunction,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.AnimationFunction],e[i.id]=!0,n.name=i.getName(),n.functionId=i.getFunctionId(),n.expression=i.getExpression(),n.maintainStateOnStart=i.getMaintainStateOnStart(),n.flags=i.getFlags().serialize(),void 0!==i.getTarget()&&(n.target=i.getTarget().serialize(e)),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.AnimationFunction,r),s=e.getModelObject(a);return void 0!==n.name&&s.setName(n.name),void 0!==n.functionId&&s.setFunctionId(n.functionId),void 0!==n.expression&&s.setExpression(n.expression),void 0!==n.maintainStateOnStart&&s.setMaintainStateOnStart(n.maintainStateOnStart),void 0!==n.flags&&s.setFlags(new Flags(t.AnimationFlags,Flags.deserialize(t.AnimationFlags,n.flags))),void 0!==n.target&&s.setTarget(e.deserialize(n.target,o)),s},n}(Te);t.AnimationFunction=$e,o($e,F);var Je=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.AnimationParameter)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.AnimationParameter,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.AnimationParameter],e[i.id]=!0,n.parameterName=i.getParameterName(),n.parameterValue=i.getParameterValue(),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.AnimationParameter,r),s=e.getModelObject(a);return void 0!==n.parameterName&&s.setParameterName(n.parameterName),void 0!==n.parameterValue&&s.setParameterValue(n.parameterValue),s},n}(Te);t.AnimationParameter=Je,o(Je,U);var Qe=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.StaticImage)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.StaticImage,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.StaticImage],e[i.id]=!0,n.name=i.getName(),n.filename=i.getFilename();var o=i.getProperty(t.Prop.FillStyle);-1===o.IntValue?n.fillStyle=o.StringValue:n.fillStyle=t.ImageFillStyle[o.IntValue];var r=i.getProperty(t.Prop.HorizontalAlignment);-1===r.IntValue?n.horizontalAlignment=r.StringValue:n.horizontalAlignment=t.Alignment[r.IntValue];var a=i.getProperty(t.Prop.VerticalAlignment);-1===a.IntValue?n.verticalAlignment=a.StringValue:n.verticalAlignment=t.Alignment[a.IntValue];var s=i.getProperty(t.Prop.Tiling);return-1===s.IntValue?n.tiling=s.StringValue:n.tiling=t.ImageTiling[s.IntValue],n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.StaticImage,a),l=e.getModelObject(s);if(void 0!==o.name&&l.setName(o.name),void 0!==o.filename&&l.setFilename(o.filename),void 0!==o.fillStyle&&(void 0!==(u=t.ImageFillStyle[o.fillStyle])?l.setFillStyleInternal(new n(u)):l.setFillStyleInternal(new n(o.fillStyle))),void 0!==o.horizontalAlignment&&(void 0!==(u=t.Alignment[o.horizontalAlignment])?l.setHorizontalAlignmentInternal(new n(u)):l.setHorizontalAlignmentInternal(new n(o.horizontalAlignment))),void 0!==o.verticalAlignment&&(void 0!==(u=t.Alignment[o.verticalAlignment])?l.setVerticalAlignmentInternal(new n(u)):l.setVerticalAlignmentInternal(new n(o.verticalAlignment))),void 0!==o.tiling){var u=t.ImageTiling[o.tiling];void 0!==u?l.setTilingInternal(new n(u)):l.setTilingInternal(new n(o.tiling))}return l},o}(Te);t.StaticImage=Qe,o(Qe,N);var et=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.Path)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.Path,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.Path],e[i.id]=!0,n.name=i.getName(),n.strokeWidth=i.getStrokeWidth();var o=i.getProperty(t.Prop.PathType);return-1===o.IntValue?n.pathType=o.StringValue:n.pathType=t.PathType[o.IntValue],n.values=i.getValues(),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.Path,a),l=e.getModelObject(s);if(void 0!==o.name&&l.setName(o.name),void 0!==o.strokeWidth&&l.setStrokeWidth(o.strokeWidth),void 0!==o.pathType){var u=t.PathType[o.pathType];void 0!==u?l.setPathTypeInternal(new n(u)):l.setPathTypeInternal(new n(o.pathType))}return void 0!==o.values&&l.setValues(o.values),l},o}(Te);t.Path=et,o(et,z);var tt=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.InteractionModel)||this;return o.model=n.renderModelRoot,o.keyFrames=new xt(o,t.Meaning.InteractionModelHasKeyFrame),o.triggerSets=new xt(o,t.Meaning.InteractionModelHasTriggerSet),o.nodes=new xt(o,t.Meaning.InteractionModelHasFsmNode),o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.InteractionModel,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.InteractionModel],e[i.id]=!0,n.requiresParallax=i.getRequiresParallax(),null!=i.getTransitions()&&(n.transitions=i.getTransitions().serialize()),null!=i.getAnimationContainers()&&(n.animationContainers=i.getAnimationContainers().serialize()),null!=i.getAnimationEffects()&&(n.animationEffects=i.getAnimationEffects().serialize()),null!=i.getContentNavigationMarkerCollections()&&(n.contentNavigationMarkerCollections=i.getContentNavigationMarkerCollections().serialize()),n.keyFrames=i.keyFrames.serialize(e),n.triggerSets=i.triggerSets.serialize(e),n.nodes=i.nodes.serialize(e),void 0!==i.getStartNode()&&(n.startNode=i.getStartNode().serialize(e)),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.InteractionModel,r),s=e.getModelObject(a);return void 0!==n.requiresParallax&&s.setRequiresParallax(n.requiresParallax),void 0!==n.transitions&&s.getTransitions().deserializeStructCollection(n.transitions,Oi.Deserialize),void 0!==n.animationContainers&&s.getAnimationContainers().deserializeStructCollection(n.animationContainers,Fi.Deserialize),void 0!==n.animationEffects&&s.getAnimationEffects().deserializeStructCollection(n.animationEffects,Ui.Deserialize),void 0!==n.contentNavigationMarkerCollections&&s.getContentNavigationMarkerCollections().deserializeStructCollection(n.contentNavigationMarkerCollections,Hi.Deserialize),void 0!==n.keyFrames&&s.keyFrames.deserialize(n.keyFrames,o),void 0!==n.triggerSets&&s.triggerSets.deserialize(n.triggerSets,o),void 0!==n.nodes&&s.nodes.deserialize(n.nodes,o),void 0!==n.startNode&&s.setStartNode(e.deserialize(n.startNode,o)),s},n}(Te);t.InteractionModel=tt,o(tt,H);var it=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.FsmNode)||this;return o.model=n.renderModelRoot,o.childStartStates=new xt(o,t.Meaning.FsmNodeHasFsmNode),o.edges=new xt(o,t.Meaning.FsmNodeHasFsmEdge),o.parentEdges=new kt(o,t.Meaning.FsmEdgePointsToFsmNode,!1),o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.FsmNode,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.FsmNode],e[i.id]=!0,n.name=i.getName(),n.canNavigateTo=i.getCanNavigateTo(),n.allowDeferredExit=i.getAllowDeferredExit(),n.isModal=i.getIsModal(),n.behaviors=i.getBehaviors().serialize(),void 0!==i.getStartState()&&(n.startState=i.getStartState().serialize(e)),n.childStartStates=i.childStartStates.serialize(e),n.edges=i.edges.serialize(e),void 0!==i.getKeyFrame()&&(n.keyFrame=i.getKeyFrame().serialize(e)),void 0!==i.getAmbientAnimationSequence()&&(n.ambientAnimationSequence=i.getAmbientAnimationSequence().serialize(e)),void 0!==i.getExitAnimationSequence()&&(n.exitAnimationSequence=i.getExitAnimationSequence().serialize(e)),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.FsmNode,r),s=e.getModelObject(a);return void 0!==n.name&&s.setName(n.name),void 0!==n.canNavigateTo&&s.setCanNavigateTo(n.canNavigateTo),void 0!==n.allowDeferredExit&&s.setAllowDeferredExit(n.allowDeferredExit),void 0!==n.isModal&&s.setIsModal(n.isModal),void 0!==n.behaviors&&s.setBehaviors(new Flags(t.StateBehaviors,Flags.deserialize(t.StateBehaviors,n.behaviors))),void 0!==n.startState&&s.setStartState(e.deserialize(n.startState,o)),void 0!==n.childStartStates&&s.childStartStates.deserialize(n.childStartStates,o),void 0!==n.edges&&s.edges.deserialize(n.edges,o),void 0!==n.keyFrame&&s.setKeyFrame(e.deserialize(n.keyFrame,o)),void 0!==n.ambientAnimationSequence&&s.setAmbientAnimationSequence(e.deserialize(n.ambientAnimationSequence,o)),void 0!==n.exitAnimationSequence&&s.setExitAnimationSequence(e.deserialize(n.exitAnimationSequence,o)),s},n}(Te);t.FsmNode=it,o(it,W);var nt=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.FsmEdge)||this;return o.model=n.renderModelRoot,o.triggerSets=new xt(o,t.Meaning.FsmEdgeHasTriggerSet),o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.FsmEdge,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.FsmEdge],e[i.id]=!0,n.name=i.getName(),n.resetDescendants=i.getResetDescendants(),n.allowBubbling=i.getAllowBubbling(),n.preFetchAnimations=i.getPreFetchAnimations(),n.historicallyRelevant=i.getHistoricallyRelevant(),n.behaviors=i.getBehaviors().serialize(),void 0!==i.getTarget()&&(n.target=i.getTarget().serialize(e)),n.triggerSets=i.triggerSets.serialize(e),void 0!==i.getTransitionOutAnimationSequence()&&(n.transitionOutAnimationSequence=i.getTransitionOutAnimationSequence().serialize(e)),void 0!==i.getTransitionInAnimationSequence()&&(n.transitionInAnimationSequence=i.getTransitionInAnimationSequence().serialize(e)),void 0!==i.getFocusTarget()&&(n.focusTarget=i.getFocusTarget().serialize(e)),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.FsmEdge,r),s=e.getModelObject(a);return void 0!==n.name&&s.setName(n.name),void 0!==n.resetDescendants&&s.setResetDescendants(n.resetDescendants),void 0!==n.allowBubbling&&s.setAllowBubbling(n.allowBubbling),void 0!==n.preFetchAnimations&&s.setPreFetchAnimations(n.preFetchAnimations),void 0!==n.historicallyRelevant&&s.setHistoricallyRelevant(n.historicallyRelevant),void 0!==n.behaviors&&s.setBehaviors(new Flags(t.EdgeBehaviors,Flags.deserialize(t.EdgeBehaviors,n.behaviors))),void 0!==n.target&&s.setTarget(e.deserialize(n.target,o)),void 0!==n.triggerSets&&s.triggerSets.deserialize(n.triggerSets,o),void 0!==n.transitionOutAnimationSequence&&s.setTransitionOutAnimationSequence(e.deserialize(n.transitionOutAnimationSequence,o)),void 0!==n.transitionInAnimationSequence&&s.setTransitionInAnimationSequence(e.deserialize(n.transitionInAnimationSequence,o)),void 0!==n.focusTarget&&s.setFocusTarget(e.deserialize(n.focusTarget,o)),s},n}(Te);t.FsmEdge=nt,o(nt,K);var ot=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.KeyFrame)||this;return o.model=n.renderModelRoot,o.layoutElements=new xt(o,t.Meaning.KeyFramePointsToLayoutNode),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.KeyFrame,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.KeyFrame],e[i.id]=!0,n.type=i.getType(),null!=i.getMetaData()&&(n.metaData=i.getMetaData().serialize()),n.scrollWidth=i.getScrollWidth(),n.scrollHeight=i.getScrollHeight();var o=i.getProperty(t.Prop.Scrollability);-1===o.IntValue?n.scrollability=o.StringValue:n.scrollability=t.LayoutScrollability[o.IntValue];var r=i.getProperty(t.Prop.CoverageMethod);return-1===r.IntValue?n.coverageMethod=r.StringValue:n.coverageMethod=t.CoverageMethod[r.IntValue],null!=i.getSnapPointsHorizontal()&&(n.snapPointsHorizontal=i.getSnapPointsHorizontal().serialize()),null!=i.getSnapPointsVertical()&&(n.snapPointsVertical=i.getSnapPointsVertical().serialize()),n.isDefaultNavigation=i.getIsDefaultNavigation(),n.layoutElements=i.layoutElements.serialize(e),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.KeyFrame,a),l=e.getModelObject(s);if(void 0!==o.type&&l.setType(o.type),void 0!==o.metaData&&l.setMetaData(Sn.Deserialize(o.metaData)),void 0!==o.scrollWidth&&l.setScrollWidth(o.scrollWidth),void 0!==o.scrollHeight&&l.setScrollHeight(o.scrollHeight),void 0!==o.scrollability&&(void 0!==(u=t.LayoutScrollability[o.scrollability])?l.setScrollabilityInternal(new n(u)):l.setScrollabilityInternal(new n(o.scrollability))),void 0!==o.coverageMethod){var u=t.CoverageMethod[o.coverageMethod];void 0!==u?l.setCoverageMethodInternal(new n(u)):l.setCoverageMethodInternal(new n(o.coverageMethod))}return void 0!==o.snapPointsHorizontal&&l.getSnapPointsHorizontal().deserializeStructCollection(o.snapPointsHorizontal,Li.Deserialize),void 0!==o.snapPointsVertical&&l.getSnapPointsVertical().deserializeStructCollection(o.snapPointsVertical,Li.Deserialize),void 0!==o.isDefaultNavigation&&l.setIsDefaultNavigation(o.isDefaultNavigation),void 0!==o.layoutElements&&l.layoutElements.deserialize(o.layoutElements,r),l},o}(Te);t.KeyFrame=ot,o(ot,j);var rt=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.TriggerSet)||this;return o.model=n.renderModelRoot,o.triggers=new xt(o,t.Meaning.TriggerSetHasTrigger),o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.TriggerSet,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.TriggerSet],e[i.id]=!0,n.name=i.getName(),n.alwaysTryDefaultAction=i.getAlwaysTryDefaultAction(),null!=i.getClientState()&&(n.clientState=i.getClientState().serialize()),n.behaviors=i.getBehaviors().serialize(),n.triggers=i.triggers.serialize(e),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.TriggerSet,r),s=e.getModelObject(a);return void 0!==n.name&&s.setName(n.name),void 0!==n.alwaysTryDefaultAction&&s.setAlwaysTryDefaultAction(n.alwaysTryDefaultAction),void 0!==n.clientState&&s.setClientState(ki.Deserialize(n.clientState)),void 0!==n.behaviors&&s.setBehaviors(new Flags(t.TriggerSetBehaviors,Flags.deserialize(t.TriggerSetBehaviors,n.behaviors))),void 0!==n.triggers&&s.triggers.deserialize(n.triggers,o),s},n}(Te);t.TriggerSet=rt,o(rt,q);var at=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.Trigger)||this;return o.model=n.renderModelRoot,o.selectMethods=new xt(o,t.Meaning.TriggerHasSelectMethod),o.defaultActions=new xt(o,t.Meaning.TriggerHasDefaultAction),o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.Trigger,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.Trigger],e[i.id]=!0,n.selectMethods=i.selectMethods.serialize(e),n.defaultActions=i.defaultActions.serialize(e),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.Trigger,r),s=e.getModelObject(a);return void 0!==n.selectMethods&&s.selectMethods.deserialize(n.selectMethods,o),void 0!==n.defaultActions&&s.defaultActions.deserialize(n.defaultActions,o),s},n}(Te);t.Trigger=at,o(at,G);var st=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.DefaultAction)||this;return o.model=n.renderModelRoot,o.parameters=new xt(o,t.Meaning.DefaultActionHasAnimationParameter),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.DefaultAction,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.DefaultAction],e[i.id]=!0;var o=i.getProperty(t.Prop.Action);return-1===o.IntValue?n.action=o.StringValue:n.action=t.DefaultTriggerAction[o.IntValue],n.parameters=i.parameters.serialize(e),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.DefaultAction,a),l=e.getModelObject(s);if(void 0!==o.action){var u=t.DefaultTriggerAction[o.action];void 0!==u?l.setActionInternal(new n(u)):l.setActionInternal(new n(o.action))}return void 0!==o.parameters&&l.parameters.deserialize(o.parameters,r),l},o}(Te);t.DefaultAction=st,o(st,X);var lt=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.SelectMethod)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.SelectMethod,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.SelectMethod],e[i.id]=!0;var o=i.getProperty(t.Prop.Method);-1===o.IntValue?n.method=o.StringValue:n.method=t.TriggerMethod[o.IntValue];var r=i.getProperty(t.Prop.Target);return-1===r.IntValue?n.target=r.StringValue:n.target=t.TriggerTarget[r.IntValue],n.keyNames=i.getKeyNames(),n.targetId=i.getTargetId(),void 0!==i.getCameraSelect()&&(n.cameraSelect=i.getCameraSelect().serialize(e)),void 0!==i.getTimingSelect()&&(n.timingSelect=i.getTimingSelect().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.SelectMethod,a),l=e.getModelObject(s);if(void 0!==o.method&&(void 0!==(u=t.TriggerMethod[o.method])?l.setMethodInternal(new n(u)):l.setMethodInternal(new n(o.method))),void 0!==o.target){var u=t.TriggerTarget[o.target];void 0!==u?l.setTargetInternal(new n(u)):l.setTargetInternal(new n(o.target))}return void 0!==o.keyNames&&l.setKeyNames(o.keyNames),void 0!==o.targetId&&l.setTargetId(o.targetId),void 0!==o.cameraSelect&&l.setCameraSelect(e.deserialize(o.cameraSelect,r)),void 0!==o.timingSelect&&l.setTimingSelect(e.deserialize(o.timingSelect,r)),l},o}(Te);t.SelectMethod=lt,o(lt,Y);var ut=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.SwipeSelectMethod)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.SwipeSelectMethod,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.SwipeSelectMethod],e[i.id]=!0;var o=i.getProperty(t.Prop.Direction);-1===o.IntValue?n.direction=o.StringValue:n.direction=t.Direction[o.IntValue];var r=i.getProperty(t.Prop.Method);-1===r.IntValue?n.method=r.StringValue:n.method=t.TriggerMethod[r.IntValue];var a=i.getProperty(t.Prop.Target);return-1===a.IntValue?n.target=a.StringValue:n.target=t.TriggerTarget[a.IntValue],n.keyNames=i.getKeyNames(),n.targetId=i.getTargetId(),void 0!==i.getCameraSelect()&&(n.cameraSelect=i.getCameraSelect().serialize(e)),void 0!==i.getTimingSelect()&&(n.timingSelect=i.getTimingSelect().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.SwipeSelectMethod,a),l=e.getModelObject(s);if(void 0!==o.direction&&(void 0!==(u=t.Direction[o.direction])?l.setDirectionInternal(new n(u)):l.setDirectionInternal(new n(o.direction))),void 0!==o.method&&(void 0!==(u=t.TriggerMethod[o.method])?l.setMethodInternal(new n(u)):l.setMethodInternal(new n(o.method))),void 0!==o.target){var u=t.TriggerTarget[o.target];void 0!==u?l.setTargetInternal(new n(u)):l.setTargetInternal(new n(o.target))}return void 0!==o.keyNames&&l.setKeyNames(o.keyNames),void 0!==o.targetId&&l.setTargetId(o.targetId),void 0!==o.cameraSelect&&l.setCameraSelect(e.deserialize(o.cameraSelect,r)),void 0!==o.timingSelect&&l.setTimingSelect(e.deserialize(o.timingSelect,r)),l},o}(Te);t.SwipeSelectMethod=ut,o(ut,Y),o(ut,$);var dt=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.ClientSelectMethod)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ClientSelectMethod,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.ClientSelectMethod],e[i.id]=!0;var o=i.getProperty(t.Prop.Method);-1===o.IntValue?n.method=o.StringValue:n.method=t.TriggerMethod[o.IntValue];var r=i.getProperty(t.Prop.Target);return-1===r.IntValue?n.target=r.StringValue:n.target=t.TriggerTarget[r.IntValue],n.keyNames=i.getKeyNames(),n.targetId=i.getTargetId(),void 0!==i.getSignal()&&(n.signal=i.getSignal().serialize(e)),void 0!==i.getCameraSelect()&&(n.cameraSelect=i.getCameraSelect().serialize(e)),void 0!==i.getTimingSelect()&&(n.timingSelect=i.getTimingSelect().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.ClientSelectMethod,a),l=e.getModelObject(s);if(void 0!==o.method&&(void 0!==(u=t.TriggerMethod[o.method])?l.setMethodInternal(new n(u)):l.setMethodInternal(new n(o.method))),void 0!==o.target){var u=t.TriggerTarget[o.target];void 0!==u?l.setTargetInternal(new n(u)):l.setTargetInternal(new n(o.target))}return void 0!==o.keyNames&&l.setKeyNames(o.keyNames),void 0!==o.targetId&&l.setTargetId(o.targetId),void 0!==o.signal&&l.setSignal(e.deserialize(o.signal,r)),void 0!==o.cameraSelect&&l.setCameraSelect(e.deserialize(o.cameraSelect,r)),void 0!==o.timingSelect&&l.setTimingSelect(e.deserialize(o.timingSelect,r)),l},o}(Te);t.ClientSelectMethod=dt,o(dt,Y),o(dt,J);var ct=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.EditModeClientSignal)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.EditModeClientSignal,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.EditModeClientSignal],e[i.id]=!0,n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.EditModeClientSignal,r);return e.getModelObject(a)},n}(Te);t.EditModeClientSignal=ct,o(ct,Q),o(ct,ee);var pt=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.AutoAdvanceClientSignal)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.AutoAdvanceClientSignal,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.AutoAdvanceClientSignal],e[i.id]=!0,n.isReset=i.getIsReset(),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.AutoAdvanceClientSignal,r),s=e.getModelObject(a);return void 0!==n.isReset&&s.setIsReset(n.isReset),s},n}(Te);t.AutoAdvanceClientSignal=pt,o(pt,Q),o(pt,te);var gt=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.KeyboardSelectMethod)||this;return o.model=n.renderModelRoot,o.keyClicks=new xt(o,t.Meaning.KeyboardSelectMethodHasKeyClick),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.KeyboardSelectMethod,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.KeyboardSelectMethod],e[i.id]=!0;var o=i.getProperty(t.Prop.TriggerTarget);-1===o.IntValue?n.triggerTarget=o.StringValue:n.triggerTarget=t.TriggerTarget[o.IntValue],n.triggerTargetId=i.getTriggerTargetId();var r=i.getProperty(t.Prop.Method);-1===r.IntValue?n.method=r.StringValue:n.method=t.TriggerMethod[r.IntValue];var a=i.getProperty(t.Prop.Target);return-1===a.IntValue?n.target=a.StringValue:n.target=t.TriggerTarget[a.IntValue],n.keyNames=i.getKeyNames(),n.targetId=i.getTargetId(),n.keyClicks=i.keyClicks.serialize(e),void 0!==i.getCameraSelect()&&(n.cameraSelect=i.getCameraSelect().serialize(e)),void 0!==i.getTimingSelect()&&(n.timingSelect=i.getTimingSelect().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.KeyboardSelectMethod,a),l=e.getModelObject(s);if(void 0!==o.triggerTarget&&(void 0!==(u=t.TriggerTarget[o.triggerTarget])?l.setTriggerTargetInternal(new n(u)):l.setTriggerTargetInternal(new n(o.triggerTarget))),void 0!==o.triggerTargetId&&l.setTriggerTargetId(o.triggerTargetId),void 0!==o.method&&(void 0!==(u=t.TriggerMethod[o.method])?l.setMethodInternal(new n(u)):l.setMethodInternal(new n(o.method))),void 0!==o.target){var u=t.TriggerTarget[o.target];void 0!==u?l.setTargetInternal(new n(u)):l.setTargetInternal(new n(o.target))}return void 0!==o.keyNames&&l.setKeyNames(o.keyNames),void 0!==o.targetId&&l.setTargetId(o.targetId),void 0!==o.keyClicks&&l.keyClicks.deserialize(o.keyClicks,r),void 0!==o.cameraSelect&&l.setCameraSelect(e.deserialize(o.cameraSelect,r)),void 0!==o.timingSelect&&l.setTimingSelect(e.deserialize(o.timingSelect,r)),l},o}(Te);t.KeyboardSelectMethod=gt,o(gt,Z),o(gt,Y),o(gt,ie);var ht=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.KeyClick)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.KeyClick,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.KeyClick],e[i.id]=!0;var o=i.getProperty(t.Prop.Key);-1===o.IntValue?n.key=o.StringValue:n.key=t.KeyName[o.IntValue];var r=i.getProperty(t.Prop.Modifier);return-1===r.IntValue?n.modifier=r.StringValue:n.modifier=t.Modifier[r.IntValue],n.keyDown=i.getKeyDown(),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.KeyClick,a),l=e.getModelObject(s);if(void 0!==o.key&&(void 0!==(u=t.KeyName[o.key])?l.setKeyInternal(new n(u)):l.setKeyInternal(new n(o.key))),void 0!==o.modifier){var u=t.Modifier[o.modifier];void 0!==u?l.setModifierInternal(new n(u)):l.setModifierInternal(new n(o.modifier))}return void 0!==o.keyDown&&l.setKeyDown(o.keyDown),l},o}(Te);t.KeyClick=ht,o(ht,ne);var yt=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.MouseSelectMethod)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.MouseSelectMethod,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.MouseSelectMethod],e[i.id]=!0;var o=i.getProperty(t.Prop.Action);-1===o.IntValue?n.action=o.StringValue:n.action=t.MouseAction[o.IntValue];var r=i.getProperty(t.Prop.Button);-1===r.IntValue?n.button=r.StringValue:n.button=t.MouseButton[r.IntValue],n.mouseWheelReactionDistance=i.getMouseWheelReactionDistance();var a=i.getProperty(t.Prop.TriggerTarget);-1===a.IntValue?n.triggerTarget=a.StringValue:n.triggerTarget=t.TriggerTarget[a.IntValue],n.triggerTargetId=i.getTriggerTargetId();var s=i.getProperty(t.Prop.Method);-1===s.IntValue?n.method=s.StringValue:n.method=t.TriggerMethod[s.IntValue];var l=i.getProperty(t.Prop.Target);return-1===l.IntValue?n.target=l.StringValue:n.target=t.TriggerTarget[l.IntValue],n.keyNames=i.getKeyNames(),n.targetId=i.getTargetId(),void 0!==i.getCameraSelect()&&(n.cameraSelect=i.getCameraSelect().serialize(e)),void 0!==i.getTimingSelect()&&(n.timingSelect=i.getTimingSelect().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.MouseSelectMethod,a),l=e.getModelObject(s);if(void 0!==o.action&&(void 0!==(u=t.MouseAction[o.action])?l.setActionInternal(new n(u)):l.setActionInternal(new n(o.action))),void 0!==o.button&&(void 0!==(u=t.MouseButton[o.button])?l.setButtonInternal(new n(u)):l.setButtonInternal(new n(o.button))),void 0!==o.mouseWheelReactionDistance&&l.setMouseWheelReactionDistance(o.mouseWheelReactionDistance),void 0!==o.triggerTarget&&(void 0!==(u=t.TriggerTarget[o.triggerTarget])?l.setTriggerTargetInternal(new n(u)):l.setTriggerTargetInternal(new n(o.triggerTarget))),void 0!==o.triggerTargetId&&l.setTriggerTargetId(o.triggerTargetId),void 0!==o.method&&(void 0!==(u=t.TriggerMethod[o.method])?l.setMethodInternal(new n(u)):l.setMethodInternal(new n(o.method))),void 0!==o.target){var u=t.TriggerTarget[o.target];void 0!==u?l.setTargetInternal(new n(u)):l.setTargetInternal(new n(o.target))}return void 0!==o.keyNames&&l.setKeyNames(o.keyNames),void 0!==o.targetId&&l.setTargetId(o.targetId),void 0!==o.cameraSelect&&l.setCameraSelect(e.deserialize(o.cameraSelect,r)),void 0!==o.timingSelect&&l.setTimingSelect(e.deserialize(o.timingSelect,r)),l},o}(Te);t.MouseSelectMethod=yt,o(yt,Z),o(yt,Y),o(yt,oe);var mt=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.CameraSelect)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.CameraSelect,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.CameraSelect],e[i.id]=!0;var o=i.getProperty(t.Prop.Action);return-1===o.IntValue?n.action=o.StringValue:n.action=t.ViewAction[o.IntValue],n.visibilityRatio=i.getVisibilityRatio(),n.viewportScaleX=i.getViewportScaleX(),n.viewportScaleY=i.getViewportScaleY(),n.viewportOffsetRatioX=i.getViewportOffsetRatioX(),n.viewportOffsetRatioY=i.getViewportOffsetRatioY(),n.checkOnEntry=i.getCheckOnEntry(),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.CameraSelect,a),l=e.getModelObject(s);if(void 0!==o.action){var u=t.ViewAction[o.action];void 0!==u?l.setActionInternal(new n(u)):l.setActionInternal(new n(o.action))}return void 0!==o.visibilityRatio&&l.setVisibilityRatio(o.visibilityRatio),void 0!==o.viewportScaleX&&l.setViewportScaleX(o.viewportScaleX),void 0!==o.viewportScaleY&&l.setViewportScaleY(o.viewportScaleY),void 0!==o.viewportOffsetRatioX&&l.setViewportOffsetRatioX(o.viewportOffsetRatioX),void 0!==o.viewportOffsetRatioY&&l.setViewportOffsetRatioY(o.viewportOffsetRatioY),void 0!==o.checkOnEntry&&l.setCheckOnEntry(o.checkOnEntry),l},o}(Te);t.CameraSelect=mt,o(mt,re);var ft=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.CameraSelectMethod)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.CameraSelectMethod,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.CameraSelectMethod],e[i.id]=!0;var o=i.getProperty(t.Prop.Action);-1===o.IntValue?n.action=o.StringValue:n.action=t.ViewAction[o.IntValue],n.visibilityRatio=i.getVisibilityRatio(),n.viewportScaleX=i.getViewportScaleX(),n.viewportScaleY=i.getViewportScaleY(),n.viewportOffsetRatioX=i.getViewportOffsetRatioX(),n.viewportOffsetRatioY=i.getViewportOffsetRatioY(),n.checkOnEntry=i.getCheckOnEntry();var r=i.getProperty(t.Prop.TriggerTarget);-1===r.IntValue?n.triggerTarget=r.StringValue:n.triggerTarget=t.TriggerTarget[r.IntValue],n.triggerTargetId=i.getTriggerTargetId();var a=i.getProperty(t.Prop.Method);-1===a.IntValue?n.method=a.StringValue:n.method=t.TriggerMethod[a.IntValue];var s=i.getProperty(t.Prop.Target);return-1===s.IntValue?n.target=s.StringValue:n.target=t.TriggerTarget[s.IntValue],n.keyNames=i.getKeyNames(),n.targetId=i.getTargetId(),void 0!==i.getCameraSelect()&&(n.cameraSelect=i.getCameraSelect().serialize(e)),void 0!==i.getTimingSelect()&&(n.timingSelect=i.getTimingSelect().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.CameraSelectMethod,a),l=e.getModelObject(s);if(void 0!==o.action&&(void 0!==(u=t.ViewAction[o.action])?l.setActionInternal(new n(u)):l.setActionInternal(new n(o.action))),void 0!==o.visibilityRatio&&l.setVisibilityRatio(o.visibilityRatio),void 0!==o.viewportScaleX&&l.setViewportScaleX(o.viewportScaleX),void 0!==o.viewportScaleY&&l.setViewportScaleY(o.viewportScaleY),void 0!==o.viewportOffsetRatioX&&l.setViewportOffsetRatioX(o.viewportOffsetRatioX),void 0!==o.viewportOffsetRatioY&&l.setViewportOffsetRatioY(o.viewportOffsetRatioY),void 0!==o.checkOnEntry&&l.setCheckOnEntry(o.checkOnEntry),void 0!==o.triggerTarget&&(void 0!==(u=t.TriggerTarget[o.triggerTarget])?l.setTriggerTargetInternal(new n(u)):l.setTriggerTargetInternal(new n(o.triggerTarget))),void 0!==o.triggerTargetId&&l.setTriggerTargetId(o.triggerTargetId),void 0!==o.method&&(void 0!==(u=t.TriggerMethod[o.method])?l.setMethodInternal(new n(u)):l.setMethodInternal(new n(o.method))),void 0!==o.target){var u=t.TriggerTarget[o.target];void 0!==u?l.setTargetInternal(new n(u)):l.setTargetInternal(new n(o.target))}return void 0!==o.keyNames&&l.setKeyNames(o.keyNames),void 0!==o.targetId&&l.setTargetId(o.targetId),void 0!==o.cameraSelect&&l.setCameraSelect(e.deserialize(o.cameraSelect,r)),void 0!==o.timingSelect&&l.setTimingSelect(e.deserialize(o.timingSelect,r)),l},o}(Te);t.CameraSelectMethod=ft,o(ft,Z),o(ft,Y),o(ft,ae);var vt=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.TimingSelect)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.TimingSelect,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.TimingSelect],e[i.id]=!0,n.time=i.getTime(),n.variance=i.getVariance(),n.fireOnStart=i.getFireOnStart(),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.TimingSelect,r),s=e.getModelObject(a);return void 0!==n.time&&s.setTime(n.time),void 0!==n.variance&&s.setVariance(n.variance),void 0!==n.fireOnStart&&s.setFireOnStart(n.fireOnStart),s},n}(Te);t.TimingSelect=vt,o(vt,se);var St=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.TimingSelectMethod)||this;return o.model=n.renderModelRoot,o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.TimingSelectMethod,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.TimingSelectMethod],e[i.id]=!0,n.time=i.getTime(),n.variance=i.getVariance(),n.fireOnStart=i.getFireOnStart();var o=i.getProperty(t.Prop.Method);-1===o.IntValue?n.method=o.StringValue:n.method=t.TriggerMethod[o.IntValue];var r=i.getProperty(t.Prop.Target);return-1===r.IntValue?n.target=r.StringValue:n.target=t.TriggerTarget[r.IntValue],n.keyNames=i.getKeyNames(),n.targetId=i.getTargetId(),void 0!==i.getCameraSelect()&&(n.cameraSelect=i.getCameraSelect().serialize(e)),void 0!==i.getTimingSelect()&&(n.timingSelect=i.getTimingSelect().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.TimingSelectMethod,a),l=e.getModelObject(s);if(void 0!==o.time&&l.setTime(o.time),void 0!==o.variance&&l.setVariance(o.variance),void 0!==o.fireOnStart&&l.setFireOnStart(o.fireOnStart),void 0!==o.method&&(void 0!==(u=t.TriggerMethod[o.method])?l.setMethodInternal(new n(u)):l.setMethodInternal(new n(o.method))),void 0!==o.target){var u=t.TriggerTarget[o.target];void 0!==u?l.setTargetInternal(new n(u)):l.setTargetInternal(new n(o.target))}return void 0!==o.keyNames&&l.setKeyNames(o.keyNames),void 0!==o.targetId&&l.setTargetId(o.targetId),void 0!==o.cameraSelect&&l.setCameraSelect(e.deserialize(o.cameraSelect,r)),void 0!==o.timingSelect&&l.setTimingSelect(e.deserialize(o.timingSelect,r)),l},o}(Te);t.TimingSelectMethod=St,o(St,Y),o(St,le);var wt=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.StatelessRule)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.StatelessRule,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.StatelessRule],e[i.id]=!0,void 0!==i.getTriggerSet()&&(n.triggerSet=i.getTriggerSet().serialize(e)),void 0!==i.getAnimationSequence()&&(n.animationSequence=i.getAnimationSequence().serialize(e)),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.StatelessRule,r),s=e.getModelObject(a);return void 0!==n.triggerSet&&s.setTriggerSet(e.deserialize(n.triggerSet,o)),void 0!==n.animationSequence&&s.setAnimationSequence(e.deserialize(n.animationSequence,o)),s},n}(Te);t.StatelessRule=wt,o(wt,ue);var Tt=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.RotationTransform2D)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.RotationTransform2D,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.RotationTransform2D],e[i.id]=!0,n.value=i.getValue(),n.flags=i.getFlags().serialize(),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.RotationTransform2D,r),s=e.getModelObject(a);return void 0!==n.value&&s.setValue(n.value),void 0!==n.flags&&s.setFlags(new Flags(t.TransformFlags,Flags.deserialize(t.TransformFlags,n.flags))),s},n}(Te);t.RotationTransform2D=Tt,o(Tt,de),o(Tt,ce);var Ct=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.TranslateTransform2D)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.TranslateTransform2D,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.TranslateTransform2D],e[i.id]=!0,n.translateX=i.getTranslateX(),n.translateY=i.getTranslateY(),n.flags=i.getFlags().serialize(),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.TranslateTransform2D,r),s=e.getModelObject(a);return void 0!==n.translateX&&s.setTranslateX(n.translateX),void 0!==n.translateY&&s.setTranslateY(n.translateY),void 0!==n.flags&&s.setFlags(new Flags(t.TransformFlags,Flags.deserialize(t.TransformFlags,n.flags))),s},n}(Te);t.TranslateTransform2D=Ct,o(Ct,de),o(Ct,pe);var _t=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.ScaleTransform2D)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ScaleTransform2D,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.ScaleTransform2D],e[i.id]=!0,n.scaleX=i.getScaleX(),n.scaleY=i.getScaleY(),n.flags=i.getFlags().serialize(),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.ScaleTransform2D,r),s=e.getModelObject(a);return void 0!==n.scaleX&&s.setScaleX(n.scaleX),void 0!==n.scaleY&&s.setScaleY(n.scaleY),void 0!==n.flags&&s.setFlags(new Flags(t.TransformFlags,Flags.deserialize(t.TransformFlags,n.flags))),s},n}(Te);t.ScaleTransform2D=_t,o(_t,de),o(_t,ge);var bt=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.RotationTransform3D)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.RotationTransform3D,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.RotationTransform3D],e[i.id]=!0,n.value=i.getValue(),n.projectX=i.getProjectX(),n.projectY=i.getProjectY(),n.projectZ=i.getProjectZ(),n.flags=i.getFlags().serialize(),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.RotationTransform3D,r),s=e.getModelObject(a);return void 0!==n.value&&s.setValue(n.value),void 0!==n.projectX&&s.setProjectX(n.projectX),void 0!==n.projectY&&s.setProjectY(n.projectY),void 0!==n.projectZ&&s.setProjectZ(n.projectZ),void 0!==n.flags&&s.setFlags(new Flags(t.TransformFlags,Flags.deserialize(t.TransformFlags,n.flags))),s},n}(Te);t.RotationTransform3D=bt,o(bt,de),o(bt,he);var At=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.TranslateTransform3D)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.TranslateTransform3D,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.TranslateTransform3D],e[i.id]=!0,n.translateX=i.getTranslateX(),n.translateY=i.getTranslateY(),n.translateZ=i.getTranslateZ(),n.flags=i.getFlags().serialize(),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.TranslateTransform3D,r),s=e.getModelObject(a);return void 0!==n.translateX&&s.setTranslateX(n.translateX),void 0!==n.translateY&&s.setTranslateY(n.translateY),void 0!==n.translateZ&&s.setTranslateZ(n.translateZ),void 0!==n.flags&&s.setFlags(new Flags(t.TransformFlags,Flags.deserialize(t.TransformFlags,n.flags))),s},n}(Te);t.TranslateTransform3D=At,o(At,de),o(At,ye);var Pt=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.ScaleTransform3D)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ScaleTransform3D,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.ScaleTransform3D],e[i.id]=!0,n.scaleX=i.getScaleX(),n.scaleY=i.getScaleY(),n.scaleZ=i.getScaleZ(),n.flags=i.getFlags().serialize(),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.ScaleTransform3D,r),s=e.getModelObject(a);return void 0!==n.scaleX&&s.setScaleX(n.scaleX),void 0!==n.scaleY&&s.setScaleY(n.scaleY),void 0!==n.scaleZ&&s.setScaleZ(n.scaleZ),void 0!==n.flags&&s.setFlags(new Flags(t.TransformFlags,Flags.deserialize(t.TransformFlags,n.flags))),s},n}(Te);t.ScaleTransform3D=Pt,o(Pt,de),o(Pt,me);var It=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.LayoutContext)||this;return o.model=n.renderModelRoot,o.parentLayoutNodes=new kt(o,t.Meaning.LayoutNodeLayoutContextPointsToLayoutContext,!1),o.textParagraphs=new kt(o,t.Meaning.TextParagraphLayoutContextPointsToLayoutContext,!1),o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.LayoutContext,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.LayoutContext],e[i.id]=!0,void 0!==i.getContentProxy()&&(n.contentProxy=i.getContentProxy().serialize(e)),n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.LayoutContext,r),s=e.getModelObject(a);return void 0!==n.contentProxy&&s.setContentProxy(e.deserialize(n.contentProxy,o)),s},n}(Te);t.LayoutContext=It,o(It,fe);var Et=function(e){function n(i,n){var o=e.call(this,i,n,t.ObjectType.ContentProxy)||this;return o.model=n.renderModelRoot,o}return __extends(n,e),n.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.ContentProxy,i);return e.getModelObject(n)},n.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};return n.id=i.id,void 0!==e[i.id]?(n.ref=!0,n):(n.objType=t.ObjectType[t.ObjectType.ContentProxy],e[i.id]=!0,n)},n.Deserialize=function(e,n,o){var r=n.id;if(o&&(o[n.id]||(o[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r=o[n.id]),n.ref)return e.getModelObject(r);var a=e.graph.createObject(t.ObjectType.ContentProxy,r);return e.getModelObject(a)},n}(Te);t.ContentProxy=Et,o(Et,ve);var Dt=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.AudioLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.AudioLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.AudioLayoutElement],e[i.id]=!0,n.audioPlayerDescriptor=i.getAudioPlayerDescriptor();var o=i.getProperty(t.Prop.AudioPlayerType);-1===o.IntValue?n.audioPlayerType=o.StringValue:n.audioPlayerType=t.AudioPlayerType[o.IntValue],null!=i.getClosedCaptionDescriptors()&&(n.closedCaptionDescriptors=i.getClosedCaptionDescriptors().serialize()),n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var r=i.getProperty(t.Prop.ContentType);-1===r.IntValue?n.contentType=r.StringValue:n.contentType=t.ContentType[r.IntValue],n.flags=i.getFlags().serialize();var a=i.getProperty(t.Prop.Cursor);return-1===a.IntValue?n.cursor=a.StringValue:n.cursor=t.Cursor[a.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.AudioLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.audioPlayerDescriptor&&l.setAudioPlayerDescriptor(o.audioPlayerDescriptor),void 0!==o.audioPlayerType&&(void 0!==(u=t.AudioPlayerType[o.audioPlayerType])?l.setAudioPlayerTypeInternal(new n(u)):l.setAudioPlayerTypeInternal(new n(o.audioPlayerType))),void 0!==o.closedCaptionDescriptors&&l.getClosedCaptionDescriptors().deserializeStructCollection(o.closedCaptionDescriptors,Xi.Deserialize),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.AudioLayoutElement=Dt,o(Dt,d),o(Dt,u),o(Dt,Se);var Bt=function(e){function o(i,n){var o=e.call(this,i,n,t.ObjectType.CodeBlockLayoutElement)||this;return o.model=n.renderModelRoot,o.position=new Mt(o,t.Prop.PositionLeft,t.Prop.PositionTop,t.Prop.PositionWidth,t.Prop.PositionHeight),o.visibleCullingRegion=new Mt(o,t.Prop.VisibleCullingRegionLeft,t.Prop.VisibleCullingRegionTop,t.Prop.VisibleCullingRegionWidth,t.Prop.VisibleCullingRegionHeight),o.transforms=new xt(o,t.Meaning.LayoutNodeHasTransform),o.parentKeyFrames=new kt(o,t.Meaning.KeyFramePointsToLayoutNode,!1),o}return __extends(o,e),o.Create=function(e,i){var n=e.graph.createObject(t.ObjectType.CodeBlockLayoutElement,i);return e.getModelObject(n)},o.prototype.serialize=function(e){var i=this;void 0===e&&(e={});var n={};if(n.id=i.id,void 0!==e[i.id])return n.ref=!0,n;n.objType=t.ObjectType[t.ObjectType.CodeBlockLayoutElement],e[i.id]=!0,n.content=i.getContent(),n.language=i.getLanguage(),n.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},null!=i.getBorderRadius()&&(n.borderRadius=i.getBorderRadius().serialize()),n.dropShadowXOff=i.getDropShadowXOff(),n.dropShadowYOff=i.getDropShadowYOff(),n.dropShadowBlur=i.getDropShadowBlur(),n.dropShadowColor=i.getDropShadowColor(),n.dropShadowSpread=i.getDropShadowSpread(),n.dropShadowInset=i.getDropShadowInset(),n.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),n.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),n.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),n.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),n.zOrder=i.getZOrder(),n.fillOpacityOverride=i.getFillOpacityOverride(),n.fillColorOverride=i.getFillColorOverride(),n.isOverlay=i.getIsOverlay(),n.isClickThrough=i.getIsClickThrough(),n.fillColorName=i.getFillColorName(),n.downscaleFactor=i.getDownscaleFactor(),n.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},n.unhashedId=i.getUnhashedId(),n.keyFrameType=i.getKeyFrameType(),n.contentId=i.getContentId(),n.opacity=i.getOpacity(),n.hidden=i.getHidden(),n.animated=i.getAnimated();var o=i.getProperty(t.Prop.ContentType);-1===o.IntValue?n.contentType=o.StringValue:n.contentType=t.ContentType[o.IntValue],n.flags=i.getFlags().serialize();var r=i.getProperty(t.Prop.Cursor);return-1===r.IntValue?n.cursor=r.StringValue:n.cursor=t.Cursor[r.IntValue],null!=i.getTransformOrigin()&&(n.transformOrigin=i.getTransformOrigin().serialize()),null!=i.getAccessibilityInfo()&&(n.accessibilityInfo=i.getAccessibilityInfo().serialize()),void 0!==i.getBackgroundImage()&&(n.backgroundImage=i.getBackgroundImage().serialize(e)),void 0!==i.getBackgroundPath()&&(n.backgroundPath=i.getBackgroundPath().serialize(e)),void 0!==i.getBackgroundFilterPath()&&(n.backgroundFilterPath=i.getBackgroundFilterPath().serialize(e)),n.transforms=i.transforms.serialize(e),void 0!==i.getLayoutContext()&&(n.layoutContext=i.getLayoutContext().serialize(e)),n},o.Deserialize=function(e,o,r){var a=o.id;if(r&&(r[o.id]||(r[o.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),a=r[o.id]),o.ref)return e.getModelObject(a);var s=e.graph.createObject(t.ObjectType.CodeBlockLayoutElement,a),l=e.getModelObject(s);if(void 0!==o.content&&l.setContent(o.content),void 0!==o.language&&l.setLanguage(o.language),void 0!==o.position&&(l.position.setLeft(o.position.left),l.position.setTop(o.position.top),l.position.setWidth(o.position.width),l.position.setHeight(o.position.height)),void 0!==o.borderRadius&&l.setBorderRadius(Bi.Deserialize(o.borderRadius)),void 0!==o.dropShadowXOff&&l.setDropShadowXOff(o.dropShadowXOff),void 0!==o.dropShadowYOff&&l.setDropShadowYOff(o.dropShadowYOff),void 0!==o.dropShadowBlur&&l.setDropShadowBlur(o.dropShadowBlur),void 0!==o.dropShadowColor&&l.setDropShadowColor(o.dropShadowColor),void 0!==o.dropShadowSpread&&l.setDropShadowSpread(o.dropShadowSpread),void 0!==o.dropShadowInset&&l.setDropShadowInset(o.dropShadowInset),void 0!==o.backgroundPathShadowXOff&&l.setBackgroundPathShadowXOff(o.backgroundPathShadowXOff),void 0!==o.backgroundPathShadowYOff&&l.setBackgroundPathShadowYOff(o.backgroundPathShadowYOff),void 0!==o.backgroundPathShadowBlur&&l.setBackgroundPathShadowBlur(o.backgroundPathShadowBlur),void 0!==o.backgroundPathShadowColor&&l.setBackgroundPathShadowColor(o.backgroundPathShadowColor),void 0!==o.zOrder&&l.setZOrder(o.zOrder),void 0!==o.fillOpacityOverride&&l.setFillOpacityOverride(o.fillOpacityOverride),void 0!==o.fillColorOverride&&l.setFillColorOverride(o.fillColorOverride),void 0!==o.isOverlay&&l.setIsOverlay(o.isOverlay),void 0!==o.isClickThrough&&l.setIsClickThrough(o.isClickThrough),void 0!==o.fillColorName&&l.setFillColorName(o.fillColorName),void 0!==o.downscaleFactor&&l.setDownscaleFactor(o.downscaleFactor),void 0!==o.visibleCullingRegion&&(l.visibleCullingRegion.setLeft(o.visibleCullingRegion.left),l.visibleCullingRegion.setTop(o.visibleCullingRegion.top),l.visibleCullingRegion.setWidth(o.visibleCullingRegion.width),l.visibleCullingRegion.setHeight(o.visibleCullingRegion.height)),void 0!==o.unhashedId&&l.setUnhashedId(o.unhashedId),void 0!==o.keyFrameType&&l.setKeyFrameType(o.keyFrameType),void 0!==o.contentId&&l.setContentId(o.contentId),void 0!==o.opacity&&l.setOpacity(o.opacity),void 0!==o.hidden&&l.setHidden(o.hidden),void 0!==o.animated&&l.setAnimated(o.animated),void 0!==o.contentType&&(void 0!==(u=t.ContentType[o.contentType])?l.setContentTypeInternal(new n(u)):l.setContentTypeInternal(new n(o.contentType))),void 0!==o.flags&&l.setFlags(new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,o.flags))),void 0!==o.cursor){var u=t.Cursor[o.cursor];void 0!==u?l.setCursorInternal(new n(u)):l.setCursorInternal(new n(o.cursor))}return void 0!==o.transformOrigin&&l.setTransformOrigin(Ni.Deserialize(o.transformOrigin)),void 0!==o.accessibilityInfo&&l.setAccessibilityInfo(Wi.Deserialize(o.accessibilityInfo)),void 0!==o.backgroundImage&&l.setBackgroundImage(e.deserialize(o.backgroundImage,r)),void 0!==o.backgroundPath&&l.setBackgroundPath(e.deserialize(o.backgroundPath,r)),void 0!==o.backgroundFilterPath&&l.setBackgroundFilterPath(e.deserialize(o.backgroundFilterPath,r)),void 0!==o.transforms&&l.transforms.deserialize(o.transforms,r),void 0!==o.layoutContext&&l.setLayoutContext(e.deserialize(o.layoutContext,r)),l},o}(Te);t.CodeBlockLayoutElement=Bt,o(Bt,d),o(Bt,u),o(Bt,we);var Vt=function(e){function n(i){var n=e.call(this)||this;return n.graph=new t.RenderGraph(i),n._modelObjects={},n._creators={RenderModelRoot:Ce,ToCElement:_e,ToCBackgroundElement:be,LayoutTree:Ae,ContainerLayoutElement:Pe,PanelLayoutElement:Ie,RegionLayoutElement:Ee,MediaViewportLayoutElement:De,TextRunElement:Be,TextBlockLayoutElement:Ve,TextSection:Me,TextParagraph:Le,TextList:ke,DecorationLayoutElement:xe,ImageLayoutElement:Re,VideoLayoutElement:Oe,MapLayoutElement:Fe,ProjectionLayoutElement:Ue,ViewportLayoutElement:Ne,EmbedLayoutElement:ze,ClientLayoutElement:He,AgaveLayoutElement:We,StatusUpdateLayoutElement:Ke,ContainerSceneGraphElement:je,TextureSceneGraphElement:qe,AnimationSequence:Ge,Animation:Xe,AnimationExternalAction:Ye,AnimationTarget:Ze,AnimationFunction:$e,AnimationParameter:Je,StaticImage:Qe,Path:et,InteractionModel:tt,FsmNode:it,FsmEdge:nt,KeyFrame:ot,TriggerSet:rt,Trigger:at,DefaultAction:st,SelectMethod:lt,SwipeSelectMethod:ut,ClientSelectMethod:dt,EditModeClientSignal:ct,AutoAdvanceClientSignal:pt,KeyboardSelectMethod:gt,KeyClick:ht,MouseSelectMethod:yt,CameraSelect:mt,CameraSelectMethod:ft,TimingSelect:vt,TimingSelectMethod:St,StatelessRule:wt,RotationTransform2D:Tt,TranslateTransform2D:Ct,ScaleTransform2D:_t,RotationTransform3D:bt,TranslateTransform3D:At,ScaleTransform3D:Pt,LayoutContext:It,ContentProxy:Et,AudioLayoutElement:Dt,CodeBlockLayoutElement:Bt},n.renderModelRoot=n.getModelObject("RenderRoot"),n.graph.registerObjectDisposalCallback(n.disposeModelObjects.bind(n)),n}return __extends(n,e),n.prototype.getModelObject=function(e){var i=this;return i.graph.containsObject(e)?(void 0===i._modelObjects[e]&&(i._modelObjects[e]=new(i._creators[t.ObjectType[i.graph.getObjectType(e)]])(e,i)),i._modelObjects[e]):null},n.prototype.getSchemaVersion=function(){return this.graph.getProperty("ModelRoot",t.Prop.SchemaVersion)},n.prototype.disposeModelObjects=function(e){for(var t=this,i=0;i<e.length;i++){var n=e[i],o=t._modelObjects[n];o&&o.dispose(),delete t._modelObjects[n]}},n.prototype.deserialize=function(e,t){var n=this,o=e.id;if(t&&(t[e.id]||(t[e.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),o=t[e.id]),e.ref)return n.getModelObject(o);if(void 0===e.objType)throw new Error("Missing object type encountered when deserializing object.");if(void 0===n._creators[e.objType])throw new Error("Invalid object type encountered when deserializing object.");return n._creators[e.objType].Deserialize(n,e,t)},n.PropSerializer=t.RenderGraph.PropSerializer,n.RootId=t.RenderGraph.RootId,n.ModelType=4,n}(ObjectOM);t.RenderModel=Vt;var Mt=function(e){function t(t,i,n,o,r){var a=e.call(this)||this;return a._modelObject=t,a._leftProp=i,a._topProp=n,a._widthProp=o,a._heightProp=r,a}return __extends(t,e),t.prototype.getLeft=function(e){var t=this;return t._modelObject.getProperty(t._leftProp,e)},t.prototype.setLeft=function(e){var t=this;t._modelObject.setProperty(t._leftProp,e)},t.prototype.getTop=function(e){var t=this;return t._modelObject.getProperty(t._topProp,e)},t.prototype.setTop=function(e){var t=this;t._modelObject.setProperty(t._topProp,e)},t.prototype.getWidth=function(e){var t=this;return t._modelObject.getProperty(t._widthProp,e)},t.prototype.setWidth=function(e){var t=this;t._modelObject.setProperty(t._widthProp,e)},t.prototype.getHeight=function(e){var t=this;return t._modelObject.getProperty(t._heightProp,e)},t.prototype.setHeight=function(e){var t=this;t._modelObject.setProperty(t._heightProp,e)},t}(ObjectOM);t.Rectangle=Mt;var Lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setParent=function(e){var t=this;if(null!=e&&null!=t._parent)throw new Error("You must orphan this element before setting it to a new parent.");t._parent=e},t.prototype.setObjectProperty=function(e,t){var i=this;i._modelObject=e,i._prop=t},t.prototype.propertyUpdated=function(){var e=this;null!=e._parent?e._parent.propertyUpdated():void 0!=e._modelObject&&void 0!=e._prop&&e._modelObject.updateProperty(e._prop)},t.prototype.watchProperty=function(e){var t=this;void 0!=e&&(null!=t._parent?t._parent.watchProperty(e):void 0!=t._modelObject&&void 0!=t._prop&&t._modelObject.getProperty(t._prop,e))},t.prototype.copyFrom=function(e){var t=this;t._modelObject=e._modelObject,t._prop=e._prop},t}(ObjectOM);t.PropertyParent=Lt;var kt=function(e){function t(t,i,n){var o=e.call(this)||this;return o.modelObject=t,o.meaning=i,o.forward=n,o}return __extends(t,e),t.prototype.getCollection=function(e){var t=this;return t.forward?t.modelObject.getRelationshipsFrom(t.meaning,e):t.modelObject.getRelationshipsTo(t.meaning,e)},t}(ObjectOM);t.ObjectCollection=kt;var xt=function(e){function t(t,i){return e.call(this,t,i,!0)||this}return __extends(t,e),t.prototype.add=function(e,t){var i=this;i.modelObject.addRelationship(e,i.meaning,t)},t.prototype.remove=function(e){var t=this;t.modelObject.removeRelationship(e,t.meaning)},t.prototype.removeAt=function(e){var t=this;t.remove(t.getCollection()[e])},t.prototype.set=function(e){var t=this;t.modelObject.setRelationships(e,t.meaning)},t.prototype.serialize=function(e){for(var t=[],i=this.getCollection(),n=i.length,o=0;o<n;o++)t.push(i[o].serialize(e));return t},t.prototype.deserialize=function(e,t){for(var i=this,n=0;n<e.length;n++){var o=e[n],r=i.modelObject.renderModel.deserialize(o,t);i.add(r)}},t}(kt);t.ObjectCollectionWritable=xt;var Rt=function(t){function i(){var e=t.call(this)||this;return e._collection=[],e}return __extends(i,t),i.prototype.getLength=function(e){var t=this;return t.watchProperty(e),t._collection.length},i.prototype.itemAtIndex=function(e,t){var i=this;return i.watchProperty(t),i._collection[e]},i.prototype.add=function(e,t){var i=this;i.propertyUpdated(),void 0!=t?i._collection.splice(t,0,e):i._collection.push(e)},i.prototype.removeAt=function(e){var t=this;t.propertyUpdated(),t._collection.splice(e,1)},i.prototype.getCollection=function(e){var t=this;return t.watchProperty(e),t._collection},i.prototype.setCollection=function(e){var t=this;t.propertyUpdated(),t._collection=e},i.prototype.serialize=function(){var e=this,t=e.getLength();if(0!=t){for(var i=[],n=0;n<t;n++)i.push(e.itemAtIndex(n));return i}},i.prototype.deserializePropertyCollection=function(e){this._collection=e},i.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),i._collection=e._collection.slice()},i.prototype.createCopy=function(){var e=this,t=new i;return t.copyFrom(e),t},i.prototype.equals=function(t){var i=this;return!!t&&e.Utilities.sequenceEquals(i._collection,t._collection)},i}(Lt);t.PropertyCollection=Rt;var Ot=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.add=function(t,i){var n=this;t.setParent(n),e.prototype.add.call(this,t,i)},t.prototype.removeAt=function(t){this.itemAtIndex(t).setParent(null),e.prototype.removeAt.call(this,t)},t.prototype.setCollection=function(t){for(var i=this,n=i.getLength(),o=0;o<n;o++)i.itemAtIndex(o).setParent(null);e.prototype.setCollection.call(this,t);for(var o=0,r=t.length;o<r;++o)t[o].setParent(i)},t.prototype.serialize=function(){for(var e=this,t=[],i=e.getLength(),n=0;n<i;n++)t.push(e.itemAtIndex(n).serialize());return t},t.prototype.deserializeStructCollection=function(e,t){for(var i=this;i.getLength()>0;)i.removeAt(0);for(var n=e.length,o=0;o<n;o++)i.add(t(e[o]))},t.prototype.copyFrom=function(t){var i=this;e.prototype.copyFrom.call(this,t);for(var n=i.getCollection(),o=0,r=n.length;o<r;++o){var a=n[o].createCopy();n[o]=a,a.setParent(i)}},t.prototype.createCopy=function(){var e=this,i=new t;return i.copyFrom(e),i},t.prototype.equals=function(e){var t=this;if(!e)return!1;var i=t.getCollection(),n=e.getCollection();if(i.length!==n.length)return!1;for(var o=0,r=i.length;o<r;++o)if(!i[o].equals(n[o]))return!1;return!0},t}(Rt);t.StructCollection=Ot;var Ft=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.add=function(t,i){t instanceof n?e.prototype.add.call(this,t,i):e.prototype.add.call(this,new n(t),i)},t.prototype.removeAt=function(t){e.prototype.removeAt.call(this,t)},t.prototype.setCollection=function(t){if(t[0]instanceof n)e.prototype.setCollection.call(this,t);else{var i=[];for(var o in t)i.push(new n(o));e.prototype.setCollection.call(this,i)}},t.prototype.getCollectionCopy=function(){for(var e=[],t=this.getLength(),i=0;i<t;i++)e.push(this.itemAtIndex(i).IntValue);return e},t.prototype.serialize=function(e){for(var t=this,i=[],n=t.getLength(),o=0;o<n;o++)i.push(t.itemAtIndex(o).serialize(e));return i},t.prototype.deserializeEnumCollection=function(e,t){for(var i=this;i.getLength()>0;)i.removeAt(0);for(var o=e.length,r=0;r<o;r++){var a=t[e[r]];void 0!==a?i.add(new n(a)):i.add(new n(e[r]))}},t.prototype.copyFrom=function(t){var i=this;e.prototype.copyFrom.call(this,t);for(var n=i.getCollection(),o=0,r=n.length;o<r;++o)n[o]=n[o].createCopy()},t.prototype.createCopy=function(){var e=this,i=new t;return i.copyFrom(e),i},t.prototype.equals=function(e){var t=this;if(!e)return!1;var i=t.getCollection(),n=e.getCollection();if(i.length!==n.length)return!1;for(var o=0,r=i.length;o<r;++o)if(!i[o].equals(n[o]))return!1;return!0},t}(Rt);t.EnumCollection=Ft;var Ut={getTopLeft:function(e){return this.watchProperty(e),this._TopLeft},setTopLeft:function(e){this._TopLeft!=e&&(this.propertyUpdated(),this._TopLeft=e)},getTopRight:function(e){return this.watchProperty(e),this._TopRight},setTopRight:function(e){this._TopRight!=e&&(this.propertyUpdated(),this._TopRight=e)},getBottomRight:function(e){return this.watchProperty(e),this._BottomRight},setBottomRight:function(e){this._BottomRight!=e&&(this.propertyUpdated(),this._BottomRight=e)},getBottomLeft:function(e){return this.watchProperty(e),this._BottomLeft},setBottomLeft:function(e){this._BottomLeft!=e&&(this.propertyUpdated(),this._BottomLeft=e)}},Nt={getText:function(e){return this.watchProperty(e),this._Text},setText:function(e){this._Text!=e&&(this.propertyUpdated(),this._Text=e)},getImageUrl:function(e){return this.watchProperty(e),this._ImageUrl},setImageUrl:function(e){this._ImageUrl!=e&&(this.propertyUpdated(),this._ImageUrl=e)},getContentId:function(e){return this.watchProperty(e),this._ContentId},setContentId:function(e){this._ContentId!=e&&(this.propertyUpdated(),this._ContentId=e)},getCoordinate:function(e){return this.watchProperty(e),this._Coordinate},setCoordinate:function(e){this._Coordinate!=e&&(this.propertyUpdated(),this._Coordinate=e)}},zt={getId:function(e){return this.watchProperty(e),this._Id},setId:function(e){this._Id!=e&&(this.propertyUpdated(),this._Id=e)},getValue:function(e){return this.watchProperty(e),this._Value},setValue:function(e){this._Value!=e&&(this.propertyUpdated(),this._Value=e)}},Ht={getStartPoint:function(e){return this.watchProperty(e),this._StartPoint},setStartPoint:function(e){this._StartPoint!=e&&(this.propertyUpdated(),this._StartPoint=e)},getEndPoint:function(e){return this.watchProperty(e),this._EndPoint},setEndPoint:function(e){this._EndPoint!=e&&(this.propertyUpdated(),this._EndPoint=e)},getId:function(e){return this.watchProperty(e),this._Id},setId:function(e){this._Id!=e&&(this.propertyUpdated(),this._Id=e)},getEndAdjustment:function(e){return this.watchProperty(e),this._EndAdjustment},setEndAdjustment:function(e){this._EndAdjustment!=e&&(this.propertyUpdated(),this._EndAdjustment=e)},getCanIgnoreEdgeAlignment:function(e){return this.watchProperty(e),this._CanIgnoreEdgeAlignment},setCanIgnoreEdgeAlignment:function(e){this._CanIgnoreEdgeAlignment!=e&&(this.propertyUpdated(),this._CanIgnoreEdgeAlignment=e)},getSnapType:function(e){return this.watchProperty(e),this._SnapType.IntValue},setSnapType:function(e){this._SnapType.IntValue!=e&&(this.propertyUpdated(),this._SnapType=new n(e))}},Wt={getEditMode:function(e){return this.watchProperty(e),this._EditMode.IntValue},setEditMode:function(e){this._EditMode.IntValue!=e&&(this.propertyUpdated(),this._EditMode=new n(e))},getIsNavigating:function(e){return this.watchProperty(e),this._IsNavigating.IntValue},setIsNavigating:function(e){this._IsNavigating.IntValue!=e&&(this.propertyUpdated(),this._IsNavigating=new n(e))},getAccessibilityMode:function(e){return this.watchProperty(e),this._AccessibilityMode.IntValue},setAccessibilityMode:function(e){this._AccessibilityMode.IntValue!=e&&(this.propertyUpdated(),this._AccessibilityMode=new n(e))}},Kt={getId:function(e){return this.watchProperty(e),this._Id},setId:function(e){this._Id!=e&&(this.propertyUpdated(),this._Id=e)},getFamily:function(e){return this.watchProperty(e),this._Family},setFamily:function(e){this._Family!=e&&(this.propertyUpdated(),this._Family=e)},getSize:function(e){return this.watchProperty(e),this._Size},setSize:function(e){this._Size!=e&&(this.propertyUpdated(),this._Size=e)},getDefinedStyle:function(e){return this.watchProperty(e),this._DefinedStyle.IntValue},setDefinedStyle:function(e){this._DefinedStyle.IntValue!=e&&(this.propertyUpdated(),this._DefinedStyle=new n(e))},getStyle:function(e){return this.watchProperty(e),this._Style.IntValue},setStyle:function(e){this._Style.IntValue!=e&&(this.propertyUpdated(),this._Style=new n(e))},getDefinedWeight:function(e){return this.watchProperty(e),this._DefinedWeight.IntValue},setDefinedWeight:function(e){this._DefinedWeight.IntValue!=e&&(this.propertyUpdated(),this._DefinedWeight=new n(e))},getWeight:function(e){return this.watchProperty(e),this._Weight.IntValue},setWeight:function(e){this._Weight.IntValue!=e&&(this.propertyUpdated(),this._Weight=new n(e))},getStretch:function(e){return this.watchProperty(e),this._Stretch.IntValue},setStretch:function(e){this._Stretch.IntValue!=e&&(this.propertyUpdated(),this._Stretch=new n(e))},getTracking:function(e){return this.watchProperty(e),this._Tracking},setTracking:function(e){this._Tracking!=e&&(this.propertyUpdated(),this._Tracking=e)},getTextAlignment:function(e){return this.watchProperty(e),this._TextAlignment.IntValue},setTextAlignment:function(e){this._TextAlignment.IntValue!=e&&(this.propertyUpdated(),this._TextAlignment=new n(e))},getFileName:function(e){return this.watchProperty(e),this._FileName},setFileName:function(e){this._FileName!=e&&(this.propertyUpdated(),this._FileName=e)},getGenericFamily:function(e){return this.watchProperty(e),this._GenericFamily},setGenericFamily:function(e){this._GenericFamily!=e&&(this.propertyUpdated(),this._GenericFamily=e)},getTestString:function(e){return this.watchProperty(e),this._TestString},setTestString:function(e){this._TestString!=e&&(this.propertyUpdated(),this._TestString=e)}},jt={getLatitude:function(e){return this.watchProperty(e),this._Latitude},setLatitude:function(e){this._Latitude!=e&&(this.propertyUpdated(),this._Latitude=e)},getLongitude:function(e){return this.watchProperty(e),this._Longitude},setLongitude:function(e){this._Longitude!=e&&(this.propertyUpdated(),this._Longitude=e)}},qt={getElementId:function(e){return this.watchProperty(e),this._ElementId},setElementId:function(e){this._ElementId!=e&&(this.propertyUpdated(),this._ElementId=e)},getName:function(e){return this.watchProperty(e),this._Name},setName:function(e){this._Name!=e&&(this.propertyUpdated(),this._Name=e)}},Gt={getAnimatablePropertyName:function(e){return this.watchProperty(e),this._AnimatablePropertyName.IntValue},setAnimatablePropertyName:function(e){this._AnimatablePropertyName.IntValue!=e&&(this.propertyUpdated(),this._AnimatablePropertyName=new n(e))},getCurve:function(e){return this.watchProperty(e),this._Curve.IntValue},setCurve:function(e){this._Curve.IntValue!=e&&(this.propertyUpdated(),this._Curve=new n(e))},getTimingFunction:function(e){return this.watchProperty(e),this._TimingFunction},setTimingFunction:function(e){this._TimingFunction!=e&&(this.propertyUpdated(),this._TimingFunction=e)},getDuration:function(e){return this.watchProperty(e),this._Duration},setDuration:function(e){this._Duration!=e&&(this.propertyUpdated(),this._Duration=e)},getDelay:function(e){return this.watchProperty(e),this._Delay},setDelay:function(e){this._Delay!=e&&(this.propertyUpdated(),this._Delay=e)}},Xt={getTransformComponent:function(e){return this.watchProperty(e),this._TransformComponent.IntValue},setTransformComponent:function(e){this._TransformComponent.IntValue!=e&&(this.propertyUpdated(),this._TransformComponent=new n(e))},getTransformIndex:function(e){return this.watchProperty(e),this._TransformIndex},setTransformIndex:function(e){this._TransformIndex!=e&&(this.propertyUpdated(),this._TransformIndex=e)},getStartValue:function(e){return this.watchProperty(e),this._StartValue},setStartValue:function(e){this._StartValue!=e&&(this.propertyUpdated(),this._StartValue=e)},getEndValue:function(e){return this.watchProperty(e),this._EndValue},setEndValue:function(e){this._EndValue!=e&&(this.propertyUpdated(),this._EndValue=e)}},Yt={getX:function(e){return this.watchProperty(e),this._X},setX:function(e){this._X!=e&&(this.propertyUpdated(),this._X=e)},getY:function(e){return this.watchProperty(e),this._Y},setY:function(e){this._Y!=e&&(this.propertyUpdated(),this._Y=e)},getZ:function(e){return this.watchProperty(e),this._Z},setZ:function(e){this._Z!=e&&(this.propertyUpdated(),this._Z=e)}},Zt={getFsmNodeId:function(e){return this.watchProperty(e),this._FsmNodeId},setFsmNodeId:function(e){this._FsmNodeId!=e&&(this.propertyUpdated(),this._FsmNodeId=e)}},$t={getContentId:function(e){return this.watchProperty(e),this._ContentId},setContentId:function(e){this._ContentId!=e&&(this.propertyUpdated(),this._ContentId=e)}},Jt={},Qt={getName:function(e){return this.watchProperty(e),this._Name},setName:function(e){this._Name!=e&&(this.propertyUpdated(),this._Name=e)},getValue:function(e){return this.watchProperty(e),this._Value},setValue:function(e){this._Value!=e&&(this.propertyUpdated(),this._Value=e)}},ei={getMediaId:function(e){return this.watchProperty(e),this._MediaId},setMediaId:function(e){this._MediaId!=e&&(this.propertyUpdated(),this._MediaId=e)},getMediaType:function(e){return this.watchProperty(e),this._MediaType},setMediaType:function(e){this._MediaType!=e&&(this.propertyUpdated(),this._MediaType=e)},getWidth:function(e){return this.watchProperty(e),this._Width},setWidth:function(e){this._Width!=e&&(this.propertyUpdated(),this._Width=e)},getHeight:function(e){return this.watchProperty(e),this._Height},setHeight:function(e){this._Height!=e&&(this.propertyUpdated(),this._Height=e)}},ti={getWorldId:function(e){return this.watchProperty(e),this._WorldId},setWorldId:function(e){this._WorldId!=e&&(this.propertyUpdated(),this._WorldId=e)},getFontScale:function(e){return this.watchProperty(e),this._FontScale},setFontScale:function(e){this._FontScale!=e&&(this.propertyUpdated(),this._FontScale=e)}},ii={getStartAutomatically:function(e){return this.watchProperty(e),this._StartAutomatically},setStartAutomatically:function(e){this._StartAutomatically!=e&&(this.propertyUpdated(),this._StartAutomatically=e)},getLoop:function(e){return this.watchProperty(e),this._Loop},setLoop:function(e){this._Loop!=e&&(this.propertyUpdated(),this._Loop=e)},getSpeed:function(e){return this.watchProperty(e),this._Speed},setSpeed:function(e){this._Speed!=e&&(this.propertyUpdated(),this._Speed=e)}},ni={getCaptionId:function(e){return this.watchProperty(e),this._CaptionId},setCaptionId:function(e){this._CaptionId!=e&&(this.propertyUpdated(),this._CaptionId=e)},getLanguage:function(e){return this.watchProperty(e),this._Language},setLanguage:function(e){this._Language!=e&&(this.propertyUpdated(),this._Language=e)},getFileName:function(e){return this.watchProperty(e),this._FileName},setFileName:function(e){this._FileName!=e&&(this.propertyUpdated(),this._FileName=e)},getLabel:function(e){return this.watchProperty(e),this._Label},setLabel:function(e){this._Label!=e&&(this.propertyUpdated(),this._Label=e)}},oi={getName:function(e){return this.watchProperty(e),this._Name},setName:function(e){this._Name!=e&&(this.propertyUpdated(),this._Name=e)},getScope:function(e){return this.watchProperty(e),this._Scope},setScope:function(e){this._Scope!=e&&(this.propertyUpdated(),this._Scope=e)},getFunctional:function(e){return this.watchProperty(e),this._Functional},setFunctional:function(e){this._Functional!=e&&(this.propertyUpdated(),this._Functional=e)},getKeyframeTarget:function(e){return this.watchProperty(e),this._KeyframeTarget.IntValue},setKeyframeTarget:function(e){this._KeyframeTarget.IntValue!=e&&(this.propertyUpdated(),this._KeyframeTarget=new n(e))}},ri={getAdvanceTimeBase:function(e){return this.watchProperty(e),this._AdvanceTimeBase},setAdvanceTimeBase:function(e){this._AdvanceTimeBase!=e&&(this.propertyUpdated(),this._AdvanceTimeBase=e)},getKeyframeTarget:function(e){return this.watchProperty(e),this._KeyframeTarget.IntValue},setKeyframeTarget:function(e){this._KeyframeTarget.IntValue!=e&&(this.propertyUpdated(),this._KeyframeTarget=new n(e))},getRequiredBuiltInSymbols:function(e){return this.watchProperty(e),this._RequiredBuiltInSymbols},setRequiredBuiltInSymbols:function(e){this._RequiredBuiltInSymbols!=e&&(this.propertyUpdated(),this._RequiredBuiltInSymbols=e)},getLayoutFlags:function(e){return this.watchProperty(e),this._LayoutFlags},setLayoutFlags:function(e){this._LayoutFlags!=e&&(this.propertyUpdated(),this._LayoutFlags=e)},getKeyframeSelector:function(e){return this.watchProperty(e),this._KeyframeSelector},setKeyframeSelector:function(e){this._KeyframeSelector!=e&&(this.propertyUpdated(),this._KeyframeSelector=e)},getKeyframeSelectorName:function(e){return this.watchProperty(e),this._KeyframeSelectorName},setKeyframeSelectorName:function(e){this._KeyframeSelectorName!=e&&(this.propertyUpdated(),this._KeyframeSelectorName=e)},getCurve:function(e){return this.watchProperty(e),this._Curve},setCurve:function(e){this._Curve!=e&&(this.propertyUpdated(),this._Curve=e)},getEasingBias:function(e){return this.watchProperty(e),this._EasingBias},setEasingBias:function(e){this._EasingBias!=e&&(this.propertyUpdated(),this._EasingBias=e)},getEasingGain:function(e){return this.watchProperty(e),this._EasingGain},setEasingGain:function(e){this._EasingGain!=e&&(this.propertyUpdated(),this._EasingGain=e)},getComputedDuration:function(e){return this.watchProperty(e),this._ComputedDuration},setComputedDuration:function(e){this._ComputedDuration!=e&&(this.propertyUpdated(),this._ComputedDuration=e)},getComputedDelay:function(e){return this.watchProperty(e),this._ComputedDelay},setComputedDelay:function(e){this._ComputedDelay!=e&&(this.propertyUpdated(),this._ComputedDelay=e)},getRtlAdjustment:function(e){return this.watchProperty(e),this._RtlAdjustment.IntValue},setRtlAdjustment:function(e){this._RtlAdjustment.IntValue!=e&&(this.propertyUpdated(),this._RtlAdjustment=new n(e))},getBreakpoint:function(e){return this.watchProperty(e),this._Breakpoint},setBreakpoint:function(e){this._Breakpoint!=e&&(this.propertyUpdated(),this._Breakpoint=e)}},ai={getAction:function(e){return this.watchProperty(e),this._Action.IntValue},setAction:function(e){this._Action.IntValue!=e&&(this.propertyUpdated(),this._Action=new n(e))}},si={getAction:function(e){return this.watchProperty(e),this._Action.IntValue},setAction:function(e){this._Action.IntValue!=e&&(this.propertyUpdated(),this._Action=new n(e))}},li={getAction:function(e){return this.watchProperty(e),this._Action.IntValue},setAction:function(e){this._Action.IntValue!=e&&(this.propertyUpdated(),this._Action=new n(e))}},ui={getSymbolName:function(e){return this.watchProperty(e),this._SymbolName},setSymbolName:function(e){this._SymbolName!=e&&(this.propertyUpdated(),this._SymbolName=e)},getComputedValue:function(e){return this.watchProperty(e),this._ComputedValue},setComputedValue:function(e){this._ComputedValue!=e&&(this.propertyUpdated(),this._ComputedValue=e)}},di={getComputedCropDescriptorIndex:function(e){return this.watchProperty(e),this._ComputedCropDescriptorIndex},setComputedCropDescriptorIndex:function(e){this._ComputedCropDescriptorIndex!=e&&(this.propertyUpdated(),this._ComputedCropDescriptorIndex=e)}},ci={getName:function(e){return this.watchProperty(e),this._Name},setName:function(e){this._Name!=e&&(this.propertyUpdated(),this._Name=e)},getValue:function(e){return this.watchProperty(e),this._Value},setValue:function(e){this._Value!=e&&(this.propertyUpdated(),this._Value=e)}},pi={getName:function(e){return this.watchProperty(e),this._Name},setName:function(e){this._Name!=e&&(this.propertyUpdated(),this._Name=e)}},gi={getActionType:function(e){return this.watchProperty(e),this._ActionType.IntValue},setActionType:function(e){this._ActionType.IntValue!=e&&(this.propertyUpdated(),this._ActionType=new n(e))}},hi={getComputedCondition:function(e){return this.watchProperty(e),this._ComputedCondition},setComputedCondition:function(e){this._ComputedCondition!=e&&(this.propertyUpdated(),this._ComputedCondition=e)},getElse:function(e){return this.watchProperty(e),this._Else},setElse:function(e){this._Else!=e&&(this.propertyUpdated(),this._Else=e)}},yi={},mi={getComputedStartValue:function(e){return this.watchProperty(e),this._ComputedStartValue},setComputedStartValue:function(e){this._ComputedStartValue!=e&&(this.propertyUpdated(),this._ComputedStartValue=e)},getComputedEndValue:function(e){return this.watchProperty(e),this._ComputedEndValue},setComputedEndValue:function(e){this._ComputedEndValue!=e&&(this.propertyUpdated(),this._ComputedEndValue=e)}},fi={getTransformType:function(e){return this.watchProperty(e),this._TransformType.IntValue},setTransformType:function(e){this._TransformType.IntValue!=e&&(this.propertyUpdated(),this._TransformType=new n(e))},getComponent:function(e){return this.watchProperty(e),this._Component.IntValue},setComponent:function(e){this._Component.IntValue!=e&&(this.propertyUpdated(),this._Component=new n(e))}},vi={},Si={getAnimatableDimension:function(e){return this.watchProperty(e),this._AnimatableDimension.IntValue},setAnimatableDimension:function(e){this._AnimatableDimension.IntValue!=e&&(this.propertyUpdated(),this._AnimatableDimension=new n(e))}},wi={getUseFirstResult:function(e){return this.watchProperty(e),this._UseFirstResult},setUseFirstResult:function(e){this._UseFirstResult!=e&&(this.propertyUpdated(),this._UseFirstResult=e)},getUseLastResult:function(e){return this.watchProperty(e),this._UseLastResult},setUseLastResult:function(e){this._UseLastResult!=e&&(this.propertyUpdated(),this._UseLastResult=e)},getUseCroppedChild:function(e){return this.watchProperty(e),this._UseCroppedChild},setUseCroppedChild:function(e){this._UseCroppedChild!=e&&(this.propertyUpdated(),this._UseCroppedChild=e)},getInitialKeyframe:function(e){return this.watchProperty(e),this._InitialKeyframe.IntValue},setInitialKeyframe:function(e){this._InitialKeyframe.IntValue!=e&&(this.propertyUpdated(),this._InitialKeyframe=new n(e))},getName:function(e){return this.watchProperty(e),this._Name},setName:function(e){this._Name!=e&&(this.propertyUpdated(),this._Name=e)}},Ti={getIncludeSelf:function(e){return this.watchProperty(e),this._IncludeSelf},setIncludeSelf:function(e){this._IncludeSelf!=e&&(this.propertyUpdated(),this._IncludeSelf=e)},getComputedIndex:function(e){return this.watchProperty(e),this._ComputedIndex},setComputedIndex:function(e){this._ComputedIndex!=e&&(this.propertyUpdated(),this._ComputedIndex=e)},getAppliesTo:function(e){return this.watchProperty(e),this._AppliesTo.IntValue},setAppliesTo:function(e){this._AppliesTo.IntValue!=e&&(this.propertyUpdated(),this._AppliesTo=new n(e))}},Ci={getKeyframeTypes:function(e){return this.watchProperty(e),this._KeyframeTypes},setKeyframeTypes:function(e){this._KeyframeTypes!=e&&(this.propertyUpdated(),this._KeyframeTypes=e)}},_i={getMatchMethod:function(e){return this.watchProperty(e),this._MatchMethod.IntValue},setMatchMethod:function(e){this._MatchMethod.IntValue!=e&&(this.propertyUpdated(),this._MatchMethod=new n(e))},getMatchOperation:function(e){return this.watchProperty(e),this._MatchOperation.IntValue},setMatchOperation:function(e){this._MatchOperation.IntValue!=e&&(this.propertyUpdated(),this._MatchOperation=new n(e))},getMatchTo:function(e){return this.watchProperty(e),this._MatchTo.IntValue},setMatchTo:function(e){this._MatchTo.IntValue!=e&&(this.propertyUpdated(),this._MatchTo=new n(e))}},bi={getExpression:function(e){return this.watchProperty(e),this._Expression},setExpression:function(e){this._Expression!=e&&(this.propertyUpdated(),this._Expression=e)},getPropertyType:function(e){return this.watchProperty(e),this._PropertyType.IntValue},setPropertyType:function(e){this._PropertyType.IntValue!=e&&(this.propertyUpdated(),this._PropertyType=new n(e))},getEvaluationContext:function(e){return this.watchProperty(e),this._EvaluationContext},setEvaluationContext:function(e){this._EvaluationContext!=e&&(this.propertyUpdated(),this._EvaluationContext=e)}},Ai={},Pi={getType:function(e){return this.watchProperty(e),this._Type.IntValue},setType:function(e){this._Type.IntValue!=e&&(this.propertyUpdated(),this._Type=new n(e))},getValue:function(e){return this.watchProperty(e),this._Value},setValue:function(e){this._Value!=e&&(this.propertyUpdated(),this._Value=e)},getUnary:function(e){return this.watchProperty(e),this._Unary},setUnary:function(e){this._Unary!=e&&(this.propertyUpdated(),this._Unary=e)}},Ii={getParentKeyframeId:function(e){return this.watchProperty(e),this._ParentKeyframeId},setParentKeyframeId:function(e){this._ParentKeyframeId!=e&&(this.propertyUpdated(),this._ParentKeyframeId=e)},getCroppedChildImageKeyframeId:function(e){return this.watchProperty(e),this._CroppedChildImageKeyframeId},setCroppedChildImageKeyframeId:function(e){this._CroppedChildImageKeyframeId!=e&&(this.propertyUpdated(),this._CroppedChildImageKeyframeId=e)},getLod:function(e){return this.watchProperty(e),this._Lod},setLod:function(e){this._Lod!=e&&(this.propertyUpdated(),this._Lod=e)},getLocationX:function(e){return this.watchProperty(e),this._LocationX},setLocationX:function(e){this._LocationX!=e&&(this.propertyUpdated(),this._LocationX=e)},getLocationY:function(e){return this.watchProperty(e),this._LocationY},setLocationY:function(e){this._LocationY!=e&&(this.propertyUpdated(),this._LocationY=e)},getLocationZ:function(e){return this.watchProperty(e),this._LocationZ},setLocationZ:function(e){this._LocationZ!=e&&(this.propertyUpdated(),this._LocationZ=e)},getScaleX2D:function(e){return this.watchProperty(e),this._ScaleX2D},setScaleX2D:function(e){this._ScaleX2D!=e&&(this.propertyUpdated(),this._ScaleX2D=e)},getScaleY2D:function(e){return this.watchProperty(e),this._ScaleY2D},setScaleY2D:function(e){this._ScaleY2D!=e&&(this.propertyUpdated(),this._ScaleY2D=e)},getRotation2D:function(e){return this.watchProperty(e),this._Rotation2D},setRotation2D:function(e){this._Rotation2D!=e&&(this.propertyUpdated(),this._Rotation2D=e)},getKeyframeFlags:function(e){return this.watchProperty(e),this._KeyframeFlags},setKeyframeFlags:function(e){this._KeyframeFlags!=e&&(this.propertyUpdated(),this._KeyframeFlags=e)},getRowIndex:function(e){return this.watchProperty(e),this._RowIndex},setRowIndex:function(e){this._RowIndex!=e&&(this.propertyUpdated(),this._RowIndex=e)},getGridRow:function(e){return this.watchProperty(e),this._GridRow},setGridRow:function(e){this._GridRow!=e&&(this.propertyUpdated(),this._GridRow=e)},getGridRowCount:function(e){return this.watchProperty(e),this._GridRowCount},setGridRowCount:function(e){this._GridRowCount!=e&&(this.propertyUpdated(),this._GridRowCount=e)}},Ei={getStoryboardName:function(e){return this.watchProperty(e),this._StoryboardName},setStoryboardName:function(e){this._StoryboardName!=e&&(this.propertyUpdated(),this._StoryboardName=e)},getStoryboardScope:function(e){return this.watchProperty(e),this._StoryboardScope},setStoryboardScope:function(e){this._StoryboardScope!=e&&(this.propertyUpdated(),this._StoryboardScope=e)},getSalt:function(e){return this.watchProperty(e),this._Salt},setSalt:function(e){this._Salt!=e&&(this.propertyUpdated(),this._Salt=e)},getSourceKeyframeId:function(e){return this.watchProperty(e),this._SourceKeyframeId},setSourceKeyframeId:function(e){this._SourceKeyframeId!=e&&(this.propertyUpdated(),this._SourceKeyframeId=e)},getTargetKeyframeId:function(e){return this.watchProperty(e),this._TargetKeyframeId},setTargetKeyframeId:function(e){this._TargetKeyframeId!=e&&(this.propertyUpdated(),this._TargetKeyframeId=e)},getDuration:function(e){return this.watchProperty(e),this._Duration},setDuration:function(e){this._Duration!=e&&(this.propertyUpdated(),this._Duration=e)},getDelay:function(e){return this.watchProperty(e),this._Delay},setDelay:function(e){this._Delay!=e&&(this.propertyUpdated(),this._Delay=e)},getKeyframeTarget:function(e){return this.watchProperty(e),this._KeyframeTarget.IntValue},setKeyframeTarget:function(e){this._KeyframeTarget.IntValue!=e&&(this.propertyUpdated(),this._KeyframeTarget=new n(e))},getResetTiming:function(e){return this.watchProperty(e),this._ResetTiming},setResetTiming:function(e){this._ResetTiming!=e&&(this.propertyUpdated(),this._ResetTiming=e)}},Di=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.compareUnknownDictionaries=function(e,i){if(!e||!i)return!1;if(Object.keys(e).length!==Object.keys(i).length)return!1;for(var n in e)if(e[n]!==i[n])return e[n]instanceof Object&&i[n]instanceof Object&&t.compareUnknownDictionaries(e[n],i[n]);return!0},t}(Lt);t.Struct=Di;var Bi=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.BorderRadius,n._TopLeft=0,n._TopRight=0,n._BottomRight=0,n._BottomLeft=0,n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"TopLeft":t._TopLeft=e.TopLeft;break;case"TopRight":t._TopRight=e.TopRight;break;case"BottomRight":t._BottomRight=e.BottomRight;break;case"BottomLeft":t._BottomLeft=e.BottomLeft;break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};0!=e._TopLeft&&(t.TopLeft=e._TopLeft),0!=e._TopRight&&(t.TopRight=e._TopRight),0!=e._BottomRight&&(t.BottomRight=e._BottomRight),0!=e._BottomLeft&&(t.BottomLeft=e._BottomLeft);for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._TopLeft=e._TopLeft,t._TopRight=e._TopRight,t._BottomRight=e._BottomRight,t._BottomLeft=e._BottomLeft;for(var n in e._UnknownProps)t._UnknownProps[n]=e._UnknownProps[n];return t},i.prototype.equals=function(e){var t=this;return!!e&&(this.structType===e.structType&&t._TopLeft===e._TopLeft&&t._TopRight===e._TopRight&&t._BottomRight===e._BottomRight&&t._BottomLeft===e._BottomLeft&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.BorderRadius=Bi,o(Bi,Ut);var Vi=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.MapPin,n._Text="",n._ImageUrl="",n._ContentId="",n._Coordinate=null,n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"Text":t._Text=e.Text;break;case"ImageUrl":t._ImageUrl=e.ImageUrl;break;case"ContentId":t._ContentId=e.ContentId;break;case"Coordinate":t._Coordinate=Ri.Deserialize(e.Coordinate),null!=t._Coordinate&&t._Coordinate.setParent(t);break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};""!=e._Text&&(t.Text=e._Text),""!=e._ImageUrl&&(t.ImageUrl=e._ImageUrl),""!=e._ContentId&&(t.ContentId=e._ContentId),null!=e._Coordinate&&(t.Coordinate=e._Coordinate.serialize());for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._Text=e._Text,t._ImageUrl=e._ImageUrl,t._ContentId=e._ContentId;var n=e._Coordinate;n&&(n=n.createCopy()).setParent(t),t._Coordinate=n;for(var o in e._UnknownProps)t._UnknownProps[o]=e._UnknownProps[o];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._Text!==e._Text||t._ImageUrl!==e._ImageUrl||t._ContentId!==e._ContentId||(t._Coordinate?!t._Coordinate.equals(e._Coordinate):e._Coordinate))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.MapPin=Vi,o(Vi,Nt);var Mi=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.PaletteColorValue,n._Id="",n._Value="",n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"Id":t._Id=e.Id;break;case"Value":t._Value=e.Value;break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};""!=e._Id&&(t.Id=e._Id),""!=e._Value&&(t.Value=e._Value);for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._Id=e._Id,t._Value=e._Value;for(var n in e._UnknownProps)t._UnknownProps[n]=e._UnknownProps[n];return t},i.prototype.equals=function(e){var t=this;return!!e&&(this.structType===e.structType&&t._Id===e._Id&&t._Value===e._Value&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.PaletteColorValue=Mi,o(Mi,zt);var Li=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.SnapPoint,o._StartPoint=0,o._EndPoint=0,o._Id="",o._EndAdjustment=0,o._CanIgnoreEdgeAlignment=!1,o._SnapType=new n(t.SnapPointType.Content),o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"StartPoint":o._StartPoint=e.StartPoint;break;case"EndPoint":o._EndPoint=e.EndPoint;break;case"Id":o._Id=e.Id;break;case"EndAdjustment":o._EndAdjustment=e.EndAdjustment;break;case"CanIgnoreEdgeAlignment":o._CanIgnoreEdgeAlignment=e.CanIgnoreEdgeAlignment;break;case"SnapType":var a=t.SnapPointType[e.SnapType];o._SnapType=new n(void 0!==a?a:e.SnapType);break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};0!=e._StartPoint&&(i.StartPoint=e._StartPoint),0!=e._EndPoint&&(i.EndPoint=e._EndPoint),""!=e._Id&&(i.Id=e._Id),0!=e._EndAdjustment&&(i.EndAdjustment=e._EndAdjustment),0!=e._CanIgnoreEdgeAlignment&&(i.CanIgnoreEdgeAlignment=e._CanIgnoreEdgeAlignment),e._SnapType.IntValue!=t.SnapPointType.Content&&(e._SnapType.IntValue===t.SnapPointType.UnknownValue?i.SnapType=e._SnapType.StringValue:i.SnapType=t.SnapPointType[e._SnapType.IntValue]);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i;t._StartPoint=e._StartPoint,t._EndPoint=e._EndPoint,t._Id=e._Id,t._EndAdjustment=e._EndAdjustment,t._CanIgnoreEdgeAlignment=e._CanIgnoreEdgeAlignment;var n=e._SnapType;n&&(n=n.createCopy()),t._SnapType=n;for(var o in e._UnknownProps)t._UnknownProps[o]=e._UnknownProps[o];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._StartPoint!==e._StartPoint||t._EndPoint!==e._EndPoint||t._Id!==e._Id||t._EndAdjustment!==e._EndAdjustment||t._CanIgnoreEdgeAlignment!==e._CanIgnoreEdgeAlignment||(t._SnapType?!t._SnapType.equals(e._SnapType):e._SnapType))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.SnapPoint=Li,o(Li,Ht);var ki=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.ClientState,o._EditMode=new n(t.ClientStateValue.DontCare),o._IsNavigating=new n(t.ClientStateValue.DontCare),o._AccessibilityMode=new n(t.ClientStateValue.DontCare),o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"EditMode":var a=t.ClientStateValue[e.EditMode];o._EditMode=new n(void 0!==a?a:e.EditMode);break;case"IsNavigating":var s=t.ClientStateValue[e.IsNavigating];o._IsNavigating=new n(void 0!==s?s:e.IsNavigating);break;case"AccessibilityMode":var l=t.ClientStateValue[e.AccessibilityMode];o._AccessibilityMode=new n(void 0!==l?l:e.AccessibilityMode);break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};e._EditMode.IntValue!=t.ClientStateValue.DontCare&&(e._EditMode.IntValue===t.ClientStateValue.UnknownValue?i.EditMode=e._EditMode.StringValue:i.EditMode=t.ClientStateValue[e._EditMode.IntValue]),e._IsNavigating.IntValue!=t.ClientStateValue.DontCare&&(e._IsNavigating.IntValue===t.ClientStateValue.UnknownValue?i.IsNavigating=e._IsNavigating.StringValue:i.IsNavigating=t.ClientStateValue[e._IsNavigating.IntValue]),e._AccessibilityMode.IntValue!=t.ClientStateValue.DontCare&&(e._AccessibilityMode.IntValue===t.ClientStateValue.UnknownValue?i.AccessibilityMode=e._AccessibilityMode.StringValue:i.AccessibilityMode=t.ClientStateValue[e._AccessibilityMode.IntValue]);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._EditMode;n&&(n=n.createCopy()),t._EditMode=n;var o=e._IsNavigating;o&&(o=o.createCopy()),t._IsNavigating=o;var r=e._AccessibilityMode;r&&(r=r.createCopy()),t._AccessibilityMode=r;for(var a in e._UnknownProps)t._UnknownProps[a]=e._UnknownProps[a];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._EditMode?!t._EditMode.equals(e._EditMode):e._EditMode)||(t._IsNavigating?!t._IsNavigating.equals(e._IsNavigating):e._IsNavigating)||(t._AccessibilityMode?!t._AccessibilityMode.equals(e._AccessibilityMode):e._AccessibilityMode))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.ClientState=ki,o(ki,Wt);var xi=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.TextStyle,o._Id="",o._Family="",o._Size=0,o._DefinedStyle=new n(t.FontStyle.Normal),o._Style=new n(t.FontStyle.Normal),o._DefinedWeight=new n(t.FontWeight.Thin),o._Weight=new n(t.FontWeight.Thin),o._Stretch=new n(t.FontStretch.Undefined),o._Tracking=0,o._TextAlignment=new n(t.LayoutTextAlignment.Near),o._FileName="",o.fallbackChain=new Rt,o.fallbackChain.setParent(o),o._GenericFamily="",o._TestString="i",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"Id":o._Id=e.Id;break;case"Family":o._Family=e.Family;break;case"Size":o._Size=e.Size;break;case"DefinedStyle":var a=t.FontStyle[e.DefinedStyle];o._DefinedStyle=new n(void 0!==a?a:e.DefinedStyle);break;case"Style":var s=t.FontStyle[e.Style];o._Style=new n(void 0!==s?s:e.Style);break;case"DefinedWeight":var l=t.FontWeight[e.DefinedWeight];o._DefinedWeight=new n(void 0!==l?l:e.DefinedWeight);break;case"Weight":var u=t.FontWeight[e.Weight];o._Weight=new n(void 0!==u?u:e.Weight);break;case"Stretch":var d=t.FontStretch[e.Stretch];o._Stretch=new n(void 0!==d?d:e.Stretch);break;case"Tracking":o._Tracking=e.Tracking;break;case"TextAlignment":var c=t.LayoutTextAlignment[e.TextAlignment];o._TextAlignment=new n(void 0!==c?c:e.TextAlignment);break;case"FileName":o._FileName=e.FileName;break;case"FallbackChain":o.fallbackChain.deserializePropertyCollection(e.FallbackChain);break;case"GenericFamily":o._GenericFamily=e.GenericFamily;break;case"TestString":o._TestString=e.TestString;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};""!=e._Id&&(i.Id=e._Id),""!=e._Family&&(i.Family=e._Family),0!=e._Size&&(i.Size=e._Size),e._DefinedStyle.IntValue!=t.FontStyle.Normal&&(e._DefinedStyle.IntValue===t.FontStyle.UnknownValue?i.DefinedStyle=e._DefinedStyle.StringValue:i.DefinedStyle=t.FontStyle[e._DefinedStyle.IntValue]),e._Style.IntValue!=t.FontStyle.Normal&&(e._Style.IntValue===t.FontStyle.UnknownValue?i.Style=e._Style.StringValue:i.Style=t.FontStyle[e._Style.IntValue]),e._DefinedWeight.IntValue!=t.FontWeight.Thin&&(e._DefinedWeight.IntValue===t.FontWeight.UnknownValue?i.DefinedWeight=e._DefinedWeight.StringValue:i.DefinedWeight=t.FontWeight[e._DefinedWeight.IntValue]),e._Weight.IntValue!=t.FontWeight.Thin&&(e._Weight.IntValue===t.FontWeight.UnknownValue?i.Weight=e._Weight.StringValue:i.Weight=t.FontWeight[e._Weight.IntValue]),e._Stretch.IntValue!=t.FontStretch.Undefined&&(e._Stretch.IntValue===t.FontStretch.UnknownValue?i.Stretch=e._Stretch.StringValue:i.Stretch=t.FontStretch[e._Stretch.IntValue]),0!=e._Tracking&&(i.Tracking=e._Tracking),e._TextAlignment.IntValue!=t.LayoutTextAlignment.Near&&(e._TextAlignment.IntValue===t.LayoutTextAlignment.UnknownValue?i.TextAlignment=e._TextAlignment.StringValue:i.TextAlignment=t.LayoutTextAlignment[e._TextAlignment.IntValue]),""!=e._FileName&&(i.FileName=e._FileName),i.FallbackChain=e.fallbackChain.serialize(),""!=e._GenericFamily&&(i.GenericFamily=e._GenericFamily),"i"!=e._TestString&&(i.TestString=e._TestString);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i;t._Id=e._Id,t._Family=e._Family,t._Size=e._Size;var n=e._DefinedStyle;n&&(n=n.createCopy()),t._DefinedStyle=n;var o=e._Style;o&&(o=o.createCopy()),t._Style=o;var r=e._DefinedWeight;r&&(r=r.createCopy()),t._DefinedWeight=r;var a=e._Weight;a&&(a=a.createCopy()),t._Weight=a;var s=e._Stretch;s&&(s=s.createCopy()),t._Stretch=s,t._Tracking=e._Tracking;var l=e._TextAlignment;l&&(l=l.createCopy()),t._TextAlignment=l,t._FileName=e._FileName;var u=e.fallbackChain;u&&(u=u.createCopy()).setParent(t),t.fallbackChain=u,t._GenericFamily=e._GenericFamily,t._TestString=e._TestString;for(var d in e._UnknownProps)t._UnknownProps[d]=e._UnknownProps[d];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._Id!==e._Id||t._Family!==e._Family||t._Size!==e._Size||(t._DefinedStyle?!t._DefinedStyle.equals(e._DefinedStyle):e._DefinedStyle)||(t._Style?!t._Style.equals(e._Style):e._Style)||(t._DefinedWeight?!t._DefinedWeight.equals(e._DefinedWeight):e._DefinedWeight)||(t._Weight?!t._Weight.equals(e._Weight):e._Weight)||(t._Stretch?!t._Stretch.equals(e._Stretch):e._Stretch)||t._Tracking!==e._Tracking||(t._TextAlignment?!t._TextAlignment.equals(e._TextAlignment):e._TextAlignment)||t._FileName!==e._FileName||(t.fallbackChain?!t.fallbackChain.equals(e.fallbackChain):e.fallbackChain)||t._GenericFamily!==e._GenericFamily||t._TestString!==e._TestString)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.TextStyle=xi,o(xi,Kt);var Ri=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.GeoCoordinate,n._Latitude=0,n._Longitude=0,n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"Latitude":t._Latitude=e.Latitude;break;case"Longitude":t._Longitude=e.Longitude;break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};0!=e._Latitude&&(t.Latitude=e._Latitude),0!=e._Longitude&&(t.Longitude=e._Longitude);for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._Latitude=e._Latitude,t._Longitude=e._Longitude;for(var n in e._UnknownProps)t._UnknownProps[n]=e._UnknownProps[n];return t},i.prototype.equals=function(e){var t=this;return!!e&&(this.structType===e.structType&&t._Latitude===e._Latitude&&t._Longitude===e._Longitude&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.GeoCoordinate=Ri,o(Ri,jt);var Oi=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.Transition,n._ElementId="",n._Name="",n.containerIds=new Rt,n.containerIds.setParent(n),n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"ElementId":t._ElementId=e.ElementId;break;case"Name":t._Name=e.Name;break;case"ContainerIds":t.containerIds.deserializePropertyCollection(e.ContainerIds);break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};""!=e._ElementId&&(t.ElementId=e._ElementId),""!=e._Name&&(t.Name=e._Name),t.ContainerIds=e.containerIds.serialize();for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._ElementId=e._ElementId,t._Name=e._Name;var n=e.containerIds;n&&(n=n.createCopy()).setParent(t),t.containerIds=n;for(var o in e._UnknownProps)t._UnknownProps[o]=e._UnknownProps[o];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._ElementId!==e._ElementId||t._Name!==e._Name||(t.containerIds?!t.containerIds.equals(e.containerIds):e.containerIds))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.Transition=Oi,o(Oi,qt);var Fi=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.AnimationContainer,o._AnimatablePropertyName=new n(t.AnimatableProperty.Transform),o._Curve=new n(t.AnimationCurve.None),o._TimingFunction="",o._Duration=0,o._Delay=0,o.effectIds=new Rt,o.effectIds.setParent(o),o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"AnimatablePropertyName":var a=t.AnimatableProperty[e.AnimatablePropertyName];o._AnimatablePropertyName=new n(void 0!==a?a:e.AnimatablePropertyName);break;case"Curve":var s=t.AnimationCurve[e.Curve];o._Curve=new n(void 0!==s?s:e.Curve);break;case"TimingFunction":o._TimingFunction=e.TimingFunction;break;case"Duration":o._Duration=e.Duration;break;case"Delay":o._Delay=e.Delay;break;case"EffectIds":o.effectIds.deserializePropertyCollection(e.EffectIds);break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};e._AnimatablePropertyName.IntValue!=t.AnimatableProperty.Transform&&(e._AnimatablePropertyName.IntValue===t.AnimatableProperty.UnknownValue?i.AnimatablePropertyName=e._AnimatablePropertyName.StringValue:i.AnimatablePropertyName=t.AnimatableProperty[e._AnimatablePropertyName.IntValue]),e._Curve.IntValue!=t.AnimationCurve.None&&(e._Curve.IntValue===t.AnimationCurve.UnknownValue?i.Curve=e._Curve.StringValue:i.Curve=t.AnimationCurve[e._Curve.IntValue]),""!=e._TimingFunction&&(i.TimingFunction=e._TimingFunction),0!=e._Duration&&(i.Duration=e._Duration),0!=e._Delay&&(i.Delay=e._Delay),i.EffectIds=e.effectIds.serialize();for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._AnimatablePropertyName;n&&(n=n.createCopy()),t._AnimatablePropertyName=n;var o=e._Curve;o&&(o=o.createCopy()),t._Curve=o,t._TimingFunction=e._TimingFunction,t._Duration=e._Duration,t._Delay=e._Delay;var r=e.effectIds;r&&(r=r.createCopy()).setParent(t),t.effectIds=r;for(var a in e._UnknownProps)t._UnknownProps[a]=e._UnknownProps[a];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._AnimatablePropertyName?!t._AnimatablePropertyName.equals(e._AnimatablePropertyName):e._AnimatablePropertyName)||(t._Curve?!t._Curve.equals(e._Curve):e._Curve)||t._TimingFunction!==e._TimingFunction||t._Duration!==e._Duration||t._Delay!==e._Delay||(t.effectIds?!t.effectIds.equals(e.effectIds):e.effectIds))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AnimationContainer=Fi,o(Fi,Gt);var Ui=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.AnimationEffect,o._TransformComponent=new n(t.AnimatableTransformComponent.X),o._TransformIndex=0,o._StartValue=0,o._EndValue=0,o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"TransformComponent":var a=t.AnimatableTransformComponent[e.TransformComponent];o._TransformComponent=new n(void 0!==a?a:e.TransformComponent);break;case"TransformIndex":o._TransformIndex=e.TransformIndex;break;case"StartValue":o._StartValue=e.StartValue;break;case"EndValue":o._EndValue=e.EndValue;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};e._TransformComponent.IntValue!=t.AnimatableTransformComponent.X&&(e._TransformComponent.IntValue===t.AnimatableTransformComponent.UnknownValue?i.TransformComponent=e._TransformComponent.StringValue:i.TransformComponent=t.AnimatableTransformComponent[e._TransformComponent.IntValue]),0!=e._TransformIndex&&(i.TransformIndex=e._TransformIndex),0!=e._StartValue&&(i.StartValue=e._StartValue),0!=e._EndValue&&(i.EndValue=e._EndValue);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._TransformComponent;n&&(n=n.createCopy()),t._TransformComponent=n,t._TransformIndex=e._TransformIndex,t._StartValue=e._StartValue,t._EndValue=e._EndValue;for(var o in e._UnknownProps)t._UnknownProps[o]=e._UnknownProps[o];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._TransformComponent?!t._TransformComponent.equals(e._TransformComponent):e._TransformComponent)||t._TransformIndex!==e._TransformIndex||t._StartValue!==e._StartValue||t._EndValue!==e._EndValue)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AnimationEffect=Ui,o(Ui,Xt);var Ni=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.TransformOrigin,n._X=0,n._Y=0,n._Z=0,n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"X":t._X=e.X;break;case"Y":t._Y=e.Y;break;case"Z":t._Z=e.Z;break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};0!=e._X&&(t.X=e._X),0!=e._Y&&(t.Y=e._Y),0!=e._Z&&(t.Z=e._Z);for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._X=e._X,t._Y=e._Y,t._Z=e._Z;for(var n in e._UnknownProps)t._UnknownProps[n]=e._UnknownProps[n];return t},i.prototype.equals=function(e){var t=this;return!!e&&(this.structType===e.structType&&t._X===e._X&&t._Y===e._Y&&t._Z===e._Z&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.TransformOrigin=Ni,o(Ni,Yt);var zi=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.NavigationMarker,n._FsmNodeId="",n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"FsmNodeId":t._FsmNodeId=e.FsmNodeId;break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};""!=e._FsmNodeId&&(t.FsmNodeId=e._FsmNodeId);for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._FsmNodeId=e._FsmNodeId;for(var n in e._UnknownProps)t._UnknownProps[n]=e._UnknownProps[n];return t},i.prototype.equals=function(e){var t=this;return!!e&&(this.structType===e.structType&&t._FsmNodeId===e._FsmNodeId&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.NavigationMarker=zi,o(zi,Zt);var Hi=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.ContentNavigationMarkerCollection,n._ContentId="",n.navigationMarkers=new Ot,n.navigationMarkers.setParent(n),n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"ContentId":t._ContentId=e.ContentId;break;case"NavigationMarkers":t.navigationMarkers.deserializeStructCollection(e.NavigationMarkers,zi.Deserialize);break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};""!=e._ContentId&&(t.ContentId=e._ContentId),t.NavigationMarkers=e.navigationMarkers.serialize();for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._ContentId=e._ContentId;var n=e.navigationMarkers;n&&(n=n.createCopy()).setParent(t),t.navigationMarkers=n;for(var o in e._UnknownProps)t._UnknownProps[o]=e._UnknownProps[o];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._ContentId!==e._ContentId||(t.navigationMarkers?!t.navigationMarkers.equals(e.navigationMarkers):e.navigationMarkers))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.ContentNavigationMarkerCollection=Hi,o(Hi,$t);var Wi=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.AccessibilityInfo,n.attributes=new Ot,n.attributes.setParent(n),n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"Attributes":t.attributes.deserializeStructCollection(e.Attributes,Ki.Deserialize);break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};t.Attributes=e.attributes.serialize();for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i,n=e.attributes;n&&(n=n.createCopy()).setParent(t),t.attributes=n;for(var o in e._UnknownProps)t._UnknownProps[o]=e._UnknownProps[o];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t.attributes?!t.attributes.equals(e.attributes):e.attributes))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AccessibilityInfo=Wi,o(Wi,Jt);var Ki=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.AriaAttribute,n._Name="",n._Value="",n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"Name":t._Name=e.Name;break;case"Value":t._Value=e.Value;break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};""!=e._Name&&(t.Name=e._Name),""!=e._Value&&(t.Value=e._Value);for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._Name=e._Name,t._Value=e._Value;for(var n in e._UnknownProps)t._UnknownProps[n]=e._UnknownProps[n];return t},i.prototype.equals=function(e){var t=this;return!!e&&(this.structType===e.structType&&t._Name===e._Name&&t._Value===e._Value&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AriaAttribute=Ki,o(Ki,Qt);var ji=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.LivingImageMediaElement,n._MediaId="",n._MediaType="",n._Width=0,n._Height=0,n.spriteTimings=new Rt,n.spriteTimings.setParent(n),n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"MediaId":t._MediaId=e.MediaId;break;case"MediaType":t._MediaType=e.MediaType;break;case"Width":t._Width=e.Width;break;case"Height":t._Height=e.Height;break;case"SpriteTimings":t.spriteTimings.deserializePropertyCollection(e.SpriteTimings);break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};""!=e._MediaId&&(t.MediaId=e._MediaId),""!=e._MediaType&&(t.MediaType=e._MediaType),0!=e._Width&&(t.Width=e._Width),0!=e._Height&&(t.Height=e._Height),t.SpriteTimings=e.spriteTimings.serialize();for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._MediaId=e._MediaId,t._MediaType=e._MediaType,t._Width=e._Width,t._Height=e._Height;var n=e.spriteTimings;n&&(n=n.createCopy()).setParent(t),t.spriteTimings=n;for(var o in e._UnknownProps)t._UnknownProps[o]=e._UnknownProps[o];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._MediaId!==e._MediaId||t._MediaType!==e._MediaType||t._Width!==e._Width||t._Height!==e._Height||(t.spriteTimings?!t.spriteTimings.equals(e.spriteTimings):e.spriteTimings))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.LivingImageMediaElement=ji,o(ji,ei);var qi=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.ViewOptions,n._WorldId="",n._FontScale=0,n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"WorldId":t._WorldId=e.WorldId;break;case"FontScale":t._FontScale=e.FontScale;break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};""!=e._WorldId&&(t.WorldId=e._WorldId),0!=e._FontScale&&(t.FontScale=e._FontScale);for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._WorldId=e._WorldId,t._FontScale=e._FontScale;for(var n in e._UnknownProps)t._UnknownProps[n]=e._UnknownProps[n];return t},i.prototype.equals=function(e){var t=this;return!!e&&(this.structType===e.structType&&t._WorldId===e._WorldId&&t._FontScale===e._FontScale&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.ViewOptions=qi,o(qi,ti);var Gi=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.AutoPlaySettings,n._StartAutomatically=!1,n._Loop=!0,n._Speed=5,n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"StartAutomatically":t._StartAutomatically=e.StartAutomatically;break;case"Loop":t._Loop=e.Loop;break;case"Speed":t._Speed=e.Speed;break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};0!=e._StartAutomatically&&(t.StartAutomatically=e._StartAutomatically),1!=e._Loop&&(t.Loop=e._Loop),5!=e._Speed&&(t.Speed=e._Speed);for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._StartAutomatically=e._StartAutomatically,t._Loop=e._Loop,t._Speed=e._Speed;for(var n in e._UnknownProps)t._UnknownProps[n]=e._UnknownProps[n];return t},i.prototype.equals=function(e){var t=this;return!!e&&(this.structType===e.structType&&t._StartAutomatically===e._StartAutomatically&&t._Loop===e._Loop&&t._Speed===e._Speed&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AutoPlaySettings=Gi,o(Gi,ii);var Xi=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.ClosedCaptionDescriptor,n._CaptionId="",n._Language="",n._FileName="",n._Label="",n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"CaptionId":t._CaptionId=e.CaptionId;break;case"Language":t._Language=e.Language;break;case"FileName":t._FileName=e.FileName;break;case"Label":t._Label=e.Label;break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};""!=e._CaptionId&&(t.CaptionId=e._CaptionId),""!=e._Language&&(t.Language=e._Language),""!=e._FileName&&(t.FileName=e._FileName),""!=e._Label&&(t.Label=e._Label);for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._CaptionId=e._CaptionId,t._Language=e._Language,t._FileName=e._FileName,t._Label=e._Label;for(var n in e._UnknownProps)t._UnknownProps[n]=e._UnknownProps[n];return t},i.prototype.equals=function(e){var t=this;return!!e&&(this.structType===e.structType&&t._CaptionId===e._CaptionId&&t._Language===e._Language&&t._FileName===e._FileName&&t._Label===e._Label&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.ClosedCaptionDescriptor=Xi,o(Xi,ni);var Yi=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.Storyboard,o._Name="",o._Scope="",o._Functional=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o.actions=new Ot,o.actions.setParent(o),o.keyframeSelectors=new Ot,o.keyframeSelectors.setParent(o),o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"Name":o._Name=e.Name;break;case"Scope":o._Scope=e.Scope;break;case"Functional":o._Functional=e.Functional;break;case"KeyframeTarget":var a=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==a?a:e.KeyframeTarget);break;case"Actions":o.actions.deserializeStructCollection(e.Actions,Zi.Deserialize);break;case"KeyframeSelectors":o.keyframeSelectors.deserializeStructCollection(e.KeyframeSelectors,pn.Deserialize);break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};""!=e._Name&&(i.Name=e._Name),""!=e._Scope&&(i.Scope=e._Scope),0!=e._Functional&&(i.Functional=e._Functional),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),i.Actions=e.actions.serialize(),i.KeyframeSelectors=e.keyframeSelectors.serialize();for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i;t._Name=e._Name,t._Scope=e._Scope,t._Functional=e._Functional;var n=e._KeyframeTarget;n&&(n=n.createCopy()),t._KeyframeTarget=n;var o=e.actions;o&&(o=o.createCopy()).setParent(t),t.actions=o;var r=e.keyframeSelectors;r&&(r=r.createCopy()).setParent(t),t.keyframeSelectors=r;for(var a in e._UnknownProps)t._UnknownProps[a]=e._UnknownProps[a];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._Name!==e._Name||t._Scope!==e._Scope||t._Functional!==e._Functional||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||(t.actions?!t.actions.equals(e.actions):e.actions)||(t.keyframeSelectors?!t.keyframeSelectors.equals(e.keyframeSelectors):e.keyframeSelectors))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.Storyboard=Yi,o(Yi,oi);var Zi=function(){function e(){}return e.Deserialize=function(e){return"AnimateOpacity"==e._Type?$i.Deserialize(e):"AnimateHidden"==e._Type?Ji.Deserialize(e):"AnimateUniformScale2D"==e._Type?Qi.Deserialize(e):"SetSymbol"==e._Type?en.Deserialize(e):"SetCropDescriptorSymbol"==e._Type?tn.Deserialize(e):"ApplyAnimator"==e._Type?on.Deserialize(e):"StoryboardExternalAction"==e._Type?rn.Deserialize(e):"IfAction"==e._Type?an.Deserialize(e):"ElseAction"==e._Type?sn.Deserialize(e):"AnimateValues"==e._Type?ln.Deserialize(e):"AnimateTransform"==e._Type?un.Deserialize(e):"AnimateZOrder"==e._Type?dn.Deserialize(e):"AnimateDimension"==e._Type?cn.Deserialize(e):void 0},e}();t.StoryboardAction=Zi,o(Zi,ri);var $i=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.AnimateOpacity,o._Action=new n(t.AnimationAction.Undefined),o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"Action":var a=t.AnimationAction[e.Action];o._Action=new n(void 0!==a?a:e.Action);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var s=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==s?s:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var l=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==l?l:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="AnimateOpacity",e._Action.IntValue!=t.AnimationAction.Undefined&&(e._Action.IntValue===t.AnimationAction.UnknownValue?i.Action=e._Action.StringValue:i.Action=t.AnimationAction[e._Action.IntValue]),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._Action;n&&(n=n.createCopy()),t._Action=n,t._AdvanceTimeBase=e._AdvanceTimeBase;var o=e._KeyframeTarget;o&&(o=o.createCopy()),t._KeyframeTarget=o,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var r=e._KeyframeSelector;r&&(r=r.createCopy()).setParent(t),t._KeyframeSelector=r,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var a=e._EasingBias;a&&(a=a.createCopy()).setParent(t),t._EasingBias=a;var s=e._EasingGain;s&&(s=s.createCopy()).setParent(t),t._EasingGain=s;var l=e._ComputedDuration;l&&(l=l.createCopy()).setParent(t),t._ComputedDuration=l;var u=e._ComputedDelay;u&&(u=u.createCopy()).setParent(t),t._ComputedDelay=u;var d=e._RtlAdjustment;d&&(d=d.createCopy()),t._RtlAdjustment=d,t._Breakpoint=e._Breakpoint;for(var c in e._UnknownProps)t._UnknownProps[c]=e._UnknownProps[c];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._Action?!t._Action.equals(e._Action):e._Action)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AnimateOpacity=$i,o($i,ri),o($i,ai);var Ji=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.AnimateHidden,o._Action=new n(t.AnimationAction.Undefined),o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"Action":var a=t.AnimationAction[e.Action];o._Action=new n(void 0!==a?a:e.Action);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var s=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==s?s:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var l=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==l?l:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="AnimateHidden",e._Action.IntValue!=t.AnimationAction.Undefined&&(e._Action.IntValue===t.AnimationAction.UnknownValue?i.Action=e._Action.StringValue:i.Action=t.AnimationAction[e._Action.IntValue]),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._Action;n&&(n=n.createCopy()),t._Action=n,t._AdvanceTimeBase=e._AdvanceTimeBase;var o=e._KeyframeTarget;o&&(o=o.createCopy()),t._KeyframeTarget=o,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var r=e._KeyframeSelector;r&&(r=r.createCopy()).setParent(t),t._KeyframeSelector=r,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var a=e._EasingBias;a&&(a=a.createCopy()).setParent(t),t._EasingBias=a;var s=e._EasingGain;s&&(s=s.createCopy()).setParent(t),t._EasingGain=s;var l=e._ComputedDuration;l&&(l=l.createCopy()).setParent(t),t._ComputedDuration=l;var u=e._ComputedDelay;u&&(u=u.createCopy()).setParent(t),t._ComputedDelay=u;var d=e._RtlAdjustment;d&&(d=d.createCopy()),t._RtlAdjustment=d,t._Breakpoint=e._Breakpoint;for(var c in e._UnknownProps)t._UnknownProps[c]=e._UnknownProps[c];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._Action?!t._Action.equals(e._Action):e._Action)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AnimateHidden=Ji,o(Ji,ri),o(Ji,si);var Qi=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.AnimateUniformScale2D,o._Action=new n(t.AnimationAction.Undefined),o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"Action":var a=t.AnimationAction[e.Action];o._Action=new n(void 0!==a?a:e.Action);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var s=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==s?s:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var l=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==l?l:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="AnimateUniformScale2D",e._Action.IntValue!=t.AnimationAction.Undefined&&(e._Action.IntValue===t.AnimationAction.UnknownValue?i.Action=e._Action.StringValue:i.Action=t.AnimationAction[e._Action.IntValue]),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._Action;n&&(n=n.createCopy()),t._Action=n,t._AdvanceTimeBase=e._AdvanceTimeBase;var o=e._KeyframeTarget;o&&(o=o.createCopy()),t._KeyframeTarget=o,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var r=e._KeyframeSelector;r&&(r=r.createCopy()).setParent(t),t._KeyframeSelector=r,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var a=e._EasingBias;a&&(a=a.createCopy()).setParent(t),t._EasingBias=a;var s=e._EasingGain;s&&(s=s.createCopy()).setParent(t),t._EasingGain=s;var l=e._ComputedDuration;l&&(l=l.createCopy()).setParent(t),t._ComputedDuration=l;var u=e._ComputedDelay;u&&(u=u.createCopy()).setParent(t),t._ComputedDelay=u;var d=e._RtlAdjustment;d&&(d=d.createCopy()),t._RtlAdjustment=d,t._Breakpoint=e._Breakpoint;for(var c in e._UnknownProps)t._UnknownProps[c]=e._UnknownProps[c];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._Action?!t._Action.equals(e._Action):e._Action)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AnimateUniformScale2D=Qi,o(Qi,ri),o(Qi,li);var en=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.SetSymbol,o._SymbolName="",o._ComputedValue=null,o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"SymbolName":o._SymbolName=e.SymbolName;break;case"ComputedValue":o._ComputedValue=mn.Deserialize(e.ComputedValue),null!=o._ComputedValue&&o._ComputedValue.setParent(o);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var a=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==a?a:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var s=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==s?s:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="SetSymbol",""!=e._SymbolName&&(i.SymbolName=e._SymbolName),null!=e._ComputedValue&&(i.ComputedValue=e._ComputedValue.serialize()),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i;t._SymbolName=e._SymbolName;var n=e._ComputedValue;n&&(n=n.createCopy()).setParent(t),t._ComputedValue=n,t._AdvanceTimeBase=e._AdvanceTimeBase;var o=e._KeyframeTarget;o&&(o=o.createCopy()),t._KeyframeTarget=o,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var r=e._KeyframeSelector;r&&(r=r.createCopy()).setParent(t),t._KeyframeSelector=r,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var a=e._EasingBias;a&&(a=a.createCopy()).setParent(t),t._EasingBias=a;var s=e._EasingGain;s&&(s=s.createCopy()).setParent(t),t._EasingGain=s;var l=e._ComputedDuration;l&&(l=l.createCopy()).setParent(t),t._ComputedDuration=l;var u=e._ComputedDelay;u&&(u=u.createCopy()).setParent(t),t._ComputedDelay=u;var d=e._RtlAdjustment;d&&(d=d.createCopy()),t._RtlAdjustment=d,t._Breakpoint=e._Breakpoint;for(var c in e._UnknownProps)t._UnknownProps[c]=e._UnknownProps[c];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._SymbolName!==e._SymbolName||(t._ComputedValue?!t._ComputedValue.equals(e._ComputedValue):e._ComputedValue)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.SetSymbol=en,o(en,ri),o(en,ui);var tn=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.SetCropDescriptorSymbol,o._ComputedCropDescriptorIndex=null,o._SymbolName="",o._ComputedValue=null,o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"ComputedCropDescriptorIndex":o._ComputedCropDescriptorIndex=mn.Deserialize(e.ComputedCropDescriptorIndex),null!=o._ComputedCropDescriptorIndex&&o._ComputedCropDescriptorIndex.setParent(o);break;case"SymbolName":o._SymbolName=e.SymbolName;break;case"ComputedValue":o._ComputedValue=mn.Deserialize(e.ComputedValue),null!=o._ComputedValue&&o._ComputedValue.setParent(o);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var a=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==a?a:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var s=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==s?s:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="SetCropDescriptorSymbol",null!=e._ComputedCropDescriptorIndex&&(i.ComputedCropDescriptorIndex=e._ComputedCropDescriptorIndex.serialize()),""!=e._SymbolName&&(i.SymbolName=e._SymbolName),null!=e._ComputedValue&&(i.ComputedValue=e._ComputedValue.serialize()),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._ComputedCropDescriptorIndex;n&&(n=n.createCopy()).setParent(t),t._ComputedCropDescriptorIndex=n,t._SymbolName=e._SymbolName;var o=e._ComputedValue;o&&(o=o.createCopy()).setParent(t),t._ComputedValue=o,t._AdvanceTimeBase=e._AdvanceTimeBase;var r=e._KeyframeTarget;r&&(r=r.createCopy()),t._KeyframeTarget=r,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var a=e._KeyframeSelector;a&&(a=a.createCopy()).setParent(t),t._KeyframeSelector=a,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var s=e._EasingBias;s&&(s=s.createCopy()).setParent(t),t._EasingBias=s;var l=e._EasingGain;l&&(l=l.createCopy()).setParent(t),t._EasingGain=l;var u=e._ComputedDuration;u&&(u=u.createCopy()).setParent(t),t._ComputedDuration=u;var d=e._ComputedDelay;d&&(d=d.createCopy()).setParent(t),t._ComputedDelay=d;var c=e._RtlAdjustment;c&&(c=c.createCopy()),t._RtlAdjustment=c,t._Breakpoint=e._Breakpoint;for(var p in e._UnknownProps)t._UnknownProps[p]=e._UnknownProps[p];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._ComputedCropDescriptorIndex?!t._ComputedCropDescriptorIndex.equals(e._ComputedCropDescriptorIndex):e._ComputedCropDescriptorIndex)||t._SymbolName!==e._SymbolName||(t._ComputedValue?!t._ComputedValue.equals(e._ComputedValue):e._ComputedValue)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.SetCropDescriptorSymbol=tn,o(tn,ui),o(tn,ri),o(tn,di);var nn=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.AttributeValuePair,n._Name="",n._Value="",n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"Name":t._Name=e.Name;break;case"Value":t._Value=e.Value;break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};""!=e._Name&&(t.Name=e._Name),""!=e._Value&&(t.Value=e._Value);for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._Name=e._Name,t._Value=e._Value;for(var n in e._UnknownProps)t._UnknownProps[n]=e._UnknownProps[n];return t},i.prototype.equals=function(e){var t=this;return!!e&&(this.structType===e.structType&&t._Name===e._Name&&t._Value===e._Value&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AttributeValuePair=nn,o(nn,ci);var on=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.ApplyAnimator,o._Name="",o.animatorAttributes=new Ot,o.animatorAttributes.setParent(o),o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"Name":o._Name=e.Name;break;case"AnimatorAttributes":o.animatorAttributes.deserializeStructCollection(e.AnimatorAttributes,nn.Deserialize);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var a=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==a?a:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var s=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==s?s:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="ApplyAnimator",""!=e._Name&&(i.Name=e._Name),i.AnimatorAttributes=e.animatorAttributes.serialize(),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i;t._Name=e._Name;var n=e.animatorAttributes;n&&(n=n.createCopy()).setParent(t),t.animatorAttributes=n,t._AdvanceTimeBase=e._AdvanceTimeBase;var o=e._KeyframeTarget;o&&(o=o.createCopy()),t._KeyframeTarget=o,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var r=e._KeyframeSelector;r&&(r=r.createCopy()).setParent(t),t._KeyframeSelector=r,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var a=e._EasingBias;a&&(a=a.createCopy()).setParent(t),t._EasingBias=a;var s=e._EasingGain;s&&(s=s.createCopy()).setParent(t),t._EasingGain=s;var l=e._ComputedDuration;l&&(l=l.createCopy()).setParent(t),t._ComputedDuration=l;var u=e._ComputedDelay;u&&(u=u.createCopy()).setParent(t),t._ComputedDelay=u;var d=e._RtlAdjustment;d&&(d=d.createCopy()),t._RtlAdjustment=d,t._Breakpoint=e._Breakpoint;for(var c in e._UnknownProps)t._UnknownProps[c]=e._UnknownProps[c];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._Name!==e._Name||(t.animatorAttributes?!t.animatorAttributes.equals(e.animatorAttributes):e.animatorAttributes)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.ApplyAnimator=on,o(on,ri),o(on,pi);var rn=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.StoryboardExternalAction,o._ActionType=new n(t.ExternalAction.None),o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"ActionType":var a=t.ExternalAction[e.ActionType];o._ActionType=new n(void 0!==a?a:e.ActionType);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var s=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==s?s:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var l=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==l?l:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="StoryboardExternalAction",e._ActionType.IntValue!=t.ExternalAction.None&&(e._ActionType.IntValue===t.ExternalAction.UnknownValue?i.ActionType=e._ActionType.StringValue:i.ActionType=t.ExternalAction[e._ActionType.IntValue]),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._ActionType;n&&(n=n.createCopy()),t._ActionType=n,t._AdvanceTimeBase=e._AdvanceTimeBase;var o=e._KeyframeTarget;o&&(o=o.createCopy()),t._KeyframeTarget=o,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var r=e._KeyframeSelector;r&&(r=r.createCopy()).setParent(t),t._KeyframeSelector=r,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var a=e._EasingBias;a&&(a=a.createCopy()).setParent(t),t._EasingBias=a;var s=e._EasingGain;s&&(s=s.createCopy()).setParent(t),t._EasingGain=s;var l=e._ComputedDuration;l&&(l=l.createCopy()).setParent(t),t._ComputedDuration=l;var u=e._ComputedDelay;u&&(u=u.createCopy()).setParent(t),t._ComputedDelay=u;var d=e._RtlAdjustment;d&&(d=d.createCopy()),t._RtlAdjustment=d,t._Breakpoint=e._Breakpoint;for(var c in e._UnknownProps)t._UnknownProps[c]=e._UnknownProps[c];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._ActionType?!t._ActionType.equals(e._ActionType):e._ActionType)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.StoryboardExternalAction=rn,o(rn,ri),o(rn,gi);var an=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.IfAction,o.keyframeSelectors=new Ot,o.keyframeSelectors.setParent(o),o._ComputedCondition=null,o.actions=new Ot,o.actions.setParent(o),o._Else=null,o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"KeyframeSelectors":o.keyframeSelectors.deserializeStructCollection(e.KeyframeSelectors,pn.Deserialize);break;case"ComputedCondition":o._ComputedCondition=mn.Deserialize(e.ComputedCondition),null!=o._ComputedCondition&&o._ComputedCondition.setParent(o);break;case"Actions":o.actions.deserializeStructCollection(e.Actions,Zi.Deserialize);break;case"Else":o._Else=sn.Deserialize(e.Else),null!=o._Else&&o._Else.setParent(o);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var a=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==a?a:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var s=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==s?s:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="IfAction",i.KeyframeSelectors=e.keyframeSelectors.serialize(),null!=e._ComputedCondition&&(i.ComputedCondition=e._ComputedCondition.serialize()),i.Actions=e.actions.serialize(),null!=e._Else&&(i.Else=e._Else.serialize()),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e.keyframeSelectors;n&&(n=n.createCopy()).setParent(t),t.keyframeSelectors=n;var o=e._ComputedCondition;o&&(o=o.createCopy()).setParent(t),t._ComputedCondition=o;var r=e.actions;r&&(r=r.createCopy()).setParent(t),t.actions=r;var a=e._Else;a&&(a=a.createCopy()).setParent(t),t._Else=a,t._AdvanceTimeBase=e._AdvanceTimeBase;var s=e._KeyframeTarget;s&&(s=s.createCopy()),t._KeyframeTarget=s,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var l=e._KeyframeSelector;l&&(l=l.createCopy()).setParent(t),t._KeyframeSelector=l,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var u=e._EasingBias;u&&(u=u.createCopy()).setParent(t),t._EasingBias=u;var d=e._EasingGain;d&&(d=d.createCopy()).setParent(t),t._EasingGain=d;var c=e._ComputedDuration;c&&(c=c.createCopy()).setParent(t),t._ComputedDuration=c;var p=e._ComputedDelay;p&&(p=p.createCopy()).setParent(t),t._ComputedDelay=p;var g=e._RtlAdjustment;g&&(g=g.createCopy()),t._RtlAdjustment=g,t._Breakpoint=e._Breakpoint;for(var h in e._UnknownProps)t._UnknownProps[h]=e._UnknownProps[h];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t.keyframeSelectors?!t.keyframeSelectors.equals(e.keyframeSelectors):e.keyframeSelectors)||(t._ComputedCondition?!t._ComputedCondition.equals(e._ComputedCondition):e._ComputedCondition)||(t.actions?!t.actions.equals(e.actions):e.actions)||(t._Else?!t._Else.equals(e._Else):e._Else)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.IfAction=an,o(an,ri),o(an,hi);var sn=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.ElseAction,o.keyframeSelectors=new Ot,o.keyframeSelectors.setParent(o),o.actions=new Ot,o.actions.setParent(o),o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"KeyframeSelectors":o.keyframeSelectors.deserializeStructCollection(e.KeyframeSelectors,pn.Deserialize);break;case"Actions":o.actions.deserializeStructCollection(e.Actions,Zi.Deserialize);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var a=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==a?a:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var s=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==s?s:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="ElseAction",i.KeyframeSelectors=e.keyframeSelectors.serialize(),i.Actions=e.actions.serialize(),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e.keyframeSelectors;n&&(n=n.createCopy()).setParent(t),t.keyframeSelectors=n;var o=e.actions;o&&(o=o.createCopy()).setParent(t),t.actions=o,t._AdvanceTimeBase=e._AdvanceTimeBase;var r=e._KeyframeTarget;r&&(r=r.createCopy()),t._KeyframeTarget=r,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var a=e._KeyframeSelector;a&&(a=a.createCopy()).setParent(t),t._KeyframeSelector=a,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var s=e._EasingBias;s&&(s=s.createCopy()).setParent(t),t._EasingBias=s;var l=e._EasingGain;l&&(l=l.createCopy()).setParent(t),t._EasingGain=l;var u=e._ComputedDuration;u&&(u=u.createCopy()).setParent(t),t._ComputedDuration=u;var d=e._ComputedDelay;d&&(d=d.createCopy()).setParent(t),t._ComputedDelay=d;var c=e._RtlAdjustment;c&&(c=c.createCopy()),t._RtlAdjustment=c,t._Breakpoint=e._Breakpoint;for(var p in e._UnknownProps)t._UnknownProps[p]=e._UnknownProps[p];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t.keyframeSelectors?!t.keyframeSelectors.equals(e.keyframeSelectors):e.keyframeSelectors)||(t.actions?!t.actions.equals(e.actions):e.actions)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.ElseAction=sn,o(sn,ri),o(sn,yi);var ln=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.AnimateValues,o._ComputedStartValue=null,o._ComputedEndValue=null,o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"ComputedStartValue":o._ComputedStartValue=mn.Deserialize(e.ComputedStartValue),null!=o._ComputedStartValue&&o._ComputedStartValue.setParent(o);break;case"ComputedEndValue":o._ComputedEndValue=mn.Deserialize(e.ComputedEndValue),null!=o._ComputedEndValue&&o._ComputedEndValue.setParent(o);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var a=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==a?a:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var s=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==s?s:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="AnimateValues",null!=e._ComputedStartValue&&(i.ComputedStartValue=e._ComputedStartValue.serialize()),null!=e._ComputedEndValue&&(i.ComputedEndValue=e._ComputedEndValue.serialize()),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._ComputedStartValue;n&&(n=n.createCopy()).setParent(t),t._ComputedStartValue=n;var o=e._ComputedEndValue;o&&(o=o.createCopy()).setParent(t),t._ComputedEndValue=o,t._AdvanceTimeBase=e._AdvanceTimeBase;var r=e._KeyframeTarget;r&&(r=r.createCopy()),t._KeyframeTarget=r,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var a=e._KeyframeSelector;a&&(a=a.createCopy()).setParent(t),t._KeyframeSelector=a,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var s=e._EasingBias;s&&(s=s.createCopy()).setParent(t),t._EasingBias=s;var l=e._EasingGain;l&&(l=l.createCopy()).setParent(t),t._EasingGain=l;var u=e._ComputedDuration;u&&(u=u.createCopy()).setParent(t),t._ComputedDuration=u;var d=e._ComputedDelay;d&&(d=d.createCopy()).setParent(t),t._ComputedDelay=d;var c=e._RtlAdjustment;c&&(c=c.createCopy()),t._RtlAdjustment=c,t._Breakpoint=e._Breakpoint;for(var p in e._UnknownProps)t._UnknownProps[p]=e._UnknownProps[p];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._ComputedStartValue?!t._ComputedStartValue.equals(e._ComputedStartValue):e._ComputedStartValue)||(t._ComputedEndValue?!t._ComputedEndValue.equals(e._ComputedEndValue):e._ComputedEndValue)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AnimateValues=ln,o(ln,ri),o(ln,mi);var un=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.AnimateTransform,o._TransformType=new n(t.TransformType.Translation),o._Component=new n(t.AnimatableTransformComponent.X),o._ComputedStartValue=null,o._ComputedEndValue=null,o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"TransformType":var a=t.TransformType[e.TransformType];o._TransformType=new n(void 0!==a?a:e.TransformType);break;case"Component":var s=t.AnimatableTransformComponent[e.Component];o._Component=new n(void 0!==s?s:e.Component);break;case"ComputedStartValue":o._ComputedStartValue=mn.Deserialize(e.ComputedStartValue),null!=o._ComputedStartValue&&o._ComputedStartValue.setParent(o);break;case"ComputedEndValue":o._ComputedEndValue=mn.Deserialize(e.ComputedEndValue),null!=o._ComputedEndValue&&o._ComputedEndValue.setParent(o);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var l=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==l?l:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var u=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==u?u:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="AnimateTransform",e._TransformType.IntValue!=t.TransformType.Translation&&(e._TransformType.IntValue===t.TransformType.UnknownValue?i.TransformType=e._TransformType.StringValue:i.TransformType=t.TransformType[e._TransformType.IntValue]),e._Component.IntValue!=t.AnimatableTransformComponent.X&&(e._Component.IntValue===t.AnimatableTransformComponent.UnknownValue?i.Component=e._Component.StringValue:i.Component=t.AnimatableTransformComponent[e._Component.IntValue]),null!=e._ComputedStartValue&&(i.ComputedStartValue=e._ComputedStartValue.serialize()),null!=e._ComputedEndValue&&(i.ComputedEndValue=e._ComputedEndValue.serialize()),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._TransformType;n&&(n=n.createCopy()),t._TransformType=n;var o=e._Component;o&&(o=o.createCopy()),t._Component=o;var r=e._ComputedStartValue;r&&(r=r.createCopy()).setParent(t),t._ComputedStartValue=r;var a=e._ComputedEndValue;a&&(a=a.createCopy()).setParent(t),t._ComputedEndValue=a,t._AdvanceTimeBase=e._AdvanceTimeBase;var s=e._KeyframeTarget;s&&(s=s.createCopy()),t._KeyframeTarget=s,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var l=e._KeyframeSelector;l&&(l=l.createCopy()).setParent(t),t._KeyframeSelector=l,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var u=e._EasingBias;u&&(u=u.createCopy()).setParent(t),t._EasingBias=u;var d=e._EasingGain;d&&(d=d.createCopy()).setParent(t),t._EasingGain=d;var c=e._ComputedDuration;c&&(c=c.createCopy()).setParent(t),t._ComputedDuration=c;var p=e._ComputedDelay;p&&(p=p.createCopy()).setParent(t),t._ComputedDelay=p;var g=e._RtlAdjustment;g&&(g=g.createCopy()),t._RtlAdjustment=g,t._Breakpoint=e._Breakpoint;for(var h in e._UnknownProps)t._UnknownProps[h]=e._UnknownProps[h];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._TransformType?!t._TransformType.equals(e._TransformType):e._TransformType)||(t._Component?!t._Component.equals(e._Component):e._Component)||(t._ComputedStartValue?!t._ComputedStartValue.equals(e._ComputedStartValue):e._ComputedStartValue)||(t._ComputedEndValue?!t._ComputedEndValue.equals(e._ComputedEndValue):e._ComputedEndValue)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AnimateTransform=un,o(un,mi),o(un,ri),o(un,fi);var dn=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.AnimateZOrder,o._ComputedStartValue=null,o._ComputedEndValue=null,o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"ComputedStartValue":o._ComputedStartValue=mn.Deserialize(e.ComputedStartValue),null!=o._ComputedStartValue&&o._ComputedStartValue.setParent(o);break;case"ComputedEndValue":o._ComputedEndValue=mn.Deserialize(e.ComputedEndValue),null!=o._ComputedEndValue&&o._ComputedEndValue.setParent(o);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var a=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==a?a:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var s=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==s?s:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="AnimateZOrder",null!=e._ComputedStartValue&&(i.ComputedStartValue=e._ComputedStartValue.serialize()),null!=e._ComputedEndValue&&(i.ComputedEndValue=e._ComputedEndValue.serialize()),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._ComputedStartValue;n&&(n=n.createCopy()).setParent(t),t._ComputedStartValue=n;var o=e._ComputedEndValue;o&&(o=o.createCopy()).setParent(t),t._ComputedEndValue=o,t._AdvanceTimeBase=e._AdvanceTimeBase;var r=e._KeyframeTarget;r&&(r=r.createCopy()),t._KeyframeTarget=r,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var a=e._KeyframeSelector;a&&(a=a.createCopy()).setParent(t),t._KeyframeSelector=a,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var s=e._EasingBias;s&&(s=s.createCopy()).setParent(t),t._EasingBias=s;var l=e._EasingGain;l&&(l=l.createCopy()).setParent(t),t._EasingGain=l;var u=e._ComputedDuration;u&&(u=u.createCopy()).setParent(t),t._ComputedDuration=u;var d=e._ComputedDelay;d&&(d=d.createCopy()).setParent(t),t._ComputedDelay=d;var c=e._RtlAdjustment;c&&(c=c.createCopy()),t._RtlAdjustment=c,t._Breakpoint=e._Breakpoint;for(var p in e._UnknownProps)t._UnknownProps[p]=e._UnknownProps[p];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._ComputedStartValue?!t._ComputedStartValue.equals(e._ComputedStartValue):e._ComputedStartValue)||(t._ComputedEndValue?!t._ComputedEndValue.equals(e._ComputedEndValue):e._ComputedEndValue)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AnimateZOrder=dn,o(dn,mi),o(dn,ri),o(dn,vi);var cn=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.AnimateDimension,o._AnimatableDimension=new n(t.AnimatableDimension.Width),o._ComputedStartValue=null,o._ComputedEndValue=null,o._AdvanceTimeBase=!1,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._KeyframeSelector=null,o._KeyframeSelectorName="",o._Curve="",o._EasingBias=null,o._EasingGain=null,o._ComputedDuration=null,o._ComputedDelay=null,o._RtlAdjustment=new n(t.RtlAdjustment.None),o._Breakpoint="",o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"AnimatableDimension":var a=t.AnimatableDimension[e.AnimatableDimension];o._AnimatableDimension=new n(void 0!==a?a:e.AnimatableDimension);break;case"ComputedStartValue":o._ComputedStartValue=mn.Deserialize(e.ComputedStartValue),null!=o._ComputedStartValue&&o._ComputedStartValue.setParent(o);break;case"ComputedEndValue":o._ComputedEndValue=mn.Deserialize(e.ComputedEndValue),null!=o._ComputedEndValue&&o._ComputedEndValue.setParent(o);break;case"AdvanceTimeBase":o._AdvanceTimeBase=e.AdvanceTimeBase;break;case"KeyframeTarget":var s=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==s?s:e.KeyframeTarget);break;case"RequiredBuiltInSymbols":o._RequiredBuiltInSymbols=new Flags(t.BuiltInSymbols,Flags.deserialize(t.BuiltInSymbols,e.RequiredBuiltInSymbols));break;case"LayoutFlags":o._LayoutFlags=new Flags(t.LayoutFlags,Flags.deserialize(t.LayoutFlags,e.LayoutFlags));break;case"KeyframeSelector":o._KeyframeSelector=pn.Deserialize(e.KeyframeSelector),null!=o._KeyframeSelector&&o._KeyframeSelector.setParent(o);break;case"KeyframeSelectorName":o._KeyframeSelectorName=e.KeyframeSelectorName;break;case"Curve":o._Curve=e.Curve;break;case"EasingBias":o._EasingBias=mn.Deserialize(e.EasingBias),null!=o._EasingBias&&o._EasingBias.setParent(o);break;case"EasingGain":o._EasingGain=mn.Deserialize(e.EasingGain),null!=o._EasingGain&&o._EasingGain.setParent(o);break;case"ComputedDuration":o._ComputedDuration=mn.Deserialize(e.ComputedDuration),null!=o._ComputedDuration&&o._ComputedDuration.setParent(o);break;case"ComputedDelay":o._ComputedDelay=mn.Deserialize(e.ComputedDelay),null!=o._ComputedDelay&&o._ComputedDelay.setParent(o);break;case"RtlAdjustment":var l=t.RtlAdjustment[e.RtlAdjustment];o._RtlAdjustment=new n(void 0!==l?l:e.RtlAdjustment);break;case"Breakpoint":o._Breakpoint=e.Breakpoint;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="AnimateDimension",e._AnimatableDimension.IntValue!=t.AnimatableDimension.Width&&(e._AnimatableDimension.IntValue===t.AnimatableDimension.UnknownValue?i.AnimatableDimension=e._AnimatableDimension.StringValue:i.AnimatableDimension=t.AnimatableDimension[e._AnimatableDimension.IntValue]),null!=e._ComputedStartValue&&(i.ComputedStartValue=e._ComputedStartValue.serialize()),null!=e._ComputedEndValue&&(i.ComputedEndValue=e._ComputedEndValue.serialize()),0!=e._AdvanceTimeBase&&(i.AdvanceTimeBase=e._AdvanceTimeBase),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),void 0!==e._RequiredBuiltInSymbols&&(i.RequiredBuiltInSymbols=e._RequiredBuiltInSymbols.serialize()),void 0!==e._LayoutFlags&&(i.LayoutFlags=e._LayoutFlags.serialize()),null!=e._KeyframeSelector&&(i.KeyframeSelector=e._KeyframeSelector.serialize()),""!=e._KeyframeSelectorName&&(i.KeyframeSelectorName=e._KeyframeSelectorName),""!=e._Curve&&(i.Curve=e._Curve),null!=e._EasingBias&&(i.EasingBias=e._EasingBias.serialize()),null!=e._EasingGain&&(i.EasingGain=e._EasingGain.serialize()),null!=e._ComputedDuration&&(i.ComputedDuration=e._ComputedDuration.serialize()),null!=e._ComputedDelay&&(i.ComputedDelay=e._ComputedDelay.serialize()),e._RtlAdjustment.IntValue!=t.RtlAdjustment.None&&(e._RtlAdjustment.IntValue===t.RtlAdjustment.UnknownValue?i.RtlAdjustment=e._RtlAdjustment.StringValue:i.RtlAdjustment=t.RtlAdjustment[e._RtlAdjustment.IntValue]),""!=e._Breakpoint&&(i.Breakpoint=e._Breakpoint);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._AnimatableDimension;n&&(n=n.createCopy()),t._AnimatableDimension=n;var o=e._ComputedStartValue;o&&(o=o.createCopy()).setParent(t),t._ComputedStartValue=o;var r=e._ComputedEndValue;r&&(r=r.createCopy()).setParent(t),t._ComputedEndValue=r,t._AdvanceTimeBase=e._AdvanceTimeBase;var a=e._KeyframeTarget;a&&(a=a.createCopy()),t._KeyframeTarget=a,t._RequiredBuiltInSymbols=e._RequiredBuiltInSymbols,t._LayoutFlags=e._LayoutFlags;var s=e._KeyframeSelector;s&&(s=s.createCopy()).setParent(t),t._KeyframeSelector=s,t._KeyframeSelectorName=e._KeyframeSelectorName,t._Curve=e._Curve;var l=e._EasingBias;l&&(l=l.createCopy()).setParent(t),t._EasingBias=l;var u=e._EasingGain;u&&(u=u.createCopy()).setParent(t),t._EasingGain=u;var d=e._ComputedDuration;d&&(d=d.createCopy()).setParent(t),t._ComputedDuration=d;var c=e._ComputedDelay;c&&(c=c.createCopy()).setParent(t),t._ComputedDelay=c;var p=e._RtlAdjustment;p&&(p=p.createCopy()),t._RtlAdjustment=p,t._Breakpoint=e._Breakpoint;for(var g in e._UnknownProps)t._UnknownProps[g]=e._UnknownProps[g];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._AnimatableDimension?!t._AnimatableDimension.equals(e._AnimatableDimension):e._AnimatableDimension)||(t._ComputedStartValue?!t._ComputedStartValue.equals(e._ComputedStartValue):e._ComputedStartValue)||(t._ComputedEndValue?!t._ComputedEndValue.equals(e._ComputedEndValue):e._ComputedEndValue)||t._AdvanceTimeBase!==e._AdvanceTimeBase||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._RequiredBuiltInSymbols!==e._RequiredBuiltInSymbols||t._LayoutFlags!==e._LayoutFlags||(t._KeyframeSelector?!t._KeyframeSelector.equals(e._KeyframeSelector):e._KeyframeSelector)||t._KeyframeSelectorName!==e._KeyframeSelectorName||t._Curve!==e._Curve||(t._EasingBias?!t._EasingBias.equals(e._EasingBias):e._EasingBias)||(t._EasingGain?!t._EasingGain.equals(e._EasingGain):e._EasingGain)||(t._ComputedDuration?!t._ComputedDuration.equals(e._ComputedDuration):e._ComputedDuration)||(t._ComputedDelay?!t._ComputedDelay.equals(e._ComputedDelay):e._ComputedDelay)||(t._RtlAdjustment?!t._RtlAdjustment.equals(e._RtlAdjustment):e._RtlAdjustment)||t._Breakpoint!==e._Breakpoint)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.AnimateDimension=cn,o(cn,mi),o(cn,ri),o(cn,Si);var pn=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.KeyframeSelector,o._UseFirstResult=!1,o._UseLastResult=!1,o._UseCroppedChild=!1,o._InitialKeyframe=new n(t.KeyframeTarget.NotSpecified),o._Name="",o.selectionDirectives=new Ot,o.selectionDirectives.setParent(o),o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"UseFirstResult":o._UseFirstResult=e.UseFirstResult;break;case"UseLastResult":o._UseLastResult=e.UseLastResult;break;case"UseCroppedChild":o._UseCroppedChild=e.UseCroppedChild;break;case"InitialKeyframe":var a=t.KeyframeTarget[e.InitialKeyframe];o._InitialKeyframe=new n(void 0!==a?a:e.InitialKeyframe);break;case"Name":o._Name=e.Name;break;case"SelectionDirectives":o.selectionDirectives.deserializeStructCollection(e.SelectionDirectives,gn.Deserialize);break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};0!=e._UseFirstResult&&(i.UseFirstResult=e._UseFirstResult),0!=e._UseLastResult&&(i.UseLastResult=e._UseLastResult),0!=e._UseCroppedChild&&(i.UseCroppedChild=e._UseCroppedChild),e._InitialKeyframe.IntValue!=t.KeyframeTarget.NotSpecified&&(e._InitialKeyframe.IntValue===t.KeyframeTarget.UnknownValue?i.InitialKeyframe=e._InitialKeyframe.StringValue:i.InitialKeyframe=t.KeyframeTarget[e._InitialKeyframe.IntValue]),""!=e._Name&&(i.Name=e._Name),i.SelectionDirectives=e.selectionDirectives.serialize();for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i;t._UseFirstResult=e._UseFirstResult,t._UseLastResult=e._UseLastResult,t._UseCroppedChild=e._UseCroppedChild;var n=e._InitialKeyframe;n&&(n=n.createCopy()),t._InitialKeyframe=n,t._Name=e._Name;var o=e.selectionDirectives;o&&(o=o.createCopy()).setParent(t),t.selectionDirectives=o;for(var r in e._UnknownProps)t._UnknownProps[r]=e._UnknownProps[r];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._UseFirstResult!==e._UseFirstResult||t._UseLastResult!==e._UseLastResult||t._UseCroppedChild!==e._UseCroppedChild||(t._InitialKeyframe?!t._InitialKeyframe.equals(e._InitialKeyframe):e._InitialKeyframe)||t._Name!==e._Name||(t.selectionDirectives?!t.selectionDirectives.equals(e.selectionDirectives):e.selectionDirectives))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.KeyframeSelector=pn,o(pn,wi);var gn=function(){function e(){}return e.Deserialize=function(e){return"ByKeyframeType"==e._Type?hn.Deserialize(e):"MatchingKeyframe"==e._Type?yn.Deserialize(e):void 0},e}();t.SelectionDirective=gn,o(gn,Ti);var hn=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.ByKeyframeType,o._KeyframeTypes="",o._IncludeSelf=!1,o._ComputedIndex=null,o._AppliesTo=new n(t.AppliesTo.Current),o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"KeyframeTypes":o._KeyframeTypes=e.KeyframeTypes;break;case"IncludeSelf":o._IncludeSelf=e.IncludeSelf;break;case"ComputedIndex":o._ComputedIndex=mn.Deserialize(e.ComputedIndex),null!=o._ComputedIndex&&o._ComputedIndex.setParent(o);break;case"AppliesTo":var a=t.AppliesTo[e.AppliesTo];o._AppliesTo=new n(void 0!==a?a:e.AppliesTo);break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="ByKeyframeType",""!=e._KeyframeTypes&&(i.KeyframeTypes=e._KeyframeTypes),0!=e._IncludeSelf&&(i.IncludeSelf=e._IncludeSelf),null!=e._ComputedIndex&&(i.ComputedIndex=e._ComputedIndex.serialize()),e._AppliesTo.IntValue!=t.AppliesTo.Current&&(e._AppliesTo.IntValue===t.AppliesTo.UnknownValue?i.AppliesTo=e._AppliesTo.StringValue:i.AppliesTo=t.AppliesTo[e._AppliesTo.IntValue]);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i;t._KeyframeTypes=e._KeyframeTypes,t._IncludeSelf=e._IncludeSelf;var n=e._ComputedIndex;n&&(n=n.createCopy()).setParent(t),t._ComputedIndex=n;var o=e._AppliesTo;o&&(o=o.createCopy()),t._AppliesTo=o;for(var r in e._UnknownProps)t._UnknownProps[r]=e._UnknownProps[r];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._KeyframeTypes!==e._KeyframeTypes||t._IncludeSelf!==e._IncludeSelf||(t._ComputedIndex?!t._ComputedIndex.equals(e._ComputedIndex):e._ComputedIndex)||(t._AppliesTo?!t._AppliesTo.equals(e._AppliesTo):e._AppliesTo))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.ByKeyframeType=hn,o(hn,Ti),o(hn,Ci);var yn=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.MatchingKeyframe,o._MatchMethod=new n(t.MatchMethod.None),o._MatchOperation=new n(t.MatchOperation.Equality),o._MatchTo=new n(t.KeyframeTarget.NotSpecified),o._IncludeSelf=!1,o._ComputedIndex=null,o._AppliesTo=new n(t.AppliesTo.Current),o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"MatchMethod":var a=t.MatchMethod[e.MatchMethod];o._MatchMethod=new n(void 0!==a?a:e.MatchMethod);break;case"MatchOperation":var s=t.MatchOperation[e.MatchOperation];o._MatchOperation=new n(void 0!==s?s:e.MatchOperation);break;case"MatchTo":var l=t.KeyframeTarget[e.MatchTo];o._MatchTo=new n(void 0!==l?l:e.MatchTo);break;case"IncludeSelf":o._IncludeSelf=e.IncludeSelf;break;case"ComputedIndex":o._ComputedIndex=mn.Deserialize(e.ComputedIndex),null!=o._ComputedIndex&&o._ComputedIndex.setParent(o);break;case"AppliesTo":var u=t.AppliesTo[e.AppliesTo];o._AppliesTo=new n(void 0!==u?u:e.AppliesTo);break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};i._Type="MatchingKeyframe",e._MatchMethod.IntValue!=t.MatchMethod.None&&(e._MatchMethod.IntValue===t.MatchMethod.UnknownValue?i.MatchMethod=e._MatchMethod.StringValue:i.MatchMethod=t.MatchMethod[e._MatchMethod.IntValue]),e._MatchOperation.IntValue!=t.MatchOperation.Equality&&(e._MatchOperation.IntValue===t.MatchOperation.UnknownValue?i.MatchOperation=e._MatchOperation.StringValue:i.MatchOperation=t.MatchOperation[e._MatchOperation.IntValue]),e._MatchTo.IntValue!=t.KeyframeTarget.NotSpecified&&(e._MatchTo.IntValue===t.KeyframeTarget.UnknownValue?i.MatchTo=e._MatchTo.StringValue:i.MatchTo=t.KeyframeTarget[e._MatchTo.IntValue]),0!=e._IncludeSelf&&(i.IncludeSelf=e._IncludeSelf),null!=e._ComputedIndex&&(i.ComputedIndex=e._ComputedIndex.serialize()),e._AppliesTo.IntValue!=t.AppliesTo.Current&&(e._AppliesTo.IntValue===t.AppliesTo.UnknownValue?i.AppliesTo=e._AppliesTo.StringValue:i.AppliesTo=t.AppliesTo[e._AppliesTo.IntValue]);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._MatchMethod;n&&(n=n.createCopy()),t._MatchMethod=n;var o=e._MatchOperation;o&&(o=o.createCopy()),t._MatchOperation=o;var r=e._MatchTo;r&&(r=r.createCopy()),t._MatchTo=r,t._IncludeSelf=e._IncludeSelf;var a=e._ComputedIndex;a&&(a=a.createCopy()).setParent(t),t._ComputedIndex=a;var s=e._AppliesTo;s&&(s=s.createCopy()),t._AppliesTo=s;for(var l in e._UnknownProps)t._UnknownProps[l]=e._UnknownProps[l];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._MatchMethod?!t._MatchMethod.equals(e._MatchMethod):e._MatchMethod)||(t._MatchOperation?!t._MatchOperation.equals(e._MatchOperation):e._MatchOperation)||(t._MatchTo?!t._MatchTo.equals(e._MatchTo):e._MatchTo)||t._IncludeSelf!==e._IncludeSelf||(t._ComputedIndex?!t._ComputedIndex.equals(e._ComputedIndex):e._ComputedIndex)||(t._AppliesTo?!t._AppliesTo.equals(e._AppliesTo):e._AppliesTo))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.MatchingKeyframe=yn,o(yn,Ti),o(yn,_i);var mn=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.ComputedValue,o._Expression="",o._PropertyType=new n(t.ComputedValueType.Boolean),o._EvaluationContext=null,o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"Expression":o._Expression=e.Expression;break;case"PropertyType":var a=t.ComputedValueType[e.PropertyType];o._PropertyType=new n(void 0!==a?a:e.PropertyType);break;case"EvaluationContext":o._EvaluationContext=fn.Deserialize(e.EvaluationContext),null!=o._EvaluationContext&&o._EvaluationContext.setParent(o);break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};""!=e._Expression&&(i.Expression=e._Expression),e._PropertyType.IntValue!=t.ComputedValueType.Boolean&&(e._PropertyType.IntValue===t.ComputedValueType.UnknownValue?i.PropertyType=e._PropertyType.StringValue:i.PropertyType=t.ComputedValueType[e._PropertyType.IntValue]),null!=e._EvaluationContext&&(i.EvaluationContext=e._EvaluationContext.serialize());for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i;t._Expression=e._Expression;var n=e._PropertyType;n&&(n=n.createCopy()),t._PropertyType=n;var o=e._EvaluationContext;o&&(o=o.createCopy()).setParent(t),t._EvaluationContext=o;for(var r in e._UnknownProps)t._UnknownProps[r]=e._UnknownProps[r];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._Expression!==e._Expression||(t._PropertyType?!t._PropertyType.equals(e._PropertyType):e._PropertyType)||(t._EvaluationContext?!t._EvaluationContext.equals(e._EvaluationContext):e._EvaluationContext))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.ComputedValue=mn,o(mn,bi);var fn=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.EvaluationContext,n.rpnTokens=new Ot,n.rpnTokens.setParent(n),n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var t=new i;for(var n in e)switch(n){case"RpnTokens":t.rpnTokens.deserializeStructCollection(e.RpnTokens,vn.Deserialize);break;case"_Type":break;default:t._UnknownProps[n]=e[n]}return t},i.prototype.serialize=function(){var e=this,t={};t.RpnTokens=e.rpnTokens.serialize();for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i,n=e.rpnTokens;n&&(n=n.createCopy()).setParent(t),t.rpnTokens=n;for(var o in e._UnknownProps)t._UnknownProps[o]=e._UnknownProps[o];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t.rpnTokens?!t.rpnTokens.equals(e.rpnTokens):e.rpnTokens))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.EvaluationContext=fn,o(fn,Ai);var vn=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.RpnToken,o._Type=new n(t.RpnTokenType.Unsupported),o._Value="",o._Unary=!1,o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"Type":var a=t.RpnTokenType[e.Type];o._Type=new n(void 0!==a?a:e.Type);break;case"Value":o._Value=e.Value;break;case"Unary":o._Unary=e.Unary;break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};e._Type.IntValue!=t.RpnTokenType.Unsupported&&(e._Type.IntValue===t.RpnTokenType.UnknownValue?i.Type=e._Type.StringValue:i.Type=t.RpnTokenType[e._Type.IntValue]),""!=e._Value&&(i.Value=e._Value),0!=e._Unary&&(i.Unary=e._Unary);for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i,n=e._Type;n&&(n=n.createCopy()),t._Type=n,t._Value=e._Value,t._Unary=e._Unary;for(var o in e._UnknownProps)t._UnknownProps[o]=e._UnknownProps[o];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||(t._Type?!t._Type.equals(e._Type):e._Type)||t._Value!==e._Value||t._Unary!==e._Unary)&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.RpnToken=vn,o(vn,Pi);var Sn=function(e){function i(){var i=e.call(this)||this,n=i;return n.structType=t.StructType.KeyframeMetaData,n._ParentKeyframeId="",n._CroppedChildImageKeyframeId="",n._Lod=0,n._LocationX=0,n._LocationY=0,n._LocationZ=0,n._ScaleX2D=0,n._ScaleY2D=0,n._Rotation2D=0,n._RowIndex=0,n._GridRow=0,n._GridRowCount=0,n.transformIndices=new Rt,n.transformIndices.setParent(n),n._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var n=new i;for(var o in e)switch(o){case"ParentKeyframeId":n._ParentKeyframeId=e.ParentKeyframeId;break;case"CroppedChildImageKeyframeId":n._CroppedChildImageKeyframeId=e.CroppedChildImageKeyframeId;break;case"Lod":n._Lod=e.Lod;break;case"LocationX":n._LocationX=e.LocationX;break;case"LocationY":n._LocationY=e.LocationY;break;case"LocationZ":n._LocationZ=e.LocationZ;break;case"ScaleX2D":n._ScaleX2D=e.ScaleX2D;break;case"ScaleY2D":n._ScaleY2D=e.ScaleY2D;break;case"Rotation2D":n._Rotation2D=e.Rotation2D;break;case"KeyframeFlags":n._KeyframeFlags=new Flags(t.KeyframeFlags,Flags.deserialize(t.KeyframeFlags,e.KeyframeFlags));break;case"RowIndex":n._RowIndex=e.RowIndex;break;case"GridRow":n._GridRow=e.GridRow;break;case"GridRowCount":n._GridRowCount=e.GridRowCount;break;case"TransformIndices":n.transformIndices.deserializePropertyCollection(e.TransformIndices);break;case"_Type":break;default:n._UnknownProps[o]=e[o]}return n},i.prototype.serialize=function(){var e=this,t={};""!=e._ParentKeyframeId&&(t.ParentKeyframeId=e._ParentKeyframeId),""!=e._CroppedChildImageKeyframeId&&(t.CroppedChildImageKeyframeId=e._CroppedChildImageKeyframeId),0!=e._Lod&&(t.Lod=e._Lod),0!=e._LocationX&&(t.LocationX=e._LocationX),0!=e._LocationY&&(t.LocationY=e._LocationY),0!=e._LocationZ&&(t.LocationZ=e._LocationZ),0!=e._ScaleX2D&&(t.ScaleX2D=e._ScaleX2D),0!=e._ScaleY2D&&(t.ScaleY2D=e._ScaleY2D),0!=e._Rotation2D&&(t.Rotation2D=e._Rotation2D),void 0!==e._KeyframeFlags&&(t.KeyframeFlags=e._KeyframeFlags.serialize()),0!=e._RowIndex&&(t.RowIndex=e._RowIndex),0!=e._GridRow&&(t.GridRow=e._GridRow),0!=e._GridRowCount&&(t.GridRowCount=e._GridRowCount),t.TransformIndices=e.transformIndices.serialize();for(var i in e._UnknownProps)t[i]=e._UnknownProps[i];return t},i.prototype.createCopy=function(){var e=this,t=new i;t._ParentKeyframeId=e._ParentKeyframeId,t._CroppedChildImageKeyframeId=e._CroppedChildImageKeyframeId,t._Lod=e._Lod,t._LocationX=e._LocationX,t._LocationY=e._LocationY,t._LocationZ=e._LocationZ,t._ScaleX2D=e._ScaleX2D,t._ScaleY2D=e._ScaleY2D,t._Rotation2D=e._Rotation2D,t._KeyframeFlags=e._KeyframeFlags,t._RowIndex=e._RowIndex,t._GridRow=e._GridRow,t._GridRowCount=e._GridRowCount;var n=e.transformIndices;n&&(n=n.createCopy()).setParent(t),t.transformIndices=n;for(var o in e._UnknownProps)t._UnknownProps[o]=e._UnknownProps[o];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._ParentKeyframeId!==e._ParentKeyframeId||t._CroppedChildImageKeyframeId!==e._CroppedChildImageKeyframeId||t._Lod!==e._Lod||t._LocationX!==e._LocationX||t._LocationY!==e._LocationY||t._LocationZ!==e._LocationZ||t._ScaleX2D!==e._ScaleX2D||t._ScaleY2D!==e._ScaleY2D||t._Rotation2D!==e._Rotation2D||t._KeyframeFlags!==e._KeyframeFlags||t._RowIndex!==e._RowIndex||t._GridRow!==e._GridRow||t._GridRowCount!==e._GridRowCount||(t.transformIndices?!t.transformIndices.equals(e.transformIndices):e.transformIndices))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.KeyframeMetaData=Sn,o(Sn,Ii);var wn=function(e){function i(){var i=e.call(this)||this,o=i;return o.structType=t.StructType.StoryboardExecutionContext,o._StoryboardName="",o._StoryboardScope="",o._Salt="",o._SourceKeyframeId="",o._TargetKeyframeId="",o._Duration=0,o._Delay=0,o._KeyframeTarget=new n(t.KeyframeTarget.NotSpecified),o._ResetTiming=!1,o.animationParameters=new Ot,o.animationParameters.setParent(o),o._UnknownProps={},i}return __extends(i,e),i.Deserialize=function(e){var o=new i;for(var r in e)switch(r){case"StoryboardName":o._StoryboardName=e.StoryboardName;break;case"StoryboardScope":o._StoryboardScope=e.StoryboardScope;break;case"Salt":o._Salt=e.Salt;break;case"SourceKeyframeId":o._SourceKeyframeId=e.SourceKeyframeId;break;case"TargetKeyframeId":o._TargetKeyframeId=e.TargetKeyframeId;break;case"Duration":o._Duration=e.Duration;break;case"Delay":o._Delay=e.Delay;break;case"KeyframeTarget":var a=t.KeyframeTarget[e.KeyframeTarget];o._KeyframeTarget=new n(void 0!==a?a:e.KeyframeTarget);break;case"ResetTiming":o._ResetTiming=e.ResetTiming;break;case"AnimationParameters":o.animationParameters.deserializeStructCollection(e.AnimationParameters,nn.Deserialize);break;case"_Type":break;default:o._UnknownProps[r]=e[r]}return o},i.prototype.serialize=function(){var e=this,i={};""!=e._StoryboardName&&(i.StoryboardName=e._StoryboardName),""!=e._StoryboardScope&&(i.StoryboardScope=e._StoryboardScope),""!=e._Salt&&(i.Salt=e._Salt),""!=e._SourceKeyframeId&&(i.SourceKeyframeId=e._SourceKeyframeId),""!=e._TargetKeyframeId&&(i.TargetKeyframeId=e._TargetKeyframeId),0!=e._Duration&&(i.Duration=e._Duration),0!=e._Delay&&(i.Delay=e._Delay),e._KeyframeTarget.IntValue!=t.KeyframeTarget.NotSpecified&&(e._KeyframeTarget.IntValue===t.KeyframeTarget.UnknownValue?i.KeyframeTarget=e._KeyframeTarget.StringValue:i.KeyframeTarget=t.KeyframeTarget[e._KeyframeTarget.IntValue]),0!=e._ResetTiming&&(i.ResetTiming=e._ResetTiming),i.AnimationParameters=e.animationParameters.serialize();for(var n in e._UnknownProps)i[n]=e._UnknownProps[n];return i},i.prototype.createCopy=function(){var e=this,t=new i;t._StoryboardName=e._StoryboardName,t._StoryboardScope=e._StoryboardScope,t._Salt=e._Salt,t._SourceKeyframeId=e._SourceKeyframeId,t._TargetKeyframeId=e._TargetKeyframeId,t._Duration=e._Duration,t._Delay=e._Delay;var n=e._KeyframeTarget;n&&(n=n.createCopy()),t._KeyframeTarget=n,t._ResetTiming=e._ResetTiming;var o=e.animationParameters;o&&(o=o.createCopy()).setParent(t),t.animationParameters=o;for(var r in e._UnknownProps)t._UnknownProps[r]=e._UnknownProps[r];return t},i.prototype.equals=function(e){var t=this;return!!e&&(!(this.structType!==e.structType||t._StoryboardName!==e._StoryboardName||t._StoryboardScope!==e._StoryboardScope||t._Salt!==e._Salt||t._SourceKeyframeId!==e._SourceKeyframeId||t._TargetKeyframeId!==e._TargetKeyframeId||t._Duration!==e._Duration||t._Delay!==e._Delay||(t._KeyframeTarget?!t._KeyframeTarget.equals(e._KeyframeTarget):e._KeyframeTarget)||t._ResetTiming!==e._ResetTiming||(t.animationParameters?!t.animationParameters.equals(e.animationParameters):e.animationParameters))&&Di.compareUnknownDictionaries(this._UnknownProps,e._UnknownProps))},i}(Di);t.StoryboardExecutionContext=wn,o(wn,Ei),t.RenderGraph.SetStructValues(),t.RenderGraph.SetStructCollectionValues(),t.RenderGraph.SetPropertyCollectionValues(),t.RenderGraph.SetEnumCollectionValues()}(t.RM||(t.RM={}))}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){e.Model||(e.Model={})}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t=function(){function e(e,t,i,n,o){this.id=e,this.type=t,this.children=n||[],void 0!==o?this.externalDataId=o:this.props=i||{}}return e.prototype.createCopy=function(){var t=this.children,i=this.props,n=this.externalDataId;if(this.externalDataId)return new e(this.id,this.type,void 0,void 0,n);var o=t?t.slice(0):void 0,r=Object.create(Object.getPrototypeOf(i)),a=new e(this.id,this.type,r,o);for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];r[s]=l&&"object"==typeof l?l.createCopy():l}return a},e}();e.PropBag=t}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=function(t){function i(e,i,n){void 0===n&&(n=!1);var o=t.call(this)||this;if(o._propBags={},o._disposalCallbacks=[],o._bagChangeCallbacks=[],o._updateCallbacks=[],o._partialChangesCompletedCallbacks=[],o.applyingUpdate=!1,o.partialChangeCount=0,o.rootId=e,o._readOnly=n,void 0!==i)for(var r=i.length,a=0;a<r;a++){var s=i[a];o._propBags[s.id]=s}return o}return __extends(i,t),i.prototype.addPropBag=function(e){this._propBags[e.id]=e},i.prototype.getPropBag=function(e){return this._propBags[e]},i.prototype.getPropBagIds=function(){var e=this._propBags,t=[];for(var i in e)t.push(i);return t},i.prototype.getPropBagsCopy=function(){var e=this._propBags,t={};for(var i in e)t[i]=e[i].createCopy();return t},i.prototype.markPropBagDirty=function(t,i){if(!this.applyingUpdate&&this._readOnly)throw e.RethrowLogger.createError("Attempting to modify a read-only model.");for(var n=0,o=this._bagChangeCallbacks.length;n<o;++n)this._bagChangeCallbacks[n](t,i,this.applyingUpdate,this.partialChangeCount>0)},i.prototype.updatePropBags=function(e,t){this.applyingUpdate=!0;for(var i=0,n=this._updateCallbacks.length;i<n;++i)this._updateCallbacks[i](e);t&&this.removeUnrootedPropBags(),this.applyingUpdate=!1},i.prototype.createPartialChange=function(e){++this.partialChangeCount;try{e()}finally{--this.partialChangeCount}},i.prototype.partialChangesCompleted=function(){for(var e=0,t=this._partialChangesCompletedCallbacks.length;e<t;++e)this._partialChangesCompletedCallbacks[e]()},i.prototype.registerUpdateCallback=function(e){this._updateCallbacks.push(e)},i.prototype.registerBagChangeCallback=function(e){this._bagChangeCallbacks.push(e)},i.prototype.registerDisposalCallback=function(e){this._disposalCallbacks.push(e)},i.prototype.registerPartialChangesCompletedCallback=function(e){this._partialChangesCompletedCallbacks.push(e)},i.prototype.getRootedPropBagIds=function(){var e=this,t={},i=function(n){t[n]=!0;for(var o=e._propBags[n].children,r=o.length,a=0;a<r;a++){var s=o[a];void 0===t[s]&&i(s)}};return i(this.rootId),t},i.prototype.prunePropBagCollection=function(e){var t=this.getRootedPropBagIds();for(var i in e)!0!==t[i]&&delete e[i]},i.prototype.removeUnrootedPropBags=function(){var e=[],t=this._propBags,i=this.getRootedPropBagIds(),n=[];for(var o in t)i[o]||n.push(o);var r=n.length;if(r>0){for(var a=0,s=this._disposalCallbacks.length;a<s;++a)this._disposalCallbacks[a](n);for(var l=0;l<r;l++){var u=n[l];e.push(t[u]),delete t[u]}}return e},i}(ObjectOM);t.Store=i}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(t){var i=function(){function t(t,i){if(void 0!==t)if(t instanceof e.PropBag){var n=t;if(this.id=n.id,this.type=n.type,void 0!==n.props){var o=i.serializeProperties(this.type,n.props);if(void 0!==o){this.props={};for(var r in o)this.props[r]=o[r]}}void 0!==n.externalDataId&&(this.externalDataId=n.externalDataId)}else{var a=t;this.id=a,this.ref=!0}}return t.prototype.addChild=function(e){void 0===this.children&&(this.children=[]),this.children.push(e)},t.getProps=function(e){if(!(e.props instanceof Array))return void 0===e.props?{}:e.props;var t={};if(void 0!==e.props)for(var i=0;i<e.props.length;i++){var n=e.props[i];t[n.Key]=n.Value}return t},t}();t.PropBagJS=i}(e.WP||(e.WP={}))}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function e(e,t){this.Key=e,this.Value=t}return e}();e.PropJS=t}(e.WP||(e.WP={}))}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(t){var i=function(){function i(e,i){for(var n,o={},r={},a={},s=0;s<e.length;++s)o[n=e[s].id]=e[s],r[n]=new t.PropBagJS(e[s],i),a[n]=r[n];var l={};for(n in o)for(var u=o[n].children,d=u.length,c=0;c<d;c++){var p=u[c];if(void 0!==o[p]&&void 0===l[p]){var g=r[p];r[n].addChild(g),l[p]=!0,delete a[p]}else r[n].addChild(new t.PropBagJS(p))}this.propBags=[];for(var h in a)this.propBags.push(a[h])}return i.Flatten=function(i,n){for(var o=[],r=function(i){var a=t.PropBagJS.getProps(i),s=i.children,l=s?s.length:0,u=i.externalDataId,d=i.id,c=i.type,p=[],g=a?n.deserializeProperties(c,a):void 0;if(s)for(h=0;h<l;h++)p.push(s[h].id);if(o.push(new e.PropBag(d,c,g,p,u)),s)for(var h=0;h<l;h++)s[h].ref||r(s[h],o)},a=0;a<i.propBags.length;a++)r(i.propBags[a],o);return o},i}();t.StoryDiff=i}(e.WP||(e.WP={}))}(e.Model||(e.Model={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){e.ServiceSwitches=null;var t=function(){function e(){this._siteDisabled=TDB.watchableTag(596476301,this,!1),this.siteDisabled=this._siteDisabled,this._blockServiceSuggestedContentDecomp=TDB.watchableTag(596476302,this,!1),this.blockServiceSuggestedContentDecomp=this._blockServiceSuggestedContentDecomp,this._emphasisLessEnabled=TDB.watchableTag(596476303,this,!1),this.emphasisLessEnabled=this._emphasisLessEnabled,this._authoringDisabled=TDB.watchableTag(596476304,this,!1),this.authoringDisabled=this._authoringDisabled}return e.prototype.SetupSwitchesFromTransportFormat=function(e){var t=this;TDB.applyUpdate(function(){t._siteDisabled.setValue(!(!e||!e.siteDisabled)),t._blockServiceSuggestedContentDecomp.setValue(!(!e||!e.blockServiceSuggestedContentDecomp)),t._emphasisLessEnabled.setValue(!(!e||!e.emphasisLessEnabled)),t._authoringDisabled.setValue(!(!e||!e.authoringDisabled))},TDB.Justification.SynchronousBrowserEvent)},e}();e.WatchableSwitches=t}(e.Settings||(e.Settings={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function e(e,t,i,n,o,r,a,s){this.imageId=e,this.variation=t,this.seedColors=i,this.dynamicStyleId=n,this.colorOptionId=o,this.colorPalette=r,this.backgroundSetId=a,this.telemetryData=s}return e.prototype.toString=function(){var e="Color Palette Data:";null==this.imageId&&""!=this.imageId||(e+=" Image Id: "+this.imageId),null==this.dynamicStyleId&&""!=this.imageId||(e+=" Style Id: "+this.dynamicStyleId),null!=this.variation&&(e+=" Variation: "+this.variation),e+=" Seed Colors: ";for(var t in this.seedColors)e+=t+":"+this.seedColors[t]+", ";return null!=this.colorOptionId&&(e+=" Color Option Id: "+this.colorOptionId),null!=this.backgroundSetId&&(e+=" Background Set Id: "+this.backgroundSetId),null!=this.telemetryData&&(e+=" Telemetry Data: "+this.telemetryData),e},e.prototype.getLoggingData=function(){return new i(this.imageId,this.variation,this.seedColors,this.dynamicStyleId,this.colorOptionId,this.backgroundSetId,this.telemetryData)},e}();e.ColorPaletteData=t;var i=function(){function e(e,t,i,n,o,r,a){this.imageId=e,this.variation=t,this.seedColors=i,this.dynamicStyleId=n,this.colorOptionId=o,this.backgroundSetId=r,this.telemetryData=a}return e}();e.ColorPaletteLoggingData=i}(e.Styles||(e.Styles={}))}(e.Server||(e.Server={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){function i(e,t,i){TDB.applyUpdate(function(){p.setValue(!0)},TDB.Justification.InitialConversion);var r=StoryPageSettings.LookupId;$.ajax(l.UrlHelper.getInstance().listFontSetOptionsUrl(r,e,t,i),{type:"GET",success:n,error:o,cache:!1})}function n(e,t,i){var n=e.fontSetOptions;TDB.applyUpdate(function(){p.setValue(!1),u.setValue(n)})}function o(e,t,i){TDB.applyUpdate(function(){p.setValue(!1),g.setValue(!0)}),StoryLog.StructuredTraceTag(596476360,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.warning,"Failed to get font set option list from the server.",{textStatus:t,errorThrown:i})}function r(e,t,n,o){return e!==d||t!==c?(i(e,t,n),d=e,c=t,u.getWatchedValue(o)):u.getWatchedValue(o)}function a(e){return p.getWatchedValue(e)}function s(e){return g.getWatchedValue(e)}var l=e.Common,u=TDB.watchableTag(596476357,t,[]),d="",c="",p=TDB.watchableTag(596476358,t,!1),g=TDB.watchableTag(596476359,t,!1);t.getFontSetOptions=r,t.waitingForFontSets=a,t.errorGettingFontSets=s}(t.Styles||(t.Styles={}))}(e.Server||(e.Server={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function e(e,t){this.id=e,this.value=t}return e}();e.NamedColor=t}(e.Styles||(e.Styles={}))}(e.Server||(e.Server={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){function i(e,i){return e.every(n)?e.map(function(e,n){return new t.ColorPaletteData(i,n,e.SeedColors,e.StyleVariationId,e.ColorOptionId,e.ColorPalette,e.BackgroundSetId,e.TelemetryData)}):null}function n(e,t,i){var n=["SeedColors","StyleVariationId","ColorOptionId","ColorPalette"],o=0;for(var r in e)-1!=n.indexOf(r)&&o++;return o===n.length}function o(e,t,n,o,r,s,l,u,d){0==t.length&&s&&s.call(o,l);for(var c=a.UrlHelper.getInstance().suggestedColorSetsUrl(e,n.toString()),p=0;p<t.length;p++)c+="&imageIds="+t[p];return u&&(c+="&styleId="+u),d&&(c+="&fontSetId="+d),c+="&allowBackgroundChange=true",$.ajax(c,{name:"GetSuggestedColorSets",description:"Get Color Palette From Image",type:"GET",contentType:"application/json; charset=utf-8",success:function(e){var t={};for(var n in e)t[n]=i(e[n],n);Obj.keys(t).length>0?r.call(o,t,l):s&&s.call(o)},error:function(e,t,i){s&&s.call(o)}})}function r(e,t,n,o,r,s,l,u){var d=a.UrlHelper.getInstance().customColorSetsUrl(e,n.toString());return d+="&customColors="+t.replace("#","%23"),l&&(d+="&styleId="+l),u&&(d+="&fontSetId="+u),$.ajax(d,{name:"GetCustomColorSets",description:"Get palettes for custom colors",type:"GET",contentType:"application/json; charset=utf-8",success:function(e){e.length>0?r.call(o,i(e)):s&&s.call(o)},error:function(e,t,i){s&&s.call(o)}})}var a=e.Common;t.convertToColorPaletteData=i,t.getSuggestedColorPalettes=o,t.getCustomColorPalettes=r}(t.Styles||(t.Styles={}))}(e.Server||(e.Server={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function t(e){this.styleId=e}return t.prototype.copyFrom=function(t){if(this.styleId=t.styleId,this.setFontSetId(t.fontSetId),this.setBackgroundSetId(t.backgroundSetId),this.setStyleVariationId(t.styleVariationId),this.setFilterSetId(t.filterSetId),this.colorPalette=[],t.colorPalette)for(n=0;n<t.colorPalette.length;n++){var i=t.colorPalette[n];this.colorPalette.push(new e.NamedColor(i.id,i.value))}if(this.setColorOptionId(t.colorOptionId),this.seedColorOverrides=[],t.seedColorOverrides)for(var n=0;n<t.seedColorOverrides.length;n++){var o=t.seedColorOverrides[n];this.seedColorOverrides.push(new e.NamedColor(o.id,o.value))}this.setAnimationLevel(t.animationLevel)},t.prototype.setColorPalette=function(t){this.colorPalette=[];for(var i in t){var n=t[i];this.colorPalette.push(new e.NamedColor(i,n))}},t.prototype.setColorOptionId=function(e){this.colorOptionId=e},t.prototype.setSeedColorOverrides=function(t){this.seedColorOverrides=[];for(var i in t){var n=t[i];this.seedColorOverrides.push(new e.NamedColor(i,n))}},t.prototype.setFontSetId=function(e){this.fontSetId=e},t.prototype.setBackgroundSetId=function(e){this.backgroundSetId=e},t.prototype.setAnimationLevel=function(e){this.animationLevel=e},t.prototype.setStyleVariationId=function(e){this.styleVariationId=e},t.prototype.setFilterSetId=function(e){this.filterSetId=e},t.prototype.toString=function(){for(var e="",t=0;this.colorPalette&&t<this.colorPalette.length;++t)e+=n=this.colorPalette[t].id+","+this.colorPalette[t].value+" ";for(var i="",t=0;this.seedColorOverrides&&t<this.seedColorOverrides.length;++t){var n=this.seedColorOverrides[t].id+","+this.seedColorOverrides[t].value+" ";i+=n}return this.styleId+" "+e+this.colorOptionId+" "+this.colorOptionId+i+" "+this.fontSetId+" "+this.backgroundSetId+" "+this.animationLevel+" "+this.styleVariationId+" "+this.filterSetId},t}();e.StyleOption=t}(e.Styles||(e.Styles={}))}(e.Server||(e.Server={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){function i(){return r||(r=n.PageCompartmentManager.getInstance().createAccessor("StyleGalleryManager")),r}var n=e.Common,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t.StyleOption);t.StyleOptionResponse=o;var r;t.currentStyleGalleryManager=i;var a=function(){function e(e){this.pageId=e,this.styleGalleryOptions=TDB.watchableTag(596476320,t,{}),this.defaultCultureStyleOptionsNeeded=TDB.watchableTag(596476321,t,!0),this.waitingForGalleryOptions=TDB.watchableTag(596476322,t,!0),this.errorGettingGalleryOptions=TDB.watchableTag(596476323,t,!1),this.outstandingStyleGalleryRequest=!1,this.currentLanguage="en-us"}return e.prototype.onGetStyleGalleryOptionsSuccess=function(e){var t=this;if(this.outstandingStyleGalleryRequest=!1,n.PageCompartmentManager.getInstance().isCompartmentAvailable(this.pageId)){var i=e.styleOptions,o={};if(i){for(var r=0;r<i.length;r++)o[i[r].Key]=i[r].Value;TDB.applyUpdate(function(){t.waitingForGalleryOptions.setValue(!1),t.styleGalleryOptions.setValue(o),t.defaultCultureStyleOptionsNeeded.setValue(!1)},TDB.Justification.SynchronousBrowserEvent)}}else StoryLog.StructuredTraceTag(596476352,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Received message from StyleGalleryManager after page compartment was destroyed",{pageId:this.pageId})},e.prototype.onGetStyleGalleryOptionsError=function(e,t,i,o){var r=this;if(this.outstandingStyleGalleryRequest=!1,n.PageCompartmentManager.getInstance().isCompartmentAvailable(this.pageId))if(this.requestStyleGalleryOptionsMaxRetrys>0){this.requestStyleGalleryOptionsMaxRetrys--,StoryLog.StructuredTraceTag(596476354,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.info,"Attempt to retrieve gallery options failed. Retrying.",{textStatus:i,errorThrown:o});var a=StoryPageSettings.LookupId;platform.setTimeout(function(){r.outstandingStyleGalleryRequest=!0,$.ajax(n.UrlHelper.getInstance().getStyleGalleryUrl(a,e),{type:"GET",cache:!1}).then(function(e){return r.onGetStyleGalleryOptionsSuccess(e)},function(t,i,n){return r.onGetStyleGalleryOptionsError(e,t,i,n)})},1e3)}else TDB.applyUpdate(function(){r.waitingForGalleryOptions.setValue(!1),r.errorGettingGalleryOptions.setValue(!0)}),"timeout"===i||t&&0===t.status?StoryLog.StructuredTraceTag(596476355,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Failed to get style gallery options from the server because of network connection problems or timeout.",{ErrorStatus:i,ErrorThrown:o,Status:t?t.status.toString():null}):StoryLog.StructuredTraceTag(596476356,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.error,"Failed to get style gallery options from the server.",{textStatus:i,errorThrown:o,Status:t?t.status.toString():null});else StoryLog.StructuredTraceTag(596476353,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Received error from StyleGalleryManager after page compartment was destroyed",{pageId:this.pageId})},e.prototype.getStyleGalleryOptions=function(e,t){var i=this,o=!1;if(this.currentLanguage!==e&&(this.currentLanguage=e,o=!0),this.getDefaultCultureStyleOptionsNeeded(t)||o){if(this.outstandingStyleGalleryRequest)return this.styleGalleryOptions.getWatchedValue(t);this.requestStyleGalleryOptionsMaxRetrys=2;var r=StoryPageSettings.LookupId;this.outstandingStyleGalleryRequest=!0,$.ajax(n.UrlHelper.getInstance().getStyleGalleryUrl(r,e),{type:"GET",cache:!1}).then(function(e){return i.onGetStyleGalleryOptionsSuccess(e)},function(t,n,o){return i.onGetStyleGalleryOptionsError(e,t,n,o)})}return this.styleGalleryOptions.getWatchedValue(t)},e.prototype.getWaitingForGalleryOptions=function(e){return this.waitingForGalleryOptions.getWatchedValue(e)},e.prototype.getErrorGettingGalleryOptions=function(e){return this.errorGettingGalleryOptions.getWatchedValue(e)},e.prototype.getDefaultCultureStyleOptionsNeeded=function(e){return this.defaultCultureStyleOptionsNeeded.getWatchedValue(e)},e}();t.StyleGalleryManager=a}(t.Styles||(t.Styles={}))}(e.Server||(e.Server={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){function i(){return n||(n=o.PageCompartmentManager.getInstance().createAccessor("StylePreviewManager")),n}var n,o=e.Common,r=function(){function e(){this.styleOptions=[],this.images={},this.notifier=TDB.notifierTag(596476315,this),this.requestSent=!1,this.previousAttempts=0}return e}();t.currentStylePreviewManager=i;var a=function(){function t(e){this.pageId=e,this.batches={},this.queue=[],this.pending=[],this.maximumConcurrentRequests=5,this.priorityLevels=4;for(var t=0;t<this.priorityLevels;++t)this.queue.push([]),this.pending.push(0)}return t.prototype.batchStyles=function(e,t,i,n){t<0&&(t=0),t>=this.priorityLevels&&(t=this.priorityLevels-1);var o=new r;o.priority=t;for(var a=0;a<e.length;++a){var s=e[a],l=s.toString()+" "+n;void 0===this.batches[l]&&(o.styleOptions.push(s),this.batches[l]=o)}i||o.styleOptions.length<=0||(this.mayRequest(t)?this.requestImageData(o,t,n):this.queue[t].push(o))},t.prototype.getImageUri=function(e,t,i){var n=e.toString()+" "+t;void 0===this.batches[n]&&this.batchStyles([e],0,!1,t);var o=this.batches[n];o.requestSent||(this.mayRequest(o.priority)?this.requestImageData(o,o.priority,t):this.queue[o.priority].unshift(o)),i.watch(o.notifier);var r=o.images[n];return r?"data:image/jpeg;base64,"+r:void 0},t.prototype.mayRequest=function(e){for(i=0;i<e;++i)if(this.pending[i]>0||this.queue[i].length>0)return!1;for(var t=0,i=e;i<this.priorityLevels;++i)t+=this.pending[i];return this.pending[e]<this.maximumConcurrentRequests},t.prototype.requestImageData=function(e,t,i){e.requestSent||(e.requestSent=!0,++this.pending[t],this.ajax(e,t,i))},t.prototype.ajax=function(e,i,n){var r=this,a=StoryPageSettings.LookupId;t.requestsInProgress++,$.ajax(o.UrlHelper.getInstance().getBase64StylePreviewImagesUrl(a),{type:"POST",data:JSON.stringify({styleOptions:e.styleOptions,language:n||""}),contentType:"application/json; charset=utf-8",success:function(a){t.requestsInProgress--,o.PageCompartmentManager.getInstance().isCompartmentAvailable(r.pageId)?a.images?r.ajaxSuccess(a,e,i,n):0===e.previousAttempts?r.ajaxRetry(e,i,n):r.ajaxError(e,i,n):StoryLog.StructuredTraceTag(596476316,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Received message from StylePreviewManager after page compartment was destroyed",{pageId:r.pageId})},error:function(){t.requestsInProgress--,o.PageCompartmentManager.getInstance().isCompartmentAvailable(r.pageId)?0===e.previousAttempts?r.ajaxRetry(e,i,n):r.ajaxError(e,i,n):StoryLog.StructuredTraceTag(596476317,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Received error from StylePreviewManager after page compartment was destroyed",{pageId:r.pageId})}})},t.prototype.ajaxSuccess=function(t,i,n,o){for(var r=0;r<i.styleOptions.length;++r){var a=e.Utilities.format("{0} {1}",i.styleOptions[r].toString(),o);i.images[a]=t.images[r]}TDB.applyUpdate(function(){i.notifier.notify()},TDB.Justification.SynchronousBrowserEvent),this.onRequestComplete(n,o)},t.prototype.ajaxRetry=function(e,t,i){StoryLog.StructuredTraceTag(596476318,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.warning,"Failed to retrieve style preview images. Retrying.",{styleOptionsCount:null==e||null==e.styleOptions?"null":e.styleOptions.length.toString()}),++e.previousAttempts,this.ajax(e,t,i)},t.prototype.ajaxError=function(e,i,n){StoryLog.StructuredTraceTag(596476319,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.warning,"Failed to retrieve style preview images",{styleOptionsCount:null==e||null==e.styleOptions?"null":e.styleOptions.length.toString()}),t.requestFailed=!0,this.onRequestComplete(i,n)},t.prototype.onRequestComplete=function(e,t){--this.pending[e];for(var i=0;i<this.priorityLevels;++i)for(;this.queue[i].length>0;){if(!this.mayRequest(i))return;var n=this.queue[i].shift();this.requestImageData(n,i,t)}},t.requestsInProgress=0,t.requestFailed=!1,t}();t.StylePreviewManager=a}(t.Styles||(t.Styles={}))}(e.Server||(e.Server={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){function i(i,n){if(void 0===n&&(n=!0),null==p){if(p=TDB.watchableTag(596476308,t,[]),!e.Common.Environment.getInstance().isClientOnline(i))return p.getWatchedValue(i);TDB.applyUpdate(function(){y.setValue(!0)},TDB.Justification.InitialConversion);var a=StoryPageSettings.LookupId;g=2,$.ajax(d.UrlHelper.getInstance().knownWorldsUrl(a),{type:"GET",cache:!1,async:n}).then(o,r)}return p.getWatchedValue(i).slice(0)}function n(e,t){return void 0===t&&(t=!0),i(e,t).filter(function(e){return e.userSelectable&&e.isEnabled})}function o(e,t,i){TDB.applyUpdate(function(){p.setValue(e),y.setValue(!1),h.setValue(!1)},TDB.Justification.SynchronousBrowserEvent)}function r(e,t,i){if(g>0){g--,StoryLog.TraceTag(596476309,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.info,"Attempt to retrieve list of worlds failed. Retrying. textStatus="+t+" errorThrown="+i);var n=StoryPageSettings.LookupId;platform.setTimeout(function(){$.ajax(d.UrlHelper.getInstance().knownWorldsUrl(n),{type:"GET",cache:!1,async:!0}).then(o,r)},1e3)}else"timeout"===t||e&&(0===e.status||401===e.status)?StoryLog.StructuredTraceTag(596476310,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.warning,"List of worlds was unable to be retrieved from the server because of network connection problems or timeout.",{textStatus:t,errorThrown:i,statusCode:e?e.status.toString():null}):StoryLog.StructuredTraceTag(596476311,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.error,"List of worlds was unable to be retrieved from the server.",{textStatus:t,errorThrown:i,statusCode:e?e.status.toString():null}),TDB.applyUpdate(function(){y.setValue(!1),m.setValue(!0)})}function a(e,t){var n=i(t,!1);if(null==n||null==e)return null;for(var o=0,r=n;o<r.length;o++){var a=r[o];if(a.id==e)return a}return null}function s(e){return y.getWatchedValue(e)}function l(e){return m.getWatchedValue(e)}function u(e){return h.getWatchedValue(e)}var d=e.Common,c=function(){function e(e){this.id=e}return e}();t.World=c;var p,g,h=TDB.watchableTag(596476305,void 0,!0),y=TDB.watchableTag(596476306,void 0,!1),m=TDB.watchableTag(596476307,void 0,!1);t.GetWorlds=i,t.GetSelectableWorlds=n,t.GetWorld=a,t.getWaitingForWorldsResponse=s,t.getErrorGettingWorlds=l,t.getWorldOptionsNeeded=u}(e.WorldList||(e.WorldList={}))}(StoryApp||(StoryApp={}));var MathUtils;!function(e){var t=function(){function e(){}return e.prototype.calculate=function(t,i){var n=+t.getResponseHeader(e.headerXServerTimeElapsed),o=this.getContentLength(t),r=o/(i-n)*8;return!isNaN(r)&&isFinite(r)||(r=0),{availableBandwidthKbps:r,contentLengthBytes:o,serverTimeMs:n}},e.prototype.getContentLength=function(t){var i=+t.getResponseHeader(e.headerXPayloadSize);return(0===i||isNaN(i))&&(i=+t.getResponseHeader(e.headerContentLength)),i},e.headerContentLength="Content-Length",e.headerXServerTimeElapsed="X-Server-Time-Elapsed",e.headerXPayloadSize="X-Payload-Size",e}();e.BandwidthCalculator=t}(MathUtils||(MathUtils={}));var MathUtils;!function(e){function t(e,t){var r=n(e);i(r.originalBox?r.originalBox:r.box,r.children);var s=new a.ContainerPartition(r,o(r.box,r.children,t)),l=0;return{box:s.box,fetch:function(e){var t=[];return s.fetch(++l,e,t),t}}}function i(e,t){t.forEach(function(t){t.box.move(e.position());var n=t.box;t.originalBox&&(t.originalBox.move(e.position()),n=t.originalBox),i(n,t.children)})}function n(e){return e.children.forEach(n),e.queryid=0,e}function o(t,i,n){var s=i.length;if(s<=n&&(h=i.every(function(e){return 0===e.children.length})))return new a.BruteForcePartition(t,i);var l=[t.split(0),t.split(1)],u=l[0].map(function(t){return i.filter(function(i){return e.aabbsIntersect(t,i.box)})}),d=l[1].map(function(t){return i.filter(function(i){return e.aabbsIntersect(t,i.box)})}),c=u.reduce(function(e,t){return e+t.length},0);c<s&&r("horizontal",c,s);var p=d.reduce(function(e,t){return e+t.length},0);p<s&&r("verticalCount",p,s);var g=Math.round(1.25*s);if(c>=g&&p>=g){var h=i.every(function(e){return 0===e.children.length});return h?new a.BruteForcePartition(t,i):new a.BruteForceNodePartition(t,i.map(function(e){var t=e.children.length?o(e.box,e.children,n):null;return new a.ContainerPartition(e,t)}))}var y=c<=p?u:d,m=c<=p?0:1,f=o(l[m][0],y[0],n),v=o(l[m][1],y[1],n);return new a.BinarySpacePartition(t,f,v,m)}function r(e,t,i){var n=s.Environment.getInstance().getWindowSize();StoryLog.StructuredTraceTag(596476368,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"invalid split: didn't encompass all children",{splitDirection:e,actualCount:t.toString(),expectedCount:i.toString(),width:n.w.toString(),height:n.h.toString(),clientDevice:CommonSettings.ClientDevice,worldId:StoryApp.View.ViewElements.ViewModel.getWorldId(),styleId:StoryApp.View.ViewElements.ViewModel.getLayoutStyleId()})}var a,s=StoryApp.Common;!function(t){var i=function(){function e(e,t,i,n){this.box=e,this.left=t,this.right=i,this.axis=n}return e.prototype.fetch=function(e,t,i){var n=this.box,o=this.axis;n.overlaps(t,o)&&(n.overlaps(this.left.box,o)&&this.left.fetch(e,t,i),n.overlaps(this.right.box,o)&&this.right.fetch(e,t,i))},e}();t.BinarySpacePartition=i;var n=function(){function t(e,t){this.item=e,this.children=t,this.box=e.box}return t.prototype.fetch=function(t,i,n){t!==this.item.queryid&&(this.item.queryid=t,e.aabbsIntersect(this.box,i)&&(n.push(this.item),this.children&&this.children.fetch(t,i,n)))},t}();t.ContainerPartition=n;var o=function(){function t(e,t){this.box=e,this.elements=t}return t.prototype.fetch=function(t,i,n){for(var o=this.elements,r=o.length,a=0;a<r;++a){var s=o[a];s.queryid!==t&&e.aabbsIntersect(i,s.box)&&(s.queryid=t,n.push(s))}},t}();t.BruteForcePartition=o;var r=function(){function e(e,t){this.box=e,this.elements=t}return e.prototype.fetch=function(e,t,i){for(var n=this.elements.length,o=0;o<n;++o)this.elements[o].fetch(e,t,i)},e}();t.BruteForceNodePartition=r}(a||(a={})),e.makeBiTree=t}(MathUtils||(MathUtils={}));var MathUtils;!function(e){function t(t,i){return new p(e.Vec.clone(t),e.Vec.clone(i))}function i(t,i){var n=e.Vec3.distsquare(t.center,i.center),o=t.radius+i.radius;return n<=o*o}function n(e,t){var i=e.min.length;if(i<=1)throw StoryApp.RethrowLogger.createError("one dimensional or less bounding box not supported, what does that even mean");for(var n=1,o=e.min,r=e.max,a=t.min,s=t.max,l=0;l<i;++l)n*=d(o[l],r[l],a[l],s[l]);return n}function o(e,t){var i=e.min,n=e.max,o=t.min,r=t.max;return d(i[0],n[0],o[0],r[0])*d(i[1],n[1],o[1],r[1])}function r(e,t){var i=e.min.length;if(i<=1)throw StoryApp.RethrowLogger.createError("one dimensional or less bounding box not supported, what does that even mean");for(var n=e.min,o=e.max,r=t.min,a=t.max,s=0;s<i;++s)if(u(n[s],o[s],r[s],a[s]))return!1;return!0}function a(e,t){return new p([Math.min(e.min[0],t.min[0]),Math.min(e.min[1],t.min[1])],[Math.max(e.max[0],t.max[0]),Math.max(e.max[1],t.max[1])])}function s(e,t){for(var i=e.getAllAxis().concat(t.getAllAxis()),n=0;n<i.length;++n){var o=i[n],r=e.project(o),a=t.project(o);if(!r.intersects(a))return!1}return!0}function l(e,t,i,n){return!(t<i||n<e)}function u(e,t,i,n){return t<i||n<e}function d(e,t,i,n){return Math.max(0,Math.min(t,n)-Math.max(e,i))}var c=function(){function e(e,t){if(this.center=e,this.radius=t,3!=e.length)throw StoryApp.RethrowLogger.createError("center should be a vec3")}return e}();e.BoundingSphere=c,e.aabb=t;var p=function(){function t(e,t){this.min=e,this.max=t}return t.prototype.space=function(){for(var e=1,t=this.min.length,i=0;i<t;++i)e*=this.max[i]-this.min[i];return e},t.prototype.position=function(){return this.min},t.prototype.width=function(){return this.max[0]-this.min[0]},t.prototype.height=function(){return this.max[1]-this.min[1]},t.prototype.move=function(e){if(this.min.length<e.length||this.max.length<e.length)throw StoryApp.RethrowLogger.createError("invalid dimension");for(var t=0;t<e.length;++t)this.min[t]+=e[t],this.max[t]+=e[t]},t.prototype.split=function(i){var n=e.Vec.clone(this.min),o=e.Vec.clone(this.max);o[i]=.5*(n[i]+o[i]);var r=e.Vec.clone(this.min),a=e.Vec.clone(this.max);return r[i]=o[i],[new t(n,o),new t(r,a)]},t.prototype.project=function(e){if(e>=this.min.length)throw StoryApp.RethrowLogger.createError("tried projecting bounding box on a dimension that isn't defined on it");var t=new h;return t.add(this.min[e]),t.add(this.max[e]),t},t.prototype.overlaps=function(e,t){return l(this.min[t],this.max[t],e.min[t],e.max[t])},t.prototype.scaled=function(i,n){if(2!==this.min.length||2!==this.max.length)throw StoryApp.RethrowLogger.createError("unsupported vector dimensions");var o=e.Vec2.add(this.min,this.max);e.Vec2.div(o,2,o);var r=e.Vec2.sub(this.min,o);e.Vec2.mulvec([i,n],r,r);var a=e.Vec2.add(o,r),s=e.Vec2.sub(this.max,o);return e.Vec2.mulvec([i,n],s,s),new t(a,e.Vec2.add(o,s))},t.prototype.clone=function(){return new t(e.Vec.clone(this.min),e.Vec.clone(this.max))},t}();e.AxisAlignedBoundingBox=p;var g=function(){function t(e,t,i){this.points=e,this.axis=t,this.segmentindices=i;for(n=0;n<e.length;++n)if(3!=e[n].length)throw StoryApp.RethrowLogger.createError("class only supports vector3's for now");for(var n=0;n<t.length;++n)if(3!=t[n].length)throw StoryApp.RethrowLogger.createError("class only supports vector3's for now");this.boundingSphere=this.toBoundingSphere()}return t.prototype.getAllAxis=function(){return this.axis},t.prototype.getSegments=function(){for(var e=[],t=0;t<this.segmentindices.length;++t){var i=this.segmentindices[t];e.push({start:this.points[i[0]],end:this.points[i[1]]})}return e},t.prototype.intersects=function(e){return!!i(this.boundingSphere,e.boundingSphere)&&s(this,e)},t.prototype.project=function(t){if(3!=t.length)throw StoryApp.RethrowLogger.createError("class only supports vector3's for now");for(var i=new h,n=this.getSegments(),o=0;o<n.length;++o){var r=n[o],a=e.Vec3.dot(r.start,t),s=e.Vec3.dot(r.end,t);i.add(a),i.add(s)}return i},t.prototype.toBoundingSphere=function(){for(var t=e.Vec3.zeros(),i=0;i<this.points.length;++i)e.Vec3.add(this.points[i],t,t);t=e.Vec3.div(t,this.points.length);for(var n=e.Vec3.distsquare(this.points[0],t),i=1;i<this.points.length;++i){var o=e.Vec3.distsquare(this.points[i],t);o>n&&(n=o)}var r=Math.sqrt(n);return new c(t,r)},t}();e.ConvexBoundingVolume=g,e.spheresIntersect=i,e.aabbIntersection=n,e.aabbIntersection2d=o,e.aabbsIntersect=r,e.aabbUnion=a,e.SATIntersects=s;var h=function(){function e(){this._min=Number.POSITIVE_INFINITY,this._max=Number.NEGATIVE_INFINITY}return e.prototype.max=function(){return this._max},e.prototype.min=function(){return this._min},e.prototype.intersects=function(e){return l(this._min,this._max,e._min,e._max)},e.prototype.intersection=function(e){return d(this._min,this._max,e._min,e._max)},e.prototype.add=function(e){e<this._min&&(this._min=e),e>this._max&&(this._max=e)},e}();e.ProjectionRange=h,e.rangesIntersect=l,e.rangesDisjoint=u,e.rangeIntersection=d}(MathUtils||(MathUtils={}));var MathUtils;!function(e){function t(e){return new Float32Array(e)}function i(e){return new Float32Array(e)}function n(e){return e.slice()}function o(e){for(var t=new Array(e),i=0;i<e;++i)t[i]=0;return t}function r(){s.clone=t,s.ofN=i}function a(){s.clone=n,s.ofN=o}var s,l=Math.sqrt;s=e.Vec||(e.Vec={});!function(e){function t(e,t,i){return s.clone([e||0,t||0,i||0])}function i(){return s.clone([0,0,0])}function n(t,i,n){return n||(n=e.zeros()),n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],n}function o(t,i,n){return n||(n=e.zeros()),n[0]=t[0]+i[0],n[1]=t[1]+i[1],n[2]=t[2]+i[2],n}function r(t,i,n){return n||(n=e.zeros()),n[0]=t*i[0],n[1]=t*i[1],n[2]=t*i[2],n}function a(t,i,n){return n||(n=e.zeros()),n[0]=t[0]/i,n[1]=t[1]/i,n[2]=t[2]/i,n}function u(t,i,n){n||(n=e.zeros());var o=t[1]*i[2]-t[2]*i[1],r=t[2]*i[0]-t[0]*i[2],a=t[0]*i[1]-t[1]*i[0];return n[0]=o,n[1]=r,n[2]=a,n}function d(t,i){i||(i=e.zeros());var n=e.len(t);return e.div(t,n,i)}function c(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function p(t){return e.dot(t,t)}function g(t){return l(e.lensquare(t))}function h(t,i){return e.len(e.sub(t,i))}function y(t,i){return e.lensquare(e.sub(t,i))}e.create=t,e.zeros=i,e.sub=n,e.add=o,e.mul=r,e.div=a,e.cross=u,e.normalized=d,e.dot=c,e.lensquare=p,e.len=g,e.dist=h,e.distsquare=y}(e.Vec3||(e.Vec3={}));!function(e){function t(e,t){return s.clone([e||0,t||0])}function i(){return s.clone([0,0])}function n(t,i,n){return n||(n=e.zeros()),n[0]=t[0]-i[0],n[1]=t[1]-i[1],n}function o(t,i,n){return n||(n=e.zeros()),n[0]=t[0]+i[0],n[1]=t[1]+i[1],n}function r(t,i,n){return n||(n=e.zeros()),n[0]=t*i[0],n[1]=t*i[1],n}function a(t,i,n){return n||(n=e.zeros()),n[0]=t[0]*i[0],n[1]=t[1]*i[1],n}function u(t,i,n){return n||(n=e.zeros()),n[0]=t[0]/i,n[1]=t[1]/i,n}function d(t,i){i||(i=e.zeros());var n=e.len(t);return e.div(t,n,i)}function c(e,t){return e[0]*t[0]+e[1]*t[1]}function p(t){return e.dot(t,t)}function g(t){return l(e.lensquare(t))}function h(t,i){return e.len(e.sub(t,i))}function y(t,i){return e.lensquare(e.sub(t,i))}e.create=t,e.zeros=i,e.sub=n,e.add=o,e.mul=r,e.mulvec=a,e.div=u,e.normalized=d,e.dot=c,e.lensquare=p,e.len=g,e.dist=h,e.distsquare=y}(e.Vec2||(e.Vec2={})),e.useFloat32Arrays=r,e.useNativeArrays=a,"undefined"!=typeof Float32Array?r():a()}(MathUtils||(MathUtils={}));var MathUtils;!function(e){function t(e,t,i){return e<t?t:e>i?i:e}function i(e){return e>=0}e.clamp=t,e.sign=i}(MathUtils||(MathUtils={}));var StoryApp;!function(e){!function(t){function i(){h||(h=new t.OsfProxy),g&&g.getOsfProxy()==h||(g=new m(h))}function n(){!0!==t.osfScriptLoaded.getValue()&&e.Preload.resourceFactory.loadResource(16).then(function(e){0===e.state&&!0!==t.osfScriptLoaded.getValue()&&TDB.applyUpdate(function(){t.osfScriptLoaded.setValue(!0)})})}function o(e){h=e}function r(e){y=e}function a(){return h}function s(e){if(!0===t.osfScriptLoaded.getValue())return i(),g.insertControl(e)}function l(e){!0===t.osfScriptLoaded.getValue()&&(i(),g.unregisterControl(e))}function u(e){!0===t.osfScriptLoaded.getValue()&&(i(),g.raiseBindingDataChangedEvent(e))}function d(e){!0===t.osfScriptLoaded.getValue()&&(i(),g.raiseSettingsChangedEvent(e))}function c(e){!0===t.osfScriptLoaded.getValue()&&(i(),g.raiseActiveViewChangedEvent(e))}var p=e.Common;t.osfScriptLoaded=TDB.watchableTag(596476420,null,!1);var g=null,h=null,y=null;t.loadOsfRuntimeJs=n,t.setOsfProxy=o,t.setSaveSettingsCallback=r,t.getOsfProxy=a,t.insertControl=s,t.unregisterControl=l,t.raiseBindingDataChangedEvent=u,t.raiseSettingsChangedEvent=d,t.raiseActiveViewChangedEvent=c;var m=function(){function i(e){this._osfProxy=e,this._controlsById={};var i="";switch(CommonSettings.ClientDevice){case"Desktop":i=this._osfProxy.LookupFormFactor(t.FormFactors.Desktop);break;case"Tablet":i=this._osfProxy.LookupFormFactor(t.FormFactors.Tablet);break;case"Mobile":i=this._osfProxy.LookupFormFactor(t.FormFactors.Phone);break;case"Default":default:i=this._osfProxy.LookupFormFactor(t.FormFactors.Default)}var n=p.UrlHelper.getInstance().agaveHostResourcesUrl(),o={allowExternalMarketplace:!1,appName:this._osfProxy.LookupAppName(t.AppNames.Sway),appUILocale:CommonSettings.UserLocaleString,appVersion:"16",clientMode:StoryPageSettings.Mode==StoryViewMode.Edit?this._osfProxy.LookupClientMode(t.ClientModes.ReadWrite):this._osfProxy.LookupClientMode(t.ClientModes.ReadOnly),dataLocale:"en-US",docUrl:window.location.href,enableMyApps:!1,enableMyOrg:!1,formFactor:i,hostControl:this,lcid:"1033",localizedImagesUrl:n,localizedResourcesUrl:n,localizedScriptsUrl:CommonSettings.ContentBaseUrl,localizedStylesUrl:n,omexForceAnonymous:!0,osfOmexBaseUrl:null,pageBaseUrl:null,spBaseUrl:null,notifyHost:function(){}};this._contextActivationManager=this._osfProxy.ConstructContextActivationManager(o)}return i.prototype.getOsfProxy=function(){return this._osfProxy},i.prototype.insertControl=function(i){var n=i.getManifestId(),o=i.getManifest();if(!o)throw e.RethrowLogger.createError("Unable to map agave id "+n+" to a manifest string.");o=e.Utilities.format(o,CommonSettings.ExtensionsBaseUrl);try{var r=this._osfProxy.ConstructManifest(o,this._contextActivationManager.getAppUILocale()),a=r.getMarketplaceVersion();this._osfProxy.OsfManifestManagerHasManifest(n,a)||this._osfProxy.OsfManifestManagerCacheManifest(n,a,r);for(var s=p.GuidGenerator.generateGuid();this._controlsById[s];)s=p.GuidGenerator.generateGuid();var l={div:i.getDiv(),id:s,marketplaceID:n,marketplaceVersion:a,osfControlType:this._osfProxy.LookupOsfControlType(t.OsfControlTypes.DocumentLevel),reason:this._osfProxy.LookupInitializationReason(t.InitializationReasons.Inserted),settings:this.formatAgaveSettings(i.getAgaveSettingsData()),store:"en-US",storeType:this._osfProxy.LookupStoreType(t.StoreTypes.Exchange)},u=this._contextActivationManager.insertOsfControl(l),d={id:s,swayBinding:i,osfControl:u,osfEventHandlersByDispid:{}};return this._controlsById[s]=d,s}catch(e){var c=e;return this.isKnownError(c)?StoryLog.StructuredTraceTag(596476421,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"AgaveManager.insertControl: Known error while inserting Agave",{name:c.name,message:c.message}):StoryLog.StructuredTraceTag(596476422,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"AgaveManager.insertControl: Unknown error while inserting Agave",{name:c.name,message:c.message}),i.setAgaveFailed(!0),null}},i.prototype.unregisterControl=function(e){this._controlsById[e]&&(this._contextActivationManager.deActivateOsfControl(e),delete this._controlsById[e])},i.prototype.raiseBindingDataChangedEvent=function(e){var i=this._osfProxy.LookupDDAEventDispId(t.DDAEventDispIds.dispidBindingDataChangedEvent),n=this._controlsById[e];if(n){var o=n.osfEventHandlersByDispid[i];if(o){var r={controlId:e,ddaBinding:{BindingType:"text",Name:"Data"},dispId:i};o.handler(r)}}},i.prototype.raiseSettingsChangedEvent=function(e){},i.prototype.raiseActiveViewChangedEvent=function(e){},i.prototype.invokeDdaMethod=function(e,i){var n=e.DdaMethod.DispatchId,o=this.getDefaultErrorPayload();n==this._osfProxy.LookupDDAMethodDispId(t.DDAMethodDispIds.dispidAddBindingFromNamedItemMethod)?o=this.handleAddBindingFromNamedItemMethod(e):n==this._osfProxy.LookupDDAMethodDispId(t.DDAMethodDispIds.dispidGetActiveViewMethod)?o=this.handleGetActiveViewMethod(e):n==this._osfProxy.LookupDDAMethodDispId(t.DDAMethodDispIds.dispidGetBindingDataMethod)?o=this.handleGetBindingDataMethod(e):n==this._osfProxy.LookupDDAMethodDispId(t.DDAMethodDispIds.dispidGetDocumentThemeMethod)||n==this._osfProxy.LookupDDAMethodDispId(t.DDAMethodDispIds.dispidGetOfficeThemeMethod)||(n==this._osfProxy.LookupDDAMethodDispId(t.DDAMethodDispIds.dispidLoadSettingsMethod)?o=this.handleLoadSettingsMethod(e):n==this._osfProxy.LookupDDAMethodDispId(t.DDAMethodDispIds.dispidSaveSettingsMethod)&&(o=this.handleSaveSettingsMethod(e))),i(o)},i.prototype.registerDdaEventAsync=function(e,t,i,n,o){var r={Error:this._osfProxy.LookupInvokeResultCode("errorHandlingRequest"),Version:1},a=this._controlsById[t];a&&(a.osfEventHandlersByDispid[e]={dispid:e,targetId:i,handler:n},r.Error=0),o(r)},i.prototype.unregisterDdaEventAsync=function(e,t,i,n,o){var r={Error:this._osfProxy.LookupInvokeResultCode("errorHandlingRequest"),Version:1},a=this._controlsById[t];a&&(a.osfEventHandlersByDispid[e]&&delete a.osfEventHandlersByDispid[e],r.Error=0),o(r)},i.prototype.handleAddBindingFromNamedItemMethod=function(e){var t={};return t.Error=0,t.Bindings=[{BindingType:"text",Name:"Data"}],t.Version=1,t},i.prototype.handleGetBindingDataMethod=function(e){var t={},i=this._controlsById[e.DdaMethod.ControlId];if(i){var n=i.swayBinding.getData(),o=JSON.parse(n);o||(o=[]);for(var r=0;r<o.length;r++){var a=o[r];"imageId"===a.type&&(a.type="image",a.source=this.GetUrlForImageElement(a.sourceId,a.sourceUrl,i.swayBinding,a.width,a.height,a.filterEffects),delete a.sourceId,delete a.sourceUrl,delete a.height,delete a.width)}t.Error=0,t.Version=1,t.Data=JSON.stringify(o)}return t},i.prototype.handleGetActiveViewMethod=function(e){var i={},n=this._controlsById[e.DdaMethod.ControlId];if(n){var o=null;o=n.swayBinding.getAgaveIsEdit()?this._osfProxy.LookupActiveViewState(t.ActiveViewStates.Edit):this._osfProxy.LookupActiveViewState(t.ActiveViewStates.Read),i.Error=0,i.Version=1,i.data=o}else i=this.getDefaultErrorPayload();return i},i.prototype.handleLoadSettingsMethod=function(e){},i.prototype.handleSaveSettingsMethod=function(e){var t=this.getDefaultErrorPayload(),i=this._controlsById[e.DdaMethod.ControlId],n=e.DdaSettingsMethod,o=JSON.stringify(n.Properties);return y&&(y(i.swayBinding.getContentId(),o),t.Error=0,t.Version=1),t},i.prototype.formatAgaveSettings=function(e){var t=null,i={};if(e){t=JSON.parse(e);for(var n=0;n<t.length;n++){var o=t[n];2==o.length&&o[0]&&o[0].constructor===String?i[o[0]]=o[1]:StoryLog.TraceTag(596476423,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.error,"Malformed Agave settings data: element "+n+" was not a key-value pair in "+e)}}return i},i.prototype.GetUrlForImageElement=function(e,t,i,n,o,r){if(!e)return t;n||(n=0),o||(o=0);var a=Math.max(i.getDesiredImageWidth(),i.getDesiredImageHeight())*(window.devicePixelRatio||1);if(a<=1)return StoryLog.StructuredTraceTag(596476424,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"AgaveManager.GetUrlForImageElement: Request for image of size smaller than one pixel. Something in rendering or size calculation is wrong.",{width:i.getDesiredImageWidth().toString(),height:i.getDesiredImageHeight().toString()}),"";var s=Math.max(n,o);0===s&&(s=3840);for(var l=s;Math.round(l/2)>=a;)l/=2;return p.UrlHelper.getInstance().imageUrl(StoryPageSettings.LookupId,Math.round(l),e,!0,r,StoryPageSettings.UseCDN,StoryPageSettings.Mode===StoryViewMode.Embedded)},i.prototype.getDefaultErrorPayload=function(){return{Error:this._osfProxy.LookupInvokeResultCode("errorHandlingRequest")}},i.prototype.isKnownError=function(e){return"TypeError"===e.name&&"Unable to get property 'documentElement' of undefined or null reference"===e.message},i}();(function(){function e(){}})(),function(){function e(){}}()}(e.Agaves||(e.Agaves={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){e[e.Edit=0]="Edit",e[e.Read=1]="Read"}(e.ActiveViewStates||(e.ActiveViewStates={}));!function(e){e[e.Sway=0]="Sway"}(e.AppNames||(e.AppNames={}));!function(e){e[e.Default=0]="Default",e[e.Desktop=1]="Desktop",e[e.Tablet=2]="Tablet",e[e.Phone=3]="Phone"}(e.FormFactors||(e.FormFactors={}));!function(e){e[e.ReadOnly=0]="ReadOnly",e[e.ReadWrite=1]="ReadWrite"}(e.ClientModes||(e.ClientModes={}));!function(e){e[e.DocumentLevel=0]="DocumentLevel",e[e.ContainerLevel=1]="ContainerLevel"}(e.OsfControlTypes||(e.OsfControlTypes={}));!function(e){e[e.Exchange=0]="Exchange"}(e.StoreTypes||(e.StoreTypes={}));!function(e){e[e.dispidActiveViewChangedEvent=0]="dispidActiveViewChangedEvent",e[e.dispidBindingDataChangedEvent=1]="dispidBindingDataChangedEvent",e[e.dispidDocumentThemeChangedEvent=2]="dispidDocumentThemeChangedEvent",e[e.dispidOfficeThemeChangedEvent=3]="dispidOfficeThemeChangedEvent",e[e.dispidSettingsChangedEvent=4]="dispidSettingsChangedEvent"}(e.DDAEventDispIds||(e.DDAEventDispIds={}));!function(e){e[e.dispidAddBindingFromNamedItemMethod=0]="dispidAddBindingFromNamedItemMethod",e[e.dispidGetActiveViewMethod=1]="dispidGetActiveViewMethod",e[e.dispidGetBindingDataMethod=2]="dispidGetBindingDataMethod",e[e.dispidGetDocumentThemeMethod=3]="dispidGetDocumentThemeMethod",e[e.dispidGetOfficeThemeMethod=4]="dispidGetOfficeThemeMethod",e[e.dispidLoadSettingsMethod=5]="dispidLoadSettingsMethod",e[e.dispidSaveSettingsMethod=6]="dispidSaveSettingsMethod"}(e.DDAMethodDispIds||(e.DDAMethodDispIds={}));!function(e){e[e.Inserted=0]="Inserted"}(e.InitializationReasons||(e.InitializationReasons={}))}(e.Agaves||(e.Agaves={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=function(){function i(){}return i.prototype.LookupActiveViewState=function(i){switch(i){case t.ActiveViewStates.Edit:return Microsoft.Office.WebExtension.ActiveView.Edit;case t.ActiveViewStates.Read:return Microsoft.Office.WebExtension.ActiveView.Read}throw e.RethrowLogger.createError("OsfProxy.LookupFormFactor: Invalid ActiveViewState "+i)},i.prototype.LookupFormFactor=function(i){switch(i){case t.FormFactors.Desktop:return OSF.FormFactor.Desktop;case t.FormFactors.Phone:return OSF.FormFactor.Phone;case t.FormFactors.Tablet:return OSF.FormFactor.Tablet;case t.FormFactors.Default:return OSF.FormFactor.Default}throw e.RethrowLogger.createError("OsfProxy.LookupFormFactor: Invalid FormFactor "+i)},i.prototype.LookupAppName=function(i){switch(i){case t.AppNames.Sway:return OSF.AppName.Sway}throw e.RethrowLogger.createError("OsfProxy.LookupAppName: Invalid AppName "+i)},i.prototype.LookupClientMode=function(i){switch(i){case t.ClientModes.ReadOnly:return OSF.ClientMode.ReadOnly;case t.ClientModes.ReadWrite:return OSF.ClientMode.ReadWrite}throw e.RethrowLogger.createError("OsfProxy.LookupClientMode: Invalid ClientMode "+i)},i.prototype.LookupOsfControlType=function(i){switch(i){case t.OsfControlTypes.ContainerLevel:return OSF.OsfControlType.ContainerLevel;case t.OsfControlTypes.DocumentLevel:return OSF.OsfControlType.DocumentLevel}throw e.RethrowLogger.createError("OsfProxy.LookupOsfControlType: Invalid ControlType "+i)},i.prototype.LookupStoreType=function(i){switch(i){case t.StoreTypes.Exchange:return OSF.StoreType.Exchange}throw e.RethrowLogger.createError("OsfProxy.LookupStoreType: Invalid StoreType "+i)},i.prototype.LookupDDAEventDispId=function(i){switch(i){case t.DDAEventDispIds.dispidActiveViewChangedEvent:return OSF.DDA.EventDispId.dispidActiveViewChangedEvent;case t.DDAEventDispIds.dispidBindingDataChangedEvent:return OSF.DDA.EventDispId.dispidBindingDataChangedEvent;case t.DDAEventDispIds.dispidDocumentThemeChangedEvent:return OSF.DDA.EventDispId.dispidDocumentThemeChangedEvent;case t.DDAEventDispIds.dispidOfficeThemeChangedEvent:return OSF.DDA.EventDispId.dispidOfficeThemeChangedEvent;case t.DDAEventDispIds.dispidSettingsChangedEvent:return OSF.DDA.EventDispId.dispidSettingsChangedEvent}throw e.RethrowLogger.createError("OsfProxy.LookupDDAEventDispId: Invalid DDAEventDispId "+i)},i.prototype.LookupDDAMethodDispId=function(i){switch(i){case t.DDAMethodDispIds.dispidAddBindingFromNamedItemMethod:return OSF.DDA.MethodDispId.dispidAddBindingFromNamedItemMethod;case t.DDAMethodDispIds.dispidGetActiveViewMethod:return OSF.DDA.MethodDispId.dispidGetActiveViewMethod;case t.DDAMethodDispIds.dispidGetBindingDataMethod:return OSF.DDA.MethodDispId.dispidGetBindingDataMethod;case t.DDAMethodDispIds.dispidGetDocumentThemeMethod:return OSF.DDA.MethodDispId.dispidGetDocumentThemeMethod;case t.DDAMethodDispIds.dispidGetOfficeThemeMethod:return OSF.DDA.MethodDispId.dispidGetOfficeThemeMethod;case t.DDAMethodDispIds.dispidLoadSettingsMethod:return OSF.DDA.MethodDispId.dispidLoadSettingsMethod;case t.DDAMethodDispIds.dispidSaveSettingsMethod:return OSF.DDA.MethodDispId.dispidSaveSettingsMethod}throw e.RethrowLogger.createError("OsfProxy.LookupDDAMethodDispId: Invalid DDAMethodDispId "+i)},i.prototype.LookupInvokeResultCode=function(e){return Microsoft.Office.Common.InvokeResultCode[e]},i.prototype.LookupInitializationReason=function(i){switch(i){case t.InitializationReasons.Inserted:return Microsoft.Office.WebExtension.InitializationReason.Inserted}throw e.RethrowLogger.createError("OsfProxy.LookupInitializationReason: Invalid InitializationReason "+i)},i.prototype.ConstructContextActivationManager=function(e){return new OSF.ContextActivationManager(e)},i.prototype.ConstructManifest=function(e,t){return new OSF.Manifest.Manifest(e,t)},i.prototype.OsfManifestManagerHasManifest=function(e,t){return OSF.OsfManifestManager.hasManifest(e,t)},i.prototype.OsfManifestManagerCacheManifest=function(e,t,i){OSF.OsfManifestManager.cacheManifest(e,t,i)},i}();t.OsfProxy=i}(e.Agaves||(e.Agaves={}))}(StoryApp||(StoryApp={}));var Platform;!function(e){var t=function(){function e(){}return e.prototype.numToSafeStr=function(e){return e.toFixed(5)},e.prototype.setTransform=function(e,t){e.style.transform=t},e}(),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setTransform=function(e,t){e.style["-webkit-transform"]=t},t}(t),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.numToSafeStr=function(e){return Math.abs(e)<1e-5?"0":e.toString()},t}(t),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.current=function(){return StoryApp.Utilities.browser.isWebkit?new i:StoryApp.Utilities.browser.isIE?new n:StoryApp.Utilities.browser.isFirefox?new o:new t}()}(Platform||(Platform={}));var StoryApp;!function(e){!function(t){var i=function(i){function n(n,o,r){var a=i.call(this,n)||this;a.view=n,a.contract=o;var s=t.currentAnimationEngine().get(r);if(!s)throw e.RethrowLogger.createError("Can't create animation view hierarchy without an animation engine");return a.engine=s,a.init(),a.watchers=new t.WatcherContainer(a,n,a.contract.staticTransforms?[a.updateStaticTransforms,a.updateTransforms,a.updateProperties]:[a.updateTransforms,a.updateProperties]),a}return __extends(n,i),n.prototype.update=function(){this.watchers.resolve()},n.prototype.init=function(){var e=this.contract.descriptor();this.target=e.target;var i=this.contract.containingViewport();this.engine.register(e.target,e.virtual&&!Modernizr.preserve3d,e.animatable,i?i.id:null),this.contract.staticTransforms&&(this.staticStack=new t.Properties.TransformStack([]))},n.prototype.updateStaticTransforms=function(e){this.staticStack&&this.staticStack.setstack(this.contract.staticTransforms(e))},n.prototype.updateTransforms=function(e){e.watch(this.engine.resetAnimatables);var t=this.contract.transforms(e);this.engine.assignTransform(this.target,t.parent,this.staticStack,t.transforms)},n.prototype.updateProperties=function(e){e.watch(this.engine.resetAnimatables),this.engine.requestUpdate(this.target,this.contract.properties(e))},n.prototype.dispose=function(){i.prototype.dispose.call(this),this.engine.unregister(this.target),this.contract.dispose&&this.contract.dispose()},n}(Disposable);t.AnimationBinding=i}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t=function(t){function i(e,i,n){var o=t.call(this,i)||this;return o.parent=e,o.pageId=n,o.dirty=!0,o}return __extends(i,t),i.prototype.receiveNotification=function(e){this.dirty||(this.dirty=!0,this.parent&&this.parent.receiveNotification(e))},i.prototype.isDirty=function(){return this.dirty},i.prototype.update=function(t){if(this.dirty){this.onUpdate(t);for(var i=this.children(),n=0;n<i.length;++n)i[n].update(t);t===e.UpdatePhase.UPDATE&&(this.dirty=!1)}},i}(TDB.Subscriber);e.BaseView=t}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t=function(t){function i(i,n,o,r){var a=t.call(this,i,n,r)||this;return a.parent=i,a.contract=o,a.childContainer=new e.ChildCollection(a,TDB.watcherTag(596476383,a,a,a.contractChildren),a.makeView),a.binding=new e.AnimationBinding(a,o,r),a}return __extends(i,t),i.prototype.children=function(){return this.childContainer.children()},i.prototype.onUpdate=function(t){t===e.UpdatePhase.UPDATE&&this.binding.update(),this.childContainer.update(t)},i.prototype.contractChildren=function(e){return this.contract.children(e)},i.prototype.makeView=function(t){return this.contract instanceof e.ViewportBackgroundView?new i(this,null,new e.ViewportView(t),this.pageId):new i(this,null,e.makeAnimationContract(t,this.pageId),this.pageId)},i}(e.BaseView);e.View=t}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=function(i){function n(n,o){var r=i.call(this,n)||this;r.view=n;var a=t.currentAnimationEngine().get(o);if(!a)throw e.RethrowLogger.createError("Can't create animation view hierarchy without an animation engine");return r.engine=a,r.watchers=new t.WatcherContainer(r,n,[r.updateCamera]),r}return __extends(n,i),n.prototype.update=function(){this.watchers.resolve()},n.prototype.updateCamera=function(e){e.watch(this.engine.resetAnimatables),this.engine.resetCamera()},n}(Disposable);t.CameraBinding=i}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t=function(t){function i(e,i,n){var o=t.call(this,e)||this;return o.context=e,o.data=i,o.factory=n,o.olddata=[],o.views=[],e._subscribeTo(i),o}return __extends(i,t),i.prototype.children=function(){return this.views},i.prototype.update=function(t){var i=this,n=this.data.getValue();if(t===e.UpdatePhase.DELETE)for(var o=this.olddata.map(function(e){return i.findKey(n,e)}),r=o.length-1;r>=0;--r)void 0===o[r]&&(this.olddata.splice(r,1),this.views.splice(r,1)[0].dispose());else{for(var a=[],s=n.map(function(e){return i.findKey(i.olddata,e)}),l=0;l<s.length;++l){var u=s[l];void 0===u?a.push(this.factory.call(this.context,n[l])):a.push(this.views[u])}this.views=a,this.olddata=n}},i.prototype.dispose=function(){t.prototype.dispose.call(this),this.views.forEach(function(e){return e.dispose()}),this.context._unsubscribeFrom(this.data)},i.prototype.findKey=function(e,t){for(var i=0;i<e.length;++i)if(t===e[i])return i},i}(Disposable);e.ChildCollection=t}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){function i(e,t){var i=e.getChild(t);return i instanceof o.ProjectionLayoutElement||i instanceof o.ContainerLayoutElement&&i.getScrollability(t)!==o.LayoutScrollability.None}function n(e,t,i){var r=e.getKeyFrameType(i);if(null===r||""===r){if(e instanceof o.ContainerLayoutElement)return null!=e.children.getCollection(i).firstOrDefault(function(e){return n(e,t,i)});if(e instanceof o.ViewportLayoutElement)return n(e.getChild(i),t,i)}return r===t}var o=e.Model.RM;t.isMainViewport=i,t.searchForTopLevelKeyframe=n}(e.View||(e.View={}))}(StoryApp||(StoryApp={})),function(e){!function(t){function i(i,o,r,a){var s=o.getFlags(i).has(n.TransformFlags.Parallax),l=a&&s&&t.LowFi.getWatchedValue(i);if(o instanceof n.TranslateTransform2D){var u=o,d=u.getTranslateX(i),c=u.getTranslateY(i);return l||!r&&0===d&&0===c?new t.Properties.Identity:a?new t.Properties.Scaled([.01,.01],new t.Properties.Translate3D(d,c,0)):new t.Properties.Scaled([.01,.01],new t.Properties.Translate2D(u.getTranslateX(i),u.getTranslateY(i)))}if(o instanceof n.RotationTransform2D){var p=o.getValue(i);return l||!r&&p%360==0?new t.Properties.Identity:new t.Properties.Rotate2D(p)}if(o instanceof n.ScaleTransform2D){var g=o,d=g.getScaleX(i),c=g.getScaleY(i);return r||1!==d||1!==c?new t.Properties.Scale2D(d,c):new t.Properties.Identity}if(o instanceof n.TranslateTransform3D){var h=o,d=h.getTranslateX(i),c=h.getTranslateY(i),y=h.getTranslateZ(i);return r||0!==d||0!==c||0!==y?new t.Properties.Scaled([.01,.01,.01],new t.Properties.Translate3D(d,c,y)):new t.Properties.Identity}if(o instanceof n.RotationTransform3D){var m=o,d=m.getProjectX(i),c=m.getProjectY(i),y=m.getProjectZ(i),f=m.getValue(i);return r||f%360!=0?new t.Properties.AxisAngle(d,c,y,f):new t.Properties.Identity}if(o instanceof n.ScaleTransform3D){var v=o,d=v.getScaleX(i),c=v.getScaleY(i),y=v.getScaleZ(i);return r||1!==d||1!==c||1!==y?new t.Properties.Scale3D(d,c,y):new t.Properties.Identity}throw e.RethrowLogger.createError("transform not supported "+o)}var n=e.Model.RM;t.convertModelTransform=i}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){function i(e,i){return e instanceof a.ContainerSceneGraphElement?new t.SceneGraphView(e):e instanceof a.TextureSceneGraphElement?new t.SceneGraphView(e):e instanceof a.ViewportLayoutElement?new t.ViewportView(e):e instanceof a.ProjectionLayoutElement?new t.ProjectionView(e,i):new s(e)}function n(e,t){return e instanceof a.ContainerSceneGraphElement?e.children.getCollection(t):e instanceof a.TextureSceneGraphElement?[e.getTexture(t)]:e instanceof a.ProjectionLayoutElement?[e.getScene3D(t)]:e instanceof a.ContainerLayoutElement||e instanceof a.MediaViewportLayoutElement||e instanceof a.PanelLayoutElement?e.children.getCollection(t):[]}function o(e,t){return e.getAnimated(t)||e.getFlags(t).has(a.LayoutFlags.Cullable)?[e]:n(e,t).mapmany(function(e){return o(e,t)})}function r(e,t){return n(e,t).mapmany(function(e){return o(e,t)})}var a=e.Model.RM,s=function(){function i(e){this.model=e}return i.prototype.descriptor=function(){var e=[a.AnimatableProperty.Opacity,a.AnimatableProperty.Hidden,a.AnimatableProperty.ZOrder,a.AnimatableProperty.Width,a.AnimatableProperty.Height];return{target:this.model.id,virtual:!1,animatable:e}},i.prototype.staticTransforms=function(e){var i=this.model.getDownscaleFactor(e);return 1===i?[]:[new t.Properties.Scale3D(i,i,1)]},i.prototype.transforms=function(i){var n=this.model.getFlags(i),o=this.model.getAnimated(i),r=o&&(n.has(a.LayoutFlags.Parallaxed)||n.has(a.LayoutFlags.HardwareAccelerate));return!e.Utilities.browser.isMobile&&e.Utilities.browser.isSafari&&(r=!1),{parent:this.getTransformParent(i),transforms:this.model.transforms.getCollection(i).map(function(e){return t.convertModelTransform(i,e,o,r)})}},i.prototype.properties=function(e){return[{property:a.AnimatableProperty.Opacity,value:this.model.getOpacity(e)},{property:a.AnimatableProperty.Hidden,value:this.model.getHidden(e)?1:0},{property:a.AnimatableProperty.ZOrder,value:this.model.getZOrder(e)},{property:a.AnimatableProperty.Width,value:this.model.position.getWidth(e)},{property:a.AnimatableProperty.Height,value:this.model.position.getHeight(e)}]},i.prototype.children=function(e){return r(this.model,e)},i.prototype.containingViewport=function(){for(var e=this.model;e;e=e.getParentContainer()){var t=e.getParentViewport();if(t)return t}return null},i.prototype.getTransformParent=function(e){return this.isCamerasChild(e)?t.CameraID:void 0},i.prototype.isCamerasChild=function(i){var n=this.model.getParentViewport(i);return!!n&&(!!e.View.isMainViewport(n,i)&&(n.getBackgroundType(i)===a.ViewportBackgroundType.None&&!t.LowFi.getWatchedValue(i)))},i}();t.LayoutView=s,t.makeAnimationContract=i,t.modelChildren=n,t.animatedChildren=r}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM,n=function(){function e(e,i){this.model=e,this.pageId=i,this.engine=t.currentAnimationEngine().get(i),this.engine.promoteTo3DWorld()}return e.prototype.descriptor=function(){return{target:this.model.id,virtual:!1,animatable:[i.AnimatableProperty.Opacity,i.AnimatableProperty.Hidden,i.AnimatableProperty.ZOrder]}},e.prototype.staticTransforms=function(e){var i=this.model.getDownscaleFactor(e);return 1===i?[]:[new t.Properties.Scale3D(i,i,1)]},e.prototype.transforms=function(e){var n=this.model.getFlags(e).has(i.LayoutFlags.Parallaxed),o=this.model.getAnimated(e);return{parent:void 0,transforms:this.model.transforms.getCollection(e).map(function(i){return t.convertModelTransform(e,i,o,n)})}},e.prototype.properties=function(e){return[{property:i.AnimatableProperty.Opacity,value:this.model.getOpacity(e)},{property:i.AnimatableProperty.Hidden,value:this.model.getHidden(e)?1:0},{property:i.AnimatableProperty.ZOrder,value:this.model.getZOrder(e)}]},e.prototype.children=function(e){return[this.model.getScene3D(e)]},e.prototype.containingViewport=function(){return null},e.prototype.dispose=function(){this.engine.demoteTo2DWorld()},e}();t.ProjectionView=n}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM,n=function(e){function n(i,n,o,r){var a=e.call(this,null,i,r)||this;return a.viewportfactory=n,a.binding=new t.CameraBinding(a,r),a.viewports=new t.ChildCollection(a,TDB.watcherTag(596476382,a,a,a.getModelViewports),a.makeViewportWatchable),a.update(t.UpdatePhase.UPDATE),a.updater=o,o.register(a),a}return __extends(n,e),n.prototype.children=function(){return this.viewports.children().map(function(e){return e.getValue()})},n.prototype.onUpdate=function(e){e===t.UpdatePhase.UPDATE&&this.binding.update(),this.viewports.update(e);for(var i=this.viewports.children(),n=0;n<i.length;++n)i[n].resolve()},n.prototype.dispose=function(){e.prototype.dispose.call(this),this.updater.unregister(this)},n.prototype.getModelViewports=function(e){return this.viewportfactory(e)},n.prototype.makeViewportWatchable=function(e){return TDB.watcherOwner(this,null,this.makeViewport.bind(this,e))},n.prototype.makeViewport=function(e,n){return e.getBackgroundType(n)===i.ViewportBackgroundType.None?new t.View(this,null,new t.ViewportView(e),this.pageId):new t.View(this,null,new t.ViewportBackgroundView(e),this.pageId)},n}(t.BaseView);t.RootView=n}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM,n=function(){function e(e){this.model=e}return e.prototype.descriptor=function(){return{target:this.model.id,virtual:this.model instanceof i.ContainerSceneGraphElement,animatable:[i.AnimatableProperty.Opacity,i.AnimatableProperty.Hidden]}},e.prototype.transforms=function(e){return{parent:this.getTransformParent(e),transforms:this.model.transforms.getCollection(e).map(function(i){return t.convertModelTransform(e,i,!0,!1)})}},e.prototype.properties=function(e){return[{property:i.AnimatableProperty.Opacity,value:this.model.getOpacity(e)},{property:i.AnimatableProperty.Hidden,value:this.model.getHidden(e)?1:0}]},e.prototype.children=function(e){return this.model instanceof i.TextureSceneGraphElement?[this.model.getTexture(e)]:this.model.children.getCollection(e)},e.prototype.containingViewport=function(){return null},e.prototype.getTransformParent=function(e){return this.model.getParentProjection(e)?t.CameraID:this.model.getParentContainer(e).id},e}();t.SceneGraphView=n}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM,n=function(){function n(e){this.model=e}return n.prototype.descriptor=function(){return{target:"viewportbackground_"+this.model.id,virtual:!1,animatable:[]}},n.prototype.staticTransforms=function(n){if(this.model.getContentStretch(n)!==i.ContentStretch.Stretch)return[];var o=this.model.position,r=o.getWidth(n),a=o.getHeight(n),s=e.View.ViewElements.ViewModel;if(!s)return[];var l=s.previewVE._root.getWatchedValue(n);if(!l)return[];var u=l.getWidth(n),d=l.getHeight(n);return[new t.Properties.Scale2D(u/r,d/a)]},n.prototype.transforms=function(e){return{parent:this.transformParent(e),transforms:[]}},n.prototype.properties=function(e){return[]},n.prototype.children=function(e){return[this.model]},n.prototype.containingViewport=function(){return null},n.prototype.transformParent=function(i){if(e.View.isMainViewport(this.model,i)&&!t.LowFi.getWatchedValue(i))return t.CameraID},n}();t.ViewportBackgroundView=n}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM,n=function(){function n(e){this.model=e}return n.prototype.descriptor=function(){return{target:this.model.id,virtual:!1,animatable:[i.AnimatableProperty.Hidden]}},n.prototype.staticTransforms=function(n){if(this.model.getContentStretch(n)!==i.ContentStretch.Stretch)return[];var o=this.model.position,r=o.getWidth(n),a=o.getHeight(n),s=e.View.ViewElements.ViewModel;if(!s)return[];var l=s.previewVE.getWidth(n),u=s.previewVE.getHeight(n);return[new t.Properties.Scale2D(l/r,u/a)]},n.prototype.transforms=function(e){var i=this.model.getAnimated(e);return{parent:void 0,transforms:this.model.transforms.getCollection(e).map(function(n){return t.convertModelTransform(e,n,i,!0)})}},n.prototype.properties=function(e){return[{property:i.AnimatableProperty.Hidden,value:this.model.getHidden(e)?1:0}]},n.prototype.children=function(e){return[this.model.getChild(e)]},n.prototype.containingViewport=function(){return null},n}();t.ViewportView=n}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t=function(){function e(e,t,i){this.context=e,this.watchers=[];for(var n=this.watchers=i.map(function(i){return TDB.watcherTag(596476381,e,t,i)}),o=0;o<n.length;++o){var r=n[o];t._subscribeTo(r),r.resolve()}}return e.prototype.resolve=function(){this.watchers.forEach(function(e){return e.resolve()})},e}();e.WatcherContainer=t}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t;!function(e){e[e.DELETE=0]="DELETE",e[e.UPDATE=1]="UPDATE"}(t=e.UpdatePhase||(e.UpdatePhase={}));var i=function(e){function i(t){var i=e.call(this,t)||this;return i.views=[],TDB.registerFirstUpdater(i),i}return __extends(i,e),i.prototype.onUpdate=function(){for(var e=this.views,i=0;i<e.length;++i)e[i].update(t.DELETE);for(i=0;i<e.length;++i)e[i].update(t.UPDATE)},i.prototype.needsUpdate=function(){for(var e=this.views,t=0,i=e.length;t<i;++t)if(e[t].isDirty())return!0;return!1},i.prototype.register=function(e){this.views.push(e)},i.prototype.unregister=function(e){if(this.views){var t=this.views.indexOf(e);-1!==t&&this.views.splice(t,1)}},i.prototype.dispose=function(){TDB.unregisterUpdater(this),this.views=void 0,e.prototype.dispose.call(this)},i}(Disposable);e.AnimationUpdater=i}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM,n=function(){function e(e){this.collection=e||[]}return e.prototype.getCollection=function(){return this.collection},e}();t.Collection=n;var o=function(){function t(t,i){var o=this;if(this.animations=new n,!t)throw e.RethrowLogger.createError("null sequence passed to constructor");this.id=t.id,this.name=t.getName(),this.animationsCompleteFunction=t.getAnimationsCompleteFunction(),this.clientRequirements=t.getClientRequirements(),t.animations.getCollection().filter(function(e){return i(e)}).forEach(function(e){return o.animations.collection.push(o.getAnimation(e))})}return t.prototype.getName=function(){return this.name},t.prototype.getAnimationsCompleteFunction=function(){return this.animationsCompleteFunction},t.prototype.getClientRequirements=function(){return this.clientRequirements},t.prototype.getAnimation=function(e){return e.getBehaviors().has(i.AnimationBehaviors.ExternalAction)?new a(e):new r(e)},t.prototype.replaceAnimation=function(e,t){this.animations.collection[t]=e},t}();t.AnimationSequence=o;var r=function(){function e(e){void 0===e&&(e=null),this.transitionIds=new i.PropertyCollection,this.behaviors=new Flags(i.AnimationBehaviors,0),e&&(this.id=e.id,this.name=e.getAnimationName(),this.transitionIds=e.getTransitionIds(),this.behaviors=e.getBehaviors()),this.parameters=new n(e?e.parameters.getCollection():null),this.animationFunctions=new n(e?e.animationFunctions.getCollection():null),e&&e.renderModel.getSchemaVersion()>=96&&(this.storyboardExecutionContexts=new n(e.getStoryboardExecutionContexts().getCollection()))}return e.prototype.getTransitionIds=function(){return this.transitionIds},e.prototype.getBehaviors=function(){return this.behaviors},e}();t.Animation=r;var a=function(e){function t(t){var n=e.call(this,t)||this;return n.actionType=i.ExternalAction.None,n.targetId="",t&&(n.targetId=t.getActionTargetId(),n.actionType=t.getActionType()),n}return __extends(t,e),t.prototype.getActionType=function(){return this.actionType},t.prototype.getTargetId=function(){return this.targetId},t}(r);t.AnimationExternalAction=a;var s=function(){function e(e,t,i,n){this.elementId=e,this.animatablePropertyName=t,this.transformIndex=i,this.transformComponent=n}return e.prototype.getElementId=function(){return this.elementId},e.prototype.getAnimatablePropertyName=function(){return this.animatablePropertyName},e.prototype.getTransformIndex=function(){return this.transformIndex},e.prototype.getTransformComponent=function(){return this.transformComponent},e}();t.AnimationTarget=s;var l=function(){function e(e,t,n,o,r,a,s){this.id=e,this.functionId=t,this.expression=n,this.maintainStateOnStart=o,this.target=r,this.name=s,this.flags=a||new Flags(i.AnimationFlags,0)}return e.prototype.getName=function(){return this.name},e.prototype.getFunctionId=function(){return this.functionId},e.prototype.getExpression=function(){return this.expression},e.prototype.getMaintainStateOnStart=function(){return this.maintainStateOnStart},e.prototype.getTarget=function(){return this.target},e.prototype.getFlags=function(e){return this.flags},e}();t.AnimationFunction=l;var u=function(){function e(e,t){this.name=e,this.value=t}return e.prototype.getParameterName=function(){return this.name},e.prototype.getParameterValue=function(){return this.value},e}();t.AnimationParameter=u}(e.AnimationInterfaces||(e.AnimationInterfaces={}))}(StoryApp||(StoryApp={}));var AnimationKernel;!function(e){var t=function(){function e(){}return e}();e.InterrogationValue=t;var i=function(){function e(e){this.kernel=e,this.tickNum=0,this.variables={},this.constants={},this.paramExpressions={},this.constants.e=2.718281828459045,this.constants.pi=3.141592653589793,this.constants.pihalf=1.5707963267948966,this.constants.pidiv4=.7853981633974483,this.constants.twopi=6.283185307179586,this.constants.deg2rad=.017453292519943295,this.constants.rad2deg=57.29577951308232,this.constants.root2=1.4142135623730951,this.constants.root3=1.7320508075688772,this.constants.log2=.6931471805599453,this.constants.log10=2.302585092994046}return e.prototype.newTick=function(){++this.tickNum,this.random=1e7*Math.random()},e.prototype.getTick=function(){return this.tickNum},e.prototype.interrogation=function(e){var t=this.interrogations[e];return void 0!==t?t.value:0},e.prototype.exprRef=function(e){return this.kernel.tickExpression(e),this.kernel.getOutput(e)},e.prototype.varRef=function(e){var t=this.variables[e];return void 0!==t?t:0},e.prototype.negate=function(e){return-e},e.prototype.frac=function(e){return e<0?e-Math.ceil(e):e-Math.floor(e)},e.prototype.log10=function(e){return Math.log(e)/2.302585092994046},e.prototype.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)},e.prototype.wavesaw=function(e){return e-Math.floor(e)},e.prototype.wavetri=function(e){return 1-Math.abs(1-Math.abs(e%2))},e.prototype.wavesquare=function(e){return Math.floor(Math.abs(e%2))},e.prototype.wavesin=function(e){return.5*(1+Math.sin(3.141592653589793*(e-.5)))},e.prototype.not=function(e){return 0!==e?0:1},e.prototype.rand=function(e){return Math.round(this.random%e)},e.prototype.and=function(e,t){return 0!==e&&0!==t?1:0},e.prototype.or=function(e,t){return 0!==e||0!==t?1:0},e.prototype.xor=function(e,t){return 0!==e!=(0!==t)?1:0},e.prototype.equ=function(e,t){return e===t?1:0},e.prototype.neq=function(e,t){return e!==t?1:0},e.prototype.gtr=function(e,t){return e>t?1:0},e.prototype.geq=function(e,t){return e>=t?1:0},e.prototype.lss=function(e,t){return e<t?1:0},e.prototype.leq=function(e,t){return e<=t?1:0},e.prototype.clamp=function(e,t,i){return e<t?t:e>i?i:e},e.prototype.if_=function(e,t,i){return 0!==e?t:i},e.prototype.inrange=function(e,t,i){return t<=e&&e<=i?1:0},e.prototype.lerp=function(e,t,i){return t+e*(i-t)},e.prototype.normalize=function(e,t,i){return(e-t)/(i-t)},e.prototype.ease=function(e,t,i){return this.gain(i,this.bias(t,e))},e.prototype.bias=function(e,t){if(t<=0)return 0;if(t>=1)return 1;return Math.pow(t,Math.log(e)/-.6931471805599453)},e.prototype.gain=function(e,t){return t<0?0:t>1?1:t<.5?e>=1?0:this.bias(1-e,2*t)/2:e>=1?1:1-this.bias(1-e,2-2*t)/2},e.prototype.sum=function(){for(var e=0,t=0;t<arguments.length;++t)e+=arguments[t];return e},e.prototype.product=function(){for(var e=1,t=0;t<arguments.length;++t)e*=arguments[t];return e},e.prototype.minall=function(){if(arguments.length<1)return 0;for(var e=arguments[0],t=1;t<arguments.length;++t)arguments[t]<e&&(e=arguments[t]);return e},e.prototype.maxall=function(){if(arguments.length<1)return 0;for(var e=arguments[0],t=1;t<arguments.length;++t)arguments[t]>e&&(e=arguments[t]);return e},e.prototype.andall=function(){if(arguments.length<1)return 0;for(var e=0;e<arguments.length;++e)if(0===arguments[e])return 0;return 1},e.prototype.orall=function(){if(arguments.length<1)return 0;for(var e=0;e<arguments.length;++e)if(0!==arguments[e])return 1;return 0},e.prototype.select=function(e){return arguments.length<=1?0:e<0?arguments[1]:e>=arguments.length-1?arguments[arguments.length-1]:arguments[Math.floor(e)+1]},e.prototype.latch=function(e,t,i,n){var o=n+0,r=n+1;if(1===i[0]&&(i[o]=0),0===i[o])0!==t&&(i[o]=1,i[r]=e);else{if(0!==t)return i[r];i[o]=0}return e},e.prototype.edgecount=function(e,t,i,n){var o=n+0,r=n+1,a=1===i[0];return 0!==t||a?i[o]=0:e>0&&i[r]<=0?++i[o]:e<0&&i[r]>=0&&--i[o],i[r]=e,i[o]},e.prototype.derivative=function(e,t,i,n){var o=n+0,r=n+1,a=n+2,s=0;return s=1===i[0]?0:t===i[r]&&e==i[o]?i[a]:(e-i[o])/(t-i[r]),i[o]=e,i[r]=t,i[a]=s,s},e.prototype.trand=function(e,t,i,n,o){var r=o,a=o+1,s=!1;return n[r]||(n[r]=i,s=!0),i-n[r]>t&&(n[r]=i,s=!0),s&&(n[a]=Math.round(this.random%e)+1),n[a]},e.prototype.accum=function(e,t,i,n){var o=n+0,r=0!==t;return 1===i[0]||r?i[o]=0:i[o]+=e,i[o]},e.prototype.clampedaccum=function(e,t,i,n,o,r){var a=r+0,s=1===o[0],l=0!==n;return o[a]=s||l?0:this.clamp(o[a]+e,t,i),o[a]},e.prototype.integral=function(e,t,i,n,o){var r=o+0,a=o+1,s=o+2,l=n[s],u=0!==i;return 1===n[0]||u?l=0:l+=.5*(n[r]+e)*(t-n[a]),n[r]=e,n[a]=t,n[s]=l,l},e.prototype.querystate=function(e,t,i,n){return this.kernel.query().state(e,t)},e}(),n=function(){function e(e,t,i,n,o){this.localStoreStack=[],this.localStoreStack.push(MathUtils.Vec.ofN(i.localStoreSize)),this.localStore=this.localStoreStack[0],this.exprFunction=i.fn,this.id=e,this.numParams=i.numParams,this.exprSource=t,this.script=i.script,this.report=n,this.run=o,this.exprReferences=i.exprReferences,this.reset()}return e.prototype.pushLocalStore=function(e,t){for(;this.localStoreStack.length<=e;)this.localStoreStack[e]=MathUtils.Vec.ofN(t);this.localStore=this.localStoreStack[e],this.localStore[0]=this.localStoreStack[0][0]},e.prototype.resetLocalStore=function(){this.localStore=this.localStoreStack[0]},e.prototype.reset=function(){this.value=0,this.tickNum=-1,this.localStoreStack.forEach(function(e){e[0]=0}),this.localStore=this.localStoreStack[0]},e.prototype.addExpressionRef=function(e){this.exprReferences.push(e)},e.prototype.tick=function(e){if(!(!1===this.run||this.numParams>0)){++this.localStore[0];var t=e.getTick();if(this.tickNum!=t){this.tickNum=t;var i=this.exprFunction(e);this.value=i===i?i:0}}},e.prototype.sleep=function(){this.run=!1},e.prototype.wake=function(e){e&&this.reset(),this.run=!0},e}(),o=function(){function e(e,t,i){if(this.script=e,t.error)return this.fn=new Function("context","return 0"),this.localStoreSize=0,this.exprReferences=[],this.numParams=0,void(this.error=t.error);var n="context, level";null!=t.paramList&&(n="context, level, "+t.params),this.fn=i?new Function(n,"this.pushLocalStore(level, "+t.localStoreSize+");\nvar result = "+e+";\nthis.resetLocalStore();\nreturn result;"):new Function(n,"return "+e),this.localStoreSize=t.localStoreSize,this.exprReferences=t.exprReferences,this.numParams=t.numParams}return e}(),r=function(){function e(e,t){this.description=e,this.position=t}return e}();e.CompilationError=r;var a=function(){function e(e,t,i){if(this.reservedLocalStore=1,this.rxNonWhitespace=/\S+/,this.rxCommaSplit=/\s*,\s*/,this.rxParamName=/^[_a-zA-Z]\w*$/,this.expression=e,this.execContext=t,this.remainder=e,this.localStoreSize=this.reservedLocalStore,this.exprReferences=[],this.error=null,this.level=0,null==i)this.params=null,this.paramList=void 0,this.numParams=0;else{this.paramList=i.split(this.rxCommaSplit),this.numParams=this.paramList.length,this.params="";for(var n=0;n<this.numParams;++n)if(!this.rxParamName.test(this.paramList[n])){this.compilationError("Invalid Parameter Name: "+this.paramList[n]);break}this.error||(this.params=this.paramList.join(","))}}return e.prototype.nextToken=function(e,t){if(this.error)return null;var i=this.remainder.match(e);return null===i?null:(this.remainder=this.remainder.substring(i[0].length),i[t])},e.prototype.emptyRemainder=function(){return!this.rxNonWhitespace.test(this.remainder)},e.prototype.compilationError=function(e){return this.error=new r(e,this.expression.length-this.remainder.length),"0"},e.prototype.paramKnown=function(e){for(var t=0;t<this.paramList.length;++t)if(e===this.paramList[t])return!0;return!1},e}(),s=function(){function e(){this.rxNumber=/^\s*(-?(?:0(?:\.\d*)?|(?:[1-9]\d*\.?\d*)|(?:\.\d+))(?:[Ee][+-]?\d+)?)/,this.rxString=/^\s*((?:\"[^"]*\")|(?:\'[^']*\'))/,this.rxFnCall=/^\s*([a-zA-Z_]\w*)\s*\(/,this.rxVariableRef=/^\s*#([a-zA-Z_]\w*)/,this.rxInterrogationRef=/^\s*!([a-zA-Z_]\w*)/,this.rxExpressionRef=/^\s*\@([0-9a-zA-Z_-]+)/,this.rxParamRef=/^\s*\$([a-zA-Z_]\w*)/,this.rxOpenParen=/^\s*\(/,this.rxCloseParen=/^\s*\)/,this.rxComma=/^\s*,/,this.fnHandlers={add:this.fnHandlerBinaryOp,sub:this.fnHandlerBinaryOp,mul:this.fnHandlerBinaryOp,div:this.fnHandlerBinaryOp,mod:this.fnHandlerBinaryOp,abs:this.fnHandlerMathUnary,acos:this.fnHandlerMathUnary,asin:this.fnHandlerMathUnary,atan:this.fnHandlerMathUnary,ceil:this.fnHandlerMathUnary,cos:this.fnHandlerMathUnary,exp:this.fnHandlerMathUnary,floor:this.fnHandlerMathUnary,log:this.fnHandlerMathUnary,max:this.fnHandlerMathBinary,min:this.fnHandlerMathBinary,pow:this.fnHandlerMathBinary,round:this.fnHandlerMathUnary,sin:this.fnHandlerMathUnary,sqrt:this.fnHandlerMathUnary,tan:this.fnHandlerMathUnary,accum:this.fnHandlerAccum,clampedaccum:this.fnHandlerClampedAccum,querystate:this.fnHandlerBuiltinBinary,and:this.fnHandlerBuiltinBinary,andall:this.fnHandlerBuiltinNary,clamp:this.fnHandlerBuiltinTrinary,derivative:this.fnHandlerDerivative,ease:this.fnHandlerBuiltinTrinary,edgecount:this.fnHandlerEdgeCount,equ:this.fnHandlerBuiltinBinary,frac:this.fnHandlerBuiltinUnary,geq:this.fnHandlerBuiltinBinary,gtr:this.fnHandlerBuiltinBinary,inrange:this.fnHandlerBuiltinTrinary,integral:this.fnHandlerIntegral,latch:this.fnHandlerLatch,leq:this.fnHandlerBuiltinBinary,lerp:this.fnHandlerBuiltinTrinary,log10:this.fnHandlerBuiltinUnary,lss:this.fnHandlerBuiltinBinary,maxall:this.fnHandlerBuiltinNary,minall:this.fnHandlerBuiltinNary,negate:this.fnHandlerBuiltinUnary,neq:this.fnHandlerBuiltinBinary,normalize:this.fnHandlerBuiltinTrinary,not:this.fnHandlerBuiltinUnary,or:this.fnHandlerBuiltinBinary,orall:this.fnHandlerBuiltinNary,product:this.fnHandlerBuiltinNary,rand:this.fnHandlerBuiltinUnary,select:this.fnHandlerBuiltinNary,sum:this.fnHandlerBuiltinNary,trand:this.fnHanderTRand,trunc:this.fnHandlerBuiltinUnary,wavesaw:this.fnHandlerBuiltinUnary,wavesin:this.fnHandlerBuiltinUnary,wavesquare:this.fnHandlerBuiltinUnary,wavetri:this.fnHandlerBuiltinUnary,xor:this.fnHandlerBuiltinBinary},this.fnHandlers.if=this.fnHandlerBuiltinTrinary}return e.prototype.parse=function(e,t,i,n){var r=new a(e,i,n),s=this.parseExpression(r);return r.emptyRemainder()||(s=r.compilationError("Unexpected trailing characters in expression")),new o(s,r,t)},e.prototype.parseExpression=function(e){var t;return null!==(t=e.nextToken(this.rxFnCall,1))?this.parseFnCall(e,t):null!==(t=e.nextToken(this.rxNumber,1))?t:null!==(t=e.nextToken(this.rxString,1))?t:null!==(t=e.nextToken(this.rxVariableRef,1))?this.parseVariableRef(e,t):null!==(t=e.nextToken(this.rxInterrogationRef,1))?this.parseInterrogationRef(e,t):null!==(t=e.nextToken(this.rxExpressionRef,1))?this.parseExpressionRef(e,t):(t=e.nextToken(this.rxParamRef,1),null!==t?this.parseParamRef(e,t):e.compilationError("Unrecognized token in expression"))},e.prototype.parseVariableRef=function(e,t){var i=e.execContext.constants[t];return void 0!==i?Number(i).toString():"context.varRef('"+t+"')"},e.prototype.parseInterrogationRef=function(e,t){return'context.interrogation("'+t+'")'},e.prototype.parseExpressionRef=function(e,t){return e.exprReferences.push(t),'context.exprRef("'+t+'")'},e.prototype.parseParamRef=function(e,t){return e.numParams<=0?e.compilationError("Parameter reference used in unparameterized expression"):e.paramKnown(t)?t:e.compilationError("Unrecognized parameter name for this function")},e.prototype.parseFnCall=function(e,t){t=t.toLowerCase();var i;if(void 0!==this.fnHandlers[t])return i=this.parseParams(e),e.error?e.compilationError("Malformed parameter list"):this.fnHandlers[t](e,t,i);var n=e.execContext.paramExpressions[t];if(null!=n){if(i=this.parseParams(e),e.error)return e.compilationError("Malformed parameter list");var o="";return i.length>0&&(o=", "+i.join(", ")),n.numParams!==i.length?e.compilationError("Custom function "+t+" called with incorrect number of arguments"):"context.paramExpressions['"+t+"'].exprFunction.call(this, "+("context, "+ ++e.level+o+")")}return e.compilationError("Unrecognized function (not built in or custom)")},e.prototype.parseParams=function(e){var t,i=[];if(null===(t=e.nextToken(this.rxCloseParen,0))){do{i.push(this.parseExpression(e)),t=e.nextToken(this.rxComma,0)}while(null!==t);null===(t=e.nextToken(this.rxCloseParen,0))&&e.compilationError("Expected a closing parenthesis here")}return i},e.prototype.fnHandlerMathUnary=function(e,t,i){return 1!==i.length?e.compilationError("Expected a single argument for function "+t):"Math."+t+"("+i[0]+")"},e.prototype.fnHandlerMathBinary=function(e,t,i){return 2!==i.length?e.compilationError("Expected two arguments for function "+t):"Math."+t+"("+i.join(",")+")"},e.prototype.fnHandlerBuiltinUnary=function(e,t,i){return 1!==i.length?e.compilationError("Expected a single argument for function "+t):"context."+t+"("+i[0]+")"},e.prototype.fnHandlerBuiltinBinary=function(e,t,i){return 2!==i.length?e.compilationError("Expected two arguments for function "+t):"context."+t+"("+i.join(",")+")"},e.prototype.fnHandlerBuiltinTrinary=function(e,t,i){return 3!==i.length?e.compilationError("Expected three arguments for function "+t):("if"==t&&(t="if_"),"context."+t+"("+i.join(",")+")")},e.prototype.fnHandlerBuiltinNary=function(e,t,i){return"context."+t+"("+i.join(",")+")"},e.prototype.fnHandlerBinaryOp=function(e,t,i){if(2!==i.length)return e.compilationError("Expected two arguments for funcion "+t);var n;switch(t){case"add":n=" + ";break;case"sub":n=" - ";break;case"mul":n=" * ";break;case"div":n=" / ";break;case"mod":n=" % ";break;default:return e.compilationError("Internal error: Binary op handler called for unrecognized function "+t)}return"("+i[0]+n+i[1]+")"},e.prototype.fnHandlerAccum=function(e,t,i){if(1===i.length)i[1]="0";else if(2!==i.length)return e.compilationError("Expected one or two arguments for function "+t);var n=e.localStoreSize;return e.localStoreSize+=1,"context.accum("+i[0]+","+i[1]+",this.localStore,"+n+")"},e.prototype.fnHanderTRand=function(e,t,i){if(2===i.length)i[2]="0";else if(3!==i.length)return e.compilationError("Expected two arguments for function "+t);var n=e.localStoreSize;return e.localStoreSize+=2,"context.trand("+i[0]+","+i[1]+',context.interrogation("clock"), this.localStore,'+n+")"},e.prototype.fnHandlerClampedAccum=function(e,t,i){if(3===i.length)i[3]="0";else if(4!==i.length)return e.compilationError("Expected three or four arguments for function "+t);var n=e.localStoreSize;return e.localStoreSize+=1,"context.clampedaccum("+i[0]+","+i[1]+","+i[2]+","+i[3]+",this.localStore,"+n+")"},e.prototype.fnHandlerLatch=function(e,t,i){if(2!==i.length)return e.compilationError("Expected two arguments for function "+t);var n=e.localStoreSize;return e.localStoreSize+=2,"context.latch("+i[0]+","+i[1]+",this.localStore,"+n+")"},e.prototype.fnHandlerEdgeCount=function(e,t,i){var n;if(1===i.length)n="0";else{if(2!==i.length)return e.compilationError("Expected one or two arguments for function "+t);n=i[1]}var o=e.localStoreSize;return e.localStoreSize+=2,"context.edgecount("+i[0]+","+n+",this.localStore,"+o+")"},e.prototype.fnHandlerDerivative=function(e,t,i){var n;if(1===i.length)n='context.interrogation("clock")';else{if(2!==i.length)return e.compilationError("Expected one or two arguments for function "+t);n=i[1]}var o=e.localStoreSize;return e.localStoreSize+=3,"context.derivative("+i[0]+","+n+",this.localStore,"+o+")"},e.prototype.fnHandlerIntegral=function(e,t,i){if(3!==i.length)return e.compilationError("Expected three argumements for function "+t);var n=e.localStoreSize;return e.localStoreSize+=3,"context.integral("+i.join(",")+",this.localStore,"+n+")"},e}(),l=function(){function e(e){this.queryHandler=null,this.rxId=/^[_a-zA-Z]\w*$/,this.expressions={},this.paramExpressions={},this.outputValues={},this.refCounts={},this.compileErrors={},null!==e&&this.loadAnimations(e)}return e.prototype.setQueryHandler=function(e){this.queryHandler=e},e.prototype.query=function(){return this.queryHandler},e.prototype.setVariable=function(e,t){this.execContext.variables[e]=t},e.prototype.addExpression=function(e,t,i,o){if(void 0===this.expressions[e]){null==i&&(i=!0),null==o&&(o=!0);var r=this.compileExpression(t,!1);return this.expressions[e]=new n(e,t,r,i,o),this.updateRefCounts(e,r),r.error}},e.prototype.addParamExpression=function(e,t,i){if(this.rxId.test(e)&&(e=e.toLowerCase(),null==this.paramExpressions[e])){var o=this.compileExpression(i,!0,t);this.execContext.paramExpressions[e]=new n(e,i,o,!1,!1),this.updateRefCounts(e,o)}},e.prototype.reportExpression=function(e,t){var i=this.expressions[e];void 0!==i&&(i.report=t,!1===t&&delete this.outputValues[e])},e.prototype.suspendExpression=function(e){var t=this.expressions[e];void 0!==t&&(t.run=!1)},e.prototype.wakeExpression=function(e,t){var i=this.expressions[e];void 0!==i&&(t&&i.reset(),i.run=!0)},e.prototype.releaseExpression=function(e){var t=this.expressions[e];if(void 0!==t){var i=this.refCounts[e];if(void 0!==i)if(--i>0)this.refCounts[e]=i;else{for(var n=0;n<t.exprReferences.length;++n)this.releaseExpression(t.exprReferences[n]);delete this.refCounts[e],delete this.expressions[e],delete this.outputValues[e]}}},e.prototype.tick=function(e){this.execContext.interrogations=e,this.execContext.newTick();for(var t in this.expressions)this.tickExpression(t)},e.prototype.tickExpression=function(e){var t=this.expressions[e];void 0!==t&&(t.tick(this.execContext),t.report&&(this.outputValues[e]=t.value))},e.prototype.getOutput=function(e){var t=this.outputValues[e];return void 0!==t?t:0},e.prototype.getScript=function(e){var t=this.expressions[e];return void 0!==t?t.script:"<undefined>"},e.prototype.loadAnimations=function(e){this.execContext=new i(this);for(var t=e.variables,n=0;n<t.length;++n){var o=t[n];this.setVariable(o.id,o.value)}var r;r=null!=e.functions?e.functions:[];for(n=0;n<r.length;++n){var a=r[n];this.addParamExpression(a.id,a.params,a.exprString)}for(var s=e.expressions,n=0;n<s.length;++n){var l=s[n],u=!1!==l.report,d=!1!==l.run,c=this.addExpression(l.id,l.exprString,u,d);c&&(this.compileErrors[l.id]=c.description)}},e.prototype.updateRefCounts=function(e,t){for(var i=0;i<t.exprReferences.length;++i){var n=t.exprReferences[i];void 0===this.refCounts[n]?this.refCounts[n]=1:++this.refCounts[n]}var o=this.refCounts[e];this.refCounts[e]=void 0===o?1:o+1},e.prototype.compileExpression=function(e,t,i){return(new s).parse(e,t,this.execContext,i)},e}();e.Kernel=l}(AnimationKernel||(AnimationKernel={}));var StoryApp;!function(e){!function(e){var t=function(){function t(){}return t.toggleAnimationTracing=function(i){t.tracingEnabled=!t.tracingEnabled;var n=e.currentAnimationEngine().get(i);!t.tracingEnabled&&n&&n.getAnimatableTargets().forEach(function(e){return $(e.dom()).attr(t.tracingAttributeName,null)})},t.addFunctionalTrace=function(e,i){if(t.tracingEnabled){var n=$(e.dom()).attr(t.tracingAttributeName);n||(n="");var o=new Date,r=o.getMinutes()+":"+o.getSeconds()+":"+o.getMilliseconds();n+=t.traceDelimitter+"{"+r+" - "+i.getName()+"}",$(e.dom()).attr(t.tracingAttributeName,n)}},t.showTrace=function(e){$(e).attr(t.tracingAttributeName).split(t.traceDelimitter).forEach(function(e){return console.log(e)})},t.tracingEnabled=!1,t.tracingAttributeName="animations",t.traceDelimitter="ANIMATION:",t}();e.AnimationTracer=t}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i,n=e.Model.RM;!function(e){e[e.ACTIVE=0]="ACTIVE",e[e.CULLED=1]="CULLED",e[e.HIDDEN=2]="HIDDEN"}(i=t.TargetState||(t.TargetState={}));var o=function(){function o(e,n){this.id=e,this.isvirtual=n,this.notifier=new t.Properties.Notifier(this),this.prev=null,this.next=null,this.boundproperties={},this.dirtyproperties=[],this.disposableproperties=[],this.transforms=new t.Properties.TransformStack([]),this.transformbaseidx=0,this.newtarget=!0,this.children=new Containers.Intrinsic.Stack,this.state=i.ACTIVE,this.element=null,this.domlisteners=new TDB.DomListenerManager,this.domlistener=Obj.implement(this,{domAttached:this.onDomAttached,domDetached:this.onDomDetached}),this.isVirtual()||this.transforms.notifier.addListener(this)}return o.prototype.getElement=function(){return this.element},o.prototype.dom=function(){return this.element?this.element.domElement:null},o.prototype.active=function(){return this.state===i.ACTIVE},o.prototype.bound=function(e){this.element=e,e.addDomListener(this.domlistener),this.initializeAnimatedProperties(),this.state!==i.ACTIVE?e.cull():e.uncull();for(var t in this.boundproperties)this.boundproperties[t].property.notifier.signal();this.updatedom()},o.prototype.unbound=function(e){this.element.removeDomListener(this.domlistener),this.initializeAnimatedProperties(!0),this.element=null},o.prototype.cull=function(){this.deactivate(i.CULLED)},o.prototype.hide=function(){this.deactivate(i.HIDDEN)},o.prototype.deactivate=function(e){this.state&e||(this.state|=e,this.element&&this.element.cull())},o.prototype.uncull=function(){this.activate(i.CULLED)},o.prototype.show=function(){this.activate(i.HIDDEN)},o.prototype.initializeAnimatedProperties=function(e){if(void 0===e&&(e=!1),this.animatedProperties=null,this.element){var t=TDB.ViewElement.dataFor(this.element.domElement);if(t){var i=t.getAnimatedElement();i&&(e?i.clearAnimatedProperties():this.animatedProperties=i.getAnimatedProperties())}}},o.prototype.activate=function(e){this.state&e&&(this.state&=~e,this.state===i.ACTIVE&&this.element&&(this.dirtyproperties.length&&this.updatedom(),this.element.uncull()))},o.prototype.onDomAttached=function(e){this.domlisteners.notifyAttached(e)},o.prototype.onDomDetached=function(e){this.domlisteners.notifyDetached(e)},o.prototype.addDomListener=function(e){this.domlisteners.add(e)},o.prototype.removeDomListener=function(e){this.domlisteners.remove(e)},o.prototype.isVirtual=function(){return this.isvirtual},o.prototype.isNewTarget=function(){return this.newtarget},o.prototype.resetTransforms=function(){this.transforms.reset();for(var e in this.boundproperties)this.changed(this.boundproperties[e].property);this.updatedom()},o.prototype.assignTransforms=function(e,i){this.dirtyproperties.some(function(e){return e instanceof t.Properties.TransformStack})||(this.transforms.setstack(e.concat(i)),this.transformbaseidx=e.length,this.boundproperties[n.AnimatableProperty.Transform]=new t.Properties.TransformBinding(this.transforms,this.transformbaseidx),this.transforms.notifier.signal())},o.prototype.addProperty=function(i,n){if(this.boundproperties[i])throw e.RethrowLogger.createError("Target already has property of type: "+i);n.notifier.addListener(this),this.boundproperties[i]=new t.Properties.PropertyBinding(n),n.notifier.signal()},o.prototype.addDisposableProperty=function(e,t){this.addProperty(e,t),this.disposableproperties.push(t)},o.prototype.getProperty=function(t){var i=this.boundproperties[t];if(!i)throw e.RethrowLogger.createError("tried getting a property that doesn't exist on the animation target");return i.property},o.prototype.setProperty=function(t,i){var n=this.boundproperties[t.property];if(!n)throw e.RethrowLogger.createError("tried setting a property that doesn't exist on the animation target");n.set(t,i)},o.prototype.getModelProperty=function(e){return this.boundproperties[e]},o.prototype.transform=function(){return this.transforms},o.prototype.addChild=function(e){this.children.push(e)},o.prototype.hasChildren=function(){return!this.children.empty()},o.prototype.removeChild=function(e){Containers.Intrinsic.disconnect(e)},o.prototype.nonvirtuals=function(){if(!this.isVirtual())return[this];for(var e=[],t=this.children.itr();t.valid();t.advance()){var i=t.current().nonvirtuals();e.push.apply(e,i)}return e},o.prototype.dirty=function(){return this.dirtyproperties.length>0},o.prototype.cleardirty=function(){this.dirtyproperties.length=0},o.prototype.updatedom=function(e){if(void 0===e&&(e=!1),this.element){var t=this.element.domElement;this.newtarget&&(this.newtarget=!1);for(var i=0;i<this.dirtyproperties.length;++i){var n=this.dirtyproperties[i],o=n.cssproperty(),r=e?n.compactvalue():n.cssvalue();t.style[o]=r,this.animatedProperties&&(this.animatedProperties[o]=r)}this.cleardirty()}},o.prototype.compactdom=function(){for(var e=this.nonvirtuals(),t=0,i=e.length;t<i;++t)e[t].updatedom(!0)},o.prototype.dispose=function(){this.transforms.dispose(),this.domlisteners.dispose();for(var e=this.disposableproperties,t=0,i=e.length;t<i;++t)e[t].dispose()},o.prototype.changed=function(e){-1===this.dirtyproperties.indexOf(e)&&(this.dirtyproperties.push(e),this.notifier.signal())},o}();t.Target=o}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var CssAnimation;!function(e){function t(e){r=e}function i(){for(var e=document.styleSheets.length,i=0;i<e;++i)if("dynamic"===document.styleSheets[i].title)return document.styleSheets[i];var n=document.createElement("style");return n.title="dynamic",n.type="text/css",document.head.appendChild(n),t(!0),n.sheet}function n(e,t,i){var n=Modernizr.prefixed("animation"),o=e.style[n],r=(o=o.trim())?o.split(", "):[];r.forEach(function(e){if(ArrayExtensions.contains(e.split(" "),t))throw StoryApp.RethrowLogger.createError("css animation already present on this element")}),r.push(t+" "+i),StoryApp.Utilities.weblog("animation","applied animation: "+r.last()),e.style[n]=r.join(", ")}function o(e,t){var i=Modernizr.prefixed("animation"),n=e.style[i].split(", "),o=n.length;if(n=n.filter(function(e){return!ArrayExtensions.contains(e.split(" "),t)}),o-n.length!=1){var r="didn't remove the animation properly: "+t;return StoryApp.Utilities.weblog("animation",r),void StoryLog.TraceTag(596476387,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,r)}StoryApp.Utilities.weblog("animation","removed animation: "+t),e.style[i]=n.join(", ")}var r=!1;e.setDynamicStyleSheetRecreated=t;var a=function(){function e(e,t,i,n,o){this.storybinding=e,this.duration=t,this.delay=i,this.curve=n,this.tag=o,this.endtime=0,this.disposed=!1}return e.prototype.shouldBeDone=function(){return platform.now()>this.endtime},e.prototype.isStarted=function(){return this.storybinding.isStarted()},e.prototype.terminate=function(){this.done(this)},e.prototype.start=function(){var e=this;this.endtime=platform.now()+this.duration,this.storybinding.start(this.duration,this.delay,this.curve,"ms",function(){e.done(e)})},e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.storybinding.dispose(),this.storybinding=null)},e}();e.Task=a;var s=function(){function e(e){this.value=e}return e.prototype.iscurrent=function(){return this.value===e.current_value},e.current=function(){return new e(e.current_value)},e.current_value="{current}",e}();e.Constant=s;var l=function(){function e(e,t){this.property=e,this.values=t,this.css=[];for(var i=0;i<t.length;++i)this.css.push(e+": "+t[i].value+";")}return e}();e.Track=l,e.AnimationIdSeparator="___";var u=function(){function e(e,t){if(this.name=e,this.tracks=t,!t.every(function(e){return e.values.length===t[0].values.length}))throw StoryApp.RethrowLogger.createError("Different sized tracks not supported.");var n="@";StoryApp.Utilities.browser.isWebkit?n+="-webkit-keyframes ":n+="keyframes ",n+=this.name+" { ";for(var o=t[0].values.length,r=1/o,a=0;a<o-1;++a)!function(e){var i=Math.round(100*e*r),o=t.map(function(t){if(!t.values[e].iscurrent())return t.css[e];if(0!==e)throw StoryApp.RethrowLogger.createError("trying to use an elements current value in the middle of an animation");return""});if(0===o.length)return"continue";n+=i+"% { "+o.join(" ")+" } "}(a);var s=t.map(function(e){return e.css[o-1]});n+="100% { "+s.join(" ")+" }",n+="}",this.cssanimation=n,d.contains(this)?d.reuseAnimation(this):d.addAnimation(i(),this)}return e.prototype.destroy=function(){if(d.contains(this))d.releaseAnimation(i(),this);else if(!r)throw StoryApp.RethrowLogger.createError("Storyboard already destroyed")},e.prototype.finalstate=function(){var e=this.tracks[0].values.length;return this.tracks.map(function(t){return{property:t.property,value:t.values[e-1].value}})},e.prototype.getRuleIndex=function(e){for(var t=0;t<e.length;t++)if(e[t].name===this.name)return t;StoryLog.TraceTag(596476385,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Unable to locate animation with name: '"+this.name+"'")},e.prototype.getUnnamedAnimation=function(){return this.cssanimation.replace(this.name,"")},e}();e.Storyboard=u;var d=function(){function e(){}return e.contains=function(t){return!!e.animations[t.getUnnamedAnimation()]},e.addAnimation=function(t,i){try{t.insertRule(i.cssanimation,0),e.animations[i.getUnnamedAnimation()]={anim:i.cssanimation,name:i.name,usageCount:1},StoryApp.Utilities.weblog("animation","created animation: "+i.cssanimation)}catch(e){StoryLog.TraceTag(596476386,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Attempted to apply invalid CSS animation: '"+i.cssanimation+"'")}},e.reuseAnimation=function(t){var i=t.getUnnamedAnimation();t.name=e.animations[i].name,t.cssanimation=e.animations[i].anim,++e.animations[i].usageCount,StoryApp.Utilities.weblog("animation","reusing animation: "+t.cssanimation)},e.releaseAnimation=function(t,i){var n=i.getUnnamedAnimation();if(e.animations[n]&&1===e.animations[n].usageCount){StoryApp.Utilities.weblog("animation","destroyed animation: "+i.cssanimation);var o=i.getRuleIndex(t.cssRules);void 0!==o&&t.deleteRule(o),delete e.animations[n]}else--e.animations[n].usageCount,StoryApp.Utilities.weblog("animation","did not destroy animation "+i.cssanimation+", has "+e.animations[n].usageCount+" users remaining")},e.animations={},e}();e.StoryboardCache=d,e.applyCssAnimation=n,e.removeCssAnimation=o;var c="animationstart msAnimationStart webkitAnimationStart",p="animationend msAnimationEnd webkitAnimationEnd",g=function(){function e(e,t){this.target=e,this.storyboard=t,this.disposed=!1}return e.prototype.onstarted=function(e){this.disposed||e.originalEvent.animationName===this.storyboard.name&&($(this.target).off(c,this.pendingstart),this.pendingstart=null)},e.prototype.onended=function(e){this.disposed||e.originalEvent.animationName===this.storyboard.name&&($(this.target).off(p,this.pendingend),this.pendingend=null,this.dispose())},e.prototype.isStarted=function(){return!!this.pendingend},e.prototype.start=function(e,t,i,o,r){var a=this;this.callback=r;var s=i+" "+e.toString()+o+(t?" "+t.toString()+o:"")+" forwards";n(this.target,this.storyboard.name,s),this.pendingstart=this.onstarted.bind(this),$(this.target).on(c,this.pendingstart),this.pendingend=this.onended.bind(this),$(this.target).on(p,this.pendingend),0!==e&&this.inDom()||StoryApp.Utilities.scheduler.schedule(0,function(){return a.dispose()})},e.prototype.finalize=function(){this.disposed||(o(this.target,this.storyboard.name),this.pendingstart&&($(this.target).off(c,this.pendingstart),this.pendingstart=null),this.pendingend&&($(this.target).off(p,this.pendingend),this.pendingend=null),this.applyFinalState())},e.prototype.applyFinalState=function(){if(!this.disposed)for(var e=this.storyboard.finalstate(),t=0;t<e.length;++t)this.target.style[e[t].property]=e[t].value},e.prototype.inDom=function(){return document.documentElement.contains(this.target)},e.prototype.dispose=function(){this.disposed||(this.finalize(),this.disposed=!0,this.target=null,this.storyboard=null,this.callback())},e}();e.Storybinding=g}(CssAnimation||(CssAnimation={}));var StoryApp;!function(e){!function(t){function i(e){return new o.Track(e.property,[e.from,e.to])}var n=e.Model.RM,o=CssAnimation,r=function(){function r(e){this.engine=e,this.animationCache={},this.snapOutput=!1}return r.prototype.run=function(e,i,n,o){var r=this,a=i.mapmany(function(t){var i=e.transitions[t],o=n[i.getElementId()],a="animation_"+t+"_on_"+o.id,s=i.containerIds.getCollection().mapSome(function(t){var i=e.containers[t],n=i.effectIds.getCollection().map(function(t){return e.effects[t]});return r.makeAndApplyPropertyTransition(o,i,n,!1)});return r.createAnimationTasks(o,a,s)}),s=new l(a,o),u=t.after(a.length,this,function(){for(var t=0,o=i.length;t<o;++t){var r=e.transitions[i[t]],a=n[r.getElementId()];if(a)for(var l=r.containerIds.getCollection(),u=0,d=l.length;u<d;++u){var c=e.containers[l[u]],p=a.getProperty(c.getAnimatablePropertyName()),g=a.dom();g&&(g.style[p.cssproperty()]=p.compactvalue())}}s.dispose()});return a.forEach(function(e){e.task.done=u,e.task.start()}),s},r.prototype.completeCurrentAnimations=function(){},r.prototype.cache=function(e,t,i){var n=this;t.forEach(function(t){var o=e.transitions[t],r=i[o.getElementId()],a="animation_"+t+"_on_"+r.id,s=o.containerIds.getCollection().mapSome(function(t){var i=e.containers[t],o=i.effectIds.getCollection().map(function(t){return e.effects[t]});return n.makeAndApplyPropertyTransition(r,i,o,!0)});n.fetchAnimationStoryboards(r,a,s)})},r.prototype.clearAnimationCache=function(){for(var e in this.animationCache)this.animationCache[e].destroy();this.animationCache={},o.setDynamicStyleSheetRecreated(!1)},r.prototype.makeAndApplyPropertyTransition=function(e,t,i,r){var s=e.getProperty(t.getAnimatablePropertyName()),l=s.cssproperty();if(!(this.snapOutput||t.getAnimatablePropertyName()===n.AnimatableProperty.Hidden||0===t.getDuration()&&0===t.getDelay())){this.applyTransition(e,t,i,!1);var u=s.cssvalue();this.applyTransition(e,t,i,!0);var d=s.cssvalue();r&&this.applyTransition(e,t,i,!1);var c="";return c=this.engine.renderModelSchemaVersion>=119?t.getTimingFunction():n.AnimationCurve[t.getCurve()],new a(l,new o.Constant(u),new o.Constant(d),c,t.getDelay(),t.getDuration())}r||this.applyTransition(e,t,i,!0)},r.prototype.applyTransition=function(e,t,i,n){var o=t.getAnimatablePropertyName();i.forEach(function(t){e.setProperty({property:o,transformIdx:t.getTransformIndex(),componentIdx:t.getTransformComponent()},n?t.getEndValue():t.getStartValue())})},r.prototype.createAnimationTasks=function(e,t,i){var n=e.dom();if(!n||!i.length)return[];n.style[Modernizr.prefixed("animation")]="";for(var r=[],a=this.fetchAnimationStoryboards(e,t,i),l=0;l<a.length;++l){var u=i[l],d=new o.Storybinding(n,a[l]);r.push(new s(new o.Task(d,u.duration,u.delay,u.curve,"transition animation"),e))}return r},r.prototype.fetchAnimationStoryboards=function(t,n,r){if(!r.length)throw e.RethrowLogger.createError("trying to create a task with no transitions");var a=[];if(ArrayExtensions.homogeneous(r,"curve","delay","duration")){if(d=this.animationCache[n])return[d];d=this.animationCache[n]=new o.Storyboard(n,r.map(i)),a.push(d)}else for(var s=r.map(function(e){return n+"_"+e.property}),l=0;l<s.length;++l){var u=s[l],d=this.animationCache[u];d?a.push(d):(d=this.animationCache[u]=new o.Storyboard(u,[i(r[l])]),a.push(d))}return a},r.prototype.removeTargetBindings=function(e){},r}();t.CssAnimator=r;var a=function(){function e(e,t,i,n,o,r){this.property=e,this.from=t,this.to=i,this.curve=n,this.delay=o,this.duration=r,this.checkTimingCurve()}return e.prototype.checkTimingCurve=function(){switch(this.curve){case n.AnimationCurve[n.AnimationCurve.EaseCenter]:this.curve="ease";break;case n.AnimationCurve[n.AnimationCurve.EaseIn]:this.curve="ease-in";break;case n.AnimationCurve[n.AnimationCurve.EaseOut]:this.curve="ease-out";break;case n.AnimationCurve[n.AnimationCurve.EaseInOut]:this.curve="ease-in-out";break;case n.AnimationCurve[n.AnimationCurve.SnapOnStart]:this.curve="step-start";break;case n.AnimationCurve[n.AnimationCurve.SnapOnEnd]:this.curve="step-end";break;case n.AnimationCurve[n.AnimationCurve.Bounce]:case n.AnimationCurve[n.AnimationCurve.CustomEase]:case n.AnimationCurve[n.AnimationCurve.EaseInRadial]:case n.AnimationCurve[n.AnimationCurve.Elastic]:case n.AnimationCurve[n.AnimationCurve.None]:case n.AnimationCurve[n.AnimationCurve.SnapOnMiddle]:case n.AnimationCurve[n.AnimationCurve.SquarePulse]:case n.AnimationCurve[n.AnimationCurve.ThreeStateWaveSin]:case n.AnimationCurve[n.AnimationCurve.UnknownValue]:case n.AnimationCurve[n.AnimationCurve.WaveSin]:case n.AnimationCurve[n.AnimationCurve.StraightLine]:this.curve="linear";break;default:new RegExp("^cubic-bezier|steps|frames|inherit|initial|unset").test(this.curve)||(this.curve="linear")}},e}(),s=function(){function e(e,t){this.task=e,this.target=t,this.listening=!0,t.addDomListener(this)}return e.prototype.domAttached=function(e){},e.prototype.domDetached=function(e){this.task.dispose()},e.prototype.dispose=function(){this.listening&&(this.target.removeDomListener(this),this.listening=!1),this.task.dispose()},e}(),l=function(){function t(t,i){this.tasks=t,this.callback=i,this.disposed=!1,this.starttime=platform.now(),this.timeout=e.Utilities.scheduler.schedule(200,this.ontimeout.bind(this))}return t.prototype.checkAndProvokeFinished=function(){for(var e=0,t=this.tasks.length;e<t;++e){var i=this.tasks[e].task;i.shouldBeDone()&&i.terminate()}},t.prototype.ontimeout=function(){this.timeout=void 0,this.tasks.filter(function(e){return!e.task.isStarted()}).forEach(function(e){return e.dispose()})},t.prototype.dispose=function(){this.disposed||(this.timeout&&(this.timeout.dispose(),this.timeout=void 0),this.disposed=!0,this.tasks.forEach(function(e){e.dispose()}),this.callback())},t.prototype.finalize=function(){},t}()}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i;!function(e){e[e.scroll_y=0]="scroll_y",e[e.scrollextent_y=1]="scrollextent_y",e[e.visiblescroll_y=2]="visiblescroll_y",e[e.scroll_x=3]="scroll_x",e[e.scrollextent_x=4]="scrollextent_x",e[e.visiblescroll_x=5]="visiblescroll_x",e[e.touchx=6]="touchx",e[e.touchy=7]="touchy",e[e.camx=8]="camx",e[e.camy=9]="camy",e[e.camz=10]="camz"}(i=t.Interrogation||(t.Interrogation={}));var n=function(){function t(){this.interrogables={clock:{value:0},tick:{value:0}};for(var e in i)"number"==typeof i[e]&&(this.interrogables[e]={value:0})}return t.prototype.setValue=function(t,n){var o=this.interrogables[i[t]];if(!o)throw e.RethrowLogger.createError("Tried setting unknown interrogation.");o.value=n},t.prototype.getValue=function(e){return this.interrogables[i[e]].value},t.prototype.fetch=function(){return this.interrogables},t}();t.InterrogationsDictionary=n}(t.Interrogations||(t.Interrogations={}))}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function t(t,n){if(this.target=t,this.modelTarget=n,this.boundprop=t.getModelProperty(n.property),!this.boundprop){var o="Attempted to bind to a property that does not exist on the target. ID: "+t.id+" prop: "+i.AnimatableProperty[n.property];StoryLog.TraceTag(596476384,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,o),e.Utilities.weblog("animation",o)}}return t.prototype.setModelTargetValue=function(e){this.boundprop&&this.boundprop.set(this.modelTarget,e)},t.prototype.compact=function(){this.target.compactdom()},t}();t.FunctionBinding=n;var o=function(){function e(e){this.callback=e}return e.prototype.checkAndProvokeFinished=function(){},e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.callback&&this.callback())},e.prototype.finalize=function(){},e}();t.DisposableFunction=o}(t.FunctionalUtilities||(t.FunctionalUtilities={}))}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=t.FunctionalUtilities.DisposableFunction,n=t.FunctionalUtilities.FunctionBinding,o=t.Interrogations.InterrogationsDictionary,r=e.Model.RM,a=window.requestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return platform.setTimeout(e,33)},s=function(s){function l(e,t,i,n){var r=s.call(this,e)||this;r.interrogations=new o,r.functionBindings={},r.onCompleteCallbacks={},r.tickCount=0,r.tickTime=0,r.activeAnimations=0,r.mustTick=!1,r.registered=!1,r.currentTime=0,r.preTick=i,r.postTick=n;var a={variables:[],functions:[{id:"cf",params:"a,b",exprString:"clamp(normalize($a, 0, $b), 0, 1)"},{id:"ic",params:null,exprString:"sub(!clock,latch(!clock, 1))"}],expressions:[{id:"seconds",exprString:"mul(!clock, 0.001)"},{id:"dt",exprString:"mul(derivative(!clock, !tick), 0.001)"},{id:"scroll_y",exprString:"!scroll_y"},{id:"scroll_x",exprString:"!scroll_x"}]};return r.kernel=new AnimationKernel.Kernel(a),r.kernel.setQueryHandler(t),r}return __extends(l,s),l.prototype.run=function(o,a,s,l){var u=this;if(!s.length)throw e.RethrowLogger.createError("Tried running no animations.");this.registered||(this.registered=!0,this.scheduleTickable(this)),this.activeAnimations++;for(var d=[],c=this,p=0;p<s.length;++p)!function(i){var u=s[i],p=u.id;d.push(p),p===o&&(c.onCompleteCallbacks[p]=l),c.kernel.addExpression(p,u.getExpression()),c.kernel.wakeExpression(p,!u.getMaintainStateOnStart()),c.kernel.reportExpression(p,!0);var g=u.getTarget();if(g){var h=a[g.getElementId()];if(h){var y="Unknown",m=TDB.ViewElement.dataFor(h.dom());m&&m.getKeyFrameType&&(y=m.getKeyFrameType()),e.AnimationHelper.log(e.AnimationHelper.AnimationLogLabels.animationVerbose,function(){return"Running animation on Target: "+g.getElementId()+" KeyframeType: "+y+" Prop: "+r.AnimatableProperty[g.getAnimatablePropertyName()]+" Component: "+r.AnimatableTransformComponent[g.getTransformComponent()]+"\n\tExpression: "+u.getExpression()}),t.AnimationTracer.addFunctionalTrace(h,u),c.functionBindings[p]=new n(h,new t.Properties.ModelTarget(g))}}}(p);return new i(function(){for(var e=0;e<d.length;++e){var t=d[e];if(u.kernel.suspendExpression(t),u.kernel.reportExpression(t,!1),t===o)delete u.onCompleteCallbacks[t],u.kernel.releaseExpression(t);else{var i=u.functionBindings[t];i&&i.compact()}delete u.functionBindings[t]}u.activeAnimations--,l()})},l.prototype.jumpstart=function(){this.mustTick=!0,this.registered||(this.registered=!0,this.scheduleTickable(this))},l.prototype.idle=function(){return!this.mustTick&&0===this.activeAnimations},l.prototype.onUnregistered=function(){this.registered=!1,this.postTick()},l.prototype.tickForwardBy=function(e){void 0!==this.differenceFromSystemTime&&(this.differenceFromSystemTime+=e),this.tickInternal(this.currentTime+e)},l.prototype.tick=function(e){this.mustTick=!1,void 0===this.differenceFromSystemTime&&(this.differenceFromSystemTime=this.currentTime+16-e),this.tickInternal(e+this.differenceFromSystemTime)},l.prototype.removeTargetBindings=function(e){for(var t in this.functionBindings)this.functionBindings[t].target===e&&(this.kernel.releaseExpression(t),delete this.functionBindings[t])},l.prototype.dispose=function(){s.prototype.dispose.call(this),this.kernel.setQueryHandler(null)},l.prototype.scheduleTickable=function(e){var t=this,i=function(){return t.doTick(i,e,platform.now())};a(i)},l.prototype.tickInternal=function(e){this.currentTime=e,this.preTick(e),this.tickCount++;var i=this.interrogations.fetch();i.clock.value=e/t.getSpeedFactor(),i.tick.value=this.tickCount,this.kernel.tick(i);var n=this.kernel.outputValues,o=this.fetchScheduledCompletes(n);this.applyOutputBindings(n);for(var r=0;r<o.length;r++)o[r]();this.postTick()},l.prototype.applyOutputBindings=function(e){for(var t in e){var i=this.functionBindings[t];if(i){var n=e[t];i.setModelTargetValue(n)}}},l.prototype.fetchScheduledCompletes=function(t){var i=[],n=this.onCompleteCallbacks;for(var o in n)if(n.hasOwnProperty(o)){var r=t[o];if(void 0===r)throw e.RethrowLogger.createError("Key missing from animation kernel: '"+o+"'. Possibly a stale onCompleteCallbacks function.");r>=0&&i.push(n[o])}return i},l.prototype.doTick=function(e,t,i){void 0===i&&(i=platform.now()),t.idle()?t.onUnregistered():(this.tickTime!==i&&(this.tickTime=i,t.tick(i)),a(e))},l.defaultInitialClockFunction="ic\\(\\)",l}(Disposable);t.FunctionalAnimator=s}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){function i(i){if(u)return!1;if(d)return!0;if(e.Common.UrlHelper.getInstance().isAccessibilityView(i))return!0;var n=t.getRenderModel?t.getRenderModel(i):e.View.ViewElements.ViewModel.previewVE.currentStory.getRenderModel(i),o=n.layoutTrees.getCollection(i),r=o.length>0?o[0]:null;if(!r)return!1;if(n.getForceNativeScrolling(i))return!0;var a=r.getDevice(i);if(a===s.ClientDevice.Desktop||a===s.ClientDevice.Override)return!1;if(t.forcedToLowFi.getWatchedValue(i))return!0;var l=r.getInteractionModel(i);return!l||!l.getRequiresParallax(i)}function n(){return c||(c=e.Common.PageCompartmentManager.getInstance().createAccessor("AnimationEngine")),c}function o(e){0===e&&(e=1),e<0&&(e*=-1),g=e}function r(){return g}function a(t,i,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];return 0===t?(platform.setImmediate(function(){return n.call(i)}),e.Utilities.noop):function(){0===(t-=1)&&n.call.apply(n,[i].concat(o))}}var s=e.Model.RM,l=e.AnimationInterfaces;t.Interrogation=t.Interrogations.Interrogation;var u=e.Utilities.query.has("customscroll"),d=e.Utilities.query.has("lowfi");t.CameraID="camera",t.OnCompleteFunctionName="onComplete",t.forcedToLowFi=TDB.watchableTag(596476416,null,!1),t.LowFi=TDB.immutableWatchable(!1);var c;t.currentAnimationEngine=n;var p=function(n){function o(o,r,a,s,l,u){var d=n.call(this,r)||this;d.clientCapabilites=a,d.getTransitionData=s,d.renderModelSchemaVersion=u,d.elementMap={},d.domHandles=new e.Utilities.AsyncDependencySet,d.targetHandles=new e.Utilities.AsyncDependencySet,d.usedIdMap={},d.toActivate=[],d.dirtyTargets=[],d.isdirtyElementMap={},d.cssanimator=new t.CssAnimator(d),d.viewportScales={},d.animsequenceDisposables={},d.disableoutput=!1,d.promotedTo3D=0,d.camlisteners=[],d.resetAnimatables=TDB.watchableTag(596476417,d,0),d.cameraChanged=!1,d.cameraManuallyReset=!1,d.cameralistener={changed:d.cameraTransformChanged.bind(d)},d.targetlistener={changed:d.targetChanged.bind(d)},d.ticklisteners=[],d.mainscale=1,d.lowFiWatcher=TDB.watcherTag(596476418,null,d,i),t.LowFi=d.lowFiWatcher,d.functionalanimator=new t.FunctionalAnimator(d,o,d.onKernelPreTick.bind(d),d.onKernelTicked.bind(d));var c=new t.Target(t.CameraID,!0);return d.elementMap[t.CameraID]=c,d.resetCamera(),d.externalActions=l,d}return __extends(o,n),o.prototype.dispose=function(){for(var e in this.animsequenceDisposables)for(var i=this.animsequenceDisposables[e],o=0,r=i.length;o<r;++o)i[o].dispose();this.clearAnimationCache(),this.getTransitionData=null,t.LowFi===this.lowFiWatcher&&(t.LowFi=TDB.immutableWatchable(!1)),n.prototype.dispose.call(this)},o.prototype.getAnimatableTargets=function(){return Obj.values(this.elementMap)},o.prototype.getElementById=function(e){var t=this.getDomHandles().value(e);if(t)return t.domElement},o.prototype.showOutput=function(e,t,i){void 0===i&&(i=!0),this.disableoutput=!1,this.forceTick(t),this.cssanimator.snapOutput=!1,this.updateContainerStyle(e,!1,i)},o.prototype.hideOutput=function(e){this.disableoutput=!0,this.cssanimator.snapOutput=!0,this.updateContainerStyle(e,!0)},o.prototype.isOutputHidden=function(){return this.disableoutput},o.prototype.fastForward=function(){this.disableoutput=!0,this.forceTick(1e6),this.cssanimator.completeCurrentAnimations(),this.disableoutput=!1},o.prototype.updateContainerStyle=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!0);var n=this.getRootElement();e&&this.elementMap[e]&&(n=this.elementMap[e].dom()),n&&(t?(n.classList.remove("snapToReveal"),n.style.opacity="0"):(i&&n.classList.add("snapToReveal"),n.style.opacity="1"))},o.prototype.pauseCSSAnimations=function(){for(var e=0,t=this.getAnimatableTargets();e<t.length;e++){var i=t[e].dom();i&&(i.style[Modernizr.prefixedCSS("animation-play-state")]="paused")}},o.prototype.resumeCSSAnimations=function(){for(var e=0,t=this.getAnimatableTargets();e<t.length;e++){var i=t[e].dom();i&&(i.style[Modernizr.prefixedCSS("animation-play-state")]="")}},o.prototype.getRootElement=function(){return document.getElementById("storyroot")},o.prototype.promoteTo3DWorld=function(){1===++this.promotedTo3D&&this.resetCamera()},o.prototype.demoteTo2DWorld=function(){0===--this.promotedTo3D&&this.resetCamera()},o.prototype.is3dWorld=function(){return this.promotedTo3D>0},o.prototype.resetCamera=function(){var e=this;if(this.cameraManuallyReset)this.cameraManuallyReset=!1;else{this.camerapos&&this.camerapos.notifier.removeListener(this.cameralistener);var i;this.promotedTo3D>0?(this.camerapos=new t.Properties.Translate3D(0,0,0),i=[new t.Properties.Perspective(7),new t.Properties.Inverse(new t.Properties.Rotate3D(0,0,0)),new t.Properties.Inverse(new t.Properties.Scaled([.01,.01,.01],this.camerapos))]):(this.camerapos=new t.Properties.AcceleratedTranslate2D(0,0,function(){return e.mainscale},!0),i=[new t.Properties.Inverse(new t.Properties.Rotate2D(0)),new t.Properties.Inverse(new t.Properties.Scaled([.01,.01],this.camerapos))]),this.camerapos.notifier.addListener(this.cameralistener),this.elementMap[t.CameraID].assignTransforms([],i),this.cameraTransformChanged(this.camerapos)}},o.prototype.checkDisposableAnimations=function(){var e=this.animsequenceDisposables;for(var t in e)for(var i=e[t],n=0,o=i.length;n<o;++n)i[n].checkAndProvokeFinished()},o.prototype.setCameraManuallyReset=function(){this.cameraManuallyReset=!0},o.prototype.accelerateCamera=function(){this.camerapos instanceof t.Properties.AcceleratedTranslate2D&&this.camerapos.accelerate()},o.prototype.decelerateCamera=function(){this.camerapos instanceof t.Properties.AcceleratedTranslate2D&&this.camerapos.decelerate()},o.prototype.mainScaleChanged=function(e){this.camerapos instanceof t.Properties.AcceleratedTranslate2D&&(this.mainscale=e,this.camerapos.notifier.signal())},o.prototype.viewportScalesChanged=function(e){var t=this.viewportScales;for(var i in t)i in e||delete t[i];for(var i in e)this.getViewportScaleProp(i).set(e[i])},o.prototype.cameraTransform=function(){return this.camerapos},o.prototype.addCameraListener=function(e){this.camlisteners.push(e)},o.prototype.removeCameraListener=function(t){var i=this.camlisteners.indexOf(t);if(i<0)throw e.RethrowLogger.createError("tried removing a listener that wasn't in the collection");this.camlisteners.splice(i,1)},o.prototype.addTickListener=function(e,t){e.addResource(new h(t,this.ticklisteners))},o.prototype.exists=function(e){return!!this.elementMap[e]},o.prototype.hide=function(t){var i=this.elementMap[t];if(!i)throw e.RethrowLogger.createError("unknown target id");this.toActivate.removefirst(t),i.cull()},o.prototype.show=function(t,i){var n=this.elementMap[t];if(!n)throw e.RethrowLogger.createError("unknown target id");i||!e.Utilities.browser.isWebkit?n.uncull():this.toActivate.push(n.id)},o.prototype.untrackedTargets=function(e){return Obj.keys(this.elementMap).filter(function(t){return-1===e.indexOf(t)})},o.prototype.isCulled=function(t){var i=this.elementMap[t];if(!i)throw e.RethrowLogger.createError("unknown target id");return!i.active()},o.prototype.showPending=function(){var e=this,t=this.toActivate;t.length&&(t.forEach(function(t){return e.show(t,!0)}),t.length=0)},o.prototype.targetChanged=function(e){this.isdirtyElementMap[e.id]||(this.isdirtyElementMap[e.id]=!0,this.dirtyTargets.push(e))},o.prototype.cameraTransformChanged=function(e){this.cameraChanged||(this.cameraChanged=!0,this.functionalanimator.jumpstart())},o.prototype.getDomHandles=function(){return this.domHandles},o.prototype.getTargetHandles=function(){return this.targetHandles},o.prototype.register=function(i,n,o,r){if(this.elementMap[i])throw e.RethrowLogger.createError("tried registering a duplicate animation target");var a=new t.Target(i,n);this.domHandles.addListener(i,a),a.notifier.addListener(this.targetlistener);for(var s=0;s<o.length;++s)this.addProperty(a,o[s],r);this.elementMap[i]=a,this.targetChanged(a),this.functionalanimator.jumpstart();var l=this.usedIdMap[i];l&&!CommonSettings.SkipLoggingNonEssentialHighVolumeClientLogs&&StoryLog.StructuredTraceTag(596476419,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Found a recycled ID.",{"Recycled ID ":i,"Old element ID ":l.elementId,"Old keyframe type ":l.keyframeType}),this.targetHandles.bind(i,a)},o.prototype.isNew=function(e){var t=this;return!!e&&e.layoutElements.getCollection().some(function(e){var i=t.elementMap[e.id];return!!i&&i.isNewTarget()})},o.prototype.assignTransform=function(t,i,n,o){var r=this.elementMap[t];if(!r)throw e.RethrowLogger.createError("tried setting transform on animation target that doesn't exist");var a=this.elementMap[i];if(i&&!a)throw e.RethrowLogger.createError("Parent of target not found when registering");a?a.addChild(r):Containers.Intrinsic.contained(r)&&Containers.Intrinsic.disconnect(r);var s=[];a&&a.isVirtual()&&s.push(a.transform()),n&&s.push(n),r.assignTransforms(s,o),this.functionalanimator.jumpstart()},o.prototype.jumpstart=function(){this.functionalanimator.jumpstart()},o.prototype.getViewportScaleProp=function(e){var i=this.viewportScales[e];return i||(i=this.viewportScales[e]=new t.Properties.NumberProperty("scale",1)),i},o.prototype.addProperty=function(e,i,n){switch(i){case s.AnimatableProperty.Transform:break;case s.AnimatableProperty.Opacity:e.addProperty(i,new t.Properties.NumberProperty("opacity",1));break;case s.AnimatableProperty.Hidden:e.addProperty(i,new t.Properties.HiddenProperty(e,!1));break;case s.AnimatableProperty.ZOrder:e.addProperty(i,new t.Properties.IntegerProperty("zIndex",0));break;case s.AnimatableProperty.Width:e.addDisposableProperty(i,new t.Properties.ScaledIntegerProperty("width",0,this.getViewportScaleProp(n),"px"));break;case s.AnimatableProperty.Height:e.addDisposableProperty(i,new t.Properties.ScaledIntegerProperty("height",0,this.getViewportScaleProp(n),"px"))}this.functionalanimator.jumpstart()},o.prototype.setProperty=function(e,t){e.setProperty({property:t.property,transformIdx:t.transformIndex,componentIdx:t.component},t.value),this.functionalanimator.jumpstart()},o.prototype.interrogations=function(){return this.functionalanimator.interrogations},o.prototype.handleTouch=function(e,i){this.functionalanimator.interrogations.setValue(t.Interrogation.touchx,e),this.functionalanimator.interrogations.setValue(t.Interrogation.touchy,i)},o.prototype.requestUpdate=function(t,i){var n=this.elementMap[t];if(!n)throw e.RethrowLogger.createError("tried updating animation target that doesn't exist");for(var o=0;o<i.length;++o)this.setProperty(n,i[o])},o.prototype.forceTick=function(e){null!==e&&void 0!=e||(e=16),this.functionalanimator.tickForwardBy(e)},o.prototype.onKernelPreTick=function(e){for(var t=this.ticklisteners,i=0;i<t.length;++i)t[i](e)},o.prototype.onKernelTicked=function(){this.notifyCameraListeners(),this.disableoutput||this.flushTargetState()},o.prototype.notifyCameraListeners=function(){var e=this;if(this.cameraChanged){for(var i=[t.Interrogation.camx,t.Interrogation.camy,t.Interrogation.camz],n=this.camerapos.value(),o=0;o<n.length;++o)this.functionalanimator.interrogations.setValue(i[o],100*n[o]);this.cameraChanged=!1,this.camlisteners.forEach(function(t){return t.changed(e.camerapos)})}},o.prototype.cleardirty=function(){if(0!==this.dirtyTargets.length)for(var e=this.dirtyTargets,t=e.length-1;t>=0;--t){var i=e[t];i.dirty()||(delete this.isdirtyElementMap[i.id],this.dirtyTargets.splice(t,1))}},o.prototype.flushTargetState=function(){for(var e=this.dirtyTargets.length,t=this.dirtyTargets,i=0;i<e;++i)t[i].updatedom();this.cleardirty()},o.prototype.canAnimationRunInstantly=function(e){return e.getBehaviors().has(s.AnimationBehaviors.ZeroDurationInEditMode)||e.getBehaviors().has(s.AnimationBehaviors.ExternalAction)},o.prototype.executeAnimation=function(i,n,o,r){var a=this.getAnimationFunctions(n),s=n.getTransitionIds().getCollection(),l=this.cssanimator.snapOutput;e.AnimationHelper.log(e.AnimationHelper.AnimationLogLabels.animationVerbose,function(){return"Running animation: "+n.name}),this.runExternalActionsForAnimation(n),o&&this.canAnimationRunInstantly(n)&&(a.forEach(function(e){var i=e.getExpression();e.getExpression=function(){return i.replace(new RegExp(t.FunctionalAnimator.defaultInitialClockFunction,"g"),"1000000000")}}),this.cssanimator.snapOutput=!0);var u=[];return a.length>0&&u.push(this.functionalanimator.run(i,this.elementMap,a,r)),s.length>0&&u.push(this.cssanimator.run(this.getTransitionData(),s,this.elementMap,r)),this.cssanimator.snapOutput=l,u},o.prototype.registerActionProvider=function(t,i){if(null!=this.externalActions[t])throw e.RethrowLogger.createError("Attempting to overwrite the provider of an external action");this.externalActions[t]=i},o.prototype.unregisterActionProvider=function(t){if(null==this.externalActions[t])throw e.RethrowLogger.createError("Attempting to unregister a non existant action provider from the animation manager");delete this.externalActions[t]},o.prototype.runExternalActionsForAnimation=function(e){if(e.getBehaviors().has(s.AnimationBehaviors.ExternalAction)){var t=void 0,i=e;if(i.getActionType&&i.getTargetId){t=i.getTargetId();var n=i.getActionType();this.executeExternalAction(n,t,i.parameters.getCollection())}else TDB.raiseRecoverableError("Action did not have a type and target")}},o.prototype.executeExternalAction=function(t,i,n){if(this.externalActions[t]){e.AnimationHelper.log(e.AnimationHelper.AnimationLogLabels.animation,function(){return"Triggering new external action, "+t+", on target "+i});var o=this.externalActions[t];o.action.call(o.context,i,n)}},o.prototype.executeAnimationSequence=function(t,i,n){var o=this;if(!this.clientCapabilites.includes(t.getClientRequirements()))return!1;var r=t.animations.getCollection(),s=this.addOnCompleteFunction(r,t.getAnimationsCompleteFunction(),t.id,i),l=0;if(l+=r.filter(function(e){return e.getTransitionIds().getCollection().length>0}).length,s&&l++,0===l)return r.forEach(function(e){return o.runExternalActionsForAnimation(e)}),!1;e.AnimationHelper.log(e.AnimationHelper.AnimationLogLabels.animation,function(){return"starting sequence: "+t.id+" "+t.getName()});for(var u=a(l,this,function(){e.AnimationHelper.log(e.AnimationHelper.AnimationLogLabels.animation,function(){return"done sequence: "+t.id+" "+t.getName()}),n()}),d=[],c=0;c<r.length;++c){var p=this.executeAnimation(s,r[c],i,u);d.push.apply(d,p)}var g=this.animsequenceDisposables[t.id];return g&&g.forEach(function(e){return e.dispose()}),this.animsequenceDisposables[t.id]=d,!0},o.prototype.cacheAnimationSequence=function(e){if(e&&this.clientCapabilites.includes(e.getClientRequirements()))for(var t=e.animations.getCollection(),i=0;i<t.length;++i){var n=t[i].getTransitionIds().getCollection();this.cssanimator.cache(this.getTransitionData(),n,this.elementMap)}},o.prototype.clearAnimationCache=function(){this.cssanimator.clearAnimationCache()},o.prototype.getAnimationFunctions=function(e){var i=e.animationFunctions.getCollection().map(function(e){return new l.AnimationFunction(e.id,e.getFunctionId(),e.getExpression(),e.getMaintainStateOnStart(),e.getTarget(),e.getFlags(),e.getName())});return t.LowFi.getWatchedValue()?i.filter(function(e){var t=e.getFlags();return!t.has(s.AnimationFlags.Parallax)&&!t.has(s.AnimationFlags.CameraParallax)}):i},o.prototype.addOnCompleteFunction=function(e,i,n,o){var r=this;if(!e.mapmany(function(e){return r.getAnimationFunctions(e)}).length)return null;i||(i="-1"),o&&e.some(function(e){return r.canAnimationRunInstantly(e)})&&(i="1");var a=new l.Animation,s=t.OnCompleteFunctionName+n,u=new l.AnimationFunction(s,t.OnCompleteFunctionName,i,!1,null,null,"");return a.animationFunctions.getCollection().push(u),e.push(a),s},o.prototype.killAnimationSequence=function(t){e.AnimationHelper.log(e.AnimationHelper.AnimationLogLabels.animation,function(){return"killing sequence: "+t.id});var i=this.animsequenceDisposables[t.id];if(i){for(var n=0;n<i.length;++n)i[n].dispose();delete this.animsequenceDisposables[t.id]}else e.AnimationHelper.log(e.AnimationHelper.AnimationLogLabels.animationVerbose,function(){return"tried disposing animation sequence that was never started"})},o.prototype.unregister=function(t){var i=this.elementMap[t];if(!i)throw e.RethrowLogger.createError("tried unregistering animation target that doesn't exist");if(i.hasChildren())throw e.RethrowLogger.createError("children not removed before trying to remove parent");var n=i.getElement(),o={element:n,elementId:n?n.id:null,keyframeType:n&&n._context?n._context.keyframeType:null};this.usedIdMap[t]=o,i.resetTransforms(),this.targetHandles.unbind(t,i),Containers.Intrinsic.contained(i)&&Containers.Intrinsic.disconnect(i),i.notifier.removeListener(this.targetlistener),this.domHandles.removeListener(t,i),this.functionalanimator.removeTargetBindings(i),delete this.elementMap[t],delete this.isdirtyElementMap[t];var r=this.dirtyTargets.indexOf(i);-1!==r&&this.dirtyTargets.splice(r,1),i.dispose()},o}(Disposable);t.AnimationEngine=p;var g=1;t.setSpeedFactor=o,t.getSpeedFactor=r,t.after=a;var h=function(){function t(e,t){this.method=e,this.array=t,this.array.push(e)}return t.prototype.dispose=function(){if(!this.array.removefirst(this.method))throw e.RethrowLogger.createError("possible duplicate disposal of element: can't find element to dispose")},t}()}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(){function t(e){this.owner=e,this.listeners=[]}return t.prototype.addListener=function(e){this.listeners.push(e)},t.prototype.removeListener=function(t){var i=this.listeners.indexOf(t);if(i<0)throw e.RethrowLogger.createError("tried removing a listener that wasn't in the collection");this.listeners.splice(i,1)},t.prototype.signal=function(){for(var e=0;e<this.listeners.length;++e)this.listeners[e].changed(this.owner)},t}();t.Notifier=i}(t.Properties||(t.Properties={}))}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Utilities.browser.isWebkit?"-webkit-transform":"transform",n=function(){function n(e){this._values=e,this.notifier=new t.Notifier(this)}return n.prototype.reset=function(){for(var e=0;e<this._values.length;e++)this._values[e]=0},n.prototype.resetDefault=function(e){for(var t=0;t<this._values.length;t++)this._values[t]=e},n.prototype.get=function(t){if(t<0||t>this._values.length)throw e.RethrowLogger.createError("component index out of bounds: "+t);return this._values[t]},n.prototype.set=function(t,i){if(t<0||t>this._values.length)throw e.RethrowLogger.createError("component index out of bounds: "+t);var n=this._values[t]!==i;this._values[t]=i,n&&this.notifier.signal()},n.prototype.value=function(){return this._values.slice(0)},n.prototype.assign=function(e){this._values=e,this.notifier.signal()},n.prototype.add=function(e){for(var t=this._values.length,i=0;i<t;++i)this._values[i]+=e[i];this.notifier.signal()},n.prototype.sub=function(e){for(var t=this._values.length,i=0;i<t;++i)this._values[i]-=e[i];this.notifier.signal()},n.prototype.cssproperty=function(){return i},n}();t.ComponentTransform=n;var o=function(){function e(e,i){this.transform=e,this.cachedCss=i,this.notifier=new t.Notifier(this),i||(this.cachedCss=e.cssvalue()),e.notifier.addListener(this)}return e.prototype.reset=function(){this.transform.reset()},e.prototype.get=function(e){return this.transform.get(e)},e.prototype.set=function(e,t){return this.transform.set(e,t)},e.prototype.changed=function(e){this.cachedCss=e.cssvalue(),this.notifier.signal()},e.prototype.cssproperty=function(){return this.transform.cssproperty()},e.prototype.cssvalue=function(){return this.cachedCss},e.prototype.compactvalue=function(){return this.transform.compactvalue()},e.prototype.clone=function(){return new e(this.transform,this.cachedCss)},e}();t.CachedTransform=o;var r=function(e){function t(t,i,n){return e.call(this,[t,i,n])||this}return __extends(t,e),t.prototype.cssvalue=function(){var e=this.value();return"rotateX("+e[0].toFixed(3)+"deg) rotateY("+e[1].toFixed(3)+"deg) rotateZ("+e[2].toFixed(3)+"deg)"},t.prototype.cssinverse=function(){var e=this.value();return"rotateZ("+(-e[2]).toFixed(3)+"deg) rotateY("+(-e[1]).toFixed(3)+"deg) rotateX("+(-e[0]).toFixed(3)+"deg)"},t.prototype.clone=function(){var e=this.value();return new t(e[0],e[1],e[2])},t.prototype.compactvalue=function(){var e=this.value();return 0===e[0]&&0===e[1]&&0===e[2]?"":this.cssvalue()},t}(n);t.Rotate3D=r;var a=function(e){function t(t,i,n,o){return e.call(this,[t,i,n,o])||this}return __extends(t,e),t.prototype.cssvalue=function(){var e=this.value();return"rotate3d("+e[0].toFixed(3)+", "+e[1].toFixed(3)+", "+e[2].toFixed(3)+", "+e[3].toFixed(3)+"deg)"},t.prototype.compactvalue=function(){return this.value()[3]%360==0?"":this.cssvalue()},t.prototype.cssinverse=function(){var e=this.value();return"rotate3d("+e[0].toFixed(3)+", "+e[1].toFixed(3)+", "+e[2].toFixed(3)+", "+(-e[3]).toFixed(3)+"deg)"},t.prototype.clone=function(){var e=this.value();return new t(e[0],e[1],e[2],e[3])},t}(n);t.AxisAngle=a;var s=function(e){function t(t){return e.call(this,[t])||this}return __extends(t,e),t.prototype.cssvalue=function(){return"rotate("+this.get(0).toFixed(3)+"deg)"},t.prototype.compactvalue=function(){return this.value()[0]%360==0?"":this.cssvalue()},t.prototype.cssinverse=function(){return"rotate("+(-this.get(0)).toFixed(3)+"deg)"},t.prototype.clone=function(){return new t(this.get(0))},t}(n);t.Rotate2D=s;var l=function(e){function t(t,i,n){var o=e.call(this,[t,i,n])||this;return o.defaultScaleValue=1,o}return __extends(t,e),t.prototype.reset=function(){e.prototype.resetDefault.call(this,this.defaultScaleValue)},t.prototype.cssvalue=function(){return"scale3d("+this.value().map(function(e){return e.toFixed(3)}).join(",")+")"},t.prototype.compactvalue=function(){var e=this.value();return 1===e[0]&&1===e[1]&&1===e[2]?"":this.cssvalue()},t.prototype.clone=function(){var e=this.value();return new t(e[0],e[1],e[2])},t}(n);t.Scale3D=l;var u=function(e){function t(t,i){var n=e.call(this,[t,i])||this;return n.defaultScaleValue=1,n}return __extends(t,e),t.prototype.reset=function(){e.prototype.resetDefault.call(this,this.defaultScaleValue)},t.prototype.cssvalue=function(){return"scale("+this.value().map(function(e){return e.toFixed(3)}).join(",")+")"},t.prototype.compactvalue=function(){var e=this.value();return 1===e[0]&&1===e[1]?"":this.cssvalue()},t.prototype.clone=function(){var e=this.value();return new t(e[0],e[1])},t}(n);t.Scale2D=u;var d=function(e){function t(t,i,n){return e.call(this,[t,i,n])||this}return __extends(t,e),t.prototype.cssvalue=function(){return"translate3d("+this.value().map(function(e){return e.toFixed(3)}).join("em,")+"em)"},t.prototype.compactvalue=function(){var e=this.value();return 0===e[0]&&0===e[1]&&0===e[2]?"":this.cssvalue()},t.prototype.cssinverse=function(){return"translate3d("+this.value().map(function(e){return(-e).toFixed(3)}).join("em,")+"em)"},t.prototype.clone=function(){var e=this.value();return new t(e[0],e[1],e[2])},t}(n);t.Translate3D=d;var c=function(e){function t(t,i){return e.call(this,[t,i])||this}return __extends(t,e),t.prototype.cssvalue=function(){return"translate("+this.value().map(function(e){return e.toFixed(3)}).join("em,")+"em)"},t.prototype.compactvalue=function(){var e=this.value();return 0===e[0]&&0===e[1]?"":this.cssvalue()},t.prototype.cssinverse=function(){return"translate("+this.value().map(function(e){return(-e).toFixed(3)}).join("em,")+"em)"},t.prototype.clone=function(){var e=this.value();return new t(e[0],e[1])},t}(n);t.Translate2D=c;var p=function(e){function t(t,i,n,o){void 0===o&&(o=!1);var r=e.call(this,[t,i])||this;return r.scale=n,r.accelerated=o,r}return __extends(t,e),t.prototype.accelerate=function(){this.accelerated||(this.accelerated=!0,this.notifier.signal())},t.prototype.decelerate=function(){this.accelerated&&(this.accelerated=!1,this.notifier.signal())},t.prototype.cssvalue=function(){var e=this.value();return this.accelerated?"translate3d("+e[0].toFixed(3)+"em,"+e[1].toFixed(3)+"em, 0em)":"translate("+this.toRoundedPixels(e[0])+"px,"+this.toRoundedPixels(e[1])+"px)"},t.prototype.compactvalue=function(){return this.cssvalue()},t.prototype.cssinverse=function(){var e=this.value();return this.accelerated?"translate3d("+(-e[0]).toFixed(3)+"em,"+(-e[1]).toFixed(3)+"em, 0em)":"translate("+this.toRoundedPixels(-e[0])+"px,"+this.toRoundedPixels(-e[1])+"px)"},t.prototype.clone=function(){var e=this.value();return new t(e[0],e[1],this.scale,this.accelerated)},t.prototype.toRoundedPixels=function(e){return Math.round(100*e*this.scale())},t}(n);t.AcceleratedTranslate2D=p;var g=function(e){function n(i){var n=e.call(this,[i])||this;return n._depth=i,n.notifier=new t.Notifier(n),n}return __extends(n,e),n.prototype.getdepth=function(){return this.get(0)},n.prototype.setdepth=function(e){this.set(0,e)},n.prototype.cssproperty=function(){return i},n.prototype.cssvalue=function(){return"perspective("+this.getdepth().toFixed(3)+"em)"},n.prototype.compactvalue=function(){return this.cssvalue()},n.prototype.clone=function(){return new n(this.getdepth())},n}(n);t.Perspective=g;var h=function(){function e(e){this.transform=e,this.notifier=new t.Notifier(this),e.notifier.addListener(this)}return e.prototype.reset=function(){this.transform.reset()},e.prototype.changed=function(e){this.notifier.signal()},e.prototype.get=function(e){return this.transform.get(e)},e.prototype.set=function(e,t){this.transform.set(e,t)},e.prototype.cssproperty=function(){return this.transform.cssproperty()},e.prototype.cssvalue=function(){return this.transform.cssinverse()},e.prototype.compactvalue=function(){return this.cssvalue()},e.prototype.clone=function(){return new e(this.transform.clone())},e}();t.Inverse=h;var y=function(){function i(e,i){this.scale=e,this.transform=i,this.notifier=new t.Notifier(this);for(var n=0;n<e.length;++n)i.set(n,e[n]*i.get(n));i.notifier.addListener(this)}return i.prototype.reset=function(){this.transform.reset()},i.prototype.changed=function(e){this.notifier.signal()},i.prototype.get=function(e){return this.transform.get(e)},i.prototype.set=function(t,i){if(t>=this.scale.length)throw e.RethrowLogger.createError("invalid component index provided to Scaled transform");this.transform.set(t,this.scale[t]*i)},i.prototype.scaled=function(){return this.transform},i.prototype.cssproperty=function(){return this.transform.cssproperty()},i.prototype.cssvalue=function(){return this.transform.cssvalue()},i.prototype.compactvalue=function(){return this.transform.compactvalue()},i.prototype.cssinverse=function(){return this.transform.cssinverse()},i.prototype.clone=function(){return new i(this.scale,this.transform.clone())},i}();t.Scaled=y;var m=function(){function e(){this.notifier=new t.Notifier(this)}return e.prototype.reset=function(){},e.prototype.get=function(e){return 0},e.prototype.set=function(e,t){},e.prototype.cssproperty=function(){return i},e.prototype.cssvalue=function(){return""},e.prototype.compactvalue=function(){return""},e.prototype.cssinverse=function(){return""},e.prototype.clone=function(){return new e},e}();t.Identity=m;var f=function(){function n(e){this.transforms=e,this.notifier=new t.Notifier(this);for(var i=0;i<e.length;++i)e[i].notifier.addListener(this)}return n.prototype.dispose=function(){for(var e=0;e<this.transforms.length;++e)this.transforms[e].notifier.removeListener(this)},n.prototype.reset=function(){this.transforms.forEach(function(e){return e.reset()})},n.prototype.setstack=function(e){for(t=0;t<this.transforms.length;++t)this.transforms[t].notifier.removeListener(this);this.transforms=e;for(var t=0;t<this.transforms.length;++t)n.checkNotifier(this.transforms[t])&&this.transforms[t].notifier.addListener(this);this.notifier.signal()},n.prototype.get=function(t){throw e.RethrowLogger.createError("can't get number from transform stack")},n.prototype.set=function(t,i){throw e.RethrowLogger.createError("can't set number to transform stack")},n.prototype.pushFront=function(e){e.notifier.addListener(this),this.transforms.unshift(e),this.notifier.signal()},n.prototype.pushBack=function(e){e.notifier.addListener(this),this.transforms.push(e),this.notifier.signal()},n.prototype.pop=function(){var e=this.last();return e.notifier.removeListener(this),this.transforms.length--,e},n.prototype.transform=function(e){return this.transforms[e]},n.prototype.last=function(){if(0===this.transforms.length)throw e.RethrowLogger.createError("can't fetch last transform of empty stack");return this.transforms[this.transforms.length-1]},n.prototype.empty=function(){return 0===this.transforms.length},n.prototype.cssproperty=function(){return i},n.prototype.cssvalue=function(){for(var e="",t=this.transforms,i=0,n=t.length;i<n;++i)e+=t[i].cssvalue()+" ";return e},n.prototype.compactvalue=function(){for(var e="",t=this.transforms,i=0,n=t.length;i<n;++i){var o=t[i].compactvalue();o.length&&(e.length?e+=" "+o:e+=o)}return e},n.prototype.clone=function(){return new n(this.transforms.map(function(e){return e.clone()}))},n.prototype.changed=function(e){this.notifier.signal()},n.checkNotifier=function(e){return!!e.notifier||(e.constructor?(e.notifier=new t.Notifier(e),StoryLog.TraceTag(596123932,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,"Added missing notifier for transform",[{transformType:e.constructor.name}]),!0):(StoryLog.TraceTag(596123933,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,"Unexpected transform JSON object provided to TransformStack.setstack",Object.keys(e)),!1))},n}();t.TransformStack=f}(t.Properties||(t.Properties={}))}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function t(t,i){this.cssprop=t,this.value=i,this.notifier=new e.Notifier(this)}return t.prototype.get=function(){return this.value},t.prototype.set=function(e){var t=this.value!==e;this.value=e,t&&this.notifier.signal()},t.prototype.cssproperty=function(){return this.cssprop},t.prototype.cssvalue=function(){return this.value.toString()},t.prototype.compactvalue=function(){return this.cssvalue()},t}();e.NumberProperty=t;var i=Math.round,n=function(){function t(t,n,o){void 0===o&&(o=""),this.cssprop=t,this.units=o,this.notifier=new e.Notifier(this),this.value=i(n)}return t.prototype.get=function(){return this.value},t.prototype.set=function(e){var t=this.value;this.value=i(e),this.value!==t&&this.notifier.signal()},t.prototype.cssproperty=function(){return this.cssprop},t.prototype.cssvalue=function(){return this.value.toString()+this.units},t.prototype.compactvalue=function(){return this.cssvalue()},t}();e.IntegerProperty=n;var o=function(e){function t(t,i,n,o){void 0===o&&(o="");var r=e.call(this,t,i*n.get(),o)||this;return r.scale=n,n.notifier.addListener(r),r}return __extends(t,e),t.prototype.set=function(t){this.inputVal=t,e.prototype.set.call(this,t*this.scale.get())},t.prototype.changed=function(){this.set(this.inputVal)},t.prototype.dispose=function(){this.scale.notifier.removeListener(this)},t}(n);e.ScaledIntegerProperty=o;var r=function(){function t(t,i,n){this.cssprop=t,this.value=i,this.enums=n,this.notifier=new e.Notifier(this),this.set(i)}return t.prototype.get=function(){return this.value},t.prototype.set=function(e){var t=this.value;this.value=MathUtils.clamp(i(e),0,this.enums.length-1),this.value!==t&&this.notifier.signal()},t.prototype.cssproperty=function(){return this.cssprop},t.prototype.cssvalue=function(){return this.enums[this.value]},t.prototype.compactvalue=function(){return this.cssvalue()},t}();e.EnumerableProperty=r;var a=function(){function t(t,i,n,o){this.cssprop=t,this.falsestr=n,this.truestr=o,this.notifier=new e.Notifier(this),this.value=i?1:0}return t.prototype.get=function(){return this.value},t.prototype.set=function(e){var t=this.asbool();this.value=e,this.asbool()!==t&&this.notifier.signal()},t.prototype.asbool=function(){return this.value>0},t.prototype.cssproperty=function(){return this.cssprop},t.prototype.cssvalue=function(){return this.asbool()?this.truestr:this.falsestr},t.prototype.compactvalue=function(){return this.cssvalue()},t}();e.BooleanProperty=a;var s=function(){function t(t,i){this.target=t,this.notifier=new e.Notifier(this);var n=i?1:0;this.value=1-n,this.set(n)}return t.prototype.get=function(){return this.value},t.prototype.set=function(e){var t=this.asbool();this.value=e,this.asbool()!==t&&(t?this.target.show():this.target.hide(),this.notifier.signal())},t.prototype.asbool=function(){return this.value>0},t.prototype.cssproperty=function(){return"visibility"},t.prototype.cssvalue=function(){return""},t.prototype.compactvalue=function(){return this.cssvalue()},t}();e.HiddenProperty=s}(e.Properties||(e.Properties={}))}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function e(e){this.property=e.getAnimatablePropertyName(),this.transformIdx=e.getTransformIndex(),this.componentIdx=e.getTransformComponent()}return e}();e.ModelTarget=t;var i=function(){function e(e,t){this.property=e,this.transformoffset=t}return e.prototype.set=function(e,t){var i=this.property.transform(this.transformoffset+e.transformIdx);i&&i.set(e.componentIdx,t)},e.prototype.get=function(e){var t=this.property.transform(this.transformoffset+e.transformIdx);return t?t.get(e.componentIdx):0},e}();e.TransformBinding=i;var n=function(){function e(e){this.property=e}return e.prototype.set=function(e,t){this.property.set(t)},e.prototype.get=function(e){return this.property.get()},e}();e.PropertyBinding=n}(e.Properties||(e.Properties={}))}(e.AnimationManager||(e.AnimationManager={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){!function(t){var i=function(){function t(e,t,i,n){this.el=e,this.directVe=n}return t.prototype.init=function(t){if(this.target=t,this.engine=e.AnimationManager.currentAnimationEngine().get(this.directVe.getPageId()),!this.engine)throw e.RethrowLogger.createError("We should always have an animation engine when building up the view hierarchy");this.engine.getDomHandles().bind(this.target,this.directVe),this.engine.getTargetHandles().addListener(t,this)},t.prototype.bound=function(e){e.active()||this.directVe.cull()},t.prototype.unbound=function(e){},t.prototype.dispose=function(){this.engine.getTargetHandles().removeListener(this.target,this),this.engine.getDomHandles().unbind(this.target,this.directVe)},t}();t.BindingBase=i}(t.Animatable||(t.Animatable={}))}(t.Bindings||(t.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){!function(e){var t=function(){function e(e,t,i){this.el=e}return e.prototype.updateBoxShadow=function(e,t){if(!t||!DropShadow.isDropShadowVisible(t))return this.el.dropShadow=null,void(this.el.style.boxShadow="");this.el.style.boxShadow=DropShadow.cssFromDropShadow(t),this.el.dropShadow=t},e}();e.BindingBase=t}(e.BoxShadow||(e.BoxShadow={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){!function(t){var i;!function(e){e[e.Full=0]="Full",e[e.KeepOne=1]="KeepOne"}(i=t.ShiftMode||(t.ShiftMode={}));var n;!function(e){e[e.NonExistent=0]="NonExistent",e[e.Visible=1]="Visible",e[e.Left=2]="Left",e[e.Right=3]="Right"}(n=t.RelativeLocation||(t.RelativeLocation={})),$.easing.carouselscroll=function(e,t,i,n,o){return-n*e*Math.tan(e-1)+e+i};var o=function(t){function o(e,i,n){var o=t.call(this,null)||this;return o.carouselViewportEl=e,o}return __extends(o,t),o.prototype.init=function(e){this.disabled=e.disabled||!1,this.isRTL=e.isRTL||!1,this.shiftMode=null!=e.shiftMode?e.shiftMode:i.Full,this.shouldWrap=e.shouldWrap||!1,this.contentCssSelector=e.contentCssSelector,this.containerCssSelector=e.containerCssSelector,this.buffer=e.buffer||0,this.shiftedAmount=0,this.transitionDuration=e.transitionDuration||0,this.transitionTiming=e.transitionTiming||"carouselscroll",this.transitionDelay=e.transitionDelay||0,this.inTransition=!1,this.rtlScrollAscending=!1,this.configureRTL()},o.prototype.setHandlers=function(){var t=this,i=$(this.carouselViewportEl);i.on("wheel",e.Utilities.debounce(30,this,function(e){e.preventDefault();var n=e.originalEvent,o=n.deltaMode===WheelEvent.DOM_DELTA_LINE?16*n.deltaY:n.deltaY,r=t.isRTL&&!t.rtlScrollAscending?-o:o,a=i.find(t.containerCssSelector);a.scrollLeft(a.scrollLeft()+r)}))},o.prototype.unsetHandlers=function(){$(this.carouselViewportEl).off("wheel")},o.prototype.startOfNext=function(){if(this.hasContentOverflow())for(var e=$(this.carouselViewportEl),t=e.find(this.contentCssSelector),n=t.length-1;n>=0;n--){var o=$(t.get(n));if(o.position().left>=0&&o.position().left+o.width()<=e.width()){if(n===t.length-1)break;switch(this.shiftMode){case i.Full:return Math.min(t.length-2,n+1);case i.KeepOne:return n}}}return-1},o.prototype.startOfPrev=function(){if(this.hasContentOverflow())for(var e=$(this.carouselViewportEl),t=e.find(this.contentCssSelector),n=0;n<t.length;n++){var o=$(t.get(n));if(o.position().left>=0&&o.position().left+o.width()<=e.width()){if(0===n)break;switch(this.shiftMode){case i.Full:return Math.max(1,n-1);case i.KeepOne:return n}}}return-1},o.prototype.updateCarousel=function(e,t){this.isRTL=t.isRTL,0!==$(this.carouselViewportEl).find(this.containerCssSelector).length&&(t.disabled&&!this.disabled?(this.disabled=!0,this.unsetHandlers()):!t.disabled&&this.disabled&&(this.disabled=!1,this.setHandlers()))},o.prototype.hasContentOverflow=function(){var e=$(this.carouselViewportEl),t=e.find(this.contentCssSelector);return t.length*t.width()+this.buffer>e.width()},o.prototype.shiftToNextSet=function(e){if(!this.inTransition&&!this.disabled){var t=this.startOfNext();-1===t&&this.shouldWrap?this.moveToContentNumber(0,this.isRTL,e):-1!==t&&this.moveToContentNumber(t,this.isRTL,e)}},o.prototype.shiftToPrevSet=function(e){if(!this.inTransition&&!this.disabled){var t=this.startOfPrev(),i=$(this.contentCssSelector).length-1;-1===t&&this.shouldWrap?this.moveToContentNumber(i,this.isRTL,e):-1!==t&&this.moveToContentNumber(t,!this.isRTL,e)}},o.prototype.isAtStart=function(){return-1===this.startOfPrev()},o.prototype.isAtEnd=function(){return-1===this.startOfNext()},o.prototype.getRelativeLocation=function(e){var t=$(this.carouselViewportEl),i=$(t.find(this.contentCssSelector).get(e));if(0!==i.length){var o=i.position().left;return o<this.buffer?n.Left:o>$(this.carouselViewportEl).width()-i.width()-this.buffer?n.Right:n.Visible}return n.NonExistent},o.prototype.moveToContentNumber=function(t,i,n){var o=this;if(!this.inTransition&&!this.disabled){var r=$(this.carouselViewportEl),a=r.find(this.containerCssSelector),s=r.find(this.contentCssSelector),l=$(s.get(Math.min(Math.max(0,t),s.length-1))),u=a.scrollLeft();i?this.isRTL&&this.rtlScrollAscending?u+=r.width()-(l.position().left+l.width()+this.buffer):u+=l.position().left+l.width()-r.width()+(this.isRTL?this.buffer:-this.buffer):this.isRTL&&this.rtlScrollAscending?u+=this.buffer-l.position().left:u+=l.position().left-this.buffer,n?a.scrollLeft(u):(this.inTransition=!0,a.animate({scrollLeft:e.Utilities.toPxStr(u)},{duration:this.transitionDuration,easing:this.transitionTiming,complete:function(){o.inTransition=!1}}))}},o.prototype.configureRTL=function(){if(this.isRTL){var e=$("<div>",{id:"rtlconfig",style:"width: 150px; height: 150px; overflow-x: scroll; visibility: hidden;",dir:"rtl"}),t=$("<div>",{style:"width: 200px; height: 100px;"});if(e.append(t),$("body").append(e),0!==e.scrollLeft())return;e.scrollLeft(10),e.scrollLeft()>0&&(this.rtlScrollAscending=!0),e.remove()}},o.prototype.dispose=function(){this.unsetHandlers()},o}(Disposable);t.BindingBase=o}(t.Carousel||(t.Carousel={}))}(t.Bindings||(t.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){!function(t){var i=function(){function t(e,t,i){this.currentPos=0,this._el=e}return t.prototype.init=function(e){this.context=e.context,this.startCallback=e.startCallback,this.endCallback=e.endCallback,this.isHorizontal=e.isHorizontal,this.translateString=this.isHorizontal?"translateX":"translateY"},t.prototype.previous=function(){this.translate(-this.getStepSize())},t.prototype.next=function(){this.translate(this.getStepSize())},t.prototype.getStepSize=function(){return this.isHorizontal?this._el.offsetWidth:this._el.offsetHeight},t.prototype.translate=function(t){var i=this.getMaxBounds(),n=this.currentPos===i,o=0===this.currentPos;this.currentPos=MathUtils.clamp(this.currentPos+t,0,i);for(var r=this.currentPos===i,a=0===this.currentPos,s=0;s<this._el.children.length;s++)$(this._el.children[s]).css("transform",this.translateString+"(-"+e.Utilities.toPxStr(this.currentPos)+")");this.enterExitCallback(this.startCallback,o,a),this.enterExitCallback(this.endCallback,n,r)},t.prototype.getMaxBounds=function(){for(var e=0,t=0;t<this._el.children.length;t++)e=Math.max(e,this.getOffsetPlusSize(this._el.children[t]));return Math.max(0,e-(this.isHorizontal?this._el.offsetWidth:this._el.offsetHeight))},t.prototype.getOffsetPlusSize=function(e){return this.isHorizontal?e.offsetLeft+e.offsetWidth:e.offsetTop+e.offsetHeight},t.prototype.enterExitCallback=function(e,t,i){i&&!t?e.call(this.context,!0):t&&!i&&e.call(this.context,!1)},t}();t.BindingBase=i}(t.ChunkedScroller||(t.ChunkedScroller={}))}(t.Bindings||(t.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){!function(t){var i=function(){function i(e,t,i){this._element=e,this._viewElement=i}return i.prototype.getDiv=function(){return this._element},i.prototype.getManifestId=function(){return this._manifestId},i.prototype.getManifest=function(){return this._manifest},i.prototype.getData=function(){return this._agaveData},i.prototype.getDesiredImageHeight=function(){return this._agaveHeight},i.prototype.getDesiredImageWidth=function(){return this._agaveWidth},i.prototype.getAgaveIsEdit=function(){return this._agaveIsEdit},i.prototype.getAgaveSettingsData=function(){return this._agaveSettings},i.prototype.getContentId=function(){return this._viewElement instanceof e.View.ViewElements.AgaveLayoutVEBase?this._viewElement.getContentId():null},i.prototype.setAgaveFailed=function(t){this._viewElement instanceof e.View.ViewElements.AgaveLayoutVEBase&&this._viewElement.setAgaveFailed(t)},i.prototype.dispose=function(){null!==this._osfControlId&&void 0!==this._osfControlId&&e.Agaves.unregisterControl(this._osfControlId)},i.prototype.updateCreate=function(t,i){if(i.agaveId&&StoryPageSettings.SiteAgaveEnabled&&(this._manifestId!==i.agaveId||this._agaveTraversalId!==i.agaveTraversalId)){if(!0!==e.Agaves.osfScriptLoaded.getValue())return t.watch(e.Agaves.osfScriptLoaded),void e.Agaves.loadOsfRuntimeJs();this.dispose(),this.setAgaveFailed(!1),this._manifest=i.agaveManifest,this._manifestId=i.agaveId,this._agaveData=i.agaveData,this._agaveHeight=i.agaveHeight,this._agaveWidth=i.agaveWidth,this._agaveSettings=i.agaveSettings,this._agaveIsEdit=i.agaveIsEdit,this._agaveTraversalId=i.agaveTraversalId,!StoryPageSettings.SiteChartRenderingEnabled&&this.isChartManifestId(this._manifestId)||this.createAgave()}},i.prototype.updateDataChanged=function(t,i){this._agaveData!==i.agaveData&&StoryPageSettings.SiteAgaveEnabled&&(this._agaveData=i.agaveData,null!==this._osfControlId&&void 0!==this._osfControlId&&e.Agaves.raiseBindingDataChangedEvent(this._osfControlId))},i.prototype.updateSizeChanged=function(t,i){this._agaveHeight===i.agaveHeight&&this._agaveWidth===i.agaveWidth||!StoryPageSettings.SiteAgaveEnabled||(this._agaveHeight=i.agaveHeight,this._agaveWidth=i.agaveWidth,null!==this._osfControlId&&void 0!==this._osfControlId&&e.Agaves.raiseBindingDataChangedEvent(this._osfControlId))},i.prototype.updateSettingsChanged=function(t,i){this._agaveSettings!==i.agaveSettings&&StoryPageSettings.SiteAgaveEnabled&&(this._agaveSettings=i.agaveSettings,null!==this._osfControlId&&void 0!==this._osfControlId&&e.Agaves.raiseSettingsChangedEvent(this._osfControlId))},i.prototype.updateIsEditChanged=function(t,i){this._agaveIsEdit!==i.agaveIsEdit&&StoryPageSettings.SiteAgaveEnabled&&(this._agaveIsEdit=i.agaveIsEdit,null!==this._osfControlId&&void 0!==this._osfControlId&&e.Agaves.raiseActiveViewChangedEvent(this._osfControlId))},i.prototype.createAgave=function(){this._osfControlId=e.Agaves.insertControl(this)},i.prototype.isChartManifestId=function(e){return e&&t.BindingBase.chartManifestId.toLowerCase()===e.toLowerCase()},i.chartManifestId="0aa5a139-28c0-46ce-ad76-368af51a1b6f",i}();t.BindingBase=i}(t.ContentAgave||(t.ContentAgave={}))}(t.Bindings||(t.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){!function(e){var t=function(){function e(e,t,i){this._el=e}return e.prototype.updateEmbedVideo=function(e,t){$(this._el).html(t)},e}();e.BindingBase=t}(e.EmbedVideo||(e.EmbedVideo={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){!function(t){var i=function(){function t(e,t,i){this.el=e,this.parentdom=t,this.ve=i}return t.prototype.updateLivingImagePlayer=function(t,i){if(i){var n=i.position;this.contentId=i.contentId,this.manager=i.manager,this.el.id="livingimage_"+this.contentId,this.el.style.top=e.Utilities.toPxStr(n.top),this.el.style.left=e.Utilities.toPxStr(n.left),this.el.style.width=e.Utilities.toPxStr(n.width),this.el.style.height=e.Utilities.toPxStr(n.height);var o=i.imageUrl,r=i.mediaUrls,a=i.model,s=i.logger;this.createLivingImageContainer(o,r,a,s),this.manager.registerPlayer(this.contentId,this)}else this.cleanupPlayer()},t.prototype.createLivingImageContainer=function(e,t,i,n){this.container&&this.cleanupPlayer(),this.container=new LivingImage.LivingImageContainer(this.el,e,t,i,n),this.container.preload()},t.prototype.play=function(e){this.container&&this.container.play(e)},t.prototype.preload=function(){this.container&&this.container.preload()},t.prototype.dispose=function(){this.cleanupPlayer(),this.container=null},t.prototype.cleanupPlayer=function(){this.container&&(this.manager&&this.manager.unregisterPlayer(this.contentId,this),this.container.destroy(),this.container=null)},t}();t.BindingBase=i}(t.LivingImagePlayer||(t.LivingImagePlayer={}))}(t.Bindings||(t.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){!function(e){var t=function(){function e(t,i,n){var o=this;this.onContentChanged=function(){o.pendingRequest||(o.pendingRequest=setTimeout(function(){o.save(),o.pendingRequest=void 0},e.codeUpdateFrequency))},this.element=t}return e.prototype.init=function(e){var t=this;this.args=e,this.args.resourceFactory.loadResource(14).then(function(e){0===e.state?t.createEditor():StoryLog.TraceTag(596444429,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Failed to load Monaco binding.")})},e.prototype.dispose=function(){},e.prototype.setCode=function(e){this.editor.setValue(e),this.args.setCode&&this.args.setCode(e)},e.prototype.setLanguage=function(e){monaco.editor.setModelLanguage(this.editor.getModel(),e),this.args.setLanguage&&this.args.setLanguage(e)},e.prototype.updateUpdate=function(e,t){this.editor?(t.code!==this.editor.getValue()&&this.setCode(t.code),t.language!==this.editor.getModel().getModeId()&&this.setLanguage(t.language)):this.pendingModel={code:t.code,language:t.language}},e.prototype.createEditor=function(){this.editor=monaco.editor.create(this.element,{value:this.pendingModel&&this.pendingModel.code,language:this.pendingModel&&this.pendingModel.language}),this.editor.onDidChangeModelContent(this.onContentChanged)},e.prototype.save=function(){var e=this.editor.getValue();e!==this.lastSavedCode&&(this.args.setCode&&this.args.setCode(this.editor.getValue()),this.lastSavedCode=e)},e.codeUpdateFrequency=1e3,e}();e.BindingBase=t}(e.Monaco||(e.Monaco={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){!function(i){var n=e.View.ViewElements.DomEventRegister,o=function(){function i(e,t,i){if(this._hidingDisabled=!1,this._hidden=!0,this._lastset=0,this._enabled=!1,this.preventFromShowing=!1,this.activityMonitor=n.getInstance().getActivityMonitor(),this._scrollbar=e,this._parent=t,0===UX.GetScrollbarSize())return this._scrollbar.style.display="none",void(this._scrollbar=null);this._scrollextents=document.createElement("div"),this._scrollextents.className="fakecontent",this._scrollbar.appendChild(this._scrollextents),$(this._scrollbar).addClass("scrollbar-hidden")}return i.prototype.init=function(i){var n=this;this._scrollListener=i.listener,this._direction=i.direction,this._direction===t.ScrollDirection.HORIZONTAL_REVERSED&&(this._direction=t.ScrollDirection.HORIZONTAL),this._scrollListener.updateDomScroll[this._direction]=this.updateScrollOffset.bind(this),this._scrollListener.getDomScroll[this._direction]=this.getScrollOffset.bind(this),null!==this._scrollbar&&(i.direction===t.ScrollDirection.VERTICAL?this._strategy=new r(this._scrollbar,this._scrollextents):i.direction===t.ScrollDirection.HORIZONTAL?this._strategy=new a(this._scrollbar,this._scrollextents):this._strategy=new s(this._scrollbar,this._scrollextents),this._scrollbarMouseEnterHandler=function(){n._hidingDisabled=!0},this._scrollbarMouseLeaveHandler=function(){n._hidingDisabled=!1},$(this._scrollbar).on("mouseenter",this._scrollbarMouseEnterHandler),$(this._scrollbar).on("mouseleave",this._scrollbarMouseLeaveHandler),this._scrollbarScrollHandler=function(){var e=n._strategy.getElementScroll();n._lastset!==e&&(n._lastset=e,n._scrollListener.onScroll(n._direction,e),n.updateScrollbarVisibility())},$(this._scrollbar).on("scroll",this._scrollbarScrollHandler),this._scrollbarMouseDownHandler=function(e){if(n.activityMonitor.receiveActivity(),t.ViewElements.ViewModel.viewinputlogger.scrollbarClicked(),2===e.which)return e.preventDefault(),!0},$(this._scrollbar).on("mousedown",this._scrollbarMouseDownHandler),this._parentMouseMoveHandler=e.Utilities.debounce(250,this,this.updateScrollbarVisibility),$(this._parent).on("mousemove",this._parentMouseMoveHandler))},i.prototype.updateScrollbarVisibility=function(){var e=this;this._enabled?this._scrollListener.canScroll(this._direction)&&(this.preventFromShowing||(this._hidden&&this.showScrollbar(),clearTimeout(this._hidetimeout),this._hidetimeout=platform.setTimeout(function(){e._hidingDisabled||e.hideScrollbar()},2e3))):this._hidden||this.hideScrollbar()},i.prototype.hideScrollbar=function(){clearTimeout(this._hidetimeout),$(this._scrollbar).addClass("scrollbar-hidden"),this._hidden=!0},i.prototype.showScrollbar=function(){$(this._scrollbar).removeClass("scrollbar-hidden"),this._hidden=!1},i.prototype.updateScrollSize=function(e,t){this._strategy&&this._strategy.setContentSize(t)},i.prototype.updateScrollOffset=function(e){var t=Math.round(e);t!==this._lastset&&(this._lastset=t,this._scrollbar&&(this.updateScrollbarVisibility(),this._strategy.setElementScroll(t),this._lastset=this._strategy.getElementScroll()))},i.prototype.getScrollOffset=function(){return this._lastset},i.prototype.updateEnabled=function(e,t){this._enabled=t,this._scrollbar&&(t?this.updateScrollbarVisibility():this.hideScrollbar())},i.prototype.updatePreventFromShowing=function(e,t){this.preventFromShowing=t,t&&this.hideScrollbar()},i.prototype.dispose=function(){var e=$(this._parent);this._parentMouseMoveHandler&&e.off("mousemove",this._parentMouseMoveHandler);var t=$(this._scrollbar);this._scrollbarMouseDownHandler&&t.off("mousedown",this._scrollbarMouseDownHandler),this._scrollbarMouseEnterHandler&&t.off("mouseenter",this._scrollbarMouseEnterHandler),this._scrollbarMouseLeaveHandler&&t.off("mouseleave",this._scrollbarMouseLeaveHandler),this._scrollbarScrollHandler&&t.off("scroll",this._scrollbarScrollHandler),this._scrollListener.updateDomScroll[this._direction]=null,this._scrollListener.getDomScroll[this._direction]=null,this._scrollListener=null,this._scrollextents=null,delete this._strategy},i}();i.BindingBase=o;var r=function(){function e(e,t){this.scrollbar=e,this.extents=t}return e.prototype.setElementScroll=function(e){this.scrollbar.scrollTop=e},e.prototype.offsetElementScroll=function(e){this.scrollbar.scrollTop+=e},e.prototype.setContentSize=function(e){this.extents.style.height=Math.round(e)+"px"},e.prototype.getElementScroll=function(){return this.scrollbar.scrollTop},e}(),a=function(){function e(e,t){this.scrollbar=e,this.extents=t}return e.prototype.setElementScroll=function(e){this.scrollbar.scrollLeft=e},e.prototype.offsetElementScroll=function(e){this.scrollbar.scrollLeft+=e},e.prototype.setContentSize=function(e){this.extents.style.width=Math.round(e)+"px"},e.prototype.getElementScroll=function(){return this.scrollbar.scrollLeft},e}(),s=function(){function e(e,t){this.scrollbar=e,this.extents=t,this.startsFromEnd=!1,this.checkedStartPosition=!1}return e.prototype.setElementScroll=function(e){this.checkScrollingType(),this.startsFromEnd?this.scrollbar.scrollLeft=this.scrollbar.scrollWidth-this.scrollbar.clientWidth-e:(e<0&&(e=0),this.scrollbar.scrollLeft=e,0===this.scrollbar.scrollLeft&&(this.scrollbar.scrollLeft=-e))},e.prototype.offsetElementScroll=function(e){if(this.checkScrollingType(),this.startsFromEnd)this.scrollbar.scrollLeft-=e;else{var t=this.scrollbar.scrollLeft;this.scrollbar.scrollLeft-=1,this.scrollbar.scrollLeft<0?this.scrollbar.scrollLeft=t-e:this.scrollbar.scrollLeft=t+e}},e.prototype.setContentSize=function(e){this.extents.style.width=Math.round(e)+"px"},e.prototype.getElementScroll=function(){return this.checkScrollingType(),this.startsFromEnd?this.scrollbar.scrollWidth-this.scrollbar.clientWidth-this.scrollbar.scrollLeft:Math.abs(this.scrollbar.scrollLeft)},e.prototype.checkScrollingType=function(){!this.checkedStartPosition&&this.scrollbar.scrollWidth>this.scrollbar.clientWidth&&(this.checkedStartPosition=!0,this.scrollbar.scrollLeft>(this.scrollbar.scrollWidth-this.scrollbar.clientWidth)/2&&(this.startsFromEnd=!0))},e}()}(i.Scroll||(i.Scroll={}))}(t.Bindings||(t.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM;!function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL",e[e.HORIZONTAL_REVERSED=2]="HORIZONTAL_REVERSED"}(t.ScrollDirection||(t.ScrollDirection={})),function(e){function t(t){var n=i.LayoutScrollability.UnknownValue;switch(t){case e.HORIZONTAL:case e.HORIZONTAL_REVERSED:n=i.LayoutScrollability.Horizontal;break;case e.VERTICAL:n=i.LayoutScrollability.Vertical}return n}function n(t){var n=0;switch(t){case i.LayoutScrollability.Horizontal:n=e.HORIZONTAL;break;case i.LayoutScrollability.Vertical:n=e.VERTICAL}return n}e.toLayoutScrollability=t,e.fromLayoutScrollability=n}(t.ScrollDirection||(t.ScrollDirection={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){!function(e){var t;!function(e){e[e.All=0]="All",e[e.HorizontalBounds=1]="HorizontalBounds"}(t=e.IntervalMode||(e.IntervalMode={}));var i=function(e){function i(t,i,n){var o=e.call(this,null)||this;return o.viewportEl=t,o.hasAnimatedIn=!1,o}return __extends(i,e),i.prototype.getAnimatingTarget=function(e){for(var t=[],i=[],n=[],o=[],r=[],a=[],s=0;s<e.animations.length;s++){var l=e.animations[s];t.push(l.animationName),i.push(l.animationDuration+"ms"),n.push(l.animationInterval||0),o.push(l.animationFillMode||"both"),r.push(l.animationTimingFunction||"linear"),a.push(l.animationDirection||"normal")}return{inAnimation:e.inAnimation,targetCssSelector:e.targetCssSelector,animationName:t.join(", "),animationDuration:i.join(", "),animationInterval:n,animationFillMode:o.join(", "),animationTimingFunction:r.join(", "),animationDirection:a.join(", "),animationEndHook:e.animationEndHook}},i.prototype.init=function(e){var i=this;this.isReversed=e.isReversed||!1,this.intervalMode=null!=e.intervalMode?e.intervalMode:t.All,this.targets=e.targets.map(function(e){return i.getAnimatingTarget(e)})},i.prototype.updateStaggeredAnimation=function(e,i){var n=$(this.viewportEl);if(!i.disabled&&!this.hasAnimatedIn===i.animated){this.hasAnimatedIn=i.animated;for(var o=n.width(),r=n.offset().left,a=this,s=0;s<this.targets.length;s++)!function(e){var i=a.targets[e];if(i.inAnimation!==a.hasAnimatedIn)return"continue";for(var s=n.find(i.targetCssSelector),l=0,u=0;u<s.length;u++){var d=a.isReversed?s.length-u-1:u,c=s.get(d),p=$(c),g=p.offset().left-r,h=p.width();c.style[Modernizr.prefixedCSS("animationName")]="",c.style[Modernizr.prefixedCSS("animationDuration")]=i.animationDuration,c.style[Modernizr.prefixedCSS("animationDelay")]=i.animationInterval.map(function(e){return l*e+"ms"}).join(", "),c.style[Modernizr.prefixedCSS("animationFillMode")]=i.animationFillMode,c.style[Modernizr.prefixedCSS("animationTimingFunction")]=i.animationTimingFunction,c.style[Modernizr.prefixedCSS("animationDirection")]=i.animationDirection,a.intervalMode===t.HorizontalBounds&&(g<-h||g>o)||l++}}(s);for(var l=this,s=0;s<this.targets.length;s++)!function(e){var t=l.targets[e];if(t.inAnimation!==l.hasAnimatedIn)return"continue";for(var i=n.find(t.targetCssSelector),o=0;o<i.length;o++)!function(e){var n=l.isReversed?i.length-e-1:e,o=i.get(n);if(t.animationEndHook){var r=function(){t.animationEndHook(o),o.removeEventListener("animationend",r)};o.addEventListener("animationend",r)}o.style[Modernizr.prefixedCSS("animationName")]=t.animationName}(o)}(s)}},i.prototype.dispose=function(){for(var e=0;e<this.targets.length;e++)for(var t=this.targets[e],i=$(this.viewportEl).find(t.targetCssSelector),n=0;n<i.length;n++){var o=i.get(n);o.style[Modernizr.prefixedCSS("animationName")]="",o.style[Modernizr.prefixedCSS("animationDuration")]="",o.style[Modernizr.prefixedCSS("animationDelay")]="",o.style[Modernizr.prefixedCSS("animationFillMode")]="",o.style[Modernizr.prefixedCSS("animationTimingFunction")]="",o.style[Modernizr.prefixedCSS("animationDirection")]=""}},i}(Disposable);e.BindingBase=i}(e.StaggeredAnimation||(e.StaggeredAnimation={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(t){!function(t){var i=function(){function t(e,t,i){var n=this;this.el=e,this.last=0,this.callback=function(){var e=n._strategy.scroll();n.last!==e&&(n.last=e,n._scrollListener.onScroll(n._direction,e))},e.addEventListener("touchstart",function(){})}return t.prototype.init=function(e){this._scrollListener=e},t.prototype.updateDirection=function(t,i){var n=this;void 0!==this._direction&&$(this.el).off("scroll",this.callback);var o=i===e.ScrollDirection.HORIZONTAL_REVERSED?e.ScrollDirection.HORIZONTAL:i;this._direction=o,this._scrollListener.updateDomScroll=[function(){},function(){}],this._scrollListener.getDomScroll=[function(){return 0},function(){return 0}],void 0!==this._direction&&(this._scrollListener.updateDomScroll[this._direction]=function(e){n.last!==e&&(n.last=n._strategy.scroll(e))},this._scrollListener.getDomScroll[this._direction]=function(){return n.last},this._strategy=this.createScrollStrategy(i),$(this.el).on("scroll",this.callback))},t.prototype.dispose=function(){$(this.el).off("scroll",this.callback)},t.prototype.createScrollStrategy=function(t){return t===e.ScrollDirection.VERTICAL?new n(this.el):t===e.ScrollDirection.HORIZONTAL?new o(this.el):new r(this.el)},t}();t.BindingBase=i;var n=function(){function e(e){this.scrollbar=e}return e.prototype.scroll=function(e){return void 0!==e&&(this.scrollbar.scrollTop=e),this.scrollbar.scrollTop},e}(),o=function(){function e(e){this.scrollbar=e}return e.prototype.scroll=function(e){return void 0!==e&&(this.scrollbar.scrollLeft=e),this.scrollbar.scrollLeft},e}(),r=function(){function e(e){this.scrollbar=e,this.startsFromEnd=!1,this.checkedStartPosition=!1,this.scroll(0)}return e.prototype.scroll=function(e){if(this.checkScrollingType(),this.startsFromEnd)return void 0!==e&&(this.scrollbar.scrollLeft=e),this.scrollbar.scrollLeft;var t=this.scrollbar.scrollWidth-this.scrollbar.clientWidth;return void 0!==e&&(e>t&&(e=t),this.scrollbar.scrollLeft=t-e,0===this.scrollbar.scrollLeft&&(this.scrollbar.scrollLeft=-(t-e))),t-Math.abs(this.scrollbar.scrollLeft)},e.prototype.checkScrollingType=function(){!this.checkedStartPosition&&this.scrollbar.scrollWidth>this.scrollbar.clientWidth&&(this.checkedStartPosition=!0,this.scrollbar.scrollLeft>(this.scrollbar.scrollWidth-this.scrollbar.clientWidth)/2&&(this.startsFromEnd=!0))},e}()}(t.NativeScroll||(t.NativeScroll={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r){var a=e.call(this,t,i,n,o)||this;return a._ve=n,a.init(r),a}return __extends(t,e),t.prototype.update=function(e){},t}(e.BindingBase);e.Binding=t}(e.Animatable||(e.Animatable={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={})),function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r,a,s,l,u){var d=e.call(this,t,i,n)||this;d._ve=n,d._createArgs=r;c=d._createWatcher=TDB.watcherTag(4800663,d,o,d._resolveCreate);o._subscribeToWatchable(c,TDB.UpdatePhase.WriteOnly),d._dataChangedArgs=a;c=d._dataChangedWatcher=TDB.watcherTag(4800663,d,o,d._resolveDataChanged);o._subscribeToWatchable(c,TDB.UpdatePhase.WriteOnly),d._sizeChangedArgs=s;c=d._sizeChangedWatcher=TDB.watcherTag(4800663,d,o,d._resolveSizeChanged);o._subscribeToWatchable(c,TDB.UpdatePhase.WriteOnly),d._isEditChangedArgs=l;c=d._isEditChangedWatcher=TDB.watcherTag(4800663,d,o,d._resolveIsEditChanged);o._subscribeToWatchable(c,TDB.UpdatePhase.WriteOnly),d._settingsChangedArgs=u;var c=d._settingsChangedWatcher=TDB.watcherTag(4800663,d,o,d._resolveSettingsChanged);return o._subscribeToWatchable(c,TDB.UpdatePhase.WriteOnly),d._createWatcher.resolve(),d._dataChangedWatcher.resolve(),d._sizeChangedWatcher.resolve(),d._isEditChangedWatcher.resolve(),d._settingsChangedWatcher.resolve(),d}return __extends(t,e),t.prototype.update=function(e){var t=this;e==TDB.UpdatePhase.WriteOnly&&(t._createWatcher.resolve(),t._dataChangedWatcher.resolve(),t._sizeChangedWatcher.resolve(),t._isEditChangedWatcher.resolve(),t._settingsChangedWatcher.resolve())},t.prototype._resolveCreate=function(e){var t=this,i=t._createArgs.call(t._ve,e);t.updateCreate(e,i)},t.prototype._resolveDataChanged=function(e){var t=this,i=t._dataChangedArgs.call(t._ve,e);t.updateDataChanged(e,i)},t.prototype._resolveSizeChanged=function(e){var t=this,i=t._sizeChangedArgs.call(t._ve,e);t.updateSizeChanged(e,i)},t.prototype._resolveIsEditChanged=function(e){var t=this,i=t._isEditChangedArgs.call(t._ve,e);t.updateIsEditChanged(e,i)},t.prototype._resolveSettingsChanged=function(e){var t=this,i=t._settingsChangedArgs.call(t._ve,e);t.updateSettingsChanged(e,i)},t}(e.BindingBase);e.Binding=t}(e.ContentAgave||(e.ContentAgave={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={})),function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r){var a=e.call(this,t,i,n)||this;a._ve=n,a._embedVideoArgs=r;var s=a._embedVideoWatcher=TDB.watcherTag(4800663,a,o,a._resolveEmbedVideo);return o._subscribeToWatchable(s,TDB.UpdatePhase.WriteOnly),a._embedVideoWatcher.resolve(),a}return __extends(t,e),t.prototype.update=function(e){var t=this;e==TDB.UpdatePhase.WriteOnly&&t._embedVideoWatcher.resolve()},t.prototype._resolveEmbedVideo=function(e){var t=this,i=t._embedVideoArgs.call(t._ve,e);t.updateEmbedVideo(e,i)},t}(e.BindingBase);e.Binding=t}(e.EmbedVideo||(e.EmbedVideo={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={})),function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r){var a=e.call(this,t,i,n)||this;a._ve=n,a._boxShadowArgs=r;var s=a._boxShadowWatcher=TDB.watcherTag(4800663,a,o,a._resolveBoxShadow);return o._subscribeToWatchable(s,TDB.UpdatePhase.WriteOnly),a._boxShadowWatcher.resolve(),a}return __extends(t,e),t.prototype.update=function(e){var t=this;e==TDB.UpdatePhase.WriteOnly&&t._boxShadowWatcher.resolve()},t.prototype._resolveBoxShadow=function(e){var t=this,i=t._boxShadowArgs.call(t._ve,e);t.updateBoxShadow(e,i)},t}(e.BindingBase);e.Binding=t}(e.BoxShadow||(e.BoxShadow={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={})),function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r,a,s,l){var u=e.call(this,t,i,n)||this;u._ve=n,u.init(r),u._scrollSizeArgs=a;d=u._scrollSizeWatcher=TDB.watcherTag(4800663,u,o,u._resolveScrollSize);o._subscribeToWatchable(d,TDB.UpdatePhase.ReadWrite),u._enabledArgs=s;d=u._enabledWatcher=TDB.watcherTag(4800663,u,o,u._resolveEnabled);o._subscribeToWatchable(d,TDB.UpdatePhase.ReadWrite),u._preventFromShowingArgs=l;var d=u._preventFromShowingWatcher=TDB.watcherTag(4800663,u,o,u._resolvePreventFromShowing);return o._subscribeToWatchable(d,TDB.UpdatePhase.ReadWrite),u}return __extends(t,e),t.prototype.update=function(e){var t=this;e==TDB.UpdatePhase.ReadWrite&&(t._scrollSizeWatcher.resolve(),t._enabledWatcher.resolve(),t._preventFromShowingWatcher.resolve())},t.prototype._resolveScrollSize=function(e){var t=this,i=t._scrollSizeArgs.call(t._ve,e);t.updateScrollSize(e,i)},t.prototype._resolveEnabled=function(e){var t=this,i=t._enabledArgs.call(t._ve,e);t.updateEnabled(e,i)},t.prototype._resolvePreventFromShowing=function(e){var t=this,i=t._preventFromShowingArgs.call(t._ve,e);t.updatePreventFromShowing(e,i)},t}(e.BindingBase);e.Binding=t}(e.Scroll||(e.Scroll={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={})),function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r,a){var s=e.call(this,t,i,n)||this;s._ve=n,s.init(r),s._updateArgs=a;var l=s._updateWatcher=TDB.watcherTag(4800663,s,o,s._resolveUpdate);return o._subscribeToWatchable(l,TDB.UpdatePhase.WriteOnly),s._updateWatcher.resolve(),s}return __extends(t,e),t.prototype.update=function(e){var t=this;e==TDB.UpdatePhase.WriteOnly&&t._updateWatcher.resolve()},t.prototype._resolveUpdate=function(e){var t=this,i=t._updateArgs.call(t._ve,e);t.updateUpdate(e,i)},t}(e.BindingBase);e.Binding=t}(e.Monaco||(e.Monaco={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={})),function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r,a){var s=e.call(this,t,i,n)||this;s._ve=n,s.init(r),s._directionArgs=a;var l=s._directionWatcher=TDB.watcherTag(4800663,s,o,s._resolveDirection);return o._subscribeToWatchable(l,TDB.UpdatePhase.WriteOnly),s._directionWatcher.resolve(),s}return __extends(t,e),t.prototype.update=function(e){var t=this;e==TDB.UpdatePhase.WriteOnly&&t._directionWatcher.resolve()},t.prototype._resolveDirection=function(e){var t=this,i=t._directionArgs.call(t._ve,e);t.updateDirection(e,i)},t}(e.BindingBase);e.Binding=t}(e.NativeScroll||(e.NativeScroll={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={})),function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r){var a=e.call(this,t,i,n)||this;return a._ve=n,a.init(r),a}return __extends(t,e),t.prototype.update=function(e){},t}(e.BindingBase);e.Binding=t}(e.ChunkedScroller||(e.ChunkedScroller={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={})),function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r){var a=e.call(this,t,i,n)||this;a._ve=n,a._livingImagePlayerArgs=r;var s=a._livingImagePlayerWatcher=TDB.watcherTag(4800663,a,o,a._resolveLivingImagePlayer);return o._subscribeToWatchable(s,TDB.UpdatePhase.ReadWrite),a}return __extends(t,e),t.prototype.update=function(e){var t=this;e==TDB.UpdatePhase.ReadWrite&&t._livingImagePlayerWatcher.resolve()},t.prototype._resolveLivingImagePlayer=function(e){var t=this,i=t._livingImagePlayerArgs.call(t._ve,e);t.updateLivingImagePlayer(e,i)},t}(e.BindingBase);e.Binding=t}(e.LivingImagePlayer||(e.LivingImagePlayer={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={})),function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r,a){var s=e.call(this,t,i,n)||this;s._ve=n,s.init(r),s._carouselArgs=a;var l=s._carouselWatcher=TDB.watcherTag(4800663,s,o,s._resolveCarousel);return o._subscribeToWatchable(l,TDB.UpdatePhase.ReadWrite),s}return __extends(t,e),t.prototype.update=function(e){var t=this;e==TDB.UpdatePhase.ReadWrite&&t._carouselWatcher.resolve()},t.prototype._resolveCarousel=function(e){var t=this,i=t._carouselArgs.call(t._ve,e);t.updateCarousel(e,i)},t}(e.BindingBase);e.Binding=t}(e.Carousel||(e.Carousel={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={})),function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r,a){var s=e.call(this,t,i,n)||this;s._ve=n,s.init(r),s._staggeredAnimationArgs=a;var l=s._staggeredAnimationWatcher=TDB.watcherTag(4800663,s,o,s._resolveStaggeredAnimation);return o._subscribeToWatchable(l,TDB.UpdatePhase.ReadWrite),s}return __extends(t,e),t.prototype.update=function(e){var t=this;e==TDB.UpdatePhase.ReadWrite&&t._staggeredAnimationWatcher.resolve()},t.prototype._resolveStaggeredAnimation=function(e){var t=this,i=t._staggeredAnimationArgs.call(t._ve,e);t.updateStaggeredAnimation(e,i)},t}(e.BindingBase);e.Binding=t}(e.StaggeredAnimation||(e.StaggeredAnimation={}))}(e.Bindings||(e.Bindings={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryPageSettings,StoryApp;!function(e){!function(e){!function(e){e.autoPlayShortcutIdentifiers=[TDB.ShortcutIdentifier.createShortcutIdentifier("SpaceKey")];var t;!function(e){e[e.NotStarted=0]="NotStarted",e[e.Playing=1]="Playing",e[e.Paused=2]="Paused",e[e.Stopped=3]="Stopped"}(t=e.AutoPlayState||(e.AutoPlayState={}));var i;!function(e){e[e.StartButtonClick=0]="StartButtonClick",e[e.StartAutomatically=1]="StartAutomatically"}(i=e.AutoPlayStartType||(e.AutoPlayStartType={}));var n;!function(e){e[e.StopButtonClick=0]="StopButtonClick",e[e.BackToAuthoring=1]="BackToAuthoring",e[e.EndOfSwayReached=2]="EndOfSwayReached",e[e.ShortcutKeyPress=3]="ShortcutKeyPress"}(n=e.AutoPlayStopType||(e.AutoPlayStopType={}));var o;!function(e){e[e.PauseButtonClick=0]="PauseButtonClick",e[e.WindowResize=1]="WindowResize",e[e.HandledMouseClick=2]="HandledMouseClick",e[e.HandledMouseDoubleClick=3]="HandledMouseDoubleClick",e[e.AudioPlayed=4]="AudioPlayed",e[e.VideoPlayed=5]="VideoPlayed",e[e.AzureVideoPlaying=6]="AzureVideoPlaying",e[e.YouTubeVideoPlaying=7]="YouTubeVideoPlaying",e[e.ShortcutKeyPress=8]="ShortcutKeyPress",e[e.Transient=9]="Transient"}(o=e.AutoPlayPauseType||(e.AutoPlayPauseType={}));var r=function(e){function r(i,n){var o=e.call(this,i)||this;return o.autoPlayAvailable=TDB.watcherTag(596476295,o,o,function(e){return o.isAutoPlayAvailable(e)}),o.enabled=TDB.watcherTag(596476296,o,o,function(e){return o.isAutoplayEnabled(e)}),o.currentStory=n.currentStory,o.isEditMode=TDB.watchableOption(o,n.isEditMode),o.isUpdateInProgress=TDB.watchableOption(o,n.isUpdateInProgress),o.urlHelper=n.urlHelper,o.eventHandler=TDB.watchableOption(o,n.eventHandler),o.eventListener=n.eventListener,o.state=TDB.watchable(o,t.NotStarted),o.speed=TDB.watchable(o,5),o.shouldLoop=TDB.watchable(o,!0),o.advanceNotifier=TDB.notifierTag(596476297,o),o}return __extends(r,e),r.prototype.dispose=function(){e.prototype.dispose.call(this),this.inAutoplay()&&this.cancelScheduledTimeout()},r.prototype.isAutoPlayAvailable=function(e){if(CommonSettings.ClientApp===AppType.iOSApp)return!1;if(this.isEditMode.getWatchedValue(e)||this.urlHelper.isAccessibilityView(e))return!1;if(CommonSettings.IsPaidUser)return!0;var t=this.currentStory.getRenderModel(e).getAutoPlaySettings(e);return!!t&&t.getStartAutomatically(e)},r.prototype.isAutoplayEnabled=function(e){return!!this.isAutoPlayAvailable(e)&&!this.isUpdateInProgress.getWatchedValue(e)},r.prototype.start=function(e){var i=this;this.inAutoplay()?TDB.raiseRecoverableError("Tried to start auto-play that was in state: "+this.state.getValue()):(StoryLog.StructuredTraceTag(20510561,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Starting auto-play",{type:e.toString(),speed:this.getSpeed().toString(),loop:this.getLoop()?"true":"false",storyId:StoryPageSettings.StoryId}),this.scheduleTimeout(this.getSpeedInMs()),this.msPassedInCurrentTimeout=0,TDB.applyUpdate(function(){return i.state.setValue(t.Playing)}),this.eventListener.onAutoPlayStarted())},r.prototype.stop=function(e){var i=this;this.inAutoplay()?(StoryLog.StructuredTraceTag(20510562,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Stopping auto-play",{type:e.toString()}),this.cancelScheduledTimeout(),TDB.applyUpdate(function(){return i.state.setValue(t.Stopped)}),this.eventListener.onAutoPlayStopped()):TDB.raiseRecoverableError("Tried to stop auto-play that wasn't active")},r.prototype.resume=function(){var e=this;this.state.getValue()===t.Paused?(StoryLog.TraceTag(20510563,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Resuming auto-play"),this.scheduleTimeout(this.getSpeedInMs()-this.msPassedInCurrentTimeout),TDB.applyUpdate(function(){return e.state.setValue(t.Playing)})):TDB.raiseRecoverableError("Tried to resume auto-play that wasn't previously paused. Current auto-play state: "+this.state.getValue())},r.prototype.pause=function(e){var i=this;this.state.getValue()===t.Playing?(StoryLog.StructuredTraceTag(20510592,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Pausing auto-play",{type:e.toString()}),this.msPassedInCurrentTimeout+=Date.now()-this.lastTimeoutSchedule,this.cancelScheduledTimeout(),TDB.applyUpdate(function(){return i.state.setValue(t.Paused)})):TDB.raiseRecoverableError("Tried to pause auto-play that wasn't active. Current auto-play state: "+this.state.getValue())},r.prototype.getState=function(e){return this.state.getWatchedValue(e)},r.prototype.inAutoplay=function(e){var i=this.state.getWatchedValue(e);return i===t.Playing||i===t.Paused},r.prototype.setLoop=function(e){var t=this;this.shouldLoop.getValue()!==e&&(StoryLog.StructuredTraceTag(20510593,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Changing auto-play loop",{oldValue:this.shouldLoop.getValue()?"true":"false",newValue:e?"true":"false"}),TDB.applyUpdate(function(){return t.shouldLoop.setValue(e)}))},r.prototype.getLoop=function(e){return this.shouldLoop.getWatchedValue(e)},r.prototype.setSpeed=function(e){var i=this;if(this.speed.getValue()!==e){StoryLog.StructuredTraceTag(20510594,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Changing auto-play speed",{oldValue:this.speed.getValue().toString(),newValue:e.toString()});var n=this.getState()===t.Playing;n&&this.pause(o.Transient),TDB.applyUpdate(function(){return i.speed.setValue(e)}),n&&this.resume()}},r.prototype.getSpeed=function(e){return this.speed.getWatchedValue(e)},r.prototype.getSpeedInMs=function(){return 1e3*this.getSpeed()},r.prototype.subscribeToAdvanceNotifier=function(e){return e.watch(this.advanceNotifier)},r.prototype.scheduleTimeout=function(e){var t=this;this.cancelScheduledTimeout(),this.timeout=platform.setTimeout(function(){return t.onAutoAdvanceTimeout()},e),this.lastTimeoutSchedule=Date.now()},r.prototype.cancelScheduledTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.lastTimeoutSchedule=void 0},r.prototype.onAutoAdvanceTimeout=function(){this.handleAutoAdvanceTimeout(),this.getState()===t.Playing&&this.scheduleTimeout(this.getSpeedInMs()),this.msPassedInCurrentTimeout=0},r.prototype.handleAutoAdvanceTimeout=function(){var e=this;if(this.enabled.getValue()){var t=this.eventHandler.getValue();t?t.handleAutoAdvanceNextEvent()?(StoryLog.TraceTag(20510595,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Auto-play Next event handled"),TDB.applyUpdate(function(){return e.advanceNotifier.notify()})):this.shouldLoop.getValue()?(StoryLog.TraceTag(20510596,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Auto-play Reset event handled"),t.handleAutoAdvanceResetEvent(),TDB.applyUpdate(function(){return e.advanceNotifier.notify()})):(StoryLog.TraceTag(20510597,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Auto-advance event unhandled, stopping auto-play"),this.stop(n.EndOfSwayReached)):TDB.raiseRecoverableError("Event handler instance doesn't exist")}},r.prototype.applySettings=function(e){if(!this.autoPlaySettingsApplied&&e&&e.getStartAutomatically()&&!this.inAutoplay()){var t=e.getSpeed(),n=e.getLoop();StoryLog.StructuredTraceTag(20510598,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Applying auto-play settings",{speed:t.toString(),loop:n?"true":"false"}),this.setSpeed(t),this.setLoop(n),this.start(i.StartAutomatically)}this.autoPlaySettingsApplied=!0},r.prototype.reset=function(){var e=this;this.cancelScheduledTimeout(),this.msPassedInCurrentTimeout=0,TDB.applyUpdate(function(){return e.state.setValue(t.NotStarted)}),this.autoPlaySettingsApplied=!1},r.prototype.handleShortcutKey=function(e){return this.handleKeyboardEvent(e)},r.prototype.handleKeyboardEvent=function(e){return e.keyCode===KeyCodeType.SpaceKey&&this.getState()===t.Playing?(this.pause(o.ShortcutKeyPress),TDB.EventPropagation.PreventDefault):e.keyCode===KeyCodeType.EscapeKey&&this.inAutoplay()?(this.stop(n.ShortcutKeyPress),TDB.EventPropagation.PreventDefault):TDB.EventPropagation.Bubble},r}(Disposable);e.AutoPlayDriver=r}(e.Common||(e.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(e,i){var n=t.call(this,e,{features:TDB.ControlSetFeatures.Isolated,visible:i.visible,role:Aria.Roles.Group,description:Resources.AutoplaySettingsPopupLabel,getControllingElement:i.getControllingElement})||this;return n.args=i,n}return __extends(i,t),i.prototype.wrapperAttrArgs=function(e){return this.getAriaAttributes(e)},i.prototype.wrapperSlideVisibleInitArgs=function(){return!1},i.prototype.wrapperSlideVisibleArgs=function(e){return{visible:e.watchValue(this.args.visible)&&this.args.autoPlayDriver.enabled.getWatchedValue(e),done:this.onPopupVisible}},i.prototype.autoplaySettingsHeadingTextArgs=function(){return Resources.ConsumptionAutoplaySettingsHeading},i.prototype.settingsArgs=function(){var t={autoPlayDriver:this.args.autoPlayDriver};return new TDB.ChildArgs(e.ConsumptionAutoplaySettingsCommonVE,t)},i.prototype.mouseClicked=function(e){return TDB.EventPropagation.Bypass},i}(e.PopupBaseVE);e.AutoplaySettingsPopupVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(e){function t(t,i){var n=e.call(this,t,TDB.ControlSetFeatures.Isolated)||this;return n.viewModel=i,n}return __extends(t,e),t.prototype.visibleArgs=function(e){return this.viewModel.inDom.getWatchedValue(e)},t.prototype.eventWrapperEventsInitArgs=function(){return this.viewModel.eventWrapperEventsInitArgs()},t.prototype.controlsContainerClassNameArgs=function(e){return this.viewModel.controlsContainerClassNameArgs(e)},t.prototype.controlsContainerFadeVisibleInitArgs=function(){return this.viewModel.controlsContainerFadeVisibleInitArgs()},t.prototype.controlsContainerFadeVisibleArgs=function(e){return this.viewModel.controlsContainerFadeVisibleArgs(e,this.isEntered.bind(this))},t.prototype.resumePauseButtonArgs=function(e){return this.viewModel.resumePauseButtonArgs(e)},t.prototype.resumePauseButtonWrapperClassNameArgs=function(e){return this.viewModel.resumePauseButtonWrapperClassNameArgs(e)},t.prototype.stopButtonArgs=function(){return this.viewModel.stopButtonArgs()},t.prototype.stopButtonWrapperClassNameArgs=function(e){return this.viewModel.stopButtonWrapperClassNameArgs(e)},t.prototype.settingsButtonArgs=function(){return this.viewModel.settingsButtonArgs()},t.prototype.settingsButtonWrapperClassNameArgs=function(e){return this.viewModel.settingsButtonWrapperClassNameArgs(e)},t.prototype.getAutoplaySettingsVisibleWatcher=function(){return this.viewModel.getAutoplaySettingsVisibleWatcher()},t.prototype.settingsPopupArgs=function(){return this.viewModel.settingsPopupArgs()},t.prototype.onFocusedElementRemoval=function(t){this.viewModel.onFocusedElementRemoval(t,e.prototype.onFocusedElementRemoval.bind(this))},t}(e.RegionViewElement);e.AutoplayControlButtonsVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.View.Common.FRE,o=function(o){function r(t){var i=o.call(this,t.storyPage)||this;return i.args=t,i.inDom=TDB.watchableOption(i,t&&t.inDom?t.inDom:void 0,!0),i.autoplaySettingsPopupVisible=TDB.watchableTag(596457550,i,!1),i.mouseEntered=TDB.watchableTag(596457551,i,!1),i.mouseLeaveTimer=new e.Utilities.ScheduledTimeout(i,3e3),i.autoPlayStartTimeoutNotifier=TDB.notifierTag(596457552,i),i.autoPlayStartTimer=new e.Utilities.ScheduledTimeout(i,15e3),i}return __extends(r,o),r.prototype.visibleArgs=function(e){return this.inDom.getWatchedValue(e)},r.prototype.eventWrapperEventsInitArgs=function(){return{mouseenter:this.mouseEnter.bind(this),mouseleave:this.mouseLeave.bind(this)}},r.prototype.controlsContainerClassNameArgs=function(e){return"Mobile"===CommonSettings.ClientDevice?"autoplayControlsContainerMobile":"autoplayControlsContainer"},r.prototype.controlsContainerFadeVisibleInitArgs=function(){return{visibleInit:!0,transitionOut:"opacity 0.7s ease"}},r.prototype.controlsContainerFadeVisibleArgs=function(e,t){return{visible:this.calculateFadeVisibility(e,t)}},r.prototype.calculateFadeVisibility=function(e,i){var o=this,r=this.args.autoPlayDriverProvider.get();return!!n.getCalloutManager().isActiveCallout(e,n.CalloutID.AutoPlaySettingsButton)||(r.getState(e)!==t.Common.AutoPlayState.Playing?(this.autoPlayStartTimer.clear(),this.autoPlayStartTimerStarted=!1,!0):(r.subscribeToAdvanceNotifier(e),this.autoPlayStartTimerStarted?!!this.mouseEntered.getWatchedValue(e)||(!!this.autoplaySettingsPopupVisible.getWatchedValue(e)||!!i(e)):(this.autoPlayStartTimer.set(function(){TDB.applyUpdate(function(){return o.autoPlayStartTimeoutNotifier.notify()})}),this.autoPlayStartTimerStarted=!0,e.watch(this.autoPlayStartTimeoutNotifier),!0)))},r.prototype.resumePauseButtonArgs=function(e){var n=this;if(this.args.autoPlayDriverProvider.get().getState(e)===t.Common.AutoPlayState.Paused){var o={buttonId:ClientAction.ButtonId.Autoplay_Resume,click:this.resumeButtonClicked,context:this,cssClass:{value:"autoplayControlButton"},description:{value:Resources.AutoplayResumeButtonDescription},tooltip:{value:Resources.AutoplayResumeButtonTooltip},fontIconName:{value:FontIcons.AutoplayResumeIcon},fontIconSizeClass:FontIcons.AutoplayResumeIconSize,enabled:{watchable:this.args.autoPlayDriverProvider.get().enabled}};return new TDB.ChildArgs(i.GlyphButtonVE,o,function(e){return n.resumePauseButton=e})}var r={buttonId:ClientAction.ButtonId.Autoplay_Pause,click:this.pauseButtonClicked,context:this,cssClass:{value:"autoplayControlButton"},description:{value:Resources.AutoplayPauseButtonDescription},tooltip:{value:Resources.AutoplayPauseButtonTooltip},fontIconName:{value:FontIcons.AutoplayPauseIcon},fontIconSizeClass:FontIcons.AutoplayPauseIconSize,enabled:{watchable:this.args.autoPlayDriverProvider.get().enabled}};return new TDB.ChildArgs(i.GlyphButtonVE,r,function(e){return n.resumePauseButton=e})},r.prototype.resumePauseButtonWrapperClassNameArgs=function(e){return this.getAutoplayButtonWrapperClassName()},r.prototype.stopButtonArgs=function(){var e=this,t={buttonId:ClientAction.ButtonId.Autoplay_Stop,click:this.stopButtonClicked,context:this,cssClass:{value:"autoplayControlButton"},description:{value:Resources.AutoplayStopButtonDescription},tooltip:{value:Resources.AutoplayStopButtonTooltip},fontIconName:{value:FontIcons.AutoplayStopIcon},fontIconSizeClass:FontIcons.AutoplayStopIconSize,enabled:{watchable:this.args.autoPlayDriverProvider.get().enabled}};return new TDB.ChildArgs(i.GlyphButtonVE,t,function(t){return e.stopButton=t})},r.prototype.stopButtonWrapperClassNameArgs=function(e){return this.getAutoplayButtonWrapperClassName()},r.prototype.settingsButtonArgs=function(){var e=this,t=n.CalloutID.AutoPlaySettingsButton,o={calloutBoxClassName:"AutoPlaySettingsButton-callout",calloutTapClassName:"AutoPlaySettingsButton-tap-callout",calloutWrapperClassName:"AutoPlaySettingsButton-callout-wrapper",headerText:{value:Resources.FirstRunAutoPlaySettingsButtonHeader},readerText:Resources.FirstRunAutoPlaySettingsButtonReader,beakPosition:i.BeakPosition.BottomRight,calloutID:t,inAnimation:"none",delay:n.getDelayForCallout(t,n.FirstRunType.Default)},r={buttonId:ClientAction.ButtonId.Autoplay_Settings,click:this.settingsButtonClicked,context:this,cssClass:{value:"autoplayControlButton"},description:{value:Resources.AutoplaySettingsButtonDescription},tooltip:{value:Resources.AutoplaySettingsButtonTooltip},fontIconArgs:{value:{fontIconName:{value:FontIcons.AutoplaySettingsIcon},fontIconSizeClass:FontIcons.AutoplaySettingsIconSize,fontIconWrapperClass:{value:"autoplaySettingsButtonIconWrapper"}}},hasPopup:!0,calculateChecked:function(t){return e.calculateSettingsButtonChecked(t)},calloutArgs:{value:o},enabled:{watchable:this.args.autoPlayDriverProvider.get().enabled}};return new TDB.ChildArgs(i.ToggleButtonVE,r,function(t){return e.settingsButton=t})},r.prototype.calculateSettingsButtonChecked=function(e){return this.getAutoplaySettingsVisibleWatcher().getWatchedValue(e)&&this.args.autoPlayDriverProvider.get().enabled.getWatchedValue(e)},r.prototype.settingsButtonWrapperClassNameArgs=function(e){return this.getAutoplayButtonWrapperClassName()},r.prototype.getAutoplayButtonWrapperClassName=function(){return"Mobile"===CommonSettings.ClientDevice?"autoPlayControlButtonWrapperMobile":"autoPlayControlButtonWrapper"},r.prototype.getAutoplaySettingsVisibleWatcher=function(){return this.autoplaySettingsPopupVisible},r.prototype.pauseButtonClicked=function(){return this.args.autoPlayDriverProvider.get().pause(t.Common.AutoPlayPauseType.PauseButtonClick),TDB.EventPropagation.Bypass},r.prototype.resumeButtonClicked=function(){return this.args.autoPlayDriverProvider.get().resume(),this.args.storyPage.previewVE.activate(),TDB.EventPropagation.Bypass},r.prototype.stopButtonClicked=function(){return this.args.autoPlayDriverProvider.get().stop(t.Common.AutoPlayStopType.StopButtonClick),TDB.EventPropagation.Bypass},r.prototype.settingsButtonClicked=function(){var e=this;return TDB.applyUpdate(function(){e.autoplaySettingsPopupVisible.setValue(!e.autoplaySettingsPopupVisible.getValue())}),n.FirstRunTriggers.autoPlaySettingsButtonClicked(),TDB.EventPropagation.Bypass},r.prototype.settingsPopupArgs=function(){var e=this,t={visible:this.autoplaySettingsPopupVisible,autoPlayDriver:this.args.autoPlayDriverProvider.get(),getControllingElement:function(){return e.settingsButton}};return new TDB.ChildArgs(i.AutoplaySettingsPopupVE,t,function(t){return e.settingsPopup=t})},r.prototype.mouseEnter=function(e){var t=this;return this.mouseLeaveTimer.clear(),TDB.applyUpdate(function(){return t.mouseEntered.setValue(!0)}),!1},r.prototype.mouseLeave=function(e){var t=this;return this.mouseLeaveTimer.set(function(){return TDB.applyUpdate(function(){return t.mouseEntered.setValue(!1)})}),!1},r.prototype.onFocusedElementRemoval=function(e,t){var i=this;platform.setImmediate(function(){i.activateConsumptionSettingsButton()||t(e)})},r.prototype.activateConsumptionSettingsButton=function(){var e=this.args.storyPage.getConsumptionAppBar();return!!e&&e.activateButton(i.AppBarButtonLabel.ConsumptionSettings)},r}(Disposable);i.AutoPlayControlButtonsViewModel=o}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(e,i){var n=t.call(this,e)||this;return n.args=i,n}return __extends(i,t),i.prototype.slidebarArgs=function(){for(var t=[],n=i.timingValues.length,o=0;o<n;o++){var r=i.timingValues[o];t[o]={text:ResourceManager.ResolveString(Resources.AutoplayTimingSlidebarValue,[r]),value:r,hidden:0!==o&&o!==n-1}}var a={points:t,onSliderChange:this.onTimingSlidebarChange,position:TDB.watcher(this,this,this.getTiming),cssOverride:"consumptionAutoplaySlidebarWrapper",disabledCssOverride:"consumptionAutoplaySlidebarDisabledWrapper",handleWidth:30,description:Resources.AutoplayTimingSlidebarDescription,continuousMode:!1,showTooltip:!0,showTicks:!0,enabled:{watchable:this.args.autoPlayDriver.enabled}};return new TDB.ChildArgs(e.SlidebarVE,a)},i.prototype.onTimingSlidebarChange=function(e){this.args.autoPlayDriver.setSpeed(e)},i.prototype.getTiming=function(e){return this.args.autoPlayDriver.getSpeed(e)},i.prototype.loopCheckboxArgs=function(){var t=this,i=new TDB.ChildArgs(e.SpanMessageVE,{message:Resources.AutoplayLoopCheckboxMessage}),n={buttonId:ClientAction.ButtonId.Autoplay_ConsumptionLoop,context:this,checkedWatchable:TDB.watcher(this,this,this.getLoop),click:this.loopCheckboxClicked,cssClass:{compute:new TDB.ComputedOptionArgs(this,function(e){return t.getLoopCheckboxCssClass(e)})},richTextElementsUnchecked:[i],richTextElementsChecked:[i],role:Aria.Roles.Checkbox,fontIconName:{value:FontIcons.CheckboxFontIcon},fontIconSize:FontIcons.CheckboxFontIconSize,checkedIconWrapperClass:{compute:new TDB.ComputedOptionArgs(this,function(e){return t.getLoopCheckboxIconWrapperClass(e,!0)})},uncheckedIconWrapperClass:{compute:new TDB.ComputedOptionArgs(this,function(e){return t.getLoopCheckboxIconWrapperClass(e,!1)})},enabled:{watchable:this.args.autoPlayDriver.enabled}};return new TDB.ChildArgs(e.RichCheckboxVE,n)},i.prototype.isLoopCheckboxEnabled=function(e){return this.args.autoPlayDriver.enabled.getWatchedValue(e)},i.prototype.getLoopCheckboxCssClass=function(e){return"consumptionAutoplayLoopCheckbox"+(this.isLoopCheckboxEnabled(e)?"":"Disabled")+"Wrapper"},i.prototype.getLoopCheckboxIconWrapperClass=function(e,t){return"consumptionAutoplayLoop"+(t?"Checked":"Unchecked")+(this.isLoopCheckboxEnabled(e)?"":"Disabled")},i.prototype.loopCheckboxClicked=function(e){var t=this.loopCheckbox.getChecked();return this.args.autoPlayDriver.setLoop(!t),TDB.EventPropagation.Bypass},i.prototype.getLoop=function(e){return this.args.autoPlayDriver.getLoop(e)},i.timingValues=[3,5,10,15,20,25,30,35,40,45,50,55,60],i}(TDB.FocusableViewElement);e.ConsumptionAutoplaySettingsCommonVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){function n(){return r||(r=e.Common.PageCompartmentManager.getInstance().createAccessor("FontLoader")),r}function o(){return"function"==typeof FontFace&&!!document.fonts&&!!document.fonts.load}var r;i.currentFontLoader=n,i.modernFontLoaderAvailable=o;var a=function(i){function n(){var e=i.call(this)||this;return e.fontFaceNotifier=TDB.notifierTag(596476251,e),e.canRegisterFonts=!1,e.fontStatusDictionary=TDB.statefulWatcherTag(596476252,e,null,e.registerFonts),e.enableLoggingWhenFontFilesLoad(),e}return __extends(n,i),n.prototype.shouldUseSystemFallback=function(e,t){var i=e.getFileName(t),n=this.fontStatusDictionary.getWatchedValue(t);return!(!n||!n[i])&&n[i].useSystemFallback.getWatchedValue(t)},n.prototype.isTextVisible=function(e,t){var i=e.getFileName(t),n=this.fontStatusDictionary.getWatchedValue(t);return!n||!n[i]||n[i].visible.getWatchedValue(t)},n.prototype.notifyFontChange=function(){this.fontFaceNotifier.notify(),this.canRegisterFonts=!0},n.prototype.registerFonts=function(i,n){var o=this;if(void 0===i&&(i={}),e.Utilities.weblog("fonts","BEGIN FONT REGISTRATION"),n.watch(this.fontFaceNotifier),!this.canRegisterFonts)return null;e.Utilities.weblog("fonts","  Previously registered "+Object.keys(i||{}).length+" fonts");var r={};return t.ViewElements.TextUtilities.getRenderModelTextStyles(n).forEach(function(t){var a=t.getFileName(n);i&&i[a]?(e.Utilities.weblog("fonts","  "+a+" - Copying status from last time."),r[a]=i[a]):r[a]||(r[a]=o.registerFont(t,n))}),e.Utilities.weblog("fonts","END FONT REGISTRATION"),r},n.prototype.dispose=function(){i.prototype.dispose.call(this),this.fontStatusDictionary.dispose()},n.prototype.setInitialTimeout=function(t,i){var n=this;e.Utilities.weblog("fonts","  "+i+" - Setting timeout until fallback"),t.timeout=platform.setTimeout(function(){e.Utilities.weblog("fonts",i+" - Font took too long to load, falling back."),StoryLog.TraceTag(596453283,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Font data loading taking a long time for '"+i+"'"),n.displayFallback(t,i)},3e3)},n.prototype.displayFallback=function(t,i){this.clearTimeout(t,i),t.visible.getValue()?e.Utilities.weblog("fonts","Tried to display fallback when text was already visible."):TDB.applyUpdate(function(){e.Utilities.weblog("fonts",i+" - Displaying fallback font"),t.useSystemFallback.setValue(!0),t.visible.setValue(!0)},TDB.Justification.InitialConversion)},n.prototype.displayLoadedFont=function(t,i){this.clearTimeout(t,i),TDB.applyUpdate(function(){e.Utilities.weblog("fonts",i+" - Displaying loaded font"),t.visible.setValue(!0),t.useSystemFallback.setValue(!1)},TDB.Justification.InitialConversion)},n.prototype.clearTimeout=function(t,i){e.Utilities.weblog("fonts",i+" - Clearing timeout"),-1!==t.timeout&&(clearTimeout(t.timeout),t.timeout=-1)},n.prototype.enableLoggingWhenFontFilesLoad=function(){if(-1!==e.Utilities.query.fetch("weblog").indexOf("fonts")&&window.performance&&window.performance.getEntriesByType){var t=0;setInterval(function(){var i=window.performance.getEntriesByType("resource").filter(function(e){return e.name.includes(".woff")});i.length>t&&(t++,e.Utilities.weblog("fonts","Another font was loaded: "+i[t-1].name))},100)}},n.prototype.areFontsSuccessfullyLoaded=function(){var e=this.fontStatusDictionary.getValue();if(!e)return!1;for(var t in e)if(!0===e[t].useSystemFallback.getValue()||!1===e[t].visible.getValue())return!1;return!0},n}(Disposable);i.FontLoader=a;!function(e){e[e.normal=0]="normal",e[e.italic=1]="italic",e[e.oblique=2]="oblique"}(i.FontStyle||(i.FontStyle={}));var s=function(){function e(){this.timeout=-1,this.useSystemFallback=TDB.watchableTag(596476253,this,!1),this.visible=TDB.watchableTag(596476254,this,!1)}return e}();i.FontStatus=s}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.Model.RM,o=function(o){function r(){var t=o.call(this)||this;return e.Utilities.weblog("fonts","Using the API font loader"),t}return __extends(r,o),r.prototype.registerFont=function(n,o){var r=this,a=t.ViewElements.TextUtilities.getFontFamilyForTextStyle(n,o),s=t.ViewElements.TextUtilities.modelStyleToFontStyle(n.getStyle(o));e.Utilities.weblog("fonts","  "+a+"-"+s+" - Registering font, family - style");var l=new i.FontStatus;this.setInitialTimeout(l,a);var u;try{u=document.fonts.load(this.textStyleToCssString(n,o))}catch(e){}return u?(u.then(function(t){e.Utilities.weblog("fonts",a+" - Promise success"),r.displayLoadedFont(l,a)},function(t){e.Utilities.weblog("fonts",a+" - Promise error"),r.displayFallback(l,a)}),l):(StoryLog.TraceTag(596121167,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.error,"ApiFontLoader is not working correctly on this browser"),this.displayLoadedFont(l,a),l)},r.prototype.textStyleToCssString=function(i,o){return n.FontStyle[i.getStyle(o)].toLowerCase()+" "+t.ViewElements.TextUtilities.toCSSFontWeight(i.getWeight(o)).toString()+" "+e.Utilities.toPxStr(UX.getAdjustedFontSize(i.getSize(o)))+' "'+t.ViewElements.TextUtilities.getFontFamilyForTextStyle(i,o)+'"'},r}(i.FontLoader);i.ApiFontLoader=o}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){function n(e,t,n){var o=document.createElement("span");return o.textContent=n,o.style.fontFamily=e,o.style.fontStyle=i.FontStyle[t],o.style.position="absolute",o.style.top="-10000px",o.style.visibility="hidden",o.style.fontSize="250px",o.style.fontVariant="normal",o.style.fontWeight="normal",o.style.letterSpacing="0px",o}function o(e,t,i){return{one:n(e+",Arial,Helvetica,sans-serif",t,i),two:n(e+",'Courier New',Courier,monospace",t,i)}}var r=function(n){function o(){var t=n.call(this)||this;return e.Utilities.weblog("fonts","Using the polling font loader"),t}return __extends(o,n),o.prototype.registerFont=function(e,n){var o=this,r=t.ViewElements.TextUtilities.getFontFamilyForTextStyle(e,n),s=t.ViewElements.TextUtilities.modelStyleToFontStyle(e.getStyle(n)),l=new i.FontStatus;this.setInitialTimeout(l,r);var u=new a(r,s,e.getTestString(n)),d=0,c=function(){d++,u.isLoaded()?(u.dispose(),o.displayLoadedFont(l,r)):l.timeout=platform.setTimeout(c,100)};return c(),l},o}(i.FontLoader);i.PollingFontLoader=r;var a=function(){function e(e,t,i){this.ruler=o(e,t,i),this.fontFamily=e;var n=document.body;n?(n.appendChild(this.ruler.one),n.appendChild(this.ruler.two)):StoryLog.TraceTag(596476228,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"document.body not defined when attempting to measure font load")}return e.prototype.isLoaded=function(){return this.ruler.one.clientWidth===this.ruler.two.clientWidth},e.prototype.dispose=function(){var e=this.ruler.one.parentNode;e&&e===document.body&&document.body.removeChild(this.ruler.one);var t=this.ruler.two.parentNode;t&&t===document.body&&document.body.removeChild(this.ruler.two)},e}()}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function n(){}return n.navigateTo=function(e,t,i){if(t===e.getInteractionEngine().getInteractionModel().getStartNode().id)return!0;var o=n.navigateToWorker(e,t,i);return StoryLog.StructuredTraceTag(596476165,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,"navigateTo invoked",{"callerMessage: ":i.callerMessage?i.callerMessage:"","navigateTo result: ":o.toString()}),o},n.navigateToWorker=function(i,o,r){if(!o)return!1;var a=i.getInteractionEngine(),s=e.Utilities.sequence(e.AnimationHelper.logSequenceError),l={visitedEdgeIds:[],edgeFollowedListenerHandle:void 0,exitAnimationSequences:void 0},u=n.getRootContainerId(a);return s.run(function(){l.exitAnimationSequences=a.actor().getExitAnimations(),a.getClientState().isNavigating=!0,a.actor().reset(r.resetDescendants),l.edgeFollowedListenerHandle=i.addEdgeFollowedListener(function(e){e&&l.visitedEdgeIds.push(e.id)})}),r.snapScene&&!r.supressFading&&s.run(function(){a.actor()&&(a.getAnimationEngine().hideOutput(u),a.actor().setFastForwardState(!0))}),!!n.follow(a,s,l,o,r.snapScene,r.refreshNodes)&&(r.snapScene&&!r.supressFading&&(s.waitfor(function(){return!a.actor()||(a.getAnimationEngine().forceTick(t.NavigationHelper.animationClockAdvanceAmount),null!==a.actor().findCurrentNode())},0),s.run(function(){a.getAnimationEngine().showOutput(u)})),s.run(function(){a.actor()&&(a.getClientState().isNavigating=!1,a.actor().setFastForwardState(!1),a.getTriggerManager().startDelayTimers(!1)),i.removeEdgeFollowedListener(l.edgeFollowedListenerHandle)}),s.start(),!0)},n.getRootContainerId=function(e){var i=e.getInteractionModel().keyFrames.getCollection().firstOrDefault(function(e){return ArrayExtensions.contains(t.rootKeyframeTypes,e.getType())});return i?i.layoutElements.getCollection()[0].id:null},n.getRefreshedStartNodeId=function(e,t){var i=e.getStartNodeId();if(!i)return null;var n=null;return t&&(n=t[i]),null!=n?n.id:i},n.getActorNodes=function(e,t){return t.filter(function(t){var i=t.getStartState();return e.getStartNodeId()===t.id||i&&e.getStartNodeId()===i.id})},n.follow=function(o,r,a,s,l,u){var d=o.getInteractionModel().nodes.getCollection();if(!r||!s)return!1;var c=o.actor();if(!c)return!1;var p=u?c.getImmediatesMap():null,g=t.createAtlas(c.getImmediateNode(),p);if(!g)return!1;var h=g.directionsTo(s);if(!h)return!1;o.waitForExecutingAnimations(r);var y=c.getCurrentNode();if(!y)return!1;for(var m=0;m<h.targets.length;m++){var f=function(e){var s=h.targets[e];if(!s.edge){if(c=c.getChildActorsOfNode(y).firstOrDefault(function(e){return n.getRefreshedStartNodeId(e,p)===s.target.id})){var u=n.getRefreshedStartNodeId(c,p);if(!(y=d.firstOrDefault(function(e){return e.id===u})))return StoryLog.TraceTag(596476166,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Unable to locate actor start node with id '"+c.getStartNodeId()+"'",null),{value:!1}}return r.run(function(){a.exitAnimationSequences=void 0}),"continue"}y.edges.getCollection().some(function(e){var t=e.getBehaviors();return t.has(i.EdgeBehaviors.PrimaryNavigationNext)||t.has(i.EdgeBehaviors.PrimaryNavigationPrevious)})&&c.markNodeAsDirty(y),o.addEdgeToSequence(r,new t.Handle(c),s.edge,a,l),y=s.target}(m);if("object"==typeof f)return f.value}return e.Utilities.weblog("traversal","following edges: "+h.targets.map(function(e){return e.edge?"edge: "+e.edge.id+" ":"child fsm: "+e.target.id+" "}).join(", ")),!0},n.findOwningActor=function(e,t){var i=e.getInteractionEngine().actor();return i?i.getOwningActor(t):null},n.getParentNode=function(e,t){return e?ArrayExtensions.firstOrDefault(t,function(t){return t.childStartStates.getCollection().some(function(t){return t.id===e.id||e.getStartState()&&t.id===e.getStartState().id})}):null},n.navigateToFsmNodeById=function(i,o,r){var a=i.getInteractionModel().nodes.getCollection(),s=new t.Handle(i.getInteractionEngine()),l=e.Utilities.sequence(e.AnimationHelper.logSequenceError),u={visitedEdgeIds:[],edgeFollowedListenerHandle:void 0,exitAnimationSequences:void 0},d=a.firstOrDefault(function(e){return e.id===o});if(!d)return!1;var c=n.findOwningActor(i,d);if(!c)return!1;var p=c.getCurrentNode();if(!p)return!1;if(p.id===o)return!0;l.run(function(){return u.edgeFollowedListenerHandle=i.addEdgeFollowedListener(function(e){e&&u.visitedEdgeIds.push(e.id)})}),l.waitfor(function(){var e=s.get();if(!e)return!0;var t=e.actor();return!t||null!==t.getCurrentNode()},0),l.run(function(){var e=s.get();e&&(e.getClientState().isNavigating=!0)}),r&&l.run(function(){var e=s.get();e&&e.getAnimationEngine().hideOutput()});var g=n.navigateToFsmNodeByIdSequence(i,o,r,a,l,u);return r&&l.run(function(){var e=s.get();e&&(e.getAnimationEngine().fastForward(),e.getAnimationEngine().showOutput())}),l.run(function(){var e=s.get();e&&(e.getClientState().isNavigating=!1,e.getTriggerManager().startDelayTimers(!1),i.removeEdgeFollowedListener(u.edgeFollowedListenerHandle))}),g&&l.start(),g},n.navigateToFsmNodeByIdSequence=function(e,i,o,r,a,s){var l=r.firstOrDefault(function(e){return e.id===i}),u=e.getInteractionEngine();if(!l)return!1;var d=n.findOwningActor(e,l);if(!d)return!1;if(d.getParentNodeId()&&!n.navigateToFsmNodeByIdSequence(e,d.getParentNodeId(),o,r,a,s))return!1;var c=new t.Handle(d),p=d.getEnteringEdge(i);return p?(a.waitfor(function(){return null!==d.getCurrentNode()},0),a.run(function(){var t=c.get();t&&n.markActorNodesAsDirty(e,t)}),u.addEdgeToSequence(a,c,p,s,!0)):d.getStartNodeId()===i&&(a.waitfor(function(){return!c.get()||null!==d.getCurrentNode()},0),a.run(function(){var e=c.get();if(e){var t=e.getCurrentNode();t&&t.id!==i&&(e.resetStateMachines(),e.enter(null))}})),!0},n.markActorNodesAsDirty=function(e,t){var i=e.getInteractionModel().nodes.getCollection();n.getActorNodes(t,i).forEach(function(e){t.markNodeAsDirty(e)})},n.getNavigationEndStateMap=function(e){var t={};e.nodes.getCollection().filter(function(e){return e.getBehaviors().has(i.StateBehaviors.IsFinalNavigationState)}).forEach(function(e){var i=e.getStartState()?e.getStartState().id:e.id;t[i]=e});return t},n}();t.NavigationManager=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){function i(t,i){e.Utilities.weblog(w[t],i())}function n(t){if(t){e.Utilities.weblog(w[w.sequence],t),StoryLog.StructuredTraceTag(596456385,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Exception thrown during sequence execution: "+t,void 0,t&&t.stack?t.stack:void 0);var i=e.View.ViewElements.ViewModel.previewVE._root.getValue()._interactionEngine.actor();i?i.canExit()&&StoryLog.StructuredTraceTag(596444320,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"The root FSMActor was left in an unexitable state.",{}):StoryLog.StructuredTraceTag(596444176,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"The root FSMActor was left null or undefined.",{})}}function o(e,i,n,o){void 0===n&&(n=""),void 0===o&&(o=!0),t.capturePerformance?(StoryPerformance.PerformanceManager.getInstance().measurePerformance(S[e],i),o&&r(e,n)):i()}function r(e,n){if(void 0===n&&(n=""),t.capturePerformance){var o=StoryPerformance.PerformanceManager.getInstance().getEntriesByName(S[e]),r=o&&ArrayExtensions.lastOrDefault(o);r&&i(w.animationPerf,function(){return S[e]+", "+n+", "+r.duration+"ms"})}}function a(e,t){if(!e)return null;var i="",n=e.layoutElements.getCollection(t).firstOrDefault();return n&&(i=n.id),{type:e.getType(),isDefaultNavigation:e.getIsDefaultNavigation(t),scrollability:e.getScrollability(t),scrollWidth:e.getScrollWidth(t),scrollHeight:e.getScrollHeight(t),layoutElementId:i,snapPointsHorizontal:e.getSnapPointsHorizontal(t).getCollection(t),snapPointsVertical:e.getSnapPointsVertical(t).getCollection(t)}}function s(e,t,i){var n=t.animationParameters.getCollection(),o={duration:0,delay:0,curve:f.AnimationCurve[e.getCurve()]},r=e.getComputedDuration();if(r)o.duration=i.evaluate(r).result;else{var a=n.firstOrDefault(function(e){return e.getName()===T});a&&(o.duration=parseFloat(a.getValue()))}var s=e.getComputedDelay();if(s)o.delay=i.evaluate(s).result;else{var l=n.firstOrDefault(function(e){return e.getName()===C});l&&(o.delay=parseFloat(l.getValue()))}if(null==o.curve||o.curve===f.AnimationCurve.None){var u=n.firstOrDefault(function(e){return e.getName()===_});u&&(o.curve=f.AnimationCurve[u.getValue()])}return o}function l(e,n){var o=n.timing.buildClockFunction(n.timingValues.duration,n.timingValues.delay),r=0===n.timingValues.duration?""+e.endValue:u(e.animationCurve,o,e),a=new v.AnimationTarget(n.subject.layoutElementId,e.property,e.transformIndex,e.transformComponent),s="";t.addAnimationDebugInformation&&(s="Animation: '' Descriptor: '"+y(e)+"' Clock: '"+o+"'");var l=new v.AnimationFunction(IdGenerator.generate(),null,r,!1,a,null,s);return i(w.storyboardVerbose,function(){return"Created animation function from Action: "+f.StructType[n.action.structType]+" Storyboard: "+n.storyboardContext.getStoryboardName()+"\n Target:     "+m(a)+" Type: "+n.subject.keyframeType+"\n Function:   "+l.expression+"\n Clock:      "+o+"  Curve: "+f.AnimationCurve[e.animationCurve]+"  Duration: "+n.timingValues.duration+"  Delay: "+n.timingValues.delay+"\n Descriptor: "+y(e)}),l.clockFunction=o,l}function u(e,t,i){switch(e){case f.AnimationCurve.SnapOnStart:return""+i.endValue;case f.AnimationCurve.SnapOnMiddle:return"if(lss("+t+", 0.5), "+i.startValue+", "+i.endValue+")";case f.AnimationCurve.SnapOnEnd:return"if(lss("+t+", 1), "+i.startValue+", "+i.endValue+")";case f.AnimationCurve.StraightLine:return"lerp("+t+", "+i.startValue+", "+i.endValue+")";case f.AnimationCurve.Staircase:return"round(lerp("+t+", "+i.startValue+", "+i.endValue+"))";case f.AnimationCurve.CustomEase:return"lerp(ease("+t+", "+i.customEaseBias+", "+i.customEaseGain+"), "+i.startValue+", "+i.endValue+")";case f.AnimationCurve.EaseIn:return"lerp(ease("+t+", 0.2, 0.8), "+i.startValue+", "+i.endValue+")";case f.AnimationCurve.EaseInRadial:return"clamp(cos(lerp(ease("+t+", 0.2, 0.8)), "+i.startValue+", "+i.endValue+"))";case f.AnimationCurve.EaseInOut:return"lerp(ease("+t+", 0.5, 0.8), "+i.startValue+", "+i.endValue+")";case f.AnimationCurve.EaseOut:return"lerp(ease("+t+", 0.8, 0.8), "+i.startValue+", "+i.endValue+")";case f.AnimationCurve.EaseCenter:return"lerp(ease("+t+", 0.5, 0.2), "+i.startValue+", "+i.endValue+")";case f.AnimationCurve.SquarePulse:return"if(geq("+t+", 0), if(lss("+t+", 1), "+i.endValue+", "+i.startValue+"), "+i.startValue+")";case f.AnimationCurve.WaveSin:return"lerp(wavesin(mul("+t+", 2)), "+i.startValue+", "+i.endValue+")";case f.AnimationCurve.ThreeStateWaveSin:return"";case f.AnimationCurve.Elastic:return"lerp(if(leq("+t+", 0), 0, if(geq("+t+", 1), 1, add(mul(pow(2, mul(-10, "+t+")), sin(mul(sub("+t+", .075), div(6.28, .3)))), 1))), "+i.startValue+", "+i.endValue+")";case f.AnimationCurve.Bounce:return"Lerp(If(lss("+t+", .364), mul(7.5625, mul("+t+", "+t+")),If(lss("+t+", .73), add(mul(mul(7.5625, sub("+t+", .54)), sub("+t+", .54)), .75),If(lss("+t+", .91), add(mul(mul(7.5625, sub("+t+", .81)), sub("+t+", .81)), .9375),add(mul(mul(7.5625, sub("+t+", 0.95455)), sub("+t+", 0.95455)), .984375)))), "+i.startValue+", "+i.endValue+")"}return""+i.endValue}function d(t,i){var n=t.firstOrDefault(function(t){return e.StoryboardProcessing.actionDataEquals(t.actionData,i.actionData,!1)});if(!n)throw e.RethrowLogger.createError("Unable to locate an animation function to merge for: "+e.StoryboardProcessing.actionsToString([i.actionData])+"\nExisting animation data: "+e.StoryboardProcessing.actionsToString(t.map(function(e){return e.actionData})));n.expression="if (lss("+n.clockFunction+", 1), "+n.expression+", "+i.expression+")",n.clockFunction=i.clockFunction}function c(e,t,i){var n=t.getEasingBias(),o=t.getEasingGain();e.customEaseBias=n?i.helpers.evaluateComputeValue(n).result:0,e.customEaseGain=o?i.helpers.evaluateComputeValue(o).result:0,e.animationCurve=i.timingValues.curve;var r=t;if(r.getComputedStartValue){var a=r.getComputedStartValue(),s=r.getComputedEndValue();e.startValue=a?i.helpers.evaluateComputeValue(a).result:0,e.endValue=s?i.helpers.evaluateComputeValue(s).result:0,e.startValue=e.startValue===Math.floor(e.startValue)?e.startValue:parseFloat(e.startValue.toFixed(b)),e.endValue=e.startValue===Math.floor(e.endValue)?e.endValue:parseFloat(e.endValue.toFixed(b))}}function p(e,t,i){var n=h();return n.transformComponent=e,n.transformIndex=i[t],n}function g(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n=h();return n.property=e,n.startValue=t,n.endValue=i,n}function h(){return{property:f.AnimatableProperty.Transform,transformComponent:f.AnimatableTransformComponent.Value,transformIndex:0,startValue:0,endValue:0,animationCurve:f.AnimationCurve.None,customEaseBias:0,customEaseGain:0}}function y(e){return JSON.stringify(e)}function m(e){return JSON.stringify({elementId:e.getElementId(),property:f.AnimatableProperty[e.getAnimatablePropertyName()],component:f.AnimatableTransformComponent[e.getTransformComponent()],index:e.getTransformIndex()})}var f=e.Model.RM,v=e.AnimationInterfaces;t.capturePerformance=!1,t.addAnimationDebugInformation=!1,t.validateStoryboardsAgainstServerData=!1,t.throwOnValidationErrors=!1;var S;!function(e){e[e.StoryboardProcessorInitialization=0]="StoryboardProcessorInitialization",e[e.ProcessStoryboard=1]="ProcessStoryboard",e[e.GetActionSubjects=2]="GetActionSubjects",e[e.HandleStoryboardAction=3]="HandleStoryboardAction",e[e.AsyncHydrateNextAnimationSequences=4]="AsyncHydrateNextAnimationSequences",e[e.ResetActorTree=5]="ResetActorTree",e[e.SupplySymbols=6]="SupplySymbols"}(S=t.PerfMeasureNames||(t.PerfMeasureNames={}));var w;!function(e){e[e.animation=0]="animation",e[e.animationVerbose=1]="animationVerbose",e[e.animationPerf=2]="animationPerf",e[e.storyboard=3]="storyboard",e[e.storyboardVerbose=4]="storyboardVerbose",e[e.storyboardValidation=5]="storyboardValidation",e[e.traversal=6]="traversal",e[e.trigger=7]="trigger",e[e.timer=8]="timer",e[e.visibility=9]="visibility",e[e.expressions=10]="expressions",e[e.sequence=11]="sequence"}(w=t.AnimationLogLabels||(t.AnimationLogLabels={})),t.log=i,t.logSequenceError=n,t.measurePerformance=o,t.logPerformanceMeasure=r,t.getKeyframeProperties=a;var T="duration",C="delay",_="curve";t.actionTypeParameterName="ActionType",t.contentIdParameterName="ContentId";var b=3;t.getTimingValues=s,t.createAnimationFunction=l,t.createAnimationExpression=u,t.mergeFunctionExpressions=d,t.assignDefaultDescriptorProperties=c,t.createTransformDescriptor=p,t.createNonTransformDescriptor=g,t.createDefaultDescriptor=h,t.animatablePropertyDescriptorToString=y,t.animationTargetToString=m}(e.AnimationHelper||(e.AnimationHelper={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){e.infiniteDuration=-1;var t="ic()",i=function(){function i(){this.lastestTime=t,this.maxDuration=e.infiniteDuration}return i.createDelayFunction=function(t,i){return t.maxDuration<0?e.infiniteDuration.toString():t.maxDuration<=1e-5?"0":"sub("+t.lastestTime+", "+i+")"},i.createClockFunction=function(e,t){return"cf("+e+", "+t+")"},i.prototype.updateMaxDuration=function(e){this.maxDuration=Math.max(this.maxDuration,e)},i.prototype.addDelay=function(e){e>0&&(this.lastestTime=i.createDelayFunction(this,e))},i.prototype.buildClockFunction=function(e,t){this.updateMaxDuration(e+t);var n=this.lastestTime;return t>0&&(n=i.createDelayFunction(this,t)),i.createClockFunction(n,e)},i}();e.AnimationTiming=i}(e.StoryboardProcessing||(e.StoryboardProcessing={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM,n=e.AnimationInterfaces,o=e.AnimationHelper,r=function(r){function a(e,i,n){var o=r.call(this,e)||this;return o.getActor=n,o.lookAheadInterval=1500,o.maxLookAheadSequences=8,o.storyboardProcessor=new t.StoryboardProcessor(o,i),o.checkAndEnableValidation(),StoryLog.BufferedTraceTag(596444815,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"AsyncAnimationGenerator::Constructor end"),o}return __extends(a,r),a.prototype.getStoryboardProcessor=function(){return this.storyboardProcessor},a.prototype.refresh=function(e){this.killLookAheadTimer(),this.removeResource(this.storyboardProcessor),this.storyboardProcessor.dispose(),this.storyboardProcessor=new t.StoryboardProcessor(this,e)},a.prototype.generateNextAnimations=function(e){var t,n=e.getTarget().edges.getCollection().firstOrDefault(function(e){return e.getBehaviors().has(i.EdgeBehaviors.PrimaryNavigationNext)});n&&(t=n.getTarget()),t&&(this.killLookAheadTimer(),this.startLookAheadTimer(t))},a.prototype.abortAnimationGeneration=function(){this.killLookAheadTimer()},a.prototype.checkAndEnableValidation=function(){(e.Utilities.query.has(e.Common.UrlHelper.URLParamValidateStoryboards)||e.Common.UserState.getInstance().isUserOnFlight(FlightList.AnimationValidationExperiment1))&&(e.AnimationHelper.validateStoryboardsAgainstServerData=!0,e.View.ViewElements.ViewModel?(e.View.ViewElements.ViewModel.viewOptionOverridesWatchable.getValue().setValidateStoryboards(!0),TDB.applyUpdate(function(){return e.View.ViewElements.ViewModel.viewOptionOverridesWatchable.notify()},TDB.Justification.TestCode)):e.AnimationHelper.log(e.AnimationHelper.AnimationLogLabels.storyboard,function(){return"Unable to apply override for validating storyboards"}))},a.prototype.startLookAheadTimer=function(e){this.lookAheadTimer=platform.setTimeout(this.hydrateNextAnimationSequences.bind(this,e),this.lookAheadInterval)},a.prototype.killLookAheadTimer=function(){this.lookAheadTimer&&(clearTimeout(this.lookAheadTimer),this.lookAheadTimer=0)},a.prototype.hydrateNextAnimationSequences=function(e){var t=this;o.measurePerformance(o.PerfMeasureNames.AsyncHydrateNextAnimationSequences,function(){t.lookAheadTimer=0;var i=t.getActor();if(i)if(i.canExit()){var o=t.collectAllAnimationSequences(e);o=o.filter(function(e){return!!e}),(o=ArrayExtensions.unique(o,function(e){return e.id}).slice(0,t.maxLookAheadSequences)).forEach(function(e){return t.storyboardProcessor.hydrateAnimationSequence(new n.AnimationSequence(e,function(){return!0}),!0)})}else t.startLookAheadTimer(e)})},a.prototype.collectAllAnimationSequences=function(t){var n=this,o=[];o.push(t.getAmbientAnimationSequence(),t.getExitAnimationSequence());for(var r=[],a=[t];a.length;){var s=a.pop();if(!ArrayExtensions.contains(r,s.id)){r.push(s.id),s.childStartStates.getCollection().forEach(function(e){return o=o.concat(n.collectAllAnimationSequences(e))});var l=s.edges.getCollection();l.filter(function(t){return t.getBehaviors().has(i.EdgeBehaviors.IsTweeningEdge)||e.View.ViewElements.TriggerManager.edgeHasTriggerSet(t)}).forEach(function(e){o.push(e.getTransitionInAnimationSequence(),e.getTransitionOutAnimationSequence());var t=e.getTarget();t&&a.push(t)});var u=l.firstOrDefault(function(e){return e.getBehaviors().has(i.EdgeBehaviors.PrimaryNavigationNext)});u&&o.push(u.getTransitionInAnimationSequence(),u.getTransitionOutAnimationSequence())}}return o},a.prototype.dispose=function(){this.killLookAheadTimer(),r.prototype.dispose.call(this)},a}(Disposable);t.AsyncAnimationGenerator=r}(e.StoryboardProcessing||(e.StoryboardProcessing={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i,n,o,r=e.Model.RM;t.logExpressionErrors=!1;var a=['"',"'","`"],s=function(){function s(){this.stringSymbols={},this.numericSymbols={}}return s.prototype.setSymbolValue=function(e,t,i){void 0===i&&(i=!1),i?this.stringSymbols[e]=t:this.numericSymbols[e]=t},s.prototype.addComputedSymbolValue=function(e,t){switch(t.getPropertyType()){case r.ComputedValueType.FloatingPoint:case r.ComputedValueType.Integer:this.numericSymbols[e]=parseFloat(this.evaluate(t).result);break;case r.ComputedValueType.Boolean:this.numericSymbols[e]=this.evaluate(t).result?1:0;break;case r.ComputedValueType.String:this.stringSymbols[e]=this.evaluate(t).result}},s.prototype.clearSymbols=function(){this.stringSymbols={},this.numericSymbols={}},s.prototype.evaluate=function(e){var t={result:void 0,type:e.getPropertyType()},i=this.evaluateWorker(e).value;switch(t.type){case r.ComputedValueType.Boolean:t.result=!!i;break;case r.ComputedValueType.Integer:t.result=parseInt(i);break;case r.ComputedValueType.FloatingPoint:t.result=parseFloat(i);break;default:t.result=i}return t},s.prototype.evaluateWorker=function(e){var t=e.getEvaluationContext();if(!t)switch(e.getPropertyType()){case r.ComputedValueType.String:return{type:r.RpnTokenType.String,value:e.getExpression()};default:return{type:r.RpnTokenType.Literal,value:parseFloat(e.getExpression())}}for(var i=[],n=t.rpnTokens.getCollection(),o=0;o<n.length;o++){var a=n[o],l=a.getValue(),u=a.getType();switch(u){case r.RpnTokenType.Identifier:var d=this.stringSymbols[l],c=this.numericSymbols[l];void 0!==d?i.push({type:r.RpnTokenType.String,value:d}):void 0!==c?i.push({type:r.RpnTokenType.Literal,value:c}):s.reportError("Encountered an unknown symbol: '"+l+"'");break;case r.RpnTokenType.String:i.push({type:r.RpnTokenType.String,value:this.trimQuotes(l)});break;case r.RpnTokenType.Literal:i.push({type:r.RpnTokenType.Literal,value:parseFloat(l)});break;default:var p=this.checkOperands(a,i);if(p){var g=a.getUnary()?s.unaryEvaluators[u]:u===r.RpnTokenType.Ternary?s.ternaryEvaluators[u]:s.binaryEvaluators[u];g?i.push({type:r.RpnTokenType.Literal,value:g(p)}):s.reportError("Unable to find an evaluator for: '"+r.RpnTokenType[u]+"'")}}}return 1!==i.length&&s.reportError("Unexpected tokens present on RPN evaluation stack: "+i),i[0]},s.prototype.checkOperands=function(e,t){var i=e.getUnary(),n=!i&&e.getType()===r.RpnTokenType.Ternary,o=!i&&!n;if(i&&!t.length)return s.reportError("Not enough operators on the stack to perform a unary operation"),null;if(o&&t.length<2)return s.reportError("Not enough operators on the stack to perform a binary operation"),null;if(n&&t.length<3)return s.reportError("Not enough operators on the stack to perform a ternary operation"),null;var a=[t.pop()];return i||(a.push(t.pop()),a.reverse()),a.length>1&&(a=this.resolveBinaryOperators(a)),n&&a.unshift(t.pop()),a},s.prototype.resolveBinaryOperators=function(e){var t=e[0],i=e[1];return t.type!==i.type&&t.type+i.type===r.RpnTokenType.Literal+r.RpnTokenType.String&&(t=t.type!==r.RpnTokenType.Literal?this.convertToLiteral(t):t,i=i.type!==r.RpnTokenType.Literal?this.convertToLiteral(i):i),[t,i]},s.prototype.convertToLiteral=function(e){return{type:r.RpnTokenType.Literal,value:parseFloat(e.value)}},s.prototype.trimQuotes=function(e){var t=e.trim(),i=t.length;if(!i)return"";var n=t[0];return n!==t[i-1]?t:ArrayExtensions.contains(a,n)?t.substring(1,i-1):t},s.reportError=function(i){if(!t.logExpressionErrors)throw e.RethrowLogger.createError(i);e.Utilities.weblog("expressions",i)},s.unaryEvaluators=(i={},i[r.RpnTokenType.Subtract]=function(e){return-e[0].value},i),s.binaryEvaluators=(n={},n[r.RpnTokenType.Equal]=function(e){return e[0].value===e[1].value},n[r.RpnTokenType.Add]=function(e){return e[0].value+e[1].value},n[r.RpnTokenType.Subtract]=function(e){return e[0].value-e[1].value},n[r.RpnTokenType.Mutiply]=function(e){return e[0].value*e[1].value},n[r.RpnTokenType.Divide]=function(e){return e[0].value/e[1].value},n[r.RpnTokenType.Greater]=function(e){return e[0].value>e[1].value},n[r.RpnTokenType.GreaterOrEqual]=function(e){return e[0].value>=e[1].value},n[r.RpnTokenType.Less]=function(e){return e[0].value<e[1].value},n[r.RpnTokenType.LessOrEqual]=function(e){return e[0].value<=e[1].value},n[r.RpnTokenType.And]=function(e){return e[0].value&&e[1].value},n[r.RpnTokenType.Or]=function(e){return e[0].value||e[1].value},n),s.ternaryEvaluators=(o={},o[r.RpnTokenType.Ternary]=function(e){return e[0].value?e[1].value:e[2].value},o),s}();t.ExpressionEvaluator=s}(e.StoryboardProcessing||(e.StoryboardProcessing={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){function i(){var e={};return e[c.StructType.IfAction]=n,e[c.StructType.SetSymbol]=o,e[c.StructType.AnimateHidden]=a,e[c.StructType.AnimateTransform]=r,e[c.StructType.AnimateDimension]=u,e[c.StructType.AnimateUniformScale2D]=d,e[c.StructType.AnimateOpacity]=s,e[c.StructType.AnimateZOrder]=l,e}function n(e){var t=e.action;if(t instanceof c.IfAction){var i=t.actions.getCollection(),n=t.keyframeSelectors.getCollection(),o=t.getComputedCondition();if(o){if(!e.helpers.evaluateComputeValue(o).result){var r=t.getElse();if(!r)return null;i=r.actions.getCollection(),n=r.keyframeSelectors.getCollection()}}else if((t.getKeyframeSelectorName().trim()||t.getKeyframeSelector())&&!e.subject)return null;for(var a=0,s=i;a<s.length;a++){var l=s[a];l.getComputedDuration()||l.setComputedDuration(t.getComputedDuration()),l.getComputedDelay()||l.setComputedDelay(t.getComputedDelay()),l.getCurve()||l.setCurve(t.getCurve())}e.helpers.runActions(i,n,e.storyboardContext,e.subject,e.actionChecker,e.timing,e.generatedAnimations)}return null}function o(e){var t=e.action;return t instanceof c.SetSymbol&&e.helpers.addComputedSymbol(t.getSymbolName(),t.getComputedValue()),null}function r(t){var i=t.action,n=e.AnimationHelper.createTransformDescriptor(i.getComponent(),i.getTransformType(),t.subject.transformIndices);return e.AnimationHelper.assignDefaultDescriptorProperties(n,i,t),[e.AnimationHelper.createAnimationFunction(n,t)]}function a(t){var i=0,n=0,o=t.action.getAction();switch(o){case c.AnimationAction.Appear:case c.AnimationAction.Reveal:i=m,n=f;break;case c.AnimationAction.Disappear:case c.AnimationAction.Hide:i=f,n=m}var r=e.AnimationHelper.createNonTransformDescriptor(c.AnimatableProperty.Hidden,i,n);return o===c.AnimationAction.Appear||o===c.AnimationAction.Disappear?r.animationCurve=c.AnimationCurve.SnapOnStart:r.animationCurve=c.AnimationCurve.SnapOnEnd,[e.AnimationHelper.createAnimationFunction(r,t)]}function s(t){var i=t.storyboardContext.animationParameters.getCollection(),n=i.firstOrDefault(function(e){return e.getName()===p}),o=i.firstOrDefault(function(e){return e.getName()===g}),r=n?parseInt(n.getValue()):h,a=o?parseInt(o.getValue()):y,s=0,l=0,u=t.action;switch(u.getAction()){case c.AnimationAction.Appear:s=a,l=a;break;case c.AnimationAction.Disappear:s=r,l=r;break;case c.AnimationAction.Reveal:s=r,l=a;break;case c.AnimationAction.Hide:s=a,l=r}var d=e.AnimationHelper.createDefaultDescriptor();return e.AnimationHelper.assignDefaultDescriptorProperties(d,u,t),d.property=c.AnimatableProperty.Opacity,d.startValue=s,d.endValue=l,[e.AnimationHelper.createAnimationFunction(d,t)]}function l(t){var i=e.AnimationHelper.createNonTransformDescriptor(c.AnimatableProperty.ZOrder);return e.AnimationHelper.assignDefaultDescriptorProperties(i,t.action,t),[e.AnimationHelper.createAnimationFunction(i,t)]}function u(t){var i=t.action,n=e.AnimationHelper.createNonTransformDescriptor(i.getAnimatableDimension()===c.AnimatableDimension.Width?c.AnimatableProperty.Width:c.AnimatableProperty.Height);return e.AnimationHelper.assignDefaultDescriptorProperties(n,i,t),[e.AnimationHelper.createAnimationFunction(n,t)]}function d(t){var i=t.action,n=i.getAction(),o=n===c.AnimationAction.Reveal?0:1,r=n===c.AnimationAction.Reveal?1:0,a=e.AnimationHelper.createTransformDescriptor(c.AnimatableTransformComponent.X,c.TransformType.Scale,t.subject.transformIndices),s=e.AnimationHelper.createTransformDescriptor(c.AnimatableTransformComponent.Y,c.TransformType.Scale,t.subject.transformIndices);return e.AnimationHelper.assignDefaultDescriptorProperties(a,i,t),e.AnimationHelper.assignDefaultDescriptorProperties(s,i,t),a.startValue=o,s.startValue=o,a.endValue=r,s.endValue=r,[e.AnimationHelper.createAnimationFunction(a,t),e.AnimationHelper.createAnimationFunction(s,t)]}var c=e.Model.RM;t.createActionHandlerMapping=i;var p="hiddenOpacity",g="visibleOpacity",h=0,y=1,m=1,f=0}(t.ActionHandlers||(t.ActionHandlers={}))}(e.StoryboardProcessing||(e.StoryboardProcessing={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){function i(e,t,i){return void 0===i&&(i=!0),!(!e||!t)&&(e.actionType===t.actionType&&(!i||e.storyboard===t.storyboard&&e.salt===t.salt)&&e.subjectId===t.subjectId&&e.subjectType===t.subjectType&&e.validationInfo===t.validationInfo)}function n(e){var t="";return e.forEach(function(e){return t+=JSON.stringify(e)+"\n"}),t}function o(e){return e.replace(new RegExp(" ","g"),"")}var r,a=e.Model.RM,s=e.AnimationHelper;!function(e){e[e.StoryboardName=1]="StoryboardName",e[e.ActionType=3]="ActionType",e[e.SubjectId=5]="SubjectId",e[e.SubjectType=7]="SubjectType",e[e.ValidationInfo=9]="ValidationInfo",e[e.Salt=11]="Salt"}(r||(r={}));var l=new RegExp("(\\-?)\\d+(\\.\\d+)?","g"),u=function(){function t(){}return t.compareAnimationsCompleteFunctions=function(i,n,r){if(s.validateStoryboardsAgainstServerData&&(i=o(i),n=o(n),!(i===n||t.checkNumericValues(n,i))&&(e.AnimationHelper.log(s.AnimationLogLabels.storyboardValidation,function(){return"Unmatched animations complete function:\n  Expected Function: "+n+"\n  Actual Function:   "+i}),StoryLog.TraceTag(596476161,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,JSON.stringify({server:n,generated:i,seqId:r.id,seqName:r.name})),s.throwOnValidationErrors)))throw e.RethrowLogger.createError("Client generated AnimationsComplete function does not match the server.\nUse 'weblog="+s.AnimationLogLabels[s.AnimationLogLabels.storyboardValidation]+"' to see more details.")},t.compareGeneratedAnimations=function(i,n){if(!s.validateStoryboardsAgainstServerData)return[];if(!n.length||!e.AnimationHelper.validateStoryboardsAgainstServerData)return[];for(var r=Math.max(i.length,n.length),a=[],l=!1,u=0;u<r;u++)!function(r){var s={expectedFunction:r<n.length?o(n[r].getExpression()):"",expectedTarget:r<n.length?e.AnimationHelper.animationTargetToString(n[r].getTarget()):"",actualFunction:r<i.length?o(i[r].getExpression()):"",actualTarget:r<i.length?e.AnimationHelper.animationTargetToString(i[r].getTarget()):"",functionsEqual:!1,targetsEqual:!1};a.push(s),s.functionsEqual=s.expectedFunction===s.actualFunction||t.checkNumericValues(s.actualFunction,s.expectedFunction),s.targetsEqual=s.expectedTarget===s.actualTarget,s.functionsEqual||(e.AnimationHelper.log(e.AnimationHelper.AnimationLogLabels.storyboardValidation,function(){return"Unmatched function at index "+r+":\n  Expected Function: "+s.expectedFunction+"\n  Actual Function:   "+s.actualFunction+"\n  Target:            "+s.actualTarget}),StoryLog.TraceTag(596476162,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,JSON.stringify({actionData:i[r].actionData,expected:s.expectedFunction,actual:s.actualFunction,target:s.actualTarget})),l=!0),s.targetsEqual||(e.AnimationHelper.log(e.AnimationHelper.AnimationLogLabels.storyboardValidation,function(){return"Unmatched target at index "+r+":\n  Expected Target: "+s.expectedTarget+"\n  Actual Target:   "+s.actualTarget}),l=!0)}(u);if(s.throwOnValidationErrors&&l)throw e.RethrowLogger.createError("Client generated functions do not match the server.\nUse 'weblog="+s.AnimationLogLabels[s.AnimationLogLabels.storyboardValidation]+"' to see more details.");return a},t.markGeneratedActions=function(e,t,n,o){s.validateStoryboardsAgainstServerData&&e.forEach(function(e){var n=t.firstOrDefault(function(t){return i(t,e,!1)});n&&(n.generated=!0)})},t.checkForUnhandledActions=function(t){if(s.validateStoryboardsAgainstServerData){var i=t.filter(function(e){return!e.generated});if(i.length&&(i.forEach(function(e){return s.log(s.AnimationLogLabels.storyboardValidation,function(){return"Unhandled action from server: "+JSON.stringify(e)})}),s.throwOnValidationErrors))throw e.RethrowLogger.createError("Failed to generate all animations that were provided by the server.\nUse 'weblog="+s.AnimationLogLabels[s.AnimationLogLabels.storyboardValidation]+"' to see more details.")}},t.createActionDataFromAnimation=function(e){var t=this;return s.validateStoryboardsAgainstServerData?e.animationFunctions.getCollection().mapmany(function(e){var i=e.getName().split(";");return ArrayExtensions.unique(i.map(function(e){var t=e.split("'");return t.length<12?null:{storyboard:t[r.StoryboardName],salt:t[r.Salt],actionType:t[r.ActionType],validationInfo:t[r.ValidationInfo],subjectId:t[r.SubjectId],subjectType:t[r.SubjectType],generated:!1,needsMerge:!1,actionStructType:0}}).filter(function(e){return!!e}),function(e){return t.generateActionDataKey(e)})}):[]},t.generateActionDataKey=function(e){return""+e.actionType+e.subjectId+e.subjectType+e.validationInfo},t.checkNumericValues=function(e,t){for(var i=this.extractNumbers(e),n=this.extractNumbers(t),o=0;o<i.length;o++)if(i[o]!==n[o])return!1;return i.length===n.length},t.extractNumbers=function(e,t){void 0===t&&(t=!0);var i=e.match(l);return i?i.map(function(e){var i=parseFloat(e);return t?Math.round(i):i}):[]},t}();t.StoryboardValidator=u;var d=function(){function e(e,t){this.actionData=t,this.storyboardName=e.getStoryboardName(),this.storyboardSalt=e.getSalt()}return e.prototype.isAnimationAction=function(e){return e!==a.StructType.IfAction&&e!==a.StructType.SetSymbol},e.prototype.checkAction=function(e,t,o){var r={storyboard:this.storyboardName,salt:this.storyboardSalt,actionType:a.StructType[t],validationInfo:this.getValidationInfo(e,o),subjectId:o.layoutElementId,subjectType:o.keyframeType,needsMerge:!1,actionStructType:t,generated:!1},l=ArrayExtensions.lastOrDefault(this.actionData,function(e){return i(e,r,!1)});return l?(r.needsMerge=!0,s.log(s.AnimationLogLabels.storyboardVerbose,function(){return"Merging current action with previously handled action.\nCurrent:  "+n([r])+"\nExisting: "+n([l])})):this.actionData.push(r),r},e.prototype.getValidationInfo=function(e,t){return e instanceof a.AnimateDimension?a.AnimatableDimension[e.getAnimatableDimension()]:e instanceof a.AnimateTransform?""+a.TransformType[e.getTransformType()]+a.AnimatableTransformComponent[e.getComponent()]+t.transformIndices[e.getTransformType()]:""},e}();t.StoryboardActionChecker=d,t.actionDataEquals=i,t.actionsToString=n,t.removeSpaces=o}(e.StoryboardProcessing||(e.StoryboardProcessing={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.AnimationHelper,n=e.Model.RM,o=function(){function e(i,n){this.keyframeProvider=i,this.expressionEvaluator=new t.ExpressionEvaluator,this.keyframeProvider.setEvaluator(this.expressionEvaluator),this.defaultSymbolNames=Obj.properties(e.defaultSymbols),this.renderModelProperties={rtl:n.renderModel.renderModelRoot.getRTL()?1:0,viewportWidth:n.getParentLayoutTree().getViewportWidth(),viewportHeight:n.getParentLayoutTree().getViewportHeight()}}return e.prototype.supplySymbols=function(t,n,o){var r=this;i.measurePerformance(i.PerfMeasureNames.SupplySymbols,function(){var i,a=t[n],s=r.getBuiltInSymbols(o,a);r.symbolTablesInitialized||r.buildSymbolTables(s),a?(s._SubjectIndex=n,s._SubjectCount=t.length,r.supplyKeyframeSymbols(a)):r.defaultSymbolNames.forEach(function(t){return r.expressionEvaluator.setSymbolValue(t,e.defaultSymbols[t])});for(var l=0,u=r.builtInSymbolNames;l<u.length;l++){var d=u[l];i=s,r.expressionEvaluator.setSymbolValue(d,i[d])}for(var c=r.getStringSymbols(o),p=0,g=Obj.properties(c);p<g.length;p++){var h=g[p];i=c,r.expressionEvaluator.setSymbolValue(h,i[h],!0)}})},e.prototype.addComputedSymbol=function(e,t){this.expressionEvaluator.addComputedSymbolValue(e,t)},e.prototype.clearSymbols=function(){this.expressionEvaluator.clearSymbols()},e.prototype.evaluate=function(e){return this.expressionEvaluator.evaluate(e)},e.prototype.supplyKeyframeSymbols=function(t){for(var i=this.keyframeProvider.getKeyframe(t.parentId),n=0,o=this.keyframePropertyNames;n<o.length;n++){var r=o[n],a=void 0,s=void 0;a=t,(s=e.keyframePropertyToSymbolMap[r])&&this.expressionEvaluator.setSymbolValue(s,a[r]),i&&e.keyframeParentPropertyToSymbolMap[r]&&(a=i,(s=e.keyframeParentPropertyToSymbolMap[r])&&this.expressionEvaluator.setSymbolValue(s,a[r]))}},e.prototype.buildSymbolTables=function(t){this.builtInSymbolNames=Obj.properties(t),this.keyframePropertyNames=Obj.properties(e.getEmptyKeyframe());var i=ArrayExtensions.toDictionary(this.defaultSymbolNames,function(e,t){t[e.toLowerCase()]=e});this.keyframePropertyNames.forEach(function(t){if(!e.keyframePropertyToSymbolMap[t]){var n=i[t.toLowerCase()];n&&(e.keyframePropertyToSymbolMap[t]=n)}}),this.symbolTablesInitialized=!0},e.getEmptyKeyframe=function(){return{id:"",layoutElementId:"",keyframeType:"",parentId:"",childrenIds:[],croppedChildImageKeyframeId:"",left:0,top:0,width:0,height:0,zOrder:0,locationX:0,locationY:0,locationZ:0,rotation2D:0,scaleX2D:0,scaleY2D:0,parentKeyframeType:"",lod:0,contentId:"",rowIndex:0,gridRow:0,gridRowCount:0,flags:new Flags(n.KeyframeFlags,0),transformIndices:[]}},e.prototype.getStringSymbols=function(e){var t={animatorHostKeyframeType:"",direction:""};this.defaultStringSymbolNames||(this.defaultStringSymbolNames=Obj.properties(t));for(var i={},n=t,o=0,r=this.defaultStringSymbolNames;o<r.length;o++){var a=r[o];i[a]=n[a]}for(var s=0,l=e.animationParameters.getCollection();s<l.length;s++){var u=l[s];i[u.getName()]=u.getValue()}return i},e.prototype.getBuiltInSymbols=function(e,t){return void 0===e&&(e=void 0),void 0===t&&(t=void 0),{_BorderWidth:0,_GridRow:t?t.gridRow:0,_GridRowCount:t?t.gridRowCount:0,_RowIndex:t?t.rowIndex:0,_SubjectCount:0,_SubjectIndex:-2,IsStandAloneClip:t&&t.flags.has(n.KeyframeFlags.IsStandAloneClip)?1:0,AnimationDuration:e?e.getDuration():0,Rtl:e?this.renderModelProperties.rtl:0,ViewportWidth:e?this.renderModelProperties.viewportWidth:0,ViewportHeight:e?this.renderModelProperties.viewportHeight:0}},e.keyframePropertyToSymbolMap={left:"PositionX",top:"PositionY",width:"SizeX",height:"SizeY"},e.keyframeParentPropertyToSymbolMap={width:"ParentSizeX",height:"ParentSizeY"},e.defaultSymbols={LocationX:0,LocationY:0,LocationZ:0,PositionX:0,PositionY:0,SizeX:0,SizeY:0,ParentSizeX:0,ParentSizeY:0,ZOrder:0,Rotation2D:0,ScaleX2D:1,ScaleY2D:1},e}();t.SymbolManager=o}(e.StoryboardProcessing||(e.StoryboardProcessing={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(e){function n(t,i){var n=e.call(this,t)||this;return n.animationEngineGetter=i,n.isOpen=TDB.watchableTag(596476229,n,!1),n.activeViewports=TDB.watchableTag(596476230,n,[]),n}return __extends(n,e),n.prototype.getActionMap=function(){var e={};return e[i.ExternalAction.ModalDialog_Enter]={action:this.handleEnter,context:this},e[i.ExternalAction.ModalDialog_Exit]={action:this.handleExit,context:this},e},n.prototype.dispose=function(){e.prototype.dispose.call(this),this.reset(),this.enterElement=null},n.prototype.reset=function(){var e=this;this.isDialogOpen()&&TDB.applyUpdate(function(){e.activeViewports.setValue([]),e.isOpen.setValue(!1)},TDB.Justification.Dispose)},n.prototype.isDialogOpen=function(e){return this.isOpen.getWatchedValue(e)},n.prototype.isActiveViewport=function(e,t){return this.activeViewports.getWatchedValue(t).some(function(t){return e===t})},n.prototype.handleEnter=function(e,t){var i=this;TDB.applyUpdate(function(){i.activeViewports.setValue(t.map(function(e){return e.getParameterValue()})),i.isOpen.setValue(!0)}),this.enterElement=this.animationEngineGetter().getElementById(e)},n.prototype.handleExit=function(e,i){var n=this;TDB.applyUpdate(function(){n.activeViewports.setValue([]),n.isOpen.setValue(!1)}),t.LayoutUtilities.isElementFocusable(this.enterElement)&&this.enterElement.focus(),this.enterElement=null},n}(Disposable);t.ModalDialogManager=n}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t,i=function(e){function i(t,i){var n=e.call(this,t)||this;return n.args=i,n}return __extends(i,e),i.prototype.editorEventsInitArgs=function(){var e=this;return{click:function(t){return e.handleClickEvent(t)},keydown:function(t){return e.handleKeyDownEvent(t)}}},i.prototype.editorMonacoInitArgs=function(){return{resourceFactory:this.args.resourceFactory,setCode:this.args.setCode,isReadOnly:this.args.isReadOnly,scrollbarsEnabled:this.args.scrollbarsEnabled,scrollBeyondLastLine:this.args.scrollBeyondLastLine}},i.prototype.editorMonacoUpdateArgs=function(e){return{code:this.args.getCode(e),language:this.args.getLanguage(e)}},i.prototype.setLanguage=function(e){this.editorMonacoBinding.setLanguage(e)},i.prototype.handleClickEvent=function(e){return e&&e.stopPropagation(),!1},i.prototype.handleKeyDownEvent=function(e){return i.nonPropogatedEvents[e.which]&&e.stopPropagation(),!0},i.areEqual=function(e,t){return e.getCode()===t.getCode()&&e.getLanguage()===t.getLanguage()},i.nonPropogatedEvents=(t={},t[KeyCodeType.DownArrowKey]=!0,t[KeyCodeType.EndKey]=!0,t[KeyCodeType.HomeKey]=!0,t[KeyCodeType.LeftArrowKey]=!0,t[KeyCodeType.RightArrowKey]=!0,t[KeyCodeType.SpaceKey]=!0,t[KeyCodeType.TabKey]=!0,t[KeyCodeType.UpArrowKey]=!0,t),i}(TDB.FocusableViewElement);e.MonacoEditorVEBase=i}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(e){function n(t){var i=e.call(this,t)||this;return i._inDetailView=TDB.watchableTag(596476258,i,!1),i._isDefaultZoom=TDB.watchableTag(596476259,i,!0),i}return __extends(n,e),n.prototype.getActionMap=function(){var e={};return e[i.ExternalAction.DetailView_Enter]={action:this.handleEnter,context:this},e[i.ExternalAction.DetailView_Exit]={action:this.handleExit,context:this},e[i.ExternalAction.DetailView_Next]={action:this.handleNext,context:this},e[i.ExternalAction.DetailView_Previous]={action:this.handlePrevious,context:this},e},n.prototype.dispose=function(){e.prototype.dispose.call(this),this.reset()},n.prototype.inDetailView=function(e){return this._inDetailView.getWatchedValue(e)},n.prototype.isDefaultZoom=function(e){return this.inDetailView(e)&&this._isDefaultZoom.getWatchedValue(e)},n.prototype.setDefaultZoom=function(e){var t=this;this._isDefaultZoom.getValue()!==e&&TDB.applyUpdate(function(){return t._isDefaultZoom.setValue(e)},TDB.Justification.Dispose)},n.prototype.reset=function(){var e=this;if(this.inDetailView()){var t=platform.now();TDB.applyUpdate(function(){return e._inDetailView.setValue(!1)},TDB.Justification.Dispose),ActionLogger.RecordClientAction(new ClientAction.DetailViewAction(ClientAction.ActionType.DetailViewExit,{elapsedTimeInDetailView:(t-this._detailViewEnterTime).toString(),elapsedTimeInDetailViewPage:(t-this._currentPageEnterTime).toString(),detailViewSize:null!=this._detailViewSize?this._detailViewSize.toString():"",detailViewPageIndex:null!=this._detailViewPageIndex?this._detailViewPageIndex.toString():"",viewedPages:Object.keys(this._viewedPages).length.toString(),reset:"true"}))}},n.prototype.handleEnter=function(e,i){var n=this;this.inDetailView()&&StoryLog.TraceTag(596476288,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Detail view enter handler called while we are in detail view"),this._viewedPages={},this._detailViewEnterTime=platform.now(),this._currentPageEnterTime=this._detailViewEnterTime,TDB.applyUpdate(function(){return n._inDetailView.setValue(!0)});var o=this.getData(i);this.addViewedPage(o.detailViewPageIndex),this._detailViewSize=o.detailViewSize,this._detailViewPageIndex=o.detailViewPageIndex,ActionLogger.RecordClientAction(new ClientAction.DetailViewAction(ClientAction.ActionType.DetailViewEnter,{detailViewSize:null!=o.detailViewSize?o.detailViewSize.toString():"",detailViewPageIndex:null!=o.detailViewPageIndex?o.detailViewPageIndex.toString():"",detailViewEnterKeyframeType:null!=o.triggerTargetKeyframeType?o.triggerTargetKeyframeType:""})),t.FRE.FirstRunTriggers.detailViewEntered()},n.prototype.handleExit=function(e,i){var n=this;this.inDetailView()||StoryLog.TraceTag(596476289,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Detail view exit handler called when we are not in detail view");var o=platform.now();TDB.applyUpdate(function(){return n._inDetailView.setValue(!1)});var r=this.getData(i);ActionLogger.RecordClientAction(new ClientAction.DetailViewAction(ClientAction.ActionType.DetailViewExit,{elapsedTimeInDetailView:(o-this._detailViewEnterTime).toString(),elapsedTimeInDetailViewPage:(o-this._currentPageEnterTime).toString(),detailViewSize:null!=r.detailViewSize?r.detailViewSize.toString():"",detailViewPageIndex:null!=r.detailViewPageIndex?r.detailViewPageIndex.toString():"",viewedPages:Object.keys(this._viewedPages).length.toString(),reset:"false"})),t.FRE.FirstRunTriggers.detailViewExited()},n.prototype.handleNext=function(e,t){this.inDetailView()||StoryLog.TraceTag(596476290,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Detail view next handler called when we are not in detail view");var i=platform.now(),n=this.getData(t);this.addViewedPage(n.detailViewPageIndex),this._detailViewPageIndex=n.detailViewPageIndex,ActionLogger.RecordClientAction(new ClientAction.DetailViewAction(ClientAction.ActionType.DetailViewNext,{elapsedTimeInDetailView:(i-this._detailViewEnterTime).toString(),elapsedTimeInDetailViewPage:(i-this._currentPageEnterTime).toString(),detailViewSize:null!=n.detailViewSize?n.detailViewSize.toString():"",detailViewPageIndex:null!=n.detailViewPageIndex?n.detailViewPageIndex.toString():""})),this._currentPageEnterTime=i},n.prototype.handlePrevious=function(e,t){this.inDetailView()||StoryLog.TraceTag(596476291,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Detail view previous handler called when we are not in detail view");var i=platform.now(),n=this.getData(t);this.addViewedPage(n.detailViewPageIndex),this._detailViewPageIndex=n.detailViewPageIndex,ActionLogger.RecordClientAction(new ClientAction.DetailViewAction(ClientAction.ActionType.DetailViewPrevious,{elapsedTimeInDetailView:(i-this._detailViewEnterTime).toString(),elapsedTimeInDetailViewPage:(i-this._currentPageEnterTime).toString(),detailViewSize:null!=n.detailViewSize?n.detailViewSize.toString():"",detailViewPageIndex:null!=n.detailViewPageIndex?n.detailViewPageIndex.toString():""})),this._currentPageEnterTime=i},n.prototype.getData=function(e){for(var t=new r,i=e.length,n=0;n<i;n++){var a=e[n];switch(a.getParameterName()){case o[o.DetailViewSize]:t.detailViewSize=parseInt(a.getParameterValue());break;case o[o.DetailViewPageIndex]:t.detailViewPageIndex=parseInt(a.getParameterValue());break;case o[o.TriggerTargetKeyframeType]:t.triggerTargetKeyframeType=a.getParameterValue()}}return t},n.prototype.addViewedPage=function(e){null!=e&&(this._viewedPages[e]=!0)},n}(Disposable);t.DetailViewManager=n;var o;!function(e){e[e.DetailViewSize=0]="DetailViewSize",e[e.DetailViewPageIndex=1]="DetailViewPageIndex",e[e.TriggerTargetKeyframeType=2]="TriggerTargetKeyframeType"}(o||(o={}));var r=function(){function e(){}return e}()}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=e.View.ViewElements,o=function(){function t(e){this.resourceFactory=e}return t.prototype.createVideoPlayer=function(t,n){switch(n.videoType){case i.VideoPlayerType.Azure:return this.initAzureVideoPlayer(t,n);case i.VideoPlayerType.OneDrive:return this.initOneDriveVideoPlayer(t,n);case i.VideoPlayerType.YouTube:return this.initYouTubeVideoPlayer(t,n);default:throw e.RethrowLogger.createError("Unknown video player type: "+n.videoType)}},t.prototype.initAzureVideoPlayer=function(e,i){var o={QuickStart:n.AzureVideoPlayerQuality.QuickStart,Hybrid:n.AzureVideoPlayerQuality.Hybrid,HighQuality:n.AzureVideoPlayerQuality.HighQuality},r={resourceFactory:this.resourceFactory,quality:t.isDesktop()?o[CommonSettings.AMSHeuristicProfilePropertyVideoDesktop]:o[CommonSettings.AMSHeuristicProfileProperty],getHeight:i.getHeight,getWidth:i.getWidth,getVideoId:i.getVideoId,autoplay:!!i.autoplay,closedCaptions:i.getClosedCaptions,onReady:i.onReady,onPlaying:i.onPlaying,onPaused:i.onPaused,onLoadingError:i.onLoadingError,silentFailure:i.silentFailure,analyticsLogger:i.analyticsLogger};return this.constructAzureVideoPlayer(e,r)},t.prototype.constructAzureVideoPlayer=function(e,t){return new n.AzureVideoPlayerVE(e,t)},t.prototype.initYouTubeVideoPlayer=function(e,t){var i={resourceFactory:this.resourceFactory,playerParams:{modestbranding:1,rel:0,enablejsapi:1,autoplay:t.autoplay?1:0},getWidth:t.getWidth,getHeight:t.getHeight,getVideoId:t.getVideoId,onReady:t.onReady,onPlaying:t.onPlaying,onPaused:t.onPaused,onLoadingError:t.onLoadingError,silentFailure:t.silentFailure};return this.constructYouTubeVideoPlayer(e,i)},t.prototype.constructYouTubeVideoPlayer=function(e,t){return new n.YouTubePlayerVE(e,t)},t.prototype.initOneDriveVideoPlayer=function(e,t){var i={autoplay:t.autoplay,getWidth:t.getWidth,getHeight:t.getHeight,getUrl:t.getVideoId};return this.constructOneDriveVideoPlayer(e,i)},t.prototype.constructOneDriveVideoPlayer=function(e,t){return new n.OneDriveVideoPlayerVE(e,t)},t.isDesktop=function(){return"Desktop"===CommonSettings.ClientDevice},t}();t.VideoPlayerFactory=o}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function e(e){this.args=e}return e.prototype.load=function(e){return e.preloadPlayer(),$.Deferred().resolve().promise()},e.prototype.canLoad=function(e){return!this.args.isEditMode()&&this.args.isPreloadable(e)&&!CookieConsent.isConsentNeeded()},e.prototype.canUnload=function(e){return!1},e}();e.VideoPlayerLoadingHandler=t}(e.Common||(e.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(n){function o(e){var i=n.call(this,e.owner)||this;return i.currentlyPlayingVideoId=void 0,i.currentlyPlayingVideoControllable=!0,i.containers=e.containers||{},i.audioPlayerManager=e.audioPlayerManager,i.noVideosPlayingDeferred=$.Deferred(),i.isEditMode=e.isEditMode||TDB.watchableTag(596476181,i,!1),e.enablePreloading&&(i.preloadingStrategy=new t.ViewportMediaLoadingStrategy(o.createPreloadingStrategyArgs(),new t.VideoPlayerLoadingHandler({isEditMode:function(){return i.isEditMode.getValue()},isPreloadable:o.isPreloadable}))),CookieConsent.addHandlerOnConsentGiven(function(){return i.forceLoadElementsWithPreLoadingStrategy()}),i}return __extends(o,n),o.prototype.registerContainer=function(t,i){if(this.containers[t])throw e.RethrowLogger.createError("Attempting to register a new container that is already registered (ID '"+t+"')");this.containers[t]=i,this.preloadingStrategy&&this.preloadingStrategy.registerElement(i)},o.prototype.unregisterContainer=function(t){if(!this.containers[t])throw e.RethrowLogger.createError("Attempting to unregister container that is not registered (ID '"+t+"')");var i=this.containers[t];delete this.containers[t],this.currentlyPlayingVideoId===t&&(this.currentlyPlayingVideoId=void 0),this.preloadingStrategy&&this.preloadingStrategy.unregisterElement(i)},o.prototype.notifyVideoPlaying=function(t,i){if(void 0===i&&(i=!0),!this.containers[t])throw e.RethrowLogger.createError("Requested playing start for an unregistered ID "+t);if(this.currentlyPlayingVideoId!==t){var n=this.currentlyPlayingVideoId;this.audioPlayerManager&&this.audioPlayerManager.stopAudioPlayer(),this.currentlyPlayingVideoId=t,this.currentlyPlayingVideoControllable=i,i||(this.noVideosPlayingDeferred.resolve(),this.noVideosPlayingDeferred=$.Deferred()),n&&this.pauseVideo(n),this.preloadingStrategy&&this.preloadingStrategy.notifyElementLoaded(this.containers[t])}},o.prototype.pauseVideo=function(e){var t=e||this.currentlyPlayingVideoId;t&&this.containers[t].pauseVideo()},o.prototype.notifyVideoPaused=function(e){e===this.currentlyPlayingVideoId&&(this.currentlyPlayingVideoId=void 0,this.noVideosPlayingDeferred.resolve(),this.noVideosPlayingDeferred=$.Deferred())},o.prototype.whenNoVideosPlaying=function(){if(void 0!==this.currentlyPlayingVideoId&&this.currentlyPlayingVideoControllable)return this.noVideosPlayingDeferred.promise();var e=$.Deferred();return platform.setImmediate(function(){return e.resolve()}),e.promise()},o.prototype.setAudioPlayerManager=function(e){this.audioPlayerManager=e},o.prototype.setRoot=function(e){this.preloadingStrategy&&e.subscribeToViewportChange(this.preloadingStrategy)},o.prototype.setIsEditModeWatchable=function(e){this.isEditMode=e},o.prototype.getCurrentlyPlayingVideoId=function(){return this.currentlyPlayingVideoId},o.createPreloadingStrategyArgs=function(){return{viewportSize:3,viewportChangeDelayMilliseconds:o.viewportChangeDelayMilliseconds,forceLoadedIfInViewport:!1,maxLoadedElements:2,retryOnFailure:!1,getElementRectangle:function(e){return e.getAbsolutePosition()}}},o.isPreloadable=function(e){return e.isInModel()?e.getPlayerType()===i.VideoPlayerType.Azure:(StoryLog.TraceTag(596476182,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Video element is not in RenderModel, so it's not preloadable."),!1)},o.prototype.forceLoadElementsWithPreLoadingStrategy=function(){this.preloadingStrategy&&this.preloadingStrategy.forceLoadingStart&&this.preloadingStrategy.forceLoadingStart()},o.viewportChangeDelayMilliseconds=300,o}(Disposable);t.VideoPlayerManager=n}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function e(e){this.container=e}return e.prototype.updateParams=function(){var e=this.container.getPlayerType(),t=this.container.getPlayerDescriptor(),i=this.container.getClosedCaptions(),n=i===this.closedCaptions||i&&i.equals(this.closedCaptions);return(e!==this.type||t!==this.descriptor||!n)&&(this.type=e,this.descriptor=t,this.closedCaptions=i,!0)},e}();e.VideoContainerInfo=t}(e.Common||(e.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=e.View.ViewElements,o=function(t){function o(e,i,n){var o=t.call(this,e)||this;return o.newPlayerNotifier=TDB.notifierTag(596476293,o),o._audioControls={},o._audioPlayers={},o._audioWithCCLayouts={},o._currentlyPlaying="",o.videoPlayerManager=n,o.resourceFactory=i,o}return __extends(o,t),o.prototype.registerControls=function(t,i){if(this._audioControls[t])throw e.RethrowLogger.createError("Attempting to register new controls for an already registered id "+t);this._audioControls[t]=i},o.prototype.unregisterControls=function(t){var i=this;if(!this._audioControls[t])throw e.RethrowLogger.createError("Attempting to unregister controls that are not registered id "+t);delete this._audioControls[t],delete this._audioPlayers[t],this._currentlyPlaying&&(this._currentlyPlaying!==t&&this.deleteAudioPlayer(this._currentlyPlaying),this._currentlyPlaying=void 0),TDB.applyUpdate(function(){return i.newPlayerNotifier.notify()},TDB.Justification.Dispose)},o.prototype.registerAudioWithCC=function(t,i){if(this._audioWithCCLayouts[t])throw e.RethrowLogger.createError("Attempting to register new audio with CC layout for an already registered id "+t);this._audioWithCCLayouts[t]=i},o.prototype.unregisterAudioWithCC=function(t){if(!this._audioWithCCLayouts[t])throw e.RethrowLogger.createError("Attempting to unregister audio with CC layout that is not registered id "+t);delete this._audioWithCCLayouts[t],this._currentlyPlaying&&(this._currentlyPlaying!==t&&this.deleteAudioPlayer(this._currentlyPlaying),this._currentlyPlaying=void 0)},o.prototype.getAudioPlayer=function(e,t){return t&&t.watch(this.newPlayerNotifier),this._audioPlayers[e]},o.prototype.requestAudioPlayer=function(t,o){var r=this;if(!this._audioControls[t])throw e.RethrowLogger.createError("Unregistered controls with id "+t+" are requesting a player");var a=this._audioControls[t].getAudioPlayerType(),s=this._audioControls[t].getAudioPlayerDescriptor();switch(a){case i.AudioPlayerType.Browser:var l={source:s,playbackPosition:o.playbackPosition,context:o.context};this._audioPlayers[t]=new n.BrowserAudioPlayerVE(o.context,l);break;case i.AudioPlayerType.AzureCustomControls:var u={resourceFactory:this.resourceFactory,audioId:s,playbackPosition:o.playbackPosition,volume:o.volume,analyticsLogger:o.analyticsLogger};this._audioPlayers[t]=new n.AzureAudioPlayerVE(o.context,u);break;default:throw e.RethrowLogger.createError("Unknown player type: "+i.AudioPlayerType[a])}return TDB.applyUpdate(function(){return r.newPlayerNotifier.notify()}),this._audioPlayers[t]},o.prototype.requestToStartPlaying=function(e){this.videoPlayerManager&&this.videoPlayerManager.pauseVideo(),this._currentlyPlaying&&this._currentlyPlaying!==e&&this.deleteAudioPlayer(this._currentlyPlaying),this._currentlyPlaying=e},o.prototype.getAudioPlayers=function(e){return e.watch(this.newPlayerNotifier),Obj.values(this._audioPlayers)},o.prototype.stopAudioPlayer=function(e){var t=e;t||(t=this._currentlyPlaying),t&&(this.deleteAudioPlayer(t),t===this._currentlyPlaying&&(this._currentlyPlaying=void 0))},o.prototype.setVideoPlayerManager=function(e){this.videoPlayerManager=e},o.prototype.deleteAudioPlayer=function(e){var t=this;this._audioWithCCLayouts[e]?this._audioWithCCLayouts[e].deleteAudioPlayer():(this._audioPlayers[e].stopAudio(),this._audioControls[e].deleteAudioPlayer(),delete this._audioPlayers[e],TDB.applyUpdate(function(){return t.newPlayerNotifier.notify()},TDB.Justification.Dispose))},o.prototype.isAmsFullScreen=function(){return!!this._audioWithCCLayouts[this._currentlyPlaying]&&this._audioWithCCLayouts[this._currentlyPlaying].isAmsFullscreen()},o.prototype.getCurrentlyPlayingAudioId=function(){return this._currentlyPlaying},o}(Disposable);t.AudioPlayerManager=o}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){!function(t){var i=e.Model.RM,n=function(){function e(e){this.isConsumptionMode=e===StoryViewMode.AuthoringDisabled||e===StoryViewMode.Preview}return e.prototype.getActionMap=function(){var e={};return e[i.ExternalAction.FRE_PhotoStackSeen]={action:t.FirstRunTriggers.stackSeen,context:null},e[i.ExternalAction.FRE_ExpoNavigated]={action:this.expoWorldNavigated,context:this},e},e.prototype.expoWorldNavigated=function(){this.isConsumptionMode&&t.FirstRunTriggers.navigatedFromPlay()},e}();t.FirstRunActionProvider=n}(t.FRE||(t.FRE={}))}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(){function t(e,i,n){void 0===n&&(n=t.oneSecondMs),this.imagesPendingLoad=e,this.getActivityFreshness=i,this.checkForIdleIntervalMs=n}return t.prototype.wait=function(t){var i=this;if(void 0!==this.callback)throw e.RethrowLogger.createError("Don't wait twice.");return this.callback=t,this.interval=platform.setInterval(function(){i.tickUntilIdle()},this.checkForIdleIntervalMs),this.interval},t.prototype.tickUntilIdle=function(){this.isIdle()&&(clearInterval(this.interval),this.callback())},t.prototype.isIdle=function(){return!1===this.imagesPendingLoad()&&0==this.isActiveInLastTwoSeconds()},t.prototype.isActiveInLastTwoSeconds=function(){return e.Utilities.ActivityMonitor.newFreshnessLevel*e.Utilities.ActivityMonitor.tickRate-this.getActivityFreshness()*e.Utilities.ActivityMonitor.tickRate<t.twoSecondsMs},t.oneSecondMs=1e3,t.twoSecondsMs=2e3,t}();t.IdleWaiter=i}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.View.ViewElements,n=function(){function e(e,t){this.velumLayout=e,this.velumRectangle=t}return e}(),o=function(){function t(){if(this._viewport=null,this._viewportChangeDelayMiliseconds=250,this._reloadOffScreenVelumsOnViewportChangeTimeoutId=null,this._hideAllVisibleVelumsOnPauseTimeoutId=null,this._hideUnderlyingVelumOnHoverTimeoutId=null,t._iframeVelumManager)throw e.RethrowLogger.createError("IframeVelumManager is already instatiated.");this._velumElements=[]}return t.getInstance=function(){return t._iframeVelumManager||(t._iframeVelumManager=new t),t._iframeVelumManager},t.prototype.registerVelumLayoutElement=function(e){var t=new n(e,e.getAbsolutePositionBaseRect());-1===ArrayExtensions.indexOfFirst(this._velumElements,function(t){return t.velumLayout===e})&&this._velumElements.addunique(t)},t.prototype.unregisterVelumLayoutElement=function(e){var t=this._velumElements.firstOrDefault(function(t){return t.velumLayout===e});this._velumElements.removefirst(t)},t.prototype.onViewportUpdate=function(e){var t=this;this._viewport=e,clearTimeout(this._reloadOffScreenVelumsOnViewportChangeTimeoutId),this._reloadOffScreenVelumsOnViewportChangeTimeoutId=platform.setTimeout(function(){t.loadVelumsForIframesOutsideOfViewport()},this._viewportChangeDelayMiliseconds)},t.prototype.loadVelumsForIframesInViewport=function(){this.setVisibilityToVelums(!0,!0)},t.prototype.unloadVelumsForIframesInViewport=function(){this.setVisibilityToVelums(!1,!0)},t.prototype.loadVelumsForIframesOutsideOfViewport=function(){this.setVisibilityToVelums(!0,!1)},t.prototype.setVisibilityToVelums=function(e,t){var i=this;TDB.applyUpdate(function(){for(var n=0;n<i._velumElements.length;n++){var o=i._velumElements[n];o.velumLayout.getVelumVisibility()!==e&&i.isElementRectangleInViewport(o.velumRectangle)===t&&o.velumLayout.setVelumVisibility(e,!1)}},TDB.Justification.SynchronousBrowserEvent)},t.prototype.isElementRectangleInViewport=function(e){return!this._viewport||!e||this._viewport.overlapsRect(e)},t.prototype.handleRootVEMouseMove=function(e){var t=this;this.isMouseEventComingFromVelum(e)||this._previousMouseXOnRootVE===e.pageX&&this._previousMouseYOnRootVE===e.pageY||(clearTimeout(this._hideAllVisibleVelumsOnPauseTimeoutId),this._hideAllVisibleVelumsOnPauseTimeoutId=platform.setTimeout(function(){t.unloadVelumsForIframesInViewport()},CommonSettings.SettingSite_IframeVelumDisappearingTimeOnPauseMilliseconds)),this._previousMouseXOnRootVE=e.pageX,this._previousMouseYOnRootVE=e.pageY},t.prototype.handleRootVETouchMove=function(e){var t=this;this.isMouseEventComingFromVelum(e.originalEvent)||(this.loadVelumsForIframesInViewport(),clearTimeout(this._hideAllVisibleVelumsOnPauseTimeoutId),this._hideAllVisibleVelumsOnPauseTimeoutId=platform.setTimeout(function(){t.unloadVelumsForIframesInViewport()},CommonSettings.SettingSite_IframeVelumDisappearingTimeOnPauseMilliseconds))},t.prototype.handleRootVEMouseScroll=function(e){var t=this;this.isMouseEventComingFromVelum(e)||(this.loadVelumsForIframesInViewport(),clearTimeout(this._hideAllVisibleVelumsOnPauseTimeoutId),this._hideAllVisibleVelumsOnPauseTimeoutId=platform.setTimeout(function(){t.unloadVelumsForIframesInViewport()},CommonSettings.SettingSite_IframeVelumDisappearingTimeOnPauseMilliseconds))},t.prototype.handleVelumLayoutVEMouseEnter=function(e){clearTimeout(this._hideAllVisibleVelumsOnPauseTimeoutId),clearTimeout(this._hideUnderlyingVelumOnHoverTimeoutId),this._hideUnderlyingVelumOnHoverTimeoutId=platform.setTimeout(function(){e.setVelumVisibility(!1)},CommonSettings.SettingSite_IframeVelumDisappearingTimeMilliseconds)},t.prototype.handleVelumLayoutVEMouseLeave=function(e){clearTimeout(this._hideUnderlyingVelumOnHoverTimeoutId)},t.prototype.handleVelumLayoutVEMouseLeftClick=function(e){e.setVelumVisibility(!1)},t.prototype.handleIframeOnLoad=function(t){var i=this;if(e.Utilities.ios){var n=10,o=function(){var r=i.getVelumLayoutVEByIframeId(t.getIframeId());if(!i.updateIframeNativeScrollerWebkitOverflowScrolling(r))if(n-- >0)platform.setTimeout(o,500);else{var a=t.getContentUrl(),s=e.Utilities.extractHostnameFromUrl(a);StoryLog.StructuredTraceTag(596476246,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Failed to update iframe's native-scrollbar element",{embedSrcHostname:s})}};o()}},t.prototype.handleVelumVisibilityChange=function(t){e.Utilities.ios&&this.updateIframeNativeScrollerWebkitOverflowScrolling(t)},t.prototype.getVelumLayoutVEByIframeId=function(e){return this._velumElements.first(function(t){return t.velumLayout.getIframeId()==e}).velumLayout},t.prototype.updateIframeNativeScrollerWebkitOverflowScrolling=function(e){if(!e)return!0;var t=e.getIframeId();if(!t)return!0;var i=$("#"+t);if(!i)return!0;var n,o=!1;try{if(document.getElementById(t).contentWindow.document){n=$("div.native-scroller",i.contents());var r=e.getVelumVisibility()?"auto":"touch";n.css("-webkit-overflow-scrolling",r)}else o=!0}catch(e){o=!0}return!!o||n&&n.length>0},t.prototype.isMouseEventComingFromVelum=function(e){return TDB.ViewElement.dataFor(e.target)instanceof i.VelumLayoutVE},t}();t.IframeVelumManager=o}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(){function t(){this.dict=new e.Utilities.BiDictionary}return t.prototype.add=function(e,t){var i=this.dict.find(e.isAnimated.toString(),e.id);i||(i=[],this.dict.put(e.isAnimated.toString(),e.id,i)),i.push({quality:e.quality,value:t})},t.prototype.remove=function(e){var t=this.dict.find(e.isAnimated.toString(),e.id);if(t)for(var i=0,n=t.length;i<n;++i){var o=t[i];if(o.quality===e.quality)return t.splice(i,1),0===t.length&&this.dict.remove(e.isAnimated.toString(),e.id),o.value}},t.prototype.findBest=function(e){var t={quality:-1,value:null},i=this.dict.find(e.isAnimated.toString(),e.id);if(i)for(var n=0,o=i.length;n<o;++n){var r=i[n];(r.quality>t.quality?t.quality<e.quality:r.quality>=e.quality)&&(t=r)}return t},t.prototype.findGoodEnough=function(e){var t=this.findBest(e);return t.quality>=e.quality?t.value:null},t}();t.ImageSet=i}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(){function i(e,i){new t.IdleWaiter(e,i).wait(this.createIframe.bind(this))}return i.shouldGenerateLoad=function(e,t){var i=e()<t.LoadGenerationRate,n=t.LoadGenerationLimitToInternalFeaturesOnly,o=t.LoadGenerationLimitToCorpnetOnly,r=t.FlightSettings.areInternalFeaturesEnabled,a=t.IsCorpNetAddress,s=n&&r||!n,l=o&&a||!o;return i&&s&&l},i.prototype.createIframe=function(){e.Utilities.weblog("loadgen","Creating iframe");var t=document.createElement("iframe");t.setAttribute("aria-hidden","true"),t.setAttribute("style","width: 1080px; height: 1920px; position: absolute; left: -2000px; top:0px;"),t.src="/v2/"+StoryPageSettings.LookupId+"?ssr=true",document.body.appendChild(t)},i}();t.LoadGenerator=i}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=ClientAction.StatisticalMeasure,i=function(){function e(){ActionLogger.CreateClientMeasure(t[t.ConsumptionScrollChange],{x:null,y:null})}return e.prototype.recordConsumptionChange=function(e,i){var n=i?t.InitialConsumption:t.ConsumptionChange;ActionLogger.ObserveClientMeasure(t[n],{percentConsumed:e})},e.prototype.recordMaxScrollChange=function(e,i){ActionLogger.ObserveClientMeasure(t[t.ConsumptionScrollChange],{x:e,y:i})},e.prototype.setTelemetryContext=function(e){ActionLogger.SetContext(t[t.ConsumptionScrollChange],e)},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e}();e.ScrollPositionTelemetry=i}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._viewRegistry={},e}return __extends(i,t),i.prototype.getPlayerHandle=function(e){return this._viewRegistry[e]},i.prototype.registerPlayer=function(t,i){if(e.Utilities.weblog("mediaplayer","Registering a player for id = "+t),this._viewRegistry[t])throw e.RethrowLogger.createError("Attempting to register a new player for an already registered id "+t);this._viewRegistry[t]=i},i.prototype.unregisterPlayer=function(t,i){if(e.Utilities.weblog("mediaplayer","Unregistering a player for id = "+t),this._viewRegistry[t]!==i)throw e.RethrowLogger.createError("Attempting to unregister a player that isn't registered: "+t+", "+i);delete this._viewRegistry[t]},i.prototype.transferRegisteredPlayers=function(e){for(var t in this._viewRegistry)e.registerPlayer(t,this._viewRegistry[t]),this.unregisterPlayer(t,this._viewRegistry[t])},i}(Disposable);t.TriggerContentManagerBase=i}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){!function(t){function i(e,t){if(e){for(var i=e.getParentContainer(t),n=0,o=0,r=i&&i.position?i.position.getWidth(t):void 0,a=i&&i.position?i.position.getHeight(t):void 0;i;)n+=i.position.getLeft(t),o+=i.position.getTop(t),i=i.getParentContainer(t);return r&&a?new Rect(n,o,r,a):new Rect(n,o)}}function n(t){if(!t)return!1;for(var i=t.getParentContainer();i;){if(i.getKeyFrameType()==e.View.ViewElements.NavigationHelper.getDetailViewKeyFrameType())return!0;i=i.getParentContainer()}return!1}function o(e,t){if(null==e)return null;var i=e.getCurrentViewOptions(t);return null!=i?i.getWorldId(t):""}function r(e,t){if(!e)return null;var i=e.getDefaultViewOptions(t);return i?i.getWorldId(t):""}function a(e,t){var i=e.parent;return i&&i.getZoomState?i.getZoomState(t):new d.ZoomState(!1,!1)}function s(e){return TDB.View.Bindings.Focusable.Binding.isElementFocusable(e)}function l(e,t){if(e)return new BaseRect(e.getLeft(t),e.getTop(t),e.getWidth(t),e.getHeight(t))}function u(e){return e&&0===e.getWidth()&&0===e.getHeight()}var d=e.View.ViewElements;t.getAbsolutePosition=i,t.isDetailView=n,t.getCurrentWorldId=o,t.getDefaultWorldId=r,t.getZoomState=a,t.isElementFocusable=s,t.rectangleToBaseRect=l,t.isZeroRect=u}(t.LayoutUtilities||(t.LayoutUtilities={}))}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=ClientAction.AggregationCounter,i=function(e){function i(){var i={counterScrollbarClick:t.ConsumptionScrollbarClick,counterMouseWheel:t.ConsumptionMouseWheel,counterMouseDown:t.ConsumptionMouseDown,counterKeyboard:t.ConsumptionKeyboard,counterClick:t.ConsumptionClick,enabled:!0};return e.call(this,i)||this}return __extends(i,e),i.getInstance=function(){return i.instance||(i.instance=new i),i.instance},i}(e.UserInteractionTelemetry);e.ConsumptionInteractionTelemetry=i}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(i){function n(e,t){var n=i.call(this,e,TDB.ControlSetFeatures.Isolated)||this;return n.args=t,n}return __extends(n,i),n.prototype.editTemplateButtonArgs=function(){var i=this,n={buttonId:ClientAction.ButtonId.AppBar_EditTemplate,click:function(e){return i.editTemplateClicked(e)},cssClass:{value:"editTemplateButton"},context:this,description:{value:Resources.EditTemplateFooterButtonText},fontIconName:{value:FontIcons.PreviewEditTemplateIcon},fontIconSizeClass:FontIcons.PreviewEditTemplateIconSize,fontIconWrapperClass:{value:"editTemplateButtonIconWrapper"},text:{value:Resources.EditTemplateFooterButtonText},textClass:"editTemplateButtonText",domFocusable:{compute:new TDB.ComputedOptionArgs(this,function(e){return i.isEntered(e)})},glyphButtonWrapperClassName:"editTemplateButtonGlyphWrapper"};return e.Utilities.onResize(function(){var e=$(".editTemplateButton");e.addClass("editTemplateResizing"),platform.setImmediate(function(){return e.removeClass("editTemplateResizing")})},this),new TDB.ChildArgs(t.GlyphButtonVE,n)},n.prototype.editTemplateClicked=function(i){return t.EditTemplateDialog.createAndShow(this.args.currentStory.getLookupId(),this.args.titleWatcher.getValue(),e.Common.UrlHelper.getInstance().mySwaysUrl()),TDB.EventPropagation.Bypass},n.prototype.getOrder=function(){return t.RegionOrderIndex.EditTemplateButton},n}(t.RegionViewElement);t.EditTemplateButtonWrapperVEBase=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){function n(){return StoryPageSettings&&StoryPageSettings.Mode!==StoryViewMode.Edit}var o=e.View.ViewElements.CastEditOwnerDialog,r=e.View.ViewElements.EditTokenRetrievalDialog,a=e.View.ViewElements.EditStoryWrongUserDialog,s=e.Common,l=e.View.Common.FRE,u=e.Common.TelemetryConstants;i.renderButtonClass="renderButton",i.verticalScrollClass="vScroll",i.horizontalScrollClass="hScroll",i.horizontalVerticalScrollClass="hvScroll",i.chunkedScrollerClass="chunkedScroller";i.ViewModel=null;var d=function(n){function d(t,o){var r=n.call(this,t)||this;return r.clientSignalListeners=[],r.consumptionWorldSwitchAllowed=TDB.watchableTag(596136658,r,!StoryPageSettings.AuthorBlockConsumptionWorldSwitch),r.args=o,r.constructStoryPage(),r.autoplayControlsViewModel=new i.AutoPlayControlButtonsViewModel({autoPlayDriverProvider:new e.Common.Lazy(r.getAutoPlayDriver.bind(r)),inDom:{compute:new TDB.ComputedOptionArgs(r,function(e){return!r.previewVE._root.getWatchedValue(e).getModalDialogManager().isDialogOpen(e)})},storyPage:r}),r}return __extends(d,n),d.prototype.keyDown=function(e){switch(e.keyCode){case KeyCodeType.EscapeKey:this.fullScreenManager.exitFullScreen()}return TDB.EventPropagation.Bubble},d.prototype.constructStoryPage=function(){this.interactionlogger=new c,this.viewinputlogger=i.ConsumptionInteractionTelemetry.getInstance(),this.scrollPositionlogger=this.args.scrollPositionTelemetry,this.audioPlayerManager=new t.Common.AudioPlayerManager(this,this.args.resourceFactory),this.videoPlayerManager=new t.Common.VideoPlayerManager({owner:this,enablePreloading:StoryPageSettings.SiteVideoPreloadingEnabled}),this.audioPlayerManager.setVideoPlayerManager(this.videoPlayerManager),this.videoPlayerManager.setAudioPlayerManager(this.audioPlayerManager),this.showUpdateStatus=TDB.watchableTag(596136659,this,!1),this.parent.registerEventHandler(this.viewinputlogger),this.titleWatcher=TDB.watcherTag(596136660,this,this,this.getModelTitle),this.viewOptionOverridesWatchable=TDB.watchableTag(596136661,this,new ViewOptionOverrides),this.toCViewVisible=TDB.watchableTag(596136662,this,!1),s.Environment.getInstance().onResize(this.beforeResize,this.afterResize,this),this.navigationSyncManager=void 0,this.createTimeLineTocViewModel()},d.prototype.createTimeLineTocViewModel=function(){var e={features:TDB.ControlSetFeatures.Isolated,visible:this.toCViewVisible,role:Aria.Roles.Dialog,title:Resources.ToCViewDialogHelpText,description:Resources.ToCViewDialogLabel,viewModel:new i.ToCViewModel(TDB.watcherTag(596124609,this,this,this.getFontScale)),animationDisabled:this.parent.animationDisabled};this.timelineToCViewModel=new i.TimelineToCViewModel(e)},d.prototype.getFontScale=function(e){return this.viewOptionOverridesWatchable.getWatchedValue(e).getFontScale()},d.prototype.isWaitingForUpdate=function(e){return this.waitingForUpdate.getWatchedValue(e)},d.prototype.getSettings=function(){return CommonSettings},d.prototype.getLastEditedContentId=function(){return null},d.prototype.shouldNavigateToPreviewTarget=function(){return!1},d.prototype.getActiveCardModelId=function(e){return null},d.prototype.isDialogOpen=function(e){return this.isToCViewVisible(e)||this.isModalDialogOpen(e)},d.prototype.tocPullDownRegionArgs=function(e){var t=s.UserState.getInstance().isUserOnFlight(FlightList.ToCPullDownView1),n=this.isToCViewVisible(e)||this.isModalDialogOpen(e);if(StoryPageSettings.UseToCPullDownBar&&t&&!n){var o={dialogsVisible:TDB.watcherTag(596136663,this,this,this.isDialogOpen)};return new TDB.ChildArgs(i.ToCPullDownRegionVE,o)}},d.prototype.showAccessibleModeLinkArgs=function(t){var i=this.isEditMode.getWatchedValue(t),n=e.Common.UrlHelper.getInstance().isAccessibilityView(t);return!(i||n)},d.prototype.showDummySwitcherArgs=function(e){return!this.isEditMode.getWatchedValue(e)},d.prototype.accessibleModeLinkAttrArgs=function(e){return{href:s.UrlHelper.getInstance().accessibilityViewUrl(StoryPageSettings.LookupId,!1,StoryPageSettings.EmbedHostMode),title:Resources.AccessibilityViewTooltip}},d.prototype.accessibleModeLinkStyleArgs=function(t){var i=this.getTopPosition(t);return{top:e.Utilities.toPxStr(10+i)}},d.prototype.accessibleModeLinkTextArgs=function(e){return Resources.AccessibilityView},d.prototype.accessibleModeLinkEventsInitArgs=function(){return{click:this.handleAccessibleModeLinkClick}},d.prototype.handleAccessibleModeLinkClick=function(e){return this.args.currentStory.handleAccessibilityLink()},d.prototype.getSharingManager=function(){return this.args.sharingManager},d.prototype.autoPlayStatusTextArgs=function(e){if(this.isAutoPlayAvailable(e))switch(this.getAutoPlayDriver().getState(e)){case t.Common.AutoPlayState.Playing:return Resources.AutoPlayStartedScreenReaderNotification;case t.Common.AutoPlayState.Stopped:return Resources.AutoPlayStoppedScreenReaderNotification;case t.Common.AutoPlayState.Paused:return Resources.AutoPlayPausedScreenReaderNotification;default:return}},d.prototype.notificationBarWrapperArgs=function(){return i.NotificationBarViewModel.getNotificationBar(this).getViewElementArgs()},d.prototype.setup=function(t,n,l,u){var d=this;this.setTelemetryContext({WorldId:this.getWorldId(),StyleId:this.getLayoutStyleId()}),this.storyViewMode=TDB.watchableTag(596136664,this,t);var c=t.toString();StoryLog.TraceTag(596136665,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"User Action : Opening in "+c,null);var p=t===StoryViewMode.Edit;if(this.waitingForUpdate=n,this.blockingUpdate=l,this.hidePreview=u,this.isPreviewMode=TDB.watcher(this,this,this.computeIsPreviewMode),this.isEditMode=TDB.watcher(this,this,this.computeIsEditMode),this.isEmbeddedMode=TDB.watcher(this,this,this.computeIsEmbeddedMode),this.isRenderRootEnabled=TDB.watcher(this,this,this.computeIsRenderRootEnabled),this.inEmbedHostMode=StoryPageSettings.EmbedHostMode==EmbedHostType.ddprofile,this.authoringPaneOpen=TDB.watcher(this,this,this.computeIsAuthoringPaneOpen),this.isObscured=TDB.watchable(this,!1),this.fullScreenManager=new i.FullScreenManager(this.isEmbeddedMode),this.videoPlayerManager.setIsEditModeWatchable(this.isEditMode),this.constructAutoPlayDriver(),this.constructPreviewVE(),(t===StoryViewMode.AuthoringDisabled||p&&e.Settings.ServiceSwitches.authoringDisabled.getValue())&&((g=i.NotificationBarViewModel.getNotificationBar(this)).addNotification({messages:[{text:Resources.AuthoringDisabledNotificationMessage}],notificationSource:i.NotificationSource.StoryPageSetupAuthoringDisabled,notificationType:i.NotificationType.Info}),StoryLog.TraceTag(596136666,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Author attempted to browse to a Sway while authoring is disabled.")),StoryPageSettings.ShowOpenInIOSAppNotification&&StoryPageSettings.IsAnAuthorOfThisSway&&t===StoryViewMode.Preview&&e.Utilities.browser.isiOS&&e.Utilities.browser.isMobile&&CommonSettings.ClientApp!==AppType.iOSApp){var g=i.NotificationBarViewModel.getNotificationBar(this);g.addNotification({messages:[{text:Resources.EditInIOSAppNotificationMessage}],notificationSource:i.NotificationSource.OpenInIOSApp,notificationType:i.NotificationType.Info})}StoryPageSettings.EditTokenRetrievalId&&r.createAndShow(StoryPageSettings.LookupId,StoryPageSettings.EditTokenRetrievalId,this.getModelTitle()),StoryPageSettings.CastEditEnabled&&!this.isEditMode.getValue()&&e.Common.UrlHelper.getInstance().getCastRedirectLink()&&(CommonSettings.IsAuthenticated?o.createAndShow(StoryPageSettings.LookupId,this.getModelTitle(),CommonSettings.CastUrl):e.Identity.getActions().signIn()),s.Environment.getInstance().areInternalFeaturesEnabled()&&t===StoryViewMode.Preview&&e.Utilities.query.fetch(e.Common.UrlHelper.URLParamEdit)===e.Common.UrlHelper.URLParamValueTrue&&(StoryLog.TraceTag(596136667,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Edit Query Param : URL contained a query param to show the edit expierence"),CommonSettings.IsAuthenticated&&(StoryLog.TraceTag(596136668,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Edit Query Param : User signed-in doesn't have edit permissions."),a.createAndShow(CommonSettings.EmailAddress,StoryPageSettings.Owner))),this.contextMenuEventHandler=function(e){var t=TDB.ViewElement.dataFor(e.target);return null!=t&&t.handleMouseEvent(e,TDB.ViewElementMouseEventType.ContextMenuEvent),!0},$(document).bind("contextmenu",this.contextMenuEventHandler),this.blurEventHandler=function(){StoryLog.TraceTag(596136669,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.verbose,"Window Losing Focus",null)},$(window).blur(this.blurEventHandler),this.focusEventHandler=function(){StoryLog.TraceTag(596136670,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.verbose,"Window Gaining Focus",null)},$(window).focus(this.focusEventHandler),this.pointerDownEventListener=function(e){"mouse"!==e.pointerType&&StoryLog.TraceTag(596136671,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.verbose,"User Action: "+e.pointerType+", (X, Y)=("+e.pageX+", "+e.pageY+")",null)},document.body.addEventListener("pointerdown",this.pointerDownEventListener,!1),this.msPointerDownEventListener=function(e){e.pointerType===e.MSPOINTER_TYPE_PEN?StoryLog.TraceTag(596136672,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.verbose,"User Action: Pen , (X, Y)=("+e.pageX+", "+e.pageY+")",null):e.pointerType===e.MSPOINTER_TYPE_TOUCH&&StoryLog.TraceTag(596136673,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.verbose,"User Action: Touch , (X, Y)=("+e.pageX+", "+e.pageY+")",null)},document.body.addEventListener("MSPointerDown",this.msPointerDownEventListener,!1),CommonSettings.AuthoringFromLandingPageContextEnabled||(window.onpopstate=function(e){d.previewVE.onPopState(e)})},d.prototype.constructNavigationSyncManager=function(){this.navigationSyncManager=void 0},d.prototype.constructPreviewVE=function(){var t=this;this.constructNavigationSyncManager();var i={currentStory:this.args.currentStory,isRenderRootEnabled:this.isRenderRootEnabled,navigationSyncManager:this.navigationSyncManager,autoPlayDriver:this.getAutoPlayDriver(),sharingManager:this.getSharingManager(),resourceFactory:this.args.resourceFactory,isAnimationsDisabled:this.parent.animationDisabled,historyClientId:this.args.historyClientId,storylineVisible:this.storylineVisible};this.previewVE=new e.View.ViewElements.PreviewVE(t,i)},d.prototype.constructAutoPlayDriver=function(){var i=this,n={onAutoPlayStarted:l.FirstRunTriggers.autoPlayStarted,onAutoPlayStopped:l.FirstRunTriggers.autoPlayStopped},o={eventHandler:{compute:new TDB.ComputedOptionArgs(this,function(e){return i.previewVE._root.getWatchedValue(e)})},eventListener:n,currentStory:this.args.currentStory,isEditMode:{watchable:this.isEditMode},isUpdateInProgress:{compute:new TDB.ComputedOptionArgs(this,function(e){return i.isUpdateInProgres(e)})},urlHelper:e.Common.UrlHelper.getInstance()};this.autoPlayDriver=new t.Common.AutoPlayDriver(this,o)},d.prototype.toggleEditMode=function(e){l.getCalloutManager().clearCallouts(),l.FirstRunTriggers.returnToAuthoringClicked();var t=StoryPageSettings.LookupId;return s.AppBarAction.getInstance().GoToEdit(t),TDB.EventPropagation.Bypass},d.prototype.createAppBar=function(t,n){var o=this;if(this.appBar&&(this.removeResource(this.appBar),this.appBar.dispose()),e.Common.Environment.getInstance().shouldDisplayConsumptionAppBar(StoryPageSettings.IsNativeClient)){var r={isEmbedMode:this.isEmbeddedMode,inEmbedHostMode:this.inEmbedHostMode,userState:this.args.userState,currentStory:this.args.currentStory,autoPlayDriver:this.getAutoPlayDriver(),resourceFactory:this.args.resourceFactory,sharingManager:this.getSharingManager(),isAnimationsDisabled:this.parent.animationDisabled,overflowButtons:this.getOverflowButtons(n),buttons:this.getAppBarGroups(t),verticalPadding:{compute:new TDB.ComputedOptionArgs(this,this.getTopPosition)},titleWatcher:this.titleWatcher};this.appBar=new i.ConsumptionAppBarVE(o,r),this.addResource(this.appBar)}},d.appBarButtonsToCreate=function(){return[i.AppBarButtonLabel.InternalFeatures,i.AppBarButtonLabel.Edit,i.AppBarButtonLabel.ConsumptionSettings,i.AppBarButtonLabel.Share,i.AppBarButtonLabel.Fullscreen,i.AppBarButtonLabel.Overflow]},d.overflowMenuButtonsToCreate=function(){return[i.OverflowButtonLabel.OpenInNewTab,i.OverflowButtonLabel.AccessibilityView,i.OverflowButtonLabel.InternalFeatures,i.OverflowButtonLabel.PremiumFeatures,i.OverflowButtonLabel.SignIn,i.OverflowButtonLabel.MyStories,i.OverflowButtonLabel.CreateNew,i.OverflowButtonLabel.DuplicateStory,i.OverflowButtonLabel.SaveAsTemplate,i.OverflowButtonLabel.ExportStory,i.OverflowButtonLabel.PrintStory,i.OverflowButtonLabel.Download,i.OverflowButtonLabel.Help,i.OverflowButtonLabel.User,i.OverflowButtonLabel.SignOut]},d.prototype.getAppBar=function(){return this.appBar},d.prototype.getConsumptionAppBar=function(){return this.appBar},d.prototype.getToCPullDownRegion=function(){return this.tocPullDownRegion},d.prototype.getAppBarGroups=function(e){var t=[];return ArrayExtensions.contains(e,i.AppBarButtonLabel.InternalFeatures)&&(CommonSettings.AuthorConsumptionPlayEnabled||StoryPageSettings.Mode!==StoryViewMode.Edit)&&this.createInternalFeaturesGroup(t),ArrayExtensions.contains(e,i.AppBarButtonLabel.Edit)&&StoryPageSettings.IsAnAuthorOfThisSway&&i.StoryPageVE.isAuthoringSupported()&&!CommonSettings.IsTemplateSway&&this.createEditPageAppBarGroup(t),ArrayExtensions.contains(e,i.AppBarButtonLabel.Share)&&i.StoryPageVE.shouldCreateShareButton()&&(StoryPageSettings.Mode===StoryViewMode.Edit?this.createShareGroup(t):this.createSocialFlyoutShareGroup(t)),ArrayExtensions.contains(e,i.AppBarButtonLabel.ConsumptionSettings)&&i.StoryPageVE.shouldCreateConsumptionSettingsButton()&&this.createConsumptionSettingsGroup(t),ArrayExtensions.contains(e,i.AppBarButtonLabel.Fullscreen)&&!this.inEmbedHostMode&&this.isEmbeddedMode.getValue()&&this.createFullscreenGroup(t),ArrayExtensions.contains(e,i.AppBarButtonLabel.Overflow)&&this.shouldCreateOverflowGroup()&&this.createOverflowGroup(t),t},d.isAuthoringSupported=function(){return StoryPageSettings.Mode!=StoryViewMode.AuthoringDisabled&&StoryPageSettings.Mode!=StoryViewMode.Embedded&&"Mobile"!==CommonSettings.ClientDevice&&CommonSettings.ClientApp!=AppType.iOSApp&&CommonSettings.AuthorConsumptionPlayEnabled},d.shouldCreateEditTemplateButton=function(){return i.StoryPageVE.isAuthoringSupported()&&CommonSettings.IsTemplateSway&&CommonSettings.TemplateStoriesEnabled&&CommonSettings.IsAuthenticated},d.shouldCreateDuplicateButton=function(){return!CommonSettings.BlockDuplicationFeature&&(!StoryPageSettings.AuthorBlockDuplication||StoryPageSettings.IsOwner)&&!CommonSettings.IsTemplateSway},d.shouldCreateSaveAsTemplateButton=function(){return i.StoryPageVE.shouldCreateDuplicateButton()&&CommonSettings.IsPaidUser},d.shouldCreatePrintButton=function(){return CommonSettings.IsExportStoryEnabled},d.shouldCreateExportButton=function(){return CommonSettings.IsExportStoryEnabled},d.shouldCreateConsumptionSettingsButton=function(){return!e.Common.UrlHelper.getInstance().isAccessibilityView()&&!CommonSettings.IsTemplateSway&&StoryPageSettings.EmbedHostMode!==EmbedHostType.ddprofile},d.shouldCreateShareButton=function(){return(null==StoryPageSettings.EmbedHostMode||StoryPageSettings.EmbedHostMode===EmbedHostType.none)&&e.Common.Branding.shareButtonVisible()&&!CommonSettings.IsTemplateSway},d.prototype.shouldCreateOverflowGroup=function(){return!this.isEmbeddedMode.getValue()||!(!CommonSettings.SiteOverflowMenuInEmbeddedSwayEnabled||this.inEmbedHostMode||!e.Common.Branding.embedSwayOverflowMenuVisible())},d.prototype.createInternalFeaturesGroup=function(e){var t=this;if(s.Environment.getInstance().shouldDisplayInternalFeaturesButton()){var n={context:this,click:this.internalFeaturesClicked,text:{value:Resources.InternalFeatures},buttonId:ClientAction.ButtonId.AppBar_InternalFeatures,cssClass:{value:i.StoryAppBarButtonGroupVEBase.getConsumptionButtonClass()+" internalConsumptionButton"},visible:{compute:new TDB.ComputedOptionArgs(this,function(e){return!t.isAutoplayStarted(e)})}};e.push({label:i.AppBarButtonLabel.InternalFeatures,type:i.TextButtonVE,args:n})}},d.prototype.internalFeaturesClicked=function(e){return s.AppBarAction.getInstance().ToggleInternalFlight(),TDB.EventPropagation.Bypass},d.prototype.createEditPageAppBarGroup=function(e){var t={buttonId:ClientAction.ButtonId.AppBar_Edit,click:this.toggleEditMode.bind(this),text:{value:Resources.Edit},textPlacementRight:!0,textClass:"headerFarButtonText headerFarButtonTextDynamic",context:this.appBar,description:{value:Resources.ConsumptionEditSwaySettingsButtonDescription},tooltip:{value:Resources.ConsumptionEditSwaySettingsButtonDescription},enabled:{watchable:s.Environment.getInstance().getClientOnlineWatcher()},fontIconName:{value:FontIcons.PreviewEditIcon},fontIconSizeClass:FontIcons.PreviewEditIconSize,cssClass:{value:i.StoryAppBarButtonGroupVEBase.getConsumptionTextButtonClass()}};e.push({label:i.AppBarButtonLabel.Edit,type:i.CalloutGlyphButtonVE,args:t})},d.shouldShowShareDropdown=function(){return e.Common.Branding.shareButtonVisible()&&!StoryPageSettings.ShareButtonBlocked},d.prototype.createShareGroup=function(e){var t=this;if(d.shouldShowShareDropdown()){var n=this.createPrivacyCallout(),o={buttonId:ClientAction.ButtonId.Story_AppBar_SocialFlyout,context:this,click:function(e){return t.isEditMode.getValue()?TDB.EventPropagation.Bubble:(t.appBar.toggleShareMenu(),l.FirstRunTriggers.shareButtonClicked(),TDB.EventPropagation.Bypass)},textElementText:{value:Resources.Share},cssClass:{value:i.StoryAppBarButtonGroupVEBase.getConsumptionTextButtonClass()},textClass:"headerFarButtonText headerFarButtonTextDynamic",tooltip:{value:Resources.SharingToggleSwitchLabel},description:{value:Resources.SharingToggleSwitchLabel},fontIconArgs:{value:{fontIconName:{value:FontIcons.CoAuthorHeaderButtonIcon},fontIconSizeClass:FontIcons.PreviewShareThisIconSize,fontIconWrapperClass:{value:"headerBarFontIconWrapper"}}},hasPopup:!0,calculateChecked:function(e){return t.appBar.getShareMenuVisibleWatcher().getWatchedValue(e)},shortcutIdentifiers:["Alt+Shift+SKey"],shortcutProcessor:i.DomEventRegister.getInstance().getRootPanelElement(),visible:{compute:new TDB.ComputedOptionArgs(this,function(e){return!t.isAutoplayStarted(e)})},superScriptClassName:{value:"authorsFontIconSuperScript"},calloutArgs:{value:n}};e.push({label:i.AppBarButtonLabel.Share,type:i.ToggleButtonVE,args:o})}},d.prototype.clearFlagsFromNavigationCallouts=function(){switch(e.View.ViewElements.ViewModel.getWorldId()){case d.verticalWorld:l.getFirstRunManager().clearCalloutHistory(l.CalloutID.VerticalNavigation);break;case d.panoramaWorld:l.getFirstRunManager().clearCalloutHistory(l.CalloutID.PanoramaNavigation);break;case d.expoWorld:l.getFirstRunManager().clearCalloutHistory(l.CalloutID.ExpoNavigation)}},d.prototype.createSocialFlyoutShareGroup=function(e){var t=this;if(d.shouldShowShareDropdown()){var n=this.createPrivacyCallout(),o={buttonId:ClientAction.ButtonId.Story_AppBar_SocialFlyout,context:this,click:function(e){return t.isEditMode.getValue()?TDB.EventPropagation.Bubble:(t.appBar.toggleShareMenu(),TDB.EventPropagation.Bypass)},cssClass:{value:i.StoryAppBarButtonGroupVEBase.getConsumptionTextButtonClass()},textClass:"headerFarButtonText headerFarButtonTextDynamic",textElementText:{value:Resources.Share},tooltip:{value:Resources.SharingToggleSwitchLabel},description:{value:Resources.SharingToggleSwitchLabel},fontIconArgs:{value:{fontIconName:{value:FontIcons.CoAuthorHeaderButtonIcon},fontIconSizeClass:FontIcons.PreviewShareThisIconSize,fontIconWrapperClass:{value:"headerBarFontIconWrapper"}}},hasPopup:!0,calculateChecked:function(e){return t.appBar.getShareMenuVisibleWatcher().getWatchedValue(e)},shortcutIdentifiers:["Alt+Shift+SKey"],shortcutProcessor:i.DomEventRegister.getInstance().getRootPanelElement(),superScriptClassName:{value:"authorsFontIconSuperScript"},visible:{compute:new TDB.ComputedOptionArgs(this,function(e){return!t.isAutoplayStarted(e)})},calloutArgs:{value:n}};e.push({label:i.AppBarButtonLabel.Share,type:i.ToggleButtonVE,args:o})}},d.prototype.createPrivacyCallout=function(){var e=this,t=s.UrlHelper.getInstance(),n=StoryPageSettings.IsOwner,o=n?l.CalloutID.DigitalPrintWelcome:l.CalloutID.ShareSwayAADRecipients;return{calloutWrapperClassName:"DigitalPrintAuthoringCalloutWrapper",calloutBoxClassName:"DigitalPrintWelcomeInternal-callout",headerText:{value:Resources.FirstRunDigitalPrintShareTitle},bodyText:n?Resources.FirstRunDigitalPrintShareText:Resources.FirstRunShareAADRecipients,readerText:n?Resources.FirstRunDigitalPrintWelcomeAADFirstBody:Resources.FirstRunShareAADRecipients,beakPosition:i.BeakPosition.TopRight,calloutID:o,delay:l.getDelayForCallout(o,l.FirstRunType.Default),linkText:Resources.FirstRunDigitalPrintShareLink,linkUrl:t.getSwayPrivacyHelpArticleLink(),dismissCallback:function(){i.NavigationHelper.hasContentOverflow()&&(e.clearFlagsFromNavigationCallouts(),l.StoryFirstRunHelper.triggerPlayEntered())}}},d.prototype.getRestoreUrl=function(){return i.ViewModel&&i.ViewModel.previewVE?i.RestoreState.generateRestoreUrlFromRestorePoint(i.ViewModel.previewVE._root.getValue()):null},d.prototype.isAnimationSwitchAvailable=function(e){return i.ConsumptionSettingsMenuVEBase.getAnimationSwitchEnabled(e)},d.prototype.getConsumptionWorldSwitchEnabled=function(t){return e.WorldList.GetSelectableWorlds(t).length>1&&s.Environment.getInstance().isClientOnline(t)},d.prototype.isConsumptionWorldSwitchAvailable=function(e){return this.consumptionWorldSwitchAllowed.getWatchedValue(e)&&this.getConsumptionWorldSwitchEnabled(e)},d.prototype.getConsumptionSettingsVisible=function(e){return(this.isAnimationSwitchAvailable(e)||this.isAutoPlayAvailable(e)||this.isConsumptionWorldSwitchAvailable(e))&&!this.isAutoplayStarted(e)},d.prototype.consumptionSettingsCalloutArgs=function(e){var t=void 0;if(this.isAutoPlayAvailable(e)){var n=l.CalloutID.AutoPlayConsumptionSettingsButton;t={calloutBoxClassName:"ConsumptionAutoPlaySettings-callout",calloutTapClassName:"ConsumptionAutoPlaySettings-tap-callout",calloutWrapperClassName:"ConsumptionAutoPlaySettings-callout-wrapper",headerText:{value:Resources.FirstRunAutoPlayConsumptionSettingsHeader},readerText:Resources.FirstRunAutoPlayConsumptionSettingsReader,beakPosition:i.BeakPosition.TopRight,calloutID:n,inAnimation:"none",delay:l.getDelayForCallout(n,l.FirstRunType.Default)}}return t},d.prototype.createConsumptionSettingsGroup=function(e){var t=this,n={buttonId:ClientAction.ButtonId.AppBar_ConsumptionSettings,click:function(e){return t.appBar.toggleConsumptionSettingsMenu(e),l.FirstRunTriggers.consumptionSettingsButtonClicked(),TDB.EventPropagation.Bypass},context:this,tooltip:{value:Resources.ConsumptionSettingsButtonDescription},description:{value:Resources.ConsumptionViewSettingsButtonShortDescription},fontIconArgs:{value:{fontIconName:{value:FontIcons.ConsumptionSettingsIcon},fontIconSizeClass:FontIcons.ConsumptionSettingsIconSize,fontIconWrapperClass:{value:"consumptionHeaderBarFontIconWrapper"}}},hasPopup:!0,calculateChecked:function(e){return t.appBar.getConsumptionSettingsMenuVisibleWatcher().getWatchedValue(e)},visible:{compute:new TDB.ComputedOptionArgs(this,this.getConsumptionSettingsVisible)},calloutArgs:{compute:new TDB.ComputedOptionArgs(this,this.consumptionSettingsCalloutArgs)}};e.push({label:i.AppBarButtonLabel.ConsumptionSettings,type:i.ToggleButtonVE,args:n})},d.shouldShowUnauthenticatedTemplateCallout=function(){return CommonSettings.TemplateStoriesEnabled&&CommonSettings.IsTemplateSway&&!CommonSettings.IsAuthenticated},d.prototype.createOverflowGroup=function(e){var t,n=this;if(i.StoryPageVE.shouldShowUnauthenticatedTemplateCallout()){var o={calloutBoxClassName:"TemplateUnauthenticated-callout",calloutTapClassName:"TemplateUnauthenticated-tap-callout",headerText:{value:Resources.FirstRunEditTemplateUnauthenticatedHeader},readerText:Resources.FirstRunEditTemplateUnauthenticatedHeader,beakPosition:i.BeakPosition.TopRight,calloutID:l.CalloutID.OverflowButton,inAnimation:"none",delay:l.getDelayForCallout(l.CalloutID.OverflowButton,l.FirstRunType.Default)};t={buttonId:ClientAction.ButtonId.AppBar_Overflow,context:this,click:function(e){return n.appBar.toggleOverflowMenu(e),TDB.EventPropagation.Bypass},description:{value:Resources.OverflowButtonShortDescription},tooltip:{value:Resources.ConsumptionMoreOptionsButtonTitle},fontIconArgs:{value:{fontIconName:{value:FontIcons.PreviewOverflowIcon},fontIconSizeClass:FontIcons.PreviewOverflowIconSize,fontIconWrapperClass:{value:"consumptionHeaderBarFontIconWrapper"}}},hasPopup:!0,calculateChecked:function(e){return n.appBar.getOverflowVisibleWatcher().getWatchedValue(e)},telemetryId:u.overflowButtonId,visible:{compute:new TDB.ComputedOptionArgs(this,function(e){return!n.isAutoplayStarted(e)})},calloutArgs:{value:o}}}else t={buttonId:ClientAction.ButtonId.AppBar_Overflow,context:this,click:function(e){return n.appBar.toggleOverflowMenu(e),TDB.EventPropagation.Bypass},description:{value:Resources.OverFlowButtonDescription},tooltip:{value:Resources.ConsumptionMoreOptionsButtonTitle},fontIconArgs:{value:{fontIconName:{value:FontIcons.PreviewOverflowIcon},fontIconSizeClass:FontIcons.PreviewOverflowIconSize,fontIconWrapperClass:{value:"consumptionHeaderBarFontIconWrapper"}}},hasPopup:!0,calculateChecked:function(e){return n.appBar.getOverflowVisibleWatcher().getWatchedValue(e)},telemetryId:u.overflowButtonId,visible:{compute:new TDB.ComputedOptionArgs(this,function(e){return!n.isAutoplayStarted(e)})}};e.push({label:i.AppBarButtonLabel.Overflow,type:i.ToggleButtonVE,args:t})},d.prototype.createFullscreenGroup=function(e){var t=this,n={buttonId:ClientAction.ButtonId.AppBar_Fullscreen,click:$.proxy(this.toggleFullscreen,this),context:this.appBar,description:{value:Resources.FullscreenButtonDescription},fontIconName:{compute:new TDB.ComputedOptionArgs(this,this.getFullscreenButtonFontIconName)},fontIconSizeClass:FontIcons.PreviewEnterFullscreenIconSize,nativeKeyboardHandling:!0,visible:{compute:new TDB.ComputedOptionArgs(this,function(e){return t.isEmbeddedMode.getWatchedValue(e)&&!t.isAutoplayStarted(e)})}};e.push({label:i.AppBarButtonLabel.Fullscreen,type:i.GlyphButtonVE,args:n})},d.prototype.getFullscreenButtonFontIconName=function(e){return this.fullScreenManager.isFullscreen(e)?FontIcons.PreviewExitFullscreenIcon:FontIcons.PreviewEnterFullscreenIcon},d.prototype.toggleFullscreen=function(e){return ActionLogger.RecordClientAction(new ClientAction.ButtonClickAction(ClientAction.ButtonId.TopMenu_Fullscreen,Diag.ULSCat.msoulscat_Story_Site)),this.fullScreenManager.canToggleFullscreen()?this.fullScreenManager.toggleFullscreen():window.open(s.UrlHelper.getInstance().viewUrl(StoryPageSettings.LookupId),"_blank"),!1},d.prototype.addOverflowMenuButtonIfIncluded=function(e,t,n,o){ArrayExtensions.contains(n,e)&&t.push({type:i.OverflowMenuChildType.BuiltIn,label:e,category:o})},d.prototype.getOverflowButtons=function(t){var n=[];if(CommonSettings.SiteOverflowMenuInEmbeddedSwayEnabled&&!this.inEmbedHostMode&&this.isEmbeddedMode.getValue()){var o={context:this,click:function(e){if(StoryPageSettings){var t=s.UrlHelper.getInstance().viewUrl(StoryPageSettings.LookupId);window.open(t,"_blank")}return TDB.EventPropagation.Bypass},text:{value:Resources.OpenInNewTabButtonDescription},buttonId:ClientAction.ButtonId.AppBar_OpenInNewTab,telemetryId:u.appBarOpenInNewTabButtonId};return ArrayExtensions.contains(t,i.OverflowButtonLabel.OpenInNewTab)&&n.push({type:i.OverflowMenuChildType.GlyphButton,label:i.OverflowButtonLabel.OpenInNewTab,args:o,visible:void 0,category:i.OverflowMenuCategory.Navigation}),ArrayExtensions.contains(t,i.OverflowButtonLabel.AccessibilityView)&&n.push({type:i.OverflowMenuChildType.BuiltIn,label:i.OverflowButtonLabel.AccessibilityView,useNewTab:!1,category:i.OverflowMenuCategory.Settings}),n}return this.addOverflowMenuButtonIfIncluded(i.OverflowButtonLabel.InternalFeatures,n,t,i.OverflowMenuCategory.Settings),this.addOverflowMenuButtonIfIncluded(i.OverflowButtonLabel.PremiumFeatures,n,t,i.OverflowMenuCategory.Settings),CommonSettings.IsAuthenticated||this.addOverflowMenuButtonIfIncluded(i.OverflowButtonLabel.SignIn,n,t,i.OverflowMenuCategory.Global),CommonSettings.IsEnabled&&e.Common.Branding.swayManagementVisible()&&(CommonSettings.IsAuthenticated&&(this.addOverflowMenuButtonIfIncluded(i.OverflowButtonLabel.MyStories,n,t,i.OverflowMenuCategory.Navigation),s.Environment.getInstance().shouldShowAuthoringEntrypoints()&&(this.addOverflowMenuButtonIfIncluded(i.OverflowButtonLabel.CreateNew,n,t,i.OverflowMenuCategory.File),ArrayExtensions.contains(t,i.OverflowButtonLabel.DuplicateStory)&&i.StoryPageVE.shouldCreateDuplicateButton()&&n.push({type:i.OverflowMenuChildType.BuiltIn,label:i.OverflowButtonLabel.DuplicateStory,context:this,getStoryTitle:this.getModelTitle,category:i.OverflowMenuCategory.File}),ArrayExtensions.contains(t,i.OverflowButtonLabel.SaveAsTemplate)&&i.StoryPageVE.shouldCreateSaveAsTemplateButton()&&n.push({type:i.OverflowMenuChildType.BuiltIn,label:i.OverflowButtonLabel.SaveAsTemplate,context:this,getStoryTitle:this.getModelTitle,category:i.OverflowMenuCategory.File}))),CommonSettings.EnableStoryDownload&&this.addOverflowMenuButtonIfIncluded(i.OverflowButtonLabel.Download,n,t,i.OverflowMenuCategory.File)),i.StoryPageVE.shouldCreatePrintButton()&&this.addOverflowMenuButtonIfIncluded(i.OverflowButtonLabel.PrintStory,n,t,i.OverflowMenuCategory.File),i.StoryPageVE.shouldCreateExportButton()&&this.addOverflowMenuButtonIfIncluded(i.OverflowButtonLabel.ExportStory,n,t,i.OverflowMenuCategory.File),this.addOverflowMenuButtonIfIncluded(i.OverflowButtonLabel.Help,n,t,i.OverflowMenuCategory.Global),ArrayExtensions.contains(t,i.OverflowButtonLabel.AccessibilityView)&&n.push({type:i.OverflowMenuChildType.BuiltIn,label:i.OverflowButtonLabel.AccessibilityView,useNewTab:StoryPageSettings.Mode===StoryViewMode.Edit&&e.Common.Environment.getInstance().canOpenNewTab(),category:i.OverflowMenuCategory.Settings}),n.push({type:i.OverflowMenuChildType.BuiltIn,label:i.OverflowButtonLabel.Find,context:this,click:this.activateSearch,category:i.OverflowMenuCategory.Settings}),CommonSettings.IsAuthenticated&&(this.addOverflowMenuButtonIfIncluded(i.OverflowButtonLabel.User,n,t,i.OverflowMenuCategory.Global),this.addOverflowMenuButtonIfIncluded(i.OverflowButtonLabel.SignOut,n,t,i.OverflowMenuCategory.Global)),n},d.prototype.activateSearch=function(e){return this.appBar.activateSearch(e)},d.prototype.getClientSignalListeners=function(){return this.clientSignalListeners.slice(0)},d.prototype.addClientSignalListener=function(e){this.clientSignalListeners.push(e)},d.prototype.removeClientSignalListener=function(t){var i=this.clientSignalListeners.indexOf(t);if(i<0)throw e.RethrowLogger.createError("tried removing a non existent listener");this.clientSignalListeners.splice(i,1)},d.prototype.storyViewModeUpdated=function(t){var i=this.storyViewMode.getWatchedValue(t);return $(document).trigger(e.Common.EventNames.StoryViewModeChanged,{viewMode:i}),i},d.prototype.computeIsPreviewMode=function(t){var i=!t.watchValue(e.Settings.ServiceSwitches.authoringDisabled);return this.storyViewMode.getWatchedValue(t)===StoryViewMode.Preview||!i},d.prototype.computeIsEditMode=function(t){return!t.watchValue(e.Settings.ServiceSwitches.authoringDisabled)&&this.storyViewMode.getWatchedValue(t)===StoryViewMode.Edit},d.prototype.computeIsEmbeddedMode=function(e){return this.storyViewMode.getWatchedValue(e)===StoryViewMode.Embedded},d.prototype.computeIsAuthoringPaneOpen=function(e){return!1},d.prototype.computeIsRenderRootEnabled=function(e){return!0},d.prototype.getModelTitle=function(e){return this.args.currentStory.getRenderModel(e).getTitle(e)},d.prototype.getLayoutStyleId=function(e){return this.args.currentStory.getRenderModel(e).getLayoutStyleId()},d.prototype.getWorldId=function(t){return e.View.Common.LayoutUtilities.getCurrentWorldId(this.args.currentStory.getRenderModel(t))},d.prototype.getPreviewWidth=function(e){var t=s.Environment.getInstance().getWindowSize(e).w;return Math.max(t,UX.minChromelessTopBarWidth)},d.prototype.getPreviewHeight=function(e){var t=s.Environment.getInstance().getWindowSize(e).h;return Math.max(t,UX.minPreviewHeight)},d.prototype.registerEventHandler=function(e){this.parent.registerEventHandler(e)},d.prototype.unregisterEventHandler=function(e){this.parent.unregisterEventHandler(e)},d.getTopValue=function(e){return e?d._lowTopPx:d._highTopPx},d.prototype.appBarWrapperStyleArgs=function(t){return{top:e.Utilities.toPxStr(this.getTopPosition(t))}},d.prototype.getTopPosition=function(e){var t=i.NotificationBarViewModel.getNotificationBar(this).getNotification(e),n=d.getTopValue(!!t&&t.showInConsumptionView(e));return CookieConsent.isCookieConsentNotificationVisible(e)?CookieConsent.watchedConsentBannerHeight(e):n},d.prototype.notificationBarWrapperStyleArgs=function(t){var n=d.getTopValue(t.watchValue(this.isEditMode)),o=i.NotificationBarViewModel.getNotificationBar(this).getNotification(t),r=t.watchValue(this.isEditMode)||o&&o.showInConsumptionView(t)?"block":"none";return{top:e.Utilities.toPxStr(n),display:r}},d.prototype.pageRootAttrArgs=function(e){var i={},n=!!t.Common.DialogManager.getCurrentDialog(e);return i[Aria.Attributes.Hidden]=n?Aria.BooleanState.True:void 0,i},d.prototype.pageRootStyleArgs=function(t){return{"min-width":e.Utilities.toPxStr(UX.minChromelessTopBarWidth)}},d.prototype.pageRootEventsInitArgs=function(){return{scroll:this.onPageRootScroll}},d.prototype.onPageRootScroll=function(e){return e.target.scrollTop=0,!0},d.prototype.paneHolderStyleArgs=function(t){var i=d.getTopValue(t.watchValue(this.isEditMode));return{top:e.Utilities.toPxStr(i)}},d.prototype.paneHolderAttrArgs=function(e){var t={},i=this.isObscured.getWatchedValue(e)||this.authoringPaneOpen.getWatchedValue(e),n=this.isPreviewMode.getWatchedValue(e)||!(this.isEditMode.getWatchedValue(e)&&i);return t[Aria.Attributes.Hidden]=n?void 0:Aria.BooleanState.True,t},d.prototype.paneHolderClassNameArgs=function(e){return"pane-holder"},d.prototype.applicationStyleArgs=function(t){var n=0,o=UX.topBarHeight;return i.NotificationBarViewModel.getNotificationBar(this).getNotification(t)&&(n+=UX.notificationBarHeight,o+=40),{"margin-top":e.Utilities.toPxStr(n),height:"calc(100% - "+o.toString()+"px)"}},d.prototype.applicationAttrArgs=function(e){var t={};return t[Aria.Attributes.Label]=Resources.ProductNameShort,t},d.prototype.previewPanePropsArgs=function(e){return{className:this.previewVE.getStyleId(e)}},d.prototype.previewPaneStyleArgs=function(e){var t=void 0,i=void 0;return this.isEditMode.getWatchedValue(e)&&(t="0px",i="40px"),CommonSettings.SiteUiRtl?{right:t,top:i}:{left:t,top:i}},d.prototype.previewArgs=function(){return this.previewVE},d.prototype.authoringPageArgs=function(){},d.prototype.surfaceAuthoringArgs=function(){},d.prototype.offlineVellumArgs=function(){},d.prototype.toCViewArgs=function(){return new TDB.ChildArgs(i.TimelineToCViewVE,this.timelineToCViewModel)},d.prototype.isModalDialogOpen=function(e){if(this&&this.previewVE){var t=this.previewVE._root.getWatchedValue(e);return t&&t.getModalDialogManager().isDialogOpen(e)}return!1},d.prototype.isToCViewVisible=function(e){return this.toCViewVisible.getWatchedValue(e)},d.prototype.getToCView=function(e){return this.timelineToCViewModel},d.prototype.showEditTemplateButtonArgs=function(){return d.shouldCreateEditTemplateButton()},d.prototype.editTemplateButtonArgs=function(){return new TDB.ChildArgs(i.EditTemplateButtonWrapperVE,{currentStory:this.args.currentStory,titleWatcher:this.titleWatcher})},d.prototype.isAutoPlayAvailable=function(e){return this.getAutoPlayDriver().autoPlayAvailable.getWatchedValue(e)},d.prototype.isAutoplayStarted=function(e){return this.isAutoPlayAvailable(e)&&this.getAutoPlayDriver().inAutoplay(e)},d.prototype.autoplayControlsVisibleArgs=function(e){return this.isAutoplayStarted(e)},d.prototype.autoplayControlsArgs=function(){return new TDB.ChildArgs(i.AutoplayControlButtonsVE,this.autoplayControlsViewModel)},d.prototype.getAutoPlayControls=function(){return this.autoplayControlsViewModel},d.prototype.getAutoPlayDriver=function(){return this.autoPlayDriver},d.prototype.isStoryPageEdit=function(){return!1},d.prototype.isCardDeckFullScreen=function(e){return!1},d.prototype.triggerPreviewCallout=function(e){return!1},d.prototype.isUpdateInProgres=function(e){return this.waitingForUpdate&&this.waitingForUpdate.getWatchedValue(e)||this.blockingUpdate&&this.blockingUpdate.getWatchedValue(e)},d.prototype.UpdateStatusStyleArgs=function(t){var n=t.watchValue(this.waitingForUpdate)&&t.watchValue(this.blockingUpdate),o=t.watchValue(this.isEditMode)&&!!i.NotificationBarViewModel.getNotificationBar(this).getNotification(t);return{height:n?"100%":void 0,top:o?e.Utilities.toPxStr(UX.notificationBarHeight):void 0}},d.prototype.TransientUpdateStatusClassNameArgs=function(e){return i.ViewModel.isEditMode.getWatchedValue(e)?"transientUpdateStatus transientUpdateStatusModeSwitch":"transientUpdateStatus"},d.prototype.TransientUpdateStatusSlideVisibleInitArgs=function(){return!1},d.prototype.TransientUpdateStatusSlideVisibleArgs=function(e){return{visible:e.watchValue(this.waitingForUpdate)&&!e.watchValue(this.blockingUpdate)}},d.prototype.TransientUpdatingGifAttrArgs=function(e){return{src:CommonSettings.ContentBaseUrl+"traveling_dots1color_shorter_white.gif",role:Aria.Roles.Presentation,alt:""}},d.prototype.BlockingUpdateStatusVisibleArgs=function(e){return e.watchValue(this.waitingForUpdate)&&e.watchValue(this.blockingUpdate)},d.prototype.BlockingUpdatingGifAttrArgs=function(e){return{src:CommonSettings.ContentBaseUrl+"whitespinner.32x32.gif",role:Aria.Roles.Presentation,alt:""}},d.prototype.blockingProgressArgs=function(){return new TDB.ChildArgs(i.BlockingProgressVE,t.Common.BlockingProgressManager.getInstance())},d.prototype.getAudioPlayerManager=function(){return this.audioPlayerManager},d.prototype.getVideoPlayerManager=function(){return this.videoPlayerManager},d.prototype.isStorylineModeActive=function(){return!1},d.prototype.audioPlayersArgs=function(e){return this.audioPlayerManager.getAudioPlayers(e)},d.prototype.appBarArgs=function(e){return this.appBar?this.appBar:(this.createAppBar(i.StoryPageVE.appBarButtonsToCreate(),i.StoryPageVE.overflowMenuButtonsToCreate()),this.appBar)},d.prototype.dispose=function(){this.parent&&this.parent.unregisterEventHandler(this.viewinputlogger),this.contextMenuEventHandler&&$(document).off("contextmenu",this.contextMenuEventHandler),this.blurEventHandler&&$(window).off("blur",this.blurEventHandler),this.focusEventHandler&&$(window).off("focus",this.focusEventHandler),this.pointerDownEventListener&&document.body.removeEventListener("pointerdown",this.pointerDownEventListener),this.msPointerDownEventListener&&document.body.removeEventListener("MSPointerDown",this.msPointerDownEventListener),$(document).trigger(e.Common.EventNames.StoryViewModeChanged,{viewMode:void 0}),this.fullScreenManager&&this.fullScreenManager.dispose(),s.Environment.getInstance().removeResizeHandlerByContext(this),this.resetBodySizeToInitial(),n.prototype.dispose.apply(this,arguments)},d.prototype.handleMouseClick=function(e,t){return!0},d.prototype.deselectElements=function(){},d.prototype.setTelemetryContext=function(e){this.interactionlogger.setTelemetryContext(e),this.scrollPositionlogger.setTelemetryContext(e),this.viewinputlogger.setTelemetryContext(e)},d.prototype.getViewElement=function(){return this},d.prototype.showFirstRunNewUserDialog=function(){var t=this;CommonSettings.IsFirstRun&&CommonSettings.FRESplashScreenEnabled&&!0!==CommonSettings.FRESplashScreenShown&&(CommonSettings.FRESplashScreenShown=!0,e.Utilities.setTimeoutIfSpecified(CommonSettings.JAWSDialogDelay,this,function(){return t.createFirstRunNewUserDialog()}))},d.prototype.createFirstRunNewUserDialog=function(){var e=s.Environment.getInstance(),t={windowWidth:e.getWindowWidth(),windowHeight:e.getWindowHeight()};return i.FRECarouselDialog.createAndShow(t)},d.prototype.resetViewOptions=function(){var e=this;this.viewOptionOverridesWatchable.getValue().reset(),TDB.applyUpdate(function(){return e.viewOptionOverridesWatchable.notify()})},d.prototype.beforeResize=function(e,t){var n,o;if(i.ViewModel&&!this.fullScreenManager.isExternalFullScreen()&&(t.w!==e.w||t.h!==e.h)){var r=i.ViewModel.previewVE;r.setRestoreState(),(n=r._root.getValue().scroller.getValue())&&(o=n.fetchScrollValues()),this.setBodySize(t)}return{scroller:n,scrollValues:o}},d.prototype.setBodySize=function(e){$(document.body).css({width:e.w+"px",height:e.h+"px"})},d.prototype.resetBodySizeToInitial=function(){$(document.body).css({width:"",height:""})},d.prototype.afterResize=function(e,t,i){var n=i.scroller,o=i.scrollValues;n&&o&&o.some(function(e){return 0!==e})&&n.setScrollValues(o,!0)},d.verticalWorld="VerticalWorld",d.panoramaWorld="PanoramaWorld",d.expoWorld="ExpoWorld",d._lowTopPx=UX.topBarHeight,d._highTopPx=0,d}(TDB.FocusableViewElement);i.StoryPageVEBase=d;var c=function(){function e(){this.context={}}return e.prototype.edgeFollowed=function(e){if(n()){var t=e.getParentNode().getKeyFrame(),i=e.getTarget().getKeyFrame(),o=t.getType(),r=i.getType();StoryLog.StructuredTraceTag(596136674,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.verbose,"User interaction invoked",{SrcKeyframeId:t.id,SrcKeyframeType:o,DestKeyframeId:i.id,DestKeyframeType:r});var a="InteractionEdges_Src:"+o+";Dest:"+r;ActionLogger.IncrementClientCounter(a,this.context)}},e.prototype.setTelemetryContext=function(e){this.context=e},e}();i.InteractionTelemetry=c,i.isConsumptionMode=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function n(t){if(this.blockingCompletion=0,n.s_instance)throw e.RethrowLogger.createError("Error: Do not use constructor. Use LayoutElementLogger.createInstance() instead.");this.rendering=TDB.watchableTag(596476234,this,!1),this.authoring=t,this.reset()}return n.createInstance=function(e){return n.s_instance||(n.s_instance=new n(e),t.LazyArray.addCompletionListener(n.s_instance)),n.s_instance},n.prototype.lazyLoadComplete=function(){this.checkCompletion()},n.getInstance=function(){return n.s_instance},n.prototype.isRendering=function(){return this.rendering},n.prototype.setIsRendering=function(e){var t=this;platform.setImmediate(function(){return TDB.applyUpdate(function(){return t.rendering.setValue(e)})})},n.prototype.start=function(){var t=this;this.startTime>0&&this.onTrackingCompleted(!1),this.authoring||e.View.Common.IframeLoadingManager.getInstance().notifyLayoutReset(),this.startTime=platform.now(),this.setIsRendering(!0),this.blockCompletion(),platform.setImmediate(function(){t.allowCompletion()})},n.prototype.loadedElement=function(e){0!==this.startTime&&(e instanceof i.ContainerLayoutElement?this.containerCount++:this.nonContainerCount++)},n.prototype.blockCompletion=function(){++this.blockingCompletion},n.prototype.allowCompletion=function(){0===this.blockingCompletion&&TDB.raiseRecoverableError("allowCompletion called too many times"),--this.blockingCompletion,this.checkCompletion()},n.prototype.checkCompletion=function(){this.startTime>0&&0===this.blockingCompletion&&t.LazyArray.isComplete()&&this.onTrackingCompleted(!0)},n.prototype.onTrackingCompleted=function(i){if(!this.authoring){e.Utilities.browser.isChrome51&&(this.completionStackTrace=e.Utilities.getStackTrace(!0));var n=platform.now();ActionLogger.RecordClientAction(new ClientAction.RenderModelLoadData(n-this.startTime,this.containerCount,this.nonContainerCount,StoryPageSettings.Mode===StoryViewMode.Embedded,StoryPageSettings.IsNativeClient,i)),t.IframeLoadingManager.getInstance().notifyLayoutDone()}this.reset()},n.prototype.reset=function(){this.startTime=0,this.containerCount=0,this.nonContainerCount=0,this.setIsRendering(!1)},n}();t.LayoutElementLogger=n}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(t){function i(i,n,o,r){var a=t.call(this,i)||this;if(a.owner=i,a.factory=n,a.selectItems=o,a.lazyLoadDisabled=r,a.itemsLoaded=0,a.loadNext=TDB.notifierTag(596476231,a),a.lazyItems=[],!n)throw e.RethrowLogger.createError("LazyArray does not have a valid source factory.");return a}return __extends(i,t),i.addCompletionListener=function(e){n.addCompletionListener(e)},i.removeCompletionListener=function(e){n.removeCompletionListener(e)},i.isComplete=function(){return n.isComplete()},i.prototype.getCollection=function(t){t&&t.watch(this.loadNext);var i=this.factory.call(this.owner,t);if(!i||0==i.length)return this.itemsLoaded=0,this.lazyItems=[],[];var o=!1;if(this.needsReset(i)&&(this.itemsLoaded=0,this.lazyItems=i.map(function(e){return{loaded:!1,item:e}}),o=!0),this.lazyLoadDisabled||this.itemsLoaded>=this.lazyItems.length)return this.toItems();if(n.isInQueue(this.loadNext)){if(!o)return this.toItems(!0);n.removeNotifier(this.loadNext)}var r=!1,a=this.lazyItems.filter(function(e){return 0==e.loaded});if(this.selectItems){var s=this.selectItems.call(this.owner,a.map(function(e){return e.item}),o);s&&s.forEach(function(e){var t=a.firstOrDefault(function(t){return t.item==e&&0==t.loaded});t&&(t.loaded=!0,r=!0)})}r||(a[0].loaded=!0);var l=this.toItems(!0);if(l.length<=this.itemsLoaded)throw e.RethrowLogger.createError("LazyArray: unexpected change to loaded items count");return this.itemsLoaded=l.length,l.length<this.lazyItems.length&&n.addNotifier(this.loadNext),l},i.prototype.needsReset=function(t){var i=this.toItems();return 0==i.length||!e.Utilities.sequenceEquals(t,i)},i.prototype.toItems=function(e){return void 0==e?this.lazyItems.map(function(e){return e.item}):this.lazyItems.filter(function(t){return t.loaded==e}).map(function(e){return e.item})},i.prototype.dispose=function(){this.owner=null,n.removeNotifier(this.loadNext),t.prototype.dispose.call(this)},i}(Disposable);t.LazyArray=i;var n;!function(e){function t(e){u.push(e)}function i(e){u.removefirst(e)}function n(){return 0===l.length}function o(e){e&&(0==l.length&&platform.setImmediate(s),l.push(e))}function r(e){e&&l.removefirst(e)}function a(e){return!!e&&l.indexOf(e)>=0}function s(){1!==++d&&StoryLog.TraceTag(596476232,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"reentrant call to processQueue"),TDB.getExecutionMode()!==TDB.ExecutionMode.Normal&&StoryLog.TraceTag(596476233,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"processQueue called within an update");var e=l.shift();l.length>0&&platform.setImmediate(s),e&&TDB.applyUpdate(function(){return e.notify()},TDB.Justification.SynchronousBrowserEvent),0===l.length&&1===d&&u.forEach(function(e){return e.lazyLoadComplete()}),--d}var l=[],u=[],d=0;e.addCompletionListener=t,e.removeCompletionListener=i,e.isComplete=n,e.addNotifier=o,e.removeNotifier=r,e.isInQueue=a}(n||(n={}))}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){function n(t,i){var n=t.getEndPoint();return UnitTestMode||e.AnimationManager.LowFi.getValue()||(n+=t.getEndAdjustment()*i),n}var o=e.Model.RM,r={};r[t.ScrollDirection.HORIZONTAL]=0,r[t.ScrollDirection.VERTICAL]=40;var a=function(){function e(){}return e.isStuck=function(t,i){var n=e.originalPosition===i&&e.isNext===t;return n&&ActionLogger.IncrementClientCounter(ClientAction.AggregationCounter[ClientAction.AggregationCounter.ConsumptionSnapPointsStuckDetected]),n},e.setResults=function(t,i,n){e.isNext=t,e.originalPosition=i,e.expectedPosition=n},e.getNext=function(t,i,o,a){var s=o.length>0;s&&e.isStuck(!0,t)&&(t=e.expectedPosition);var l=e.findNextScrollOffset(t,i,o,function(e){return e.getStartPoint()},function(e){return n(e,i)},!1,r[a]);return s&&(isFinite(l)?e.setResults(!0,t,l):e.setResults(void 0,void 0,void 0)),l},e.getPrevious=function(t,i,o,a){var s=o.length>0;s&&e.isStuck(!1,t)&&(t=e.expectedPosition);var l=-e.findNextScrollOffset(-t-i,i,o,function(e){return-n(e,i)},function(e){return-e.getStartPoint()},!0,r[a])-i;return s&&(isFinite(l)?e.setResults(!1,t,l):e.setResults(void 0,void 0,void 0)),l},e.findClosestValue=function(t,i){var n=t.length;if(n){var o,r=e.findIndexInSorted(t,i),a=t[r];if(a===i)return a;if(a<i){if(r===n-1)return a;o=t[r+1]}else{if(!r)return a;o=t[r-1]}return Math.abs(i-a)<Math.abs(i-o)?a:o}},e.findIndexInSorted=function(e,t){for(var i=0,n=e.length-1;i<n;){var o=Math.floor((i+n)/2),r=e[o];if(r===t)return o;r<t?i=Math.min(o+1,n):n=Math.max(o-1,i)}return i},e.findNextScrollOffset=function(e,t,i,n,r,a,s){var l=e+t+1,u=i.length;if(0==u)return e+t;for(var d,c=1/0,p=[],g=1/0,h=0;h<u;++h){var y=n(T=i[h]);if((C=r(T))>l){var m=C-y,f=y<e+t-1;f&&T.getSnapType()===o.SnapPointType.Content&&(d=!0),m>t?(c=Math.min(c,C),p.push(C),y>(a?e+.9*t:e+1)&&(T.getCanIgnoreEdgeAlignment()&&f||(g=Math.min(g,y)))):T.getCanIgnoreEdgeAlignment()&&f||(g=Math.min(g,y))}}var v=g+t;if(d&&(v=Math.min(v,l-s+t)),(p=p.filter(function(e){return e<=v})).length)return Math.max.apply(Math,p)-t;var S=e+t-s;if(d&&g>S)return S;if(isFinite(g)){if(!a)return g;for(var w=-1/0,h=0;h<u;++h){var T=i[h];if((y=n(T))>=g){var C=r(T);C-g<=t?w=Math.max(w,C):y===g&&(w=Math.max(w,y+t))}}return isFinite(w)||(w=g+t),w-t}return 1/0},e}();i.SnapPoints=a}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Common,n=function(){function e(){}return e.create=function(e,t){return new Image(e,t)},e.updateCreateFn=function(e){this.create=e},e}();t.ImageElementFactory=n;var o=function(){function t(){if(this.debouncedQueue=e.Utilities.debounce(t.VIEWPORT_UPDATE_DELAY_MS,this,t.prototype.queueRequests),!1===t.isConstructing)throw e.RethrowLogger.createError("ImageRequestManager is a singleton. Always use getInstance()");this.init()}return t.getInstance=function(){return this.singleton||(this.isConstructing=!0,this.singleton=new t,this.isConstructing=!1),this.singleton},t.prototype.init=function(){this.maximumConnectionCount=(window.maxConnectionsPerServer||6)-1,this.connectionsAvailable=this.maximumConnectionCount,this.pendingRequests=[],this.loadingRequests=[],this.loadedRequests=[],this.failedRequests=[],this.lastViewport=new BaseRect(0,0,0,0),this.isActionQueued=!1,e.Utilities.query.has(e.Common.UrlHelper.URLParamAllowUnloadingImages)?(StoryPageSettings.AllowUnloadingImages=e.Utilities.query.fetch(e.Common.UrlHelper.URLParamAllowUnloadingImages)===e.Common.UrlHelper.URLParamValueTrue,e.Utilities.weblog("images","Overrode StoryPageSettings.AllowUnloadingImages, new value is "+StoryPageSettings.AllowUnloadingImages)):e.Common.UrlHelper.getInstance().isAccessibilityView()&&(StoryPageSettings.AllowUnloadingImages=!1),e.Utilities.weblog("images","ImageRequestManager reset"),i.Environment.getInstance().subscribeToIsClientOnline(null,this,this.onNetworkChange)},t.prototype.addRequest=function(i){this.pendingRequests.push(i),e.Utilities.weblog("images",i.id+" added to pendingRequests"),t.IrmUtilities.isNearViewport(this.lastViewport,i)&&this.queueRequests()},t.prototype.failRequest=function(t){this.failedRequests.push(t),e.Utilities.weblog("images",t.id+" added to failedRequests")},t.prototype.retryRequest=function(e){this.failedRequests.removefirst(e),this.addRequest(e)},t.prototype.removePendingRequest=function(t){this.pendingRequests.removefirst(t)&&e.Utilities.weblog("images",t.id+" removed from pendingRequests, no re-add.")},t.prototype.disposeRequest=function(t){var i=!1;return this.loadingRequests.removefirst(t)&&(++this.connectionsAvailable,i=!0),(i=i||this.pendingRequests.removefirst(t)||this.loadedRequests.removefirst(t)||this.failedRequests.removefirst(t))&&e.Utilities.weblog("images",t.id+" disposed"),i},t.prototype.findBestLoaded=function(e){return t.IrmUtilities.findBest(this.loadedRequests,{id:e.id,isAnimated:e.isAnimated,quality:0,filterEffects:e.filterEffects})},t.prototype.queueRequests=function(){var i=this;this.isActionQueued||(this.isActionQueued=!0,platform.setImmediate(function(){var n=platform.now(),o=i.getAllImages(),r=[],a=[];if(StoryPageSettings.AllowUnloadingImages)for(var s=0;s<o.length;s++)t.IrmUtilities.isNearViewport(i.lastViewport,o[s])?(r.push(o[s]),o[s].uncull()):(a.push(o[s]),o[s].cull());else r=o;var l=i.pendingRequests.filter(function(e,i,n){return ArrayExtensions.contains(r,e)&&t.IrmUtilities.byHighestQuality(e,i,n)}).sort(t.IrmUtilities.getPriorityComparator(i.lastViewport)),u=platform.now();e.Utilities.weblog("images","Updated IRM took "+(u-n).toFixed(1)+"ms: "+[r.length+" unculled",a.length+" culled",l.length+" to load",i.pendingRequests.length+" pending",i.loadingRequests.length+" loading",i.loadedRequests.length+" loaded",i.failedRequests.length+" failed"].join(", ")),i.startRequestBatch(l)}))},t.prototype.getAllImages=function(){var e=[];return Array.prototype.push.apply(e,this.pendingRequests),Array.prototype.push.apply(e,this.loadingRequests),Array.prototype.push.apply(e,this.loadedRequests),Array.prototype.push.apply(e,this.failedRequests),e},t.prototype.onNetworkChange=function(e){e&&this.failedRequests.slice(0).forEach(function(e){return e.tryResetFailure(!0)})},t.prototype.makeImageRequest=function(t,i){var o=this;if(this.connectionsAvailable<=0)throw e.RethrowLogger.createError("No connections available! You can't call makeImageRequest until one opens");var r=n.create();t.setImageElement(r);var a=platform.now();r.onload=e.Utilities.deferredEventHandler(function(){return o.loadCallback(t,i,a,!0)}),r.onerror=e.Utilities.deferredEventHandler(function(){return o.loadCallback(t,i,a,!1)}),--this.connectionsAvailable,r.src=i},t.prototype.loadCallback=function(t,i,n,o){++this.connectionsAvailable,this.loadingRequests.removefirst(t),o?(this.loadedRequests.push(t),e.Utilities.weblog("images",t.id+" loaded in "+(platform.now()-n).toFixed(2)+"ms"),CommonSettings.SkipLoggingNonEssentialHighVolumeClientLogs||StoryLog.TraceTag(596476235,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Successfully loaded image. Elapsed time: {0}ms. Image URL: {1}.",[Math.round(platform.now()-n),i]),TDB.applyUpdate(function(){return t.setImageUrl(i,t)},TDB.Justification.SynchronousBrowserEvent)):(StoryLog.TraceTag(596476236,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Failed to load image from service. Elapsed time: {0}ms. Image URL: {1}.",[Math.round(platform.now()-n),i]),TDB.applyUpdate(function(){return t.setFailed(t)})),t.clearImageElement(),this.queueRequests()},t.prototype.getRecommendedConnectionCount=function(){var e=this.maximumConnectionCount,t=i.Environment.getInstance().getAvailableBandwidth();return t>0&&t<=250?e=Math.min(1,e):t>250&&t<=500?e=Math.min(2,e):t>500&&t<=1e3&&(e=Math.min(3,e)),e},t.prototype.isConnectionAvailable=function(){return 0!=this.connectionsAvailable&&this.maximumConnectionCount-this.connectionsAvailable<this.getRecommendedConnectionCount()},t.prototype.startRequestBatch=function(e){var i=this;this.isActionQueued=!1,0!==e.length&&TDB.applyUpdate(function(){for(var n=0,o=e.length;n<o;++n){var r=e[n];if(i.isConnectionAvailable()){i.pendingRequests.removefirst(r),i.loadingRequests.push(r);var a=t.IrmUtilities.getUrl(r),s=i.findBestLoaded(r),l=s.quality,u=s.value;if(u&&l>=r.quality)return void i.makeImageRequest(r,u);r.setLoadingUrl(u||a),i.makeImageRequest(r,a)}}},TDB.Justification.SynchronousBrowserEvent)},t.prototype.onViewportUpdate=function(e){this.lastViewport=e,this.debouncedQueue(),void 0===this.timer&&(this.timer=platform.setTimeout(this.timedQueue.bind(this),t.VIEWPORT_UPDATE_DELAY_MS))},t.prototype.timedQueue=function(){this.timer=void 0,this.queueRequests()},t.prototype.imagesPendingLoad=function(){return this.loadingRequests.length>0||this.pendingRequests.length>0},t.isConstructing=!1,t.VIEWPORT_UPDATE_DELAY_MS=160,t}();t.ImageRequestManager=o,function(e){var t=function(){function t(){}return t.getPriorityComparator=function(e){var t={};return e?function(i,n){var o=i.id,r=n.id;return t[o]||(t[o]=i.getPriority(e)),t[r]||(t[r]=n.getPriority(e)),t[o]-t[r]}:function(){return 1}},t.byHighestQuality=function(e,t,i){for(++t;t>=0&&t<i.length;t++)if(i[t].id===e.id&&i[t].isAnimated===e.isAnimated&&i[t].filterEffects===e.filterEffects&&i[t].quality>=e.quality)return!1;return!0},t.getUrl=function(e){return i.UrlHelper.getInstance().imageUrl(StoryPageSettings.LookupId,e.quality,e.id,e.isAnimated,e.filterEffects,StoryPageSettings.UseCDN,StoryPageSettings.Mode===StoryViewMode.Embedded)},t.findBest=function(t,i){var n=-1,o=null;return t.forEach(function(t){t.id==i.id&&t.isAnimated==i.isAnimated&&t.filterEffects===i.filterEffects&&t.quality>=i.quality&&(n=t.quality,o=e.IrmUtilities.getUrl(t))}),{quality:n,value:o}},t.isNearViewport=function(e,t){var i="Mobile"===CommonSettings.ClientDevice?StoryPageSettings.PreloadImagesWithinNScreensMobile:StoryPageSettings.PreloadImagesWithinNScreensDesktop;return-1==i||t.getDistanceByScreen(e)<=i},t}();e.IrmUtilities=t}(o=t.ImageRequestManager||(t.ImageRequestManager={}))}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){function n(e,t){return new r(e,t)}var o=e.Common;i.makeImageLoader=n;var r=function(){function n(i,n){this.notifier=TDB.notifierTag(596476237,this),this.url="",this._id=null,this._power=-1,this._originalResolution=0,this._filterEffects="",this._isDetailView=t.Common.LayoutUtilities.isDetailView(n),this._failed=TDB.watchableTag(596476238,this,!1),this._failureCount=0,this._failureResetCount=0;var o=i&&i.findRootVE?i.findRootVE():void 0;o&&(this._is3DWorld=o.is3DWorldWatcher.getValue(),this._isStateWorld=ArrayExtensions.contains(["ExpoWorld"],e.View.Common.LayoutUtilities.getCurrentWorldId(n.model))),this._model=n,this._view=i,this.absolutePositionWatcher=TDB.watcher(this,this._view,this.getAbsolutePosition)}return n.prototype.dispose=function(){this._view=null,this._model=null,this.clearImageElement(),i.ImageRequestManager.getInstance().disposeRequest(this)},n.prototype.setImageElement=function(e){this.clearImageElement(),this._imgElem=e},n.prototype.clearImageElement=function(){this._imgElem&&(e.Utilities.weblog("images","Unsetting the image element (complete: "+this._imgElem.complete+", src: "+this._imgElem.src),this._imgElem.onerror=null,this._imgElem.onload=null,this._imgElem.src="",this._imgElem=null)},n.prototype.cull=function(){!this._isDetailView&&this._view&&this._view.unculled()&&this._view.cull()},n.prototype.uncull=function(){var e=this;this._isDetailView||!this._view||this._view.unculled()||(this.getFailed()&&this.tryResetFailure()?platform.setImmediate(function(){return e._view.uncull()}):this._view.uncull())},n.prototype.setFallbackUrl=function(t){var n=this;this.url||(this.url=t,t&&(this.setImageElement(i.ImageElementFactory.create()),this._imgElem.onerror=e.Utilities.deferredEventHandler(function(){n.clearImageElement(),StoryLog.TraceTag(596476239,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Failed to load fallback image."),TDB.applyUpdate(function(){return n._failed.setValue(!0)})}),this._imgElem.onload=e.Utilities.deferredEventHandler(function(){n.clearImageElement(),StoryLog.TraceTag(596476240,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Successfully loaded fallback image.")}),this._imgElem.src=t))},Object.defineProperty(n.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"quality",{get:function(){return n.calculateQuality(this._power,this._originalResolution,this._failureCount)},enumerable:!0,configurable:!0}),n.calculateQuality=function(e,t,i){return-1===e?-1:Math.round(t/Math.pow(2,e+i))},Object.defineProperty(n.prototype,"isAnimated",{get:function(){return n.calculateAnimated(this._failureCount)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filterEffects",{get:function(){return this._filterEffects},enumerable:!0,configurable:!0}),n.calculateAnimated=function(e){return 0===e},n.prototype.cancelRequest=function(){this._id=null,i.ImageRequestManager.getInstance().removePendingRequest(this)},n.prototype.getBandwidthLimitedResolution=function(){var e=1024*o.Environment.getInstance().getAvailableBandwidth()/8;return Math.sqrt(10*e)},n.prototype.getImageUrl=function(e,t,r,a,s,l){this.absolutePositionWatcher.getWatchedValue(l),l&&l.watch(this.notifier);var u=t,d=o.Environment.getInstance().getAvailableBandwidth();if(!StoryPageSettings.BlockBandwidthLimitedImageResolution&&d>0&&d<5e3&&!a){var c=this.getBandwidthLimitedResolution();t=Math.min(c,t)}var p=Math.max(Math.log(r/t)/Math.LN2,0);if(p="Desktop"===CommonSettings.ClientDevice||t<n.MIN_MOBILE_SIZE?Math.floor(p):Math.ceil(p),this.url&&e===this._id&&p===this._power&&s===this._filterEffects||this.getFailed(l)&&e===this._id)return this.url;this._id&&e!==this._id&&(this._failureCount=0,this.url="");var g=i.ImageRequestManager.getInstance();g.removePendingRequest(this);var h=g.findBestLoaded({id:e,quality:n.calculateQuality(p,r,this._failureCount),isAnimated:n.calculateAnimated(this._failureCount),filterEffects:s}),y=h.value;return this._id=e,this._originalResolution=r,this._power=p,this._filterEffects=s,this._ideal||(this._ideal={id:this._id,isAnimated:this.isAnimated,quality:this.quality,filterEffects:this.filterEffects}),h.quality>=this.quality?(this.url=y,y):(this.url=y||this.url||"",g.addRequest(this),t<u&&StoryLog.StructuredTraceTag(596476241,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Available bandwidth is limited, reducing requested image resolution.",{"Image ID":e,"Reduced image resolution":t.toString(),"Requested image resolution":u.toString()}),CommonSettings.SkipLoggingNonEssentialHighVolumeClientLogs||StoryLog.TraceTag(596476242,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Image ID: {0}, Original image resolution requested: {1}, Minimum image resolution: {2}, Original image resolution: {3}, Filter effect: {4}",[e,a,t,r,s]),this.url)},n.prototype.getFailedWatchable=function(){return this._failed},n.prototype.getFailed=function(e){return this._failed.getWatchedValue(e)},n.prototype.getFailureCount=function(){return this._failureCount},n.prototype.setFailed=function(e){var t=this;if(e.id===this._id&&e.quality>=this.quality&&e.isAnimated===this.isAnimated&&e.filterEffects===this.filterEffects){var n=i.ImageRequestManager.getInstance();if(this._failureCount<StoryPageSettings.MaxImageRetries){var o=this.quality,r=this.isAnimated,a=n.findBestLoaded(this);TDB.applyUpdate(function(){return t.setImageUrl(a.value||"",e)}),++this._failureCount;var s=this.quality;s<1?(StoryLog.TraceTag(596476243,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Aborted attempt to load image of zero size (quality={0}) on retry attempt #{1}. Image ID: {2}",[s,this._failureCount,e.id]),this._failed.setValue(!0)):(StoryLog.TraceTag(596476244,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Retrying image at lower quality. Image ID: {0}, old quality: {1}, old animated: {2}, new quality: {3}, new animated: {4}",[e.id,o,r,s,this.isAnimated]),a.quality>=s?(this.url=a.value,this.notifier.notify()):n.addRequest(this))}else{var l=i.ImageRequestManager.getInstance().findBestLoaded({id:this.id,isAnimated:!0,quality:Number.MAX_VALUE,filterEffects:this.filterEffects}),u=i.ImageRequestManager.getInstance().findBestLoaded({id:this.id,isAnimated:!1,quality:Number.MAX_VALUE,filterEffects:this.filterEffects});if(l&&l.value)return this.url=l.value,void this.notifier.notify();if(u&&u.value)return this.url=u.value,void this.notifier.notify();StoryLog.TraceTag(596476245,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Irrecoverable image failure (already retried loading {0} times). Image ID: {1}.",[this._failureCount,e.id]),this._failed.setValue(!0),n.failRequest(this)}}},n.prototype.tryResetFailure=function(t){var n=this;return void 0===t&&(t=!1),this._id=this._ideal.id,this._filterEffects=this._ideal.filterEffects,!!(this._failureResetCount<StoryPageSettings.MaxImageRetries||t)&&(TDB.applyUpdate(function(){e.Utilities.weblog("images","Reset the failures for "+n._id),n._failed.setValue(!1),n._failureCount=0,t||n._failureResetCount++,i.ImageRequestManager.getInstance().retryRequest(n)}),!0)},n.prototype.setImageUrl=function(e,t){t.id===this._id&&t.quality>=this.quality&&t.isAnimated===this.isAnimated&&t.filterEffects===this.filterEffects&&this.url!==e&&(this._failed.setValue(!1),this.url=e,this.notifier.notify())},n.prototype.setLoadingUrl=function(e){this.url||(this.url=e,this.notifier.notify())},n.prototype.getPriority=function(e){if(!this._view||!this._model)return Number.MAX_VALUE;if(this._isDetailView)return this._view.isHidden()?Number.MAX_VALUE:-1;if(this._is3DWorld)return 1;if(!e)return Number.MAX_VALUE;var t=this.absolutePositionWatcher.getValue();if(!t)return Number.MAX_VALUE;var i=new Point(e.left,e.top),n=t.bottom<i.top,o=t.right<i.left,r=new Point(t.left,t.top).getDistanceToPoint(i);return(n||o)&&(r*=4),r},n.prototype.getDistanceByScreen=function(e){if(!this._view||!this._model)return Number.MAX_VALUE;if(this._isDetailView)return this._view.isHidden()?Number.MAX_VALUE:0;if(this._is3DWorld)return 1;if(this._isStateWorld)return 1;if(e){var t=this.absolutePositionWatcher.getValue();if(!t)return Number.MAX_VALUE;var i=e.top-t.bottom,n=t.top-e.bottom,o=e.left-t.right,r=t.left-e.right;return i>=0?(i+1)/e.height:n>=0?(n+1)/e.height:o>=0?(o+1)/e.width:r>=0?(r+1)/e.width:0}return 0},n.prototype.getAbsolutePosition=function(e){return void 0===this._model.visibleCullingRegion||t.Common.LayoutUtilities.isZeroRect(this._model.visibleCullingRegion)?t.Common.LayoutUtilities.getAbsolutePosition(this._model,e).toBaseRect():t.Common.LayoutUtilities.rectangleToBaseRect(this._model.visibleCullingRegion,e)},n.MIN_MOBILE_SIZE=512,n}();i.ImageLoader=r}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.View.ViewElements,o=function(){function o(){var e=this;this.loadTimeoutMilliseconds=50,this.viewportChangeDelayMiliseconds=250,this.placeholderViewportSize=1,this.lightweightViewportSize=3,this.placeholderDataStore=new i.EmbedPlaceholderDataStore,this.embeds=[],this.root=null,this.isLayoutDone=!1,this.notifyLayoutReset(),CookieConsent.addHandlerOnConsentGiven(function(){return e.forceloadElementsUsingPlaceHolderStrategy()}),CookieConsent.addHandlerOnConsentGiven(function(){return e.forceloadElementsUsingLightWeightStrategy()})}return o.getInstance=function(){return o.iframeLoadingManager||(o.iframeLoadingManager=new o),o.iframeLoadingManager},o.releaseInstance=function(){o.iframeLoadingManager=void 0},o.prototype.setRoot=function(e){this.root&&(this.root.unsubscribeFromViewportChange(this.placeholderStrategy),this.root.unsubscribeFromViewportChange(this.lightweightStrategy)),e&&(e.subscribeToViewportChange(this.placeholderStrategy),e.subscribeToViewportChange(this.lightweightStrategy)),this.root=e},o.prototype.unsubscribeRoot=function(e){e&&(e.unsubscribeFromViewportChange(this.placeholderStrategy),e.unsubscribeFromViewportChange(this.lightweightStrategy))},o.prototype.registerEmbedLayoutElement=function(e){this.getStrategyForEmbed(e).registerElement(e),this.embeds.addunique(e)},o.prototype.unregisterEmbedLayoutElement=function(e){this.getStrategyForEmbed(e).unregisterElement(e),this.pruneRegisteredEmbeds(),this.embeds.removefirst(e)},o.prototype.canLoad=function(e){return this.isLayoutDone&&this.canLoadMoreIframes(e.getHostName())&&!CookieConsent.isConsentNeeded()},o.prototype.onIframeLoad=function(e,t){var i="unknown",n=-1;if(e){var o=TDB.ViewElement.dataFor($(e.target)[0]),r=o?o.parent:null;r&&(i=r.getHostName(),n=platform.now()-r.getEmbedLoadStartTime())}return StoryLog.StructuredTraceTag(596476247,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"IframeLoadingManager loaded an embed.",{elapsedTime:n.toString(),host:i}),t.resolve(),!1},o.prototype.onIframeError=function(e,t,i){var o,r=(o={},o[n.IframeLoadingFailureCategory.TimedOut]="Timed out",o[n.IframeLoadingFailureCategory.BrowserLoadingError]="Loading error",o),a=-1,s="unknown";if(e){var l=TDB.ViewElement.dataFor($(e.target)[0]),u=l?l.parent:null;u&&(s=u.getHostName(),a=platform.now()-u.getEmbedLoadStartTime())}return StoryLog.StructuredTraceTag(596476248,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"IframeLoadingManager failed to load an embed.",{elapsedTime:a.toString(),reason:r[t],host:s}),i.reject(),!1},o.prototype.load=function(e){var t=this,i=$.Deferred(),n={contentUrl:"",cssClassName:"embed",embedModel:e.getEmbedModel(),onload:function(e){return t.onIframeLoad(e,i)},onerror:function(e,n){return t.onIframeError(e,n,i)},context:e};return platform.setTimeout(function(){return e.setIframe(t.createIframe(n))},this.loadTimeoutMilliseconds),this.getStrategyForEmbed(e).notifyElementLoaded(e),i.promise()},o.prototype.unload=function(e){e.removeIframe(),this.getStrategyForEmbed(e).notifyElementUnloaded(e)},o.prototype.canUnload=function(e){return!0},o.prototype.notifyLayoutReset=function(){this.isLayoutDone=!1,this.embeds=[],this.createStrategies()},o.prototype.notifyLayoutDone=function(){this.isLayoutDone=!0,this.logIframeModelNumbers("Started loading embeds"),this.forceLoadingStart()},o.prototype.logRenderModelUpdate=function(e){if(0!==this.embeds.length&&e){for(var t=new n.HierarchyComparer(e),i=0,o=0,r=0,a=this.embeds;r<a.length;r++){var s=a[r];t.wouldKeep(s._model)?++o:++i}StoryLog.StructuredTraceTag(596476249,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"IframeLoadingManager: received update",{removed:i.toString(),kept:o.toString()})}},o.prototype.createIframe=function(e){return new TDB.ChildArgs(n.IframeLayoutVE,e)},o.prototype.createStrategies=function(){var e=this,i=function(i){if(!e.shouldDisableViewportLoading())return t.Common.LayoutUtilities.getAbsolutePosition(i.getEmbedModel()).toBaseRect()};this.lightweightStrategy=this.constructViewportStrategy({viewportSize:this.lightweightViewportSize,viewportChangeDelayMilliseconds:this.viewportChangeDelayMiliseconds,forceLoadedIfInViewport:"Desktop"===CommonSettings.ClientDevice,maxLoadedElements:StoryPageSettings.SiteLightweightEmbedLimit[CommonSettings.ClientDevice],getElementRectangle:i}),this.placeholderStrategy=this.constructViewportStrategy({viewportSize:this.placeholderViewportSize,viewportChangeDelayMilliseconds:this.viewportChangeDelayMiliseconds,forceLoadedIfInViewport:"Desktop"===CommonSettings.ClientDevice,maxLoadedElements:StoryPageSettings.SitePlaceholderLimit[CommonSettings.ClientDevice],getElementRectangle:i})},o.prototype.constructViewportStrategy=function(e){return new i.ViewportMediaLoadingStrategy(e,this)},o.prototype.canLoadMoreIframes=function(e){return!(StoryPageSettings.SiteEmbedPlaceholdersEnabled&&StoryPageSettings.SiteDomainsForEmbedPlaceholders&&ArrayExtensions.contains(StoryPageSettings.SiteDomainsForEmbedPlaceholders,e)&&n.ViewModel.isEditMode.getValue())},o.prototype.getStrategyForEmbed=function(e){return e.isLightweightEmbed()?this.lightweightStrategy:this.placeholderStrategy},o.prototype.logIframeModelNumbers=function(e){for(var t="",i=0,n=this.embeds;i<n.length;i++){var o=n[i];t+=o.getHostName()+":"+o._model.id+";"}StoryLog.StructuredTraceTag(596476250,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,e,{IframeIds:t})},o.prototype.shouldDisableViewportLoading=function(){if(e.Utilities.query.has(e.Common.UrlHelper.URLParamAllowIframeUnloading)&&e.Utilities.query.fetch(e.Common.UrlHelper.URLParamAllowIframeUnloading)!==e.Common.UrlHelper.URLParamValueTrue)return!0;var t=e.Model.RenderModel.getValue(),i=e.View.Common.LayoutUtilities.getCurrentWorldId(t);return ArrayExtensions.contains(StoryPageSettings.SiteWorldBlacklistForViewportLoading,i)},o.prototype.pruneRegisteredEmbeds=function(){for(var e=this.embeds.length,t=e,i=0;i<t;i++){var n=this.embeds[i];n.getEmbedModel()||(this.getStrategyForEmbed(n).unregisterElement(n),this.embeds[i]=this.embeds[t-1],i--,t--)}var o=e-t;this.embeds.splice(-o,o)},o.prototype.forceLoadingStart=function(){this.lightweightStrategy.forceLoadingStart(),this.placeholderStrategy.forceLoadingStart()},o.prototype.forceloadElementsUsingPlaceHolderStrategy=function(){this.placeholderStrategy&&this.placeholderStrategy.forceLoadingStart&&this.placeholderStrategy.forceLoadingStart()},o.prototype.forceloadElementsUsingLightWeightStrategy=function(){this.lightweightStrategy&&this.lightweightStrategy.forceLoadingStart&&this.lightweightStrategy.forceLoadingStart()},o}();i.IframeLoadingManager=o}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i,n=e.View.ViewElements,o=e.Common;!function(e){e[e.loading=0]="loading",e[e.loaded=1]="loaded",e[e.failed=2]="failed"}(i=t.PlaceholderLoadingState||(t.PlaceholderLoadingState={}));var r=function(){function t(){this.data={}}return t.prototype.getData=function(e,t){var n=this.data[e];if(!n){var o={loadingState:i.loaded,embedType:this.getEmbedType(e),info:void 0};n=this.data[e]=TDB.watchableTag(596476255,this,o),this.loadData(e,o)}return n.getWatchedValue(t)},t.prototype.getEmbedType=function(i){var o=e.Utilities.extractHostnameFromUrl(i).toLowerCase();return t.isSwayDomain(o)?n.EmbedType.Sway:ArrayExtensions.contains(t.oneDriveDomains,o)?n.EmbedType.OneDrive:n.EmbedType.Unknown},t.isSwayDomain=function(e){return t.swayDomains.some(function(t){return StringExtensions.endsWith(e,t)})||t.swayEnvironmentsDomains.some(function(t){return e==t})},t.prototype.loadData=function(r,a){var s=this,l=a.embedType;if(l===n.EmbedType.Sway){var u=r.match("/s/(\\S+)/embed$");if(u&&2==u.length){var d=u[1],c={name:"GetEmbeddedStoryInfo",description:"Gets EmbeddedStoryInfo",type:"POST",dataType:"json",timeout:t.embedRequestTimeout,cache:!1,success:function(e){return s.swayPlaceholderSuccess(r,e)},error:function(){return s.swayPlaceholderError(r)}};a.loadingState=i.loading,$.ajax(o.UrlHelper.getInstance().getEmbeddedStoryInfoUrl(d),c)}}else if(l===n.EmbedType.OneDrive&&StoryPageSettings.SiteOneDriveEmbedDetailsEnabled){var p={EmbedSrc:r},c={name:"GetEmbeddedOneDriveInfo",description:"Gets EmbeddedOneDriveInfo",type:"POST",dataType:"json",data:JSON.stringify(p),contentType:e.RequestManager.JsonContentType,timeout:t.embedRequestTimeout,cache:!1,success:function(e){return s.oneDrivePlaceholderSuccess(r,e)},error:function(){return s.oneDrivePlaceholderError(r)}};a.loadingState=i.loading,$.ajax(o.UrlHelper.getInstance().getEmbeddedOneDriveInfoUrl(),c)}},t.prototype.swayPlaceholderSuccess=function(e,t){var o=this;TDB.applyUpdate(function(){o.data[e].setValue({loadingState:i.loaded,embedType:n.EmbedType.Sway,info:t})})},t.prototype.swayPlaceholderError=function(e){this.setError(e),StoryLog.TraceTag(596476256,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"GetEmbeddedStoryInfo returned an error.")},t.prototype.oneDrivePlaceholderSuccess=function(e,t){var o,r=this,a={Author:t.Author,Thumbnail:"",Title:t.Title};switch(t.Type){case OneDriveEmbedType.Unknown:o=n.EmbedType.OneDrive;break;case OneDriveEmbedType.Word:o=n.EmbedType.OneDriveWord;break;case OneDriveEmbedType.Excel:o=n.EmbedType.OneDriveExcel;break;case OneDriveEmbedType.Powerpoint:o=n.EmbedType.OneDrivePowerpoint;break;default:o=n.EmbedType.OneDrive}TDB.applyUpdate(function(){r.data[e].setValue({loadingState:i.loaded,embedType:o,info:a})})},t.prototype.oneDrivePlaceholderError=function(e){this.setError(e),StoryLog.TraceTag(596476257,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"GetEmbeddedOneDriveInfo returned an error.")},t.prototype.setError=function(e){var t=this.data[e],n=t.getValue();TDB.applyUpdate(function(){t.setValue({loadingState:i.failed,embedType:n.embedType,info:n.info})})},t.swayDomains=[".sway.com",".sway-int.com",".sway-edog.com",".sway.office.com",".sway.officeppe.com",".sway.office-int.com"],t.swayEnvironmentsDomains=["sway.com","sway-int.com","sway-edog.com","sway.office.com","sway.officeppe.com","sway.office-int.com"],t.oneDriveDomains=["onedrive.live.com","onedrive.live-int.com"],t.embedRequestTimeout=6e4,t}();t.EmbedPlaceholderDataStore=r}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=function(i){function n(t,n,o,r,a){void 0===r&&(r=!1),void 0===a&&(a=!1);var s=i.call(this,t)||this;return s._direction=n,s._isVisible=o,s._showAtMinPosition=a,r&&(s._timer=new e.Utilities.ScheduledTimeout(s,3e3)),s}return __extends(n,i),n.prototype.initScrollPositions=function(e){this._lastScrollTop=e[t.ScrollDirection.VERTICAL],this._lastScrollLeft=e[t.ScrollDirection.HORIZONTAL]},n.prototype.onCameraMove=function(e){this._showAtMinPosition&&e.scrollValues.every(function(e){return 0===e})&&this.ensureVisibility(!0,!1),0!=this._direction.height&&this.onVertScroll(e),0!=this._direction.width&&this.onHorzScroll(e)},n.prototype.onVertScroll=function(e){var i=e.scrollValues[t.ScrollDirection.VERTICAL];if(e.maxScrollReached[t.ScrollDirection.VERTICAL])this.ensureVisibility(!0,!1);else{if(Math.abs(i-this._lastScrollTop)<32)return;i>this._lastScrollTop?this.ensureVisibility(this._direction.height<0,!0):i<this._lastScrollTop&&this.ensureVisibility(this._direction.height>0,!0)}this._lastScrollTop=i},n.prototype.onHorzScroll=function(e){var i=e.scrollValues[t.ScrollDirection.HORIZONTAL];if(e.maxScrollReached[t.ScrollDirection.HORIZONTAL])this.ensureVisibility(!0,!1);else{if(Math.abs(i-this._lastScrollLeft)<32)return;i>this._lastScrollLeft?this.ensureVisibility(this._direction.width<0,!0):i<this._lastScrollLeft&&this.ensureVisibility(this._direction.width>0,!0)}this._lastScrollLeft=i},n.prototype.ensureVisibility=function(e,t){var i=this;this.clearAutoFadeTimer(),e&&t&&this.startAutoFadeTimer(),this._isVisible.getValue()!==e&&TDB.applyUpdate(function(){i._isVisible.setValue(e)},TDB.Justification.InitialConversion)},n.prototype.clearAutoFadeTimer=function(){this._timer&&this._timer.clear()},n.prototype.startAutoFadeTimer=function(){var e=this;this._timer&&this._timer.set(function(){e.ensureVisibility(!1,!1)})},n.prototype.ensureVisible=function(e){void 0===e&&(e=!0),this.ensureVisibility(e,!1)},n}(Disposable);i.ScrollVisibleManager=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(){function t(e){this.args=e}return t.prototype.handleKeyEvent=function(e){var i=TDB.EventPropagation.Bubble;switch(e.keyCode){case KeyCodeType.SpaceKey:i=TDB.EventPropagation.PreventDefault;case KeyCodeType.EnterKey:this.args.playerShowing()||(this.args.playMedia(),i=TDB.EventPropagation.PreventDefault);break;case KeyCodeType.EscapeKey:this.args.playerShowing()&&(i=TDB.EventPropagation.PreventDefault);break;case KeyCodeType.LeftArrowKey:case KeyCodeType.RightArrowKey:case KeyCodeType.UpArrowKey:case KeyCodeType.DownArrowKey:this.args.playerShowing()&&(i=TDB.EventPropagation.PreventDefault);break;case KeyCodeType.PageDownKey:case KeyCodeType.PageUpKey:case KeyCodeType.HomeKey:case KeyCodeType.EndKey:this.args.isFullscreen()&&(i=TDB.EventPropagation.PreventDefault);break;case KeyCodeType.TabKey:this.args.isFullscreen()&&(e.shiftKey?this.isElementFocused(t.ampFirstTabLoopElement)&&(i=TDB.EventPropagation.PreventDefault):this.isElementFocused(t.ampLastTabLoopElement)&&(i=TDB.EventPropagation.PreventDefault))}return i},t.prototype.isElementFocused=function(t){return e.Utilities.getDocumentActiveElement().className===t},t.ampFirstTabLoopElement="vjs-progress-holder vjs-slider",t.ampLastTabLoopElement="vjs-fullscreen-control vjs-control outline-enabled-control",t}();t.VideoPlayerKeyHandler=i}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function e(e,t,i,n){this.loadTimeout=null,this.elements=[],this.loadedElements=[],this.viewportSize=e.viewportSize,this.viewportChangeDelayMilliseconds=e.viewportChangeDelayMilliseconds,this.handler=t,this.args=e,this.elements=i||[],this.loadedElements=n||[],this.maxLoadedElements=e.maxLoadedElements>=0?e.maxLoadedElements:null,this.getElementRectangle=e.getElementRectangle||function(e){return null},this.forceLoadedIfInViewport=!!e.forceLoadedIfInViewport,this.retryOnFailure=!!e.retryOnFailure}return e.prototype.setHandler=function(e){this.handler=e},e.prototype.registerElement=function(e){if(!this.elements.firstOrDefault(function(t){return t.element===e})){var t={element:e,loaded:!1,loadingError:!1,distance:0,rect:this.getElementRectangle(e)};this.viewport&&this.updateElementDistance(t,this.viewport),this.elements.addunique(t),this.sortElementList(this.elements,!0),this.sortElementList(this.loadedElements,!1),this.args.onLoadingStarted&&this.args.onLoadingStarted(),this.loadEligibleElements()}},e.prototype.unregisterElement=function(e){var t=function(t){return t.element===e};ArrayExtensions.removeFirstWhere(this.elements,t),ArrayExtensions.removeFirstWhere(this.loadedElements,t)},e.prototype.unregisterAllElements=function(){this.elements=[],this.loadedElements=[]},e.prototype.notifyElementLoaded=function(e){var t=this.elements.firstOrDefault(function(t){return t.element===e});t&&!t.loaded&&(t.loaded=!0,this.loadedElements.addunique(t),this.unloadEligibleElements())},e.prototype.notifyElementUnloaded=function(e){var t=this.elements.firstOrDefault(function(t){return t.element===e});t&&t.loaded&&(this.loadedElements.removefirst(t),t.loaded=!1,this.args.onLoadingStarted&&this.args.onLoadingStarted(),this.loadEligibleElements())},e.prototype.forceLoadingStart=function(){this.onViewportUpdate(this.viewport)},e.prototype.updateAndSortElements=function(e){var t=this,i=function(i){return t.updateElementDistance(i,e)};this.elements.forEach(i),this.loadedElements.forEach(i),this.sortElementList(this.elements,!0),this.sortElementList(this.loadedElements,!1)},e.prototype.updateElementDistance=function(e,t){e.rect&&t?e.distance=e.rect.getCenter().getDistanceToPoint(t.getCenter()):e.distance=0},e.prototype.sortElementList=function(e,t){void 0===t&&(t=!0),e.sort(function(e,i){return t?e.distance-i.distance:i.distance-e.distance})},e.prototype.unloadEligibleElements=function(){for(var e;e=this.getNextElementToUnload();){if(!this.handler.unload)return void StoryLog.StructuredTraceTag(596476179,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.error,"unload() not implemented, but canUnload() returned true",{element:e.element.toString()});this.handler.unload(e.element),this.loadedElements.removefirst(e),e.loaded=!1,e.loadingError=!1}},e.prototype.loadEligibleElements=function(){var e=this,t=this.getNextElementToLoad();if(this.unloadEligibleElements(),t){var i=function(){e.loadEligibleElements()},n=void 0;if(!this.handler.load)return void StoryLog.StructuredTraceTag(596476180,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.error,"load() not implemented, but canLoad() returned true",{element:t.element.toString()});n=this.handler.load(t.element),t.loaded=!0,this.loadedElements.addunique(t),n.then(i,function(){t.loaded=!1,t.loadingError=!0,e.loadedElements.removefirst(t),e.loadEligibleElements()})}else this.args.onLoadingFinished&&this.args.onLoadingFinished()},e.prototype.getNextElementToLoad=function(){var e=this;return this.forceLoadedIfInViewport||this.isUnderCapacity()?this.elements.firstOrDefault(function(t){return!t.loaded&&(e.retryOnFailure||!t.loadingError)&&e.handler.canLoad(t.element)&&e.isInViewport(t,e.viewport)}):null},e.prototype.getNextElementToUnload=function(){var e=this;if(this.isOverCapacity()){var t=this.loadedElements.firstOrDefault(function(t){return e.handler.canUnload(t.element)});if(t&&(!this.forceLoadedIfInViewport||!this.isInViewport(t,this.viewport)))return t}return null},e.prototype.isInViewport=function(e,t){if(!t)return!0;var i=t.centerScaleRectangle(this.viewportSize);return!e.rect||i.overlapsRect(e.rect)},e.prototype.isOverCapacity=function(){return this.maxLoadedElements&&this.loadedElements.length>this.maxLoadedElements},e.prototype.isUnderCapacity=function(){return null===this.maxLoadedElements||this.loadedElements.length<this.maxLoadedElements},e.prototype.onViewportUpdate=function(e){var t=this;this.viewport=e,this.loadTimeout&&clearTimeout(this.loadTimeout),this.args.onLoadingStarted&&this.args.onLoadingStarted(),this.loadTimeout=platform.setTimeout(function(){t.loadTimeout=null,t.updateAndSortElements(e),t.loadEligibleElements()},this.viewportChangeDelayMilliseconds)},e.prototype.setViewport=function(e){this.viewport=e},e.prototype.getRegisteredElements=function(){return this.elements.map(function(e){return e.element})},e.prototype.getHandler=function(){return this.handler},e}();e.ViewportMediaLoadingStrategy=t}(e.Common||(e.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function n(){}return n.prototype.getActionMap=function(){var e={};return e[i.ExternalAction.NavigateToContent]={action:this.navigateToContent,context:this},e},n.prototype.navigateToContent=function(i,n){var o=t.ViewModel.previewVE._root.getWatchedValue(),r=o.getInteractionModel(),a=n.firstOrDefault(function(t){return t.getParameterName()===e.AnimationHelper.contentIdParameterName}).getParameterValue(),s=t.NavigationHelper.getFsmNodeIdFromContentId(r,a);t.NavigationManager.navigateTo(o,s,{supressFading:!0,snapScene:!0,refreshNodes:!0})},n}();t.NavigationActionProvider=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(e,n){var o=t.call(this,e,n)||this;return o.parent=e,o.visible=TDB.watchable(o,!0),n.cssClass||(n.cssClass=n.cssClass||{value:i.getConsumptionButtonClass()}),o}return __extends(i,t),i.prototype.pullDownButtonAttrArgs=function(t){var i=!!e.ViewModel&&e.ViewModel.isModalDialogOpen(t),n=!!e.ViewModel&&e.ViewModel.isToCViewVisible(t),o=i||n?Aria.BooleanState.True:Aria.BooleanState.False,r={};return r[Aria.Attributes.Hidden]=o,r[Aria.Attributes.Disabled]=o,r[Aria.Attributes.Label]=Resources.ConsumptionButtonToCDescription,this.getButtonAttributes(t,r)},i.getConsumptionButtonClass=function(){return"Mobile"===CommonSettings.ClientDevice?"consumptionButtonMobile":"consumptionButton"},i.prototype.tocIconClassNameArgs=function(t){return e.ViewModel.isToCViewVisible(t)?"ToCUpArrow":"ToCDownArrow"},i}(e.ButtonVE);e.ToCPullDownButtonVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Common,n=function(n){function o(e,i){var o=n.call(this,e,TDB.ControlSetFeatures.Isolated)||this;return o.parent=e,o.dialogsVisible=i.dialogsVisible,o.visible=TDB.watchableTag(596464649,o,!0),o.scrollVisibleManager=new t.ScrollVisibleManager(o,new Size(1,1),o.visible),o.scrollVisibleManager.initScrollPositions([0,0]),o}return __extends(o,n),o.prototype.onCameraMove=function(e){this.scrollVisibleManager.onCameraMove(e)},o.prototype.ensureVisible=function(e){var t=this;void 0===e&&(e=!0),platform.setImmediate(function(){t.scrollVisibleManager.ensureVisible(e)})},o.prototype.onDomAttached=function(e){this.setChildrenFocusability(!1)},o.prototype.mouseEnter=function(e){return this.ensureVisible(),!1},o.prototype.mouseLeave=function(e){return!1},o.prototype.wrapperStyleArgs=function(i){var n=!!t.ViewModel&&t.ViewModel.isToCViewVisible(i);return{minHeight:e.Utilities.toPxStr(UX.appBarButtonHeight),minWidth:e.Utilities.toPxStr(UX.appBarButtonWidth),visibility:this.dialogsVisible.getWatchedValue(i)||n?"hidden":""}},o.prototype.wrapperFadeVisibleInitArgs=function(){return{visibleInit:!0,transitionOut:"opacity 0.7s ease",disabled:CommonSettings.IsTemplateSway}},o.prototype.wrapperFadeVisibleArgs=function(e){return e.watchValue(this.visible)||this.removeFocusableChild(this),{visible:!this.dialogsVisible.getWatchedValue(e)&&this.visible.getWatchedValue(e),transitionOut:"opacity 0.7s ease"}},o.prototype.onEntering=function(){var e=this;TDB.applyUpdate(function(){e.visible.setValue(!0)}),this.setChildrenFocusability(!0),n.prototype.onEntering.call(this)},o.prototype.onExiting=function(){this.setChildrenFocusability(!1),n.prototype.onExiting.call(this)},o.prototype.setChildrenFocusability=function(e){this.button&&this.button.setFocusable(e)},o.prototype.buttonArgs=function(){if(StoryPageSettings.UseToCPullDownBar&&i.UserState.getInstance().isUserOnFlight(FlightList.ToCPullDownView1)){var e={buttonId:ClientAction.ButtonId.ToCView_PullDownIcon,click:this.tocOpen,context:this,description:{value:Resources.ConsumptionButtonToCDescription},tooltip:{value:Resources.ConsumptionButtonToCDescription},hasPopup:!0};return new TDB.ChildArgs(t.ToCPullDownButtonVE,e)}},o.prototype.tocPullDownBannerEventsInitArgs=function(){return{mouseenter:this.mouseEnter,mouseleave:this.mouseLeave}},o.prototype.tocPullDownBannerAttrArgs=function(e){var i=!!t.ViewModel&&t.ViewModel.isModalDialogOpen(e),n={};return n[Aria.Attributes.Hidden]=i?Aria.BooleanState.True:Aria.BooleanState.False,n[Aria.Attributes.Disabled]=i?Aria.BooleanState.True:Aria.BooleanState.False,n[Aria.Attributes.Label]=Resources.ProductNameShort,n},o.prototype.tocOpen=function(e){var i=t.ViewModel.getToCView();return i.show(),StoryLog.StructuredActivityTag(596464650,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"ToCPullDownIconClicked","User clicked/tabbed into the Table of Contents pull-down icon",null,{ToCView:i.isVisible()}),TDB.EventPropagation.Bypass},o}(t.RegionViewElement);t.ToCPullDownRegionVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(){function i(){}return i.prototype.getActionMap=function(){var i={};return i[e.Model.RM.ExternalAction.ToCView_ButtonPressed]={action:function(){t.ViewModel.getToCView().show()},context:this},i},i}();t.ToCViewManager=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=function(){function n(t){this.renderModelWatchable=e.Model.RenderModel,this.fontScale=t}return n.prototype.getRTL=function(e){return this.renderModelWatchable.getWatchedValue(e).getRTL(e)},n.prototype.getFontScale=function(e){return this.fontScale.getWatchedValue(e)},n.prototype.navigateToChapter=function(e){var n=this.getRootVE();"ExpoWorld"===t.Common.LayoutUtilities.getCurrentWorldId(this.renderModelWatchable.getValue())?i.NavigationManager.navigateToFsmNodeById(n,i.NavigationHelper.getFsmNodeIdFromContentId(n.getInteractionModel(),e),!0):i.NavigationHelper.navigateToContentId(n,e,{snapScene:!0})},n.prototype.getFlattenedToCData=function(t,i,n){var o=this,r=this.renderModelWatchable.getWatchedValue(t).toCElements.getCollection(t),a=this.getFlattenedToCDataHelper(t,r),s=function(e){return o.navigateToChapter(e)};return a.map(function(r,l){var u=r.getBackground(t),d=600,c=null,p={value:0,isLeft:!1};if(u){i&&n&&(d=o.getThumbnailQuality(n,i,u.getImageOriginalHeight(t),u.getImageOriginalWidth(t)),p=o.getThumbnailCrop(t,n,i,u.getImageOriginalHeight(t),u.getImageOriginalWidth(t),u.imageCrop));var g=u.getImageId(t);(c=g?e.Common.UrlHelper.getInstance().imageUrl(StoryPageSettings.LookupId,d,g,!1,"",StoryPageSettings.UseCDN,!1):u.getImageUrl(t))&&c.match(/^sway:\/\/resource\/([^\/]+)\/([^\/]+)/i)&&(c=null)}return{buttonId:ClientAction.ButtonId.ToCView_Thumbnail,title:r.getTitle(t),text:r.getSubTitle(t),linkedContentId:r.getNavigationTargetId(),imageUrl:c,imageOffset:p,chapterNumber:l,totalChapterCount:a.length-1,role:Aria.Roles.Link,navigateToChapter:s,description:{value:o.getToCThumbnailDescription(t,r,l,a.length-1)},fontScale:o.fontScale}})},n.prototype.getToCThumbnailDescription=function(t,i,n,o){return 0===n?i.getTitle(t):e.Utilities.formatString(Resources.ToCViewChapterLabel,[n,o])},n.prototype.getFlattenedToCDataHelper=function(e,t,i){i||(i=[]);for(var n=0;n<t.length;n++)i.push(t[n]),this.getFlattenedToCDataHelper(e,t[n].children.getCollection(e),i);return i},n.prototype.getCurrentVisibleChapter=function(e){var n=this.getRootVE();if("ExpoWorld"===t.Common.LayoutUtilities.getCurrentWorldId(this.renderModelWatchable.getValue())){var o=e.map(function(e){return i.NavigationHelper.getFsmNodeIdFromContentId(n._interactionEngine.getInteractionModel(),e)}),r=this.getIndexOfCurrentFsmNodeId(n._interactionEngine.actor(),o);return-1!==r?e[r]:null}for(var a=0;a<e.length;a++)if(i.NavigationHelper.isContentIdVisible(n,e[a]))return e[a];return null},n.prototype.getIndexOfCurrentFsmNodeId=function(e,t){if(!e||!e.getCurrentNode())return-1;var i=t.indexOf(e.getCurrentNode().id);if(-1===i)for(var n=e.children(),o=0;o<n.length;o++)if(-1!==(i=this.getIndexOfCurrentFsmNodeId(n[o],t)))return i;return i},n.prototype.getThumbnailQuality=function(e,t,i,n){var o,r=Math.max(i,n);for(o=i<n?t/n*r:e/i*r;Math.round(r/2)>o;)r/=2;return Math.round(r)},n.prototype.getThumbnailCrop=function(e,t,i,n,o,r){var a={value:0,isLeft:!1};if(n>o){var s=i/o,l=r.getHeight(e)*s/2+r.getTop(e)*s;a.value=Math.min(Math.max(0,l-t/2),n*s-t)/t*100}else{var s=t/n,l=r.getWidth(e)*s/2+r.getLeft(e)*s;a.value=Math.min(Math.max(0,l-i/2),o*s-i)/i*100,a.isLeft=!0}return a},n.prototype.getTileWidth=function(e){var t={1440:1.05,1600:1.17,1920:1.3,2560:1.5,3840:2.5,7680:5};return e>=7680?180*t[7680]:e>=3840?180*t[3840]:e>=2560?180*t[2560]:e>=1920?180*t[1920]:e>=1600?180*t[1600]:e>=1440?180*t[1440]:180},n.prototype.pauseCSSAnimations=function(){this.getRootVE()._interactionEngine.getAnimationEngine().pauseCSSAnimations()},n.prototype.resumeCSSAnimations=function(){this.getRootVE()._interactionEngine.getAnimationEngine().resumeCSSAnimations()},n.prototype.getRootVE=function(e){return i.ViewModel.previewVE._root.getWatchedValue(e)},n}();i.ToCViewModel=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(e){function t(t,i){var n=e.call(this,t,i.args)||this;return n.viewModel=i,n.viewModel.viewElement=n,n}return __extends(t,e),t.prototype.getLinkedContentId=function(){return this.viewModel.getLinkedContentId()},t.prototype.getChapterNumber=function(){return this.viewModel.getChapterNumber()},t.prototype.isTitle=function(){return this.viewModel.isTitle()},t.prototype.isUntitled=function(){return this.viewModel.isUntitled()},t.prototype.tileAttrArgs=function(e){return this.viewModel.tileAttrArgs(e,this.getButtonAttributes.bind(this))},t.prototype.chapterNumberStyleArgs=function(e){return this.viewModel.chapterNumberStyleArgs(e)},t.prototype.chapterNumberTextArgs=function(e){return this.viewModel.chapterNumberTextArgs(e)},t.prototype.homeIconArgs=function(){return this.viewModel.homeIconArgs()},t.prototype.sliderClassNameArgs=function(e){return this.viewModel.sliderClassNameArgs(e)},t.prototype.headingClassNameArgs=function(e){return this.viewModel.headingClassNameArgs(e)},t.prototype.headingTextArgs=function(e){return this.viewModel.headingTextArgs(e)},t.prototype.imageWrapperStyleArgs=function(e){return this.viewModel.imageWrapperStyleArgs(e)},t.prototype.imageAttrArgs=function(e){return this.viewModel.imageAttrArgs(e)},t.prototype.imageStyleArgs=function(e){return this.viewModel.imageStyleArgs(e)},t.prototype.maskVisibleArgs=function(e){return this.viewModel.maskVisibleArgs(e)},t.prototype.bodyTextArgs=function(e){return this.viewModel.bodyTextArgs(e)},t.prototype.isMobileArgs=function(){return this.viewModel.isMobileArgs()},t.prototype.mobileTileWrapperClassNameArgs=function(e){return this.viewModel.mobileTileWrapperClassNameArgs()},t.prototype.mobileTitleTextArgs=function(e){return this.viewModel.mobileTitleTextArgs(e)},t.prototype.mobileBodyTextArgs=function(){return this.viewModel.mobileBodyTextArgs()},t.prototype.showMobileBodyArgs=function(e){return this.viewModel.showMobileBodyArgs(e)},t.prototype.mobileTitleStyleArgs=function(){return this.viewModel.mobileTitleStyleArgs()},t.prototype.mobileBodyStyleArgs=function(){return this.viewModel.mobileBodyStyleArgs()},t.prototype.shouldShowMobileThumbnailArgs=function(e){return this.viewModel.shouldShowMobileThumbnailArgs(e)},t.prototype.onGainingFocus=function(){this.viewModel.onGainingFocus()},t.prototype.onAction=function(e){return this.viewModel.onAction(e)},t}(e.ButtonVE);e.TimelineToCTileVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=function(){function n(e){this.args=e,this.parent=e.parent,this.title=e.title,this.text=e.text,this.linkedContentId=e.linkedContentId,this.imageUrl=e.imageUrl,this.imageOffset=e.imageOffset,this.chapterNumber=e.chapterNumber,this.totalChapterCount=e.totalChapterCount,this.navigateToChapter=e.navigateToChapter,this.afterNavigate=e.afterNavigate,this.fontScale=e.fontScale}return n.prototype.getFontScale=function(e){var t=this.fontScale.getWatchedValue(e);return void 0!==t&&null!==t?t:1},n.prototype.getLinkedContentId=function(){return this.linkedContentId},n.prototype.getChapterNumber=function(){return this.chapterNumber},n.prototype.isTitle=function(){return 0===this.chapterNumber},n.prototype.isUntitled=function(){return!this.title},n.prototype.tileAttrArgs=function(e,t){return t(e,{title:this.isTitle()?Resources.ToCViewTitleHelpText:this.title})},n.prototype.chapterNumberStyleArgs=function(e){return this.imageUrl&&this.parent.getIsMobile(e)?{color:"white"}:{color:""}},n.prototype.chapterNumberTextArgs=function(e){return this.isTitle()?null:this.chapterNumber<10?"0"+this.chapterNumber:""+this.chapterNumber},n.prototype.homeIconArgs=function(){if(!this.isTitle())return null;var e={fontIconName:{value:FontIcons.ToCViewHomeIcon},fontIconSizeClass:FontIcons.ToCViewHomeIconSize};return new TDB.ChildArgs(i.FontIconVE,e)},n.prototype.sliderClassNameArgs=function(e){var t="TimelineToCViewTileSlider";return this.parent.isVisible(e)&&this.parent.getActiveChapter()===this&&(t+=" TimelineToCViewTileSliderInit"),t},n.prototype.headingClassNameArgs=function(e){return"TimelineToCViewTileHeader"+(this.title?"":" TimelineToCViewTileHeaderUntitled")},n.prototype.headingTextArgs=function(e){return this.title},n.prototype.imageWrapperStyleArgs=function(e){return this.imageUrl?null:{height:"0px"}},n.prototype.imageAttrArgs=function(e){return{src:this.imageUrl}},n.prototype.imageStyleArgs=function(e){return{width:this.imageOffset.isLeft?"auto":"100%",height:this.imageOffset.isLeft?"100%":"auto",left:this.imageOffset.isLeft?"-"+this.imageOffset.value+"%":"",top:this.imageOffset.isLeft?"":"-"+this.imageOffset.value+"%"}},n.prototype.maskVisibleArgs=function(e){return this.parent.getIsMobile(e)&&!!this.imageUrl},n.prototype.bodyTextArgs=function(e){return this.imageUrl?null:this.text},n.prototype.isMobileArgs=function(){return this.parent.isMobile},n.prototype.mobileTileWrapperClassNameArgs=function(){return n.MOBILE_TILE_WRAPPER_BASE_CSS_CLASS+(this.shouldShowMobileThumbnailArgs()?"":n.MOBILE_TILE_WRAPPER_NOTHUMBNAIL_CSS_CLASS)},n.prototype.mobileTitleTextArgs=function(e){return this.title||Resources.ToCViewEmptyChapterTitle},n.prototype.mobileBodyTextArgs=function(){return this.text},n.prototype.showMobileBodyArgs=function(e){return this.getFontScale(e)<=n.MOBILE_TILE_HIDE_BODY_TEXT_THRESHOLD},n.prototype.mobileTitleStyleArgs=function(){var t=e.Utilities.toPxStr(this.getFontScale()*n.MOBILE_TILE_HEADING_TEXT_BASE_SIZE);return{fontSize:t,height:t,lineHeight:t}},n.prototype.mobileBodyStyleArgs=function(){return{fontSize:e.Utilities.toPxStr(this.getFontScale()*n.MOBILE_TILE_BODY_TEXT_BASE_SIZE)}},n.prototype.shouldShowMobileThumbnailArgs=function(e){return!this.parent.isMobile.getWatchedValue(e)||this.getFontScale(e)<=n.MOBILE_TILE_NOTHUMBNAIL_THRESHOLD},n.prototype.onGainingFocus=function(){var e=this.parent.outerCarouselBinding.getRelativeLocation(this.chapterNumber);e!==t.Bindings.Carousel.RelativeLocation.Left&&e!==t.Bindings.Carousel.RelativeLocation.Right||this.parent.outerCarouselBinding.moveToContentNumber(this.chapterNumber,e===t.Bindings.Carousel.RelativeLocation.Left)},n.prototype.onAction=function(e){return this.navigateToChapter(this.linkedContentId),this.afterNavigate&&this.afterNavigate(),ActionLogger.RecordClientAction(new ClientAction.ToCViewNavigated(this.chapterNumber,i.ViewModel.isStoryPageEdit(),i.ViewModel.isEditMode.getValue())),TDB.EventPropagation.PreventDefault},n.MOBILE_TILE_WRAPPER_BASE_CSS_CLASS="TimelineToCViewTileMobileOuter",n.MOBILE_TILE_WRAPPER_NOTHUMBNAIL_CSS_CLASS=" TimelineToCViewTileMobileOuterNoThumbnail",n.MOBILE_TILE_NOTHUMBNAIL_THRESHOLD=1.3,n.MOBILE_TILE_HIDE_BODY_TEXT_THRESHOLD=1,n.MOBILE_TILE_HEADING_TEXT_BASE_SIZE=20,n.MOBILE_TILE_BODY_TEXT_BASE_SIZE=12,n}();i.TimelineToCTileViewModel=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=function(n){function o(e,t){var i=n.call(this,e,t.features,t.activatable)||this;return i.viewModel=t.viewModel,i.activeChapter=TDB.watchable(i,void 0),i.isMobile=TDB.watcherTag(596476131,i,i,i.computeIsMobile),i.visible=t.visible,i.animationDisabled=t.animationDisabled,i.timeLineTocView=t.timeLineTocView,i.timelineToCTileViewModels=TDB.watcherTag(596456448,i,i,i.createChapterViewModels),i}return __extends(o,n),o.prototype.createChapterViewModels=function(e){var t=this,n=function(){return t.timeLineTocView.hide()};return this.viewModel.getFlattenedToCData(e,i.TimelineToCViewModel.IMAGE_WIDTH,i.TimelineToCViewModel.IMAGE_HEIGHT).map(function(e){return e.afterNavigate=n,e.parent=t,new i.TimelineToCTileViewModel(e)},this)},o.prototype.computeIsMobile=function(t){if(void 0===window.matchMedia)return!1;e.Common.Environment.getInstance().getWindowSize(t);try{var n=window.matchMedia("(max-width: "+i.TimelineToCViewModel.MOBILE_THRESHOLD+"px)");return n&&n.matches}catch(e){return!1}},o.prototype.getIsMobile=function(e){return this.isMobile.getWatchedValue(e)},o.prototype.isVisible=function(e){return this.visible.getWatchedValue(e)},o.prototype.tilesArgs=function(e){return this.timelineToCTileViewModels.getWatchedValue(e).map(function(e){return new TDB.ChildArgs(i.TimelineToCTileVE,e)},this)},o.prototype.outerClassNameArgs=function(e){var t="TimelineToCViewTileOuterContainer";return this.getChapters(e).every(function(e){return e.isUntitled()})&&(t+=" TimelineToCViewTileOuterContainerNoHeadings"),t},o.prototype.outerCarouselInitArgs=function(){return{isRTL:this.viewModel.getRTL(),shiftMode:e.View.Bindings.Carousel.ShiftMode.KeepOne,contentCssSelector:".TimelineToCViewTileWidthWrapper",containerCssSelector:".TimelineToCViewTileInnerContainer",buffer:20,transitionDuration:600}},o.prototype.outerCarouselArgs=function(e){return{disabled:this.getIsMobile(e)||!this.timeLineTocView.isVisible(e),isRTL:this.viewModel.getRTL(e)}},o.prototype.outerStaggeredAnimationInitArgs=function(){var e={animationName:"TimelineToCFade",animationDuration:300,animationInterval:33,animationTimingFunction:"cubic-bezier(0.83, 0, 0.96, 0.67)"},i={animationName:"TimelineToCFade",animationDuration:110,animationTimingFunction:"cubic-bezier(0, 0, 0, 1)",animationDirection:"reverse"},n=function(e){e.style[Modernizr.prefixedCSS("animationName")]=""};return{isReversed:!0,intervalMode:t.Bindings.StaggeredAnimation.IntervalMode.HorizontalBounds,targets:[{targetCssSelector:".TimelineToCViewTileHeader",inAnimation:!0,animations:[{animationName:"TimelineToCHeaderTranslate",animationDuration:367,animationInterval:33,animationTimingFunction:"cubic-bezier(0.03, 0.05, 0.57, 1)"},e],animationEndHook:n},{targetCssSelector:".TimelineToCViewTileHeader",inAnimation:!1,animations:[{animationName:"TimelineToCHeaderTranslate",animationDuration:300,animationTimingFunction:"cubic-bezier(0.74, 1, 0.17, 0.66)",animationDirection:"reverse"},i]},{targetCssSelector:".TimelineToCViewTileContent",inAnimation:!0,animations:[{animationName:"TimelineToCContentTransform",animationDuration:367,animationInterval:33,animationTimingFunction:"cubic-bezier(0.03, 0.05, 0.57, 1)"},e],animationEndHook:n},{targetCssSelector:".TimelineToCViewTileContent",inAnimation:!1,animations:[{animationName:"TimelineToCContentTransform",animationDuration:125,animationTimingFunction:"cubic-bezier(0.74, 1, 0.16, 0.31)",animationDirection:"reverse"},i]},{targetCssSelector:".TimelineToCViewTileNumber",inAnimation:!0,animations:[{animationName:"TimelineToCNumberTranslateIn",animationDuration:367,animationInterval:33,animationTimingFunction:"cubic-bezier(0.03, 0.05, 0.57, 1)"},e],animationEndHook:n},{targetCssSelector:".TimelineToCViewTileNumber",inAnimation:!1,animations:[{animationName:"TimelineToCNumberTranslateOut",animationDuration:300,animationTimingFunction:"cubic-bezier(0.74, 1, 0.16, 0.79)"},i]}]}},o.prototype.outerStaggeredAnimationArgs=function(e){return{animated:this.timeLineTocView.isVisible(e),disabled:this.getIsMobile(e)||this.animationDisabled.getWatchedValue(e)}},o.prototype.innerEventsInitArgs=function(){return{touchmove:this.preventBubbling}},o.prototype.preventBubbling=function(e){return e.stopPropagation(),!0},o.prototype.nextPaddleClick=function(e){return this.outerCarouselBinding.shiftToNextSet(this.animationDisabled.getValue()),TDB.EventPropagation.PreventDefault},o.prototype.prevPaddleClick=function(e){return this.outerCarouselBinding.shiftToPrevSet(this.animationDisabled.getValue()),TDB.EventPropagation.PreventDefault},o.prototype.paddleLeftArgs=function(t){var n=this.viewModel.getRTL(t),o=e.Common.Environment.getInstance().getWindowSize(t).w,r=this.findParent(i.StoryPageVE).getPreviewWidth(t);if(this.getIsMobile(t)||this.viewModel.getTileWidth(o)*this.getChapters(t).length<=r)return null;var a={};a[Aria.Attributes.Hidden]=Aria.BooleanState.True;var s={buttonId:ClientAction.ButtonId.ToCView_PaddleLeft,attributes:{value:a},cssClass:{value:"TimelineToCViewPaddleLeft"},description:{value:n?Resources.ToCViewNextButtonHelpText:Resources.ToCViewPrevButtonHelpText},fontIconName:{value:FontIcons.ToCViewLeftPaddleIcon},fontIconSizeClass:FontIcons.ToCViewLeftPaddleIconSize,tabIndex:TDB.NonFocusableTabIndex,click:n?this.nextPaddleClick:this.prevPaddleClick,context:this};return new TDB.ChildArgs(i.GlyphButtonVE,s)},o.prototype.paddleRightArgs=function(t){var n=this.viewModel.getRTL(t),o=e.Common.Environment.getInstance().getWindowSize(t).w,r=this.findParent(i.StoryPageVE).getPreviewWidth(t);if(this.getIsMobile(t)||this.viewModel.getTileWidth(o)*this.getChapters(t).length<=r)return null;var a={};a[Aria.Attributes.Hidden]=Aria.BooleanState.True;var s={buttonId:ClientAction.ButtonId.ToCView_PaddleRight,attributes:{value:a},cssClass:{value:"TimelineToCViewPaddleRight"},description:{value:n?Resources.ToCViewPrevButtonHelpText:Resources.ToCViewNextButtonHelpText},fontIconName:{value:FontIcons.ToCViewRightPaddleIcon},fontIconSizeClass:FontIcons.ToCViewRightPaddleIconSize,tabIndex:TDB.NonFocusableTabIndex,click:n?this.prevPaddleClick:this.nextPaddleClick,context:this};return new TDB.ChildArgs(i.GlyphButtonVE,s)},o.prototype.onEntering=function(){n.prototype.onEntering.call(this);var e=this.getActiveChapter();e&&this.outerCarouselBinding.getRelativeLocation(e.getChapterNumber())!==t.Bindings.Carousel.RelativeLocation.Visible&&this.outerCarouselBinding.moveToContentNumber(this.activeChapter.getValue().getChapterNumber(),this.viewModel.getRTL(),!0)},o.prototype.updateActiveChapter=function(){var e=this,t=this.getChapters().map(function(e){return e.getLinkedContentId()});t.shift();var i=this.viewModel.getCurrentVisibleChapter(t),n=this.getChapters().firstOrDefault(function(e){return e.getLinkedContentId()===i});n||(n=this.getChapters()[0]),TDB.applyUpdate(function(){return e.activeChapter.setValue(n)})},o.prototype.getChapters=function(e){return this.timelineToCTileViewModels.getWatchedValue(e)},o.prototype.getActiveChapter=function(e){return this.activeChapter.getWatchedValue(e)},o.prototype.getInitialActiveChild=function(){return this.activeChapter.getWatchedValue().viewElement},o.prototype.clearActiveChild=function(){var e=this;this.activeChild=void 0,TDB.applyUpdate(function(){e.activeChapter.setValue(void 0)})},o}(i.RegionViewElement);i.TimelineToCTileRegionVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Common,n=function(){function e(e){this.args=e,this.title=e.title,this.viewModel=e.viewModel,this.animationDisabled=e.animationDisabled,this.opaqueBackground=TDB.watchableTag(596456154,this,!1),e.visible||(e.visible=TDB.watchableTag(596456155,this,!1)),this.visible=e.visible}return e.prototype.getArgs=function(){return this.args},e.prototype.isVisible=function(e){return this.visible.getWatchedValue(e)},e.prototype.setController=function(e){this.timelineTocVeController=e},e.prototype.overlayAttrArgs=function(e){var t=this.getAriaAttributes(e);return t.dir=this.viewModel.getRTL(e)?"RTL":"LTR",t},e.prototype.overlayFadeVisibleInitArgs=function(){return{transitionIn:"opacity 0.5s ease",transitionOut:"opacity 0.2s ease",visibleInit:!1}},e.prototype.overlayFadeVisibleArgs=function(e){return{visible:this.isVisible(e)}},e.prototype.tileRegionArgs=function(){var e=this,i={features:TDB.ControlSetFeatures.TabInto|TDB.ControlSetFeatures.TabDisabled|TDB.ControlSetFeatures.Isolated|TDB.ControlSetFeatures.HorizontalList|TDB.ControlSetFeatures.VerticalList,viewModel:this.viewModel,visible:this.visible,activatable:this.visible,animationDisabled:this.animationDisabled,timeLineTocView:this.timelineTocVeController.timelineViewElement};return new TDB.ChildArgs(t.TimelineToCTileRegionVE,i,function(t){return e.tileRegion=t})},e.prototype.closeButtonArgs=function(){var e=this,i={buttonId:ClientAction.ButtonId.ToCView_Close,description:{value:Resources.ToCViewClose},click:function(t){return e.hide(),TDB.EventPropagation.PreventDefault},tooltip:{value:Resources.ToCViewClose},fontIconName:{value:FontIcons.CloseButtonIcon},fontIconSizeClass:FontIcons.CloseButtonIconSize,fontIconWrapperClass:{value:"ToCViewCloseButton"}};return new TDB.ChildArgs(t.GlyphButtonVE,i)},e.prototype.closeButtonWrapperClassNameArgs=function(e){return t.ViewModel.isEditMode.getWatchedValue(e)?"ToCViewCloseButtonWrapperEdit":"ToCViewCloseButtonWrapperConsumption"},e.prototype.overlayEventsInitArgs=function(e){return{touchmove:this.stopTouchDefault}},e.prototype.stopTouchDefault=function(e){return e.preventDefault(),!0},e.prototype.overlayStyleArgs=function(e){var t={backgroundColor:this.opaqueBackground.getWatchedValue(e)?"#fff":""};if(this.toCPullDownViewArgs()){var i=this.visible.getWatchedValue(e);t.animation=i?"ToCSlideDown 0.3s cubic-bezier(0.03, 0.05, 0.57, 1)":"ToCSlideUp 0.2s cubic-bezier(0.03, 0.05, 0.57, 1)"}return t},e.prototype.setOpaqueBackground=function(e){var t=this;TDB.applyUpdate(function(){t.opaqueBackground.setValue(e)})},e.prototype.getChapters=function(e){return this.tileRegion.getChapters(e)},e.prototype.getTileRegion=function(){return this.tileRegion},e.prototype.getActiveChapter=function(e){return this.tileRegion.getActiveChapter(e)},e.prototype.mouseClicked=function(e){return this.hide(),TDB.EventPropagation.PreventDefault},e.prototype.onActivateChild=function(e){this.tileRegion.updateActiveChapter(),this.tileRegion.outerCarouselBinding.moveToContentNumber(this.tileRegion.getActiveChapter().getChapterNumber(),this.viewModel.getRTL(),!0),this.timelineTocVeController.onActivateChild(e)},e.prototype.show=function(){ActionLogger.RecordClientAction(new ClientAction.ToCViewOpened(t.ViewModel.isStoryPageEdit(),t.ViewModel.isEditMode.getValue())),this.viewModel.pauseCSSAnimations(),this.timelineTocVeController.show()},e.prototype.hide=function(){this.viewModel.resumeCSSAnimations(),this.timelineTocVeController.hide()},e.prototype.onExiting=function(){this.getTileRegion()&&this.getTileRegion().clearActiveChild(),this.timelineTocVeController.onExiting()},e.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},e.prototype.getAriaAttributes=function(e){var t=this.timelineTocVeController.getAriaAttributes(e);return t[Aria.Attributes.Title]=this.title,t},e.prototype.getInitialActiveChild=function(){return this.tileRegion},e.prototype.toCPullDownViewArgs=function(){return StoryPageSettings.UseToCPullDownBar&&i.UserState.getInstance().isUserOnFlight(FlightList.ToCPullDownView1)},e.prototype.toCPullDownCloseButtonArgs=function(){var e={buttonId:ClientAction.ButtonId.ToCView_Close,context:this,click:this.tocClose,description:{value:Resources.ToCViewClose},tooltip:{value:Resources.ToCViewClose}};return new TDB.ChildArgs(t.ToCPullDownButtonVE,e)},e.prototype.tocClose=function(e){return this.hide(),TDB.EventPropagation.Bypass},e.IMAGE_HEIGHT=600,e.IMAGE_WIDTH=600,e.MOBILE_THRESHOLD=600,e.OVERLAY_CLASSNAME="TimelineToCViewOverlay",e}();t.TimelineToCViewModel=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(n,o){var r=t.call(this,n,o.getArgs())||this;r.viewModel=o;var a=r.findParent(e.StoryPageVE);return a&&r.registerShortcut(i.shortcutIdentifiers,r,a.previewVE.getRootVE()),r.viewModel.setController(r.createController()),r}return __extends(i,t),i.prototype.createController=function(){return{onActivateChild:t.prototype.onActivateChild.bind(this),show:t.prototype.show.bind(this),hide:t.prototype.hide.bind(this),onExiting:t.prototype.onExiting.bind(this),getAriaAttributes:t.prototype.getAriaAttributes.bind(this),timelineViewElement:this}},i.prototype.overlayAttrArgs=function(e){return this.viewModel.overlayAttrArgs(e)},i.prototype.overlayFadeVisibleInitArgs=function(){return this.viewModel.overlayFadeVisibleInitArgs()},i.prototype.overlayFadeVisibleArgs=function(e){return this.viewModel.overlayFadeVisibleArgs(e)},i.prototype.tileRegionArgs=function(){return this.viewModel.tileRegionArgs()},i.prototype.closeButtonArgs=function(){return this.viewModel.closeButtonArgs()},i.prototype.closeButtonWrapperClassNameArgs=function(e){return this.viewModel.closeButtonWrapperClassNameArgs(e)},i.prototype.overlayEventsInitArgs=function(e){return this.viewModel.overlayEventsInitArgs(e)},i.prototype.stopTouchDefault=function(e){return this.viewModel.stopTouchDefault(e)},i.prototype.overlayStyleArgs=function(e){return this.viewModel.overlayStyleArgs(e)},i.prototype.setOpaqueBackground=function(e){this.viewModel.setOpaqueBackground(e)},i.prototype.getChapters=function(e){return this.viewModel.getChapters(e)},i.prototype.getTileRegion=function(){return this.viewModel.getTileRegion()},i.prototype.getActiveChapter=function(e){return this.viewModel.getActiveChapter(e)},i.prototype.mouseClicked=function(e){return this.viewModel.mouseClicked(e)},i.prototype.onActivateChild=function(e){this.viewModel.onActivateChild(e)},i.prototype.show=function(){this.viewModel.show()},i.prototype.hide=function(){this.viewModel.hide()},i.prototype.onExiting=function(){this.viewModel.onExiting()},i.prototype.toggle=function(){this.viewModel.toggle()},i.prototype.getAriaAttributes=function(e){return this.viewModel.getAriaAttributes(e)},i.prototype.handleShortcutKey=function(t){var i=TDB.ShortcutIdentifier.createShortcutIdentifierFromEvent(t);return e.TimelineToCViewVE.shortcutIdentifiers[0].shouldHandle(i)?(this.toggle(),TDB.EventPropagation.PreventDefault):TDB.EventPropagation.Bypass},i.prototype.getInitialActiveChild=function(){return this.viewModel.getInitialActiveChild()},i.prototype.dispose=function(){t.prototype.dispose.call(this),e.ViewModel&&e.ViewModel.previewVE&&this.unregisterShortcut(i.shortcutIdentifiers,this,e.ViewModel.previewVE._root.getValue())},i.prototype.toCPullDownViewArgs=function(){return this.viewModel.toCPullDownViewArgs()},i.prototype.toCPullDownCloseButtonArgs=function(){return this.viewModel.toCPullDownCloseButtonArgs()},i.prototype.tocClose=function(e){return this.viewModel.tocClose(e)},i.shortcutIdentifiers=[TDB.ShortcutIdentifier.createShortcutIdentifier("Alt+Shift+NKey")],i}(e.PopupBaseVE);e.TimelineToCViewVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t=function(){function e(){}return e.getAMSlanguageCode=function(e){switch(e.toLowerCase()){case"en-us":case"cs-cz":case"de-de":case"es-es":case"fr-fr":case"hu-hu":case"it-it":case"ja-jp":case"ko-kr":case"nl-nl":case"pl-pl":case"ru-ru":case"sv-se":case"tr-tr":case"eu-es":case"bg-bg":case"ca-es":case"hr-hr":case"da-dk":case"et-ee":case"fi-fi":case"gl-es":case"el-gr":case"id-id":case"kk-kz":case"lv-lv":case"lt-lt":case"ms-my":case"nb-no":case"ro-ro":case"sk-sk":case"sl-si":case"uk-ua":return e.substr(0,2);case"zh-cn":return"zh-hans";case"zh-tw":return"zh-hant";case"pt-pt":case"pt-br":case"sr-cyrl-cs":case"sr-latn-rs":default:return e}},e}();e.AMSHelper=t}(e.Common||(e.Common={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i,n=e.Model.RM;!function(e){e[e.showing=0]="showing",e[e.notShowing=1]="notShowing"}(i=t.VolumeState||(t.VolumeState={}));var o=function(o){function r(t,a){var s=o.call(this,t)||this;return s._audioPlayer=null,s.volumeControlEnabled=!0,s.audioDomListener=Obj.implement(s,{domAttached:s.onDomAttached,domDetached:s.onDomDetached}),s._volumeShowing=TDB.watchableTag(596476122,s,i.notShowing),s.volume=TDB.watchableTag(596476123,s,1),s.playbackPosition=TDB.watchableTag(596476124,s,0),s.audioControlsWidth=TDB.watchableTag(596476125,s,0),s.playerId=a.id,s.layout=a.parent,s.source=a.descriptor,s.playerType=a.parent.getAudioPlayerType(),s.playCallback=a.playButtonClickCallback,s.resourceFactory=a.resourceFactory,s.analyticsLogger=a.analyticsLogger,r.jsScriptLoaded||(r.jsScriptLoaded=TDB.watchableTag(596476126,s,!1)),s._manager=e.View.ViewElements.ViewModel.getAudioPlayerManager(),s._manager.registerControls(s.playerId,s),platform.setImmediate(function(){s.scriptsLoaded()}),(e.Utilities.browser.isiOS||a.hideVolumeControl)&&(s.volumeControlEnabled=!1),s.addDomListener(s.audioDomListener),a.preload&&s.playerType===n.AudioPlayerType.Browser&&platform.setImmediate(function(){s.disposed||(s._audioPlayer=s._manager.requestAudioPlayer(s.playerId,{playbackPosition:s.playbackPosition,volume:s.volume,context:s,analyticsLogger:s.analyticsLogger}))}),s}return __extends(r,o),r.prototype.getAudioPlayerDescriptor=function(){return this.source},r.prototype.getAudioPlayerType=function(){return this.playerType},r.prototype.scriptsLoaded=function(){TDB.applyUpdate(function(){r.jsScriptLoaded.setValue(!0)})},r.prototype.ifVolumeControlArgs=function(e){return e.watchValue(r.jsScriptLoaded)&&this.audioControlsWidth.getWatchedValue(e)>=r.progressBarDisplayWidthLimit},r.prototype.dispose=function(e){this.audioDomListener&&(this.removeDomListener(this.audioDomListener),this.audioDomListener=null),this._manager.unregisterControls(this.playerId),this.deleteAudioPlayer(),o.prototype.dispose.call(this,e)},r.prototype.deleteAudioPlayer=function(){this._audioPlayer&&(this._audioPlayer.dispose(),this._audioPlayer=void 0)},r.prototype.onDomAttached=function(e){var t=this;TDB.applyUpdate(function(){t.audioControlsWidth.setValue(t.controlsWrapperPositionBinding.getWidth())},TDB.Justification.DynamicMenu)},r.prototype.onDomDetached=function(e){this._audioPlayer&&this._manager.stopAudioPlayer(this.playerId)},r.prototype.ifControlsArgs=function(e){return this.audioControlsWidth.getWatchedValue(e)>=r.progressBarDisplayWidthLimit},r.prototype.ifTimeStampArgs=function(e){return this.audioControlsWidth.getWatchedValue(e)>=r.timeStampDisplayWidthLimit},r.prototype.playButtonClicked=function(e){return this._audioPlayer&&this._manager.getAudioPlayer(this.playerId)||(this._audioPlayer=this._manager.requestAudioPlayer(this.playerId,{playbackPosition:this.playbackPosition,volume:this.volume,context:this,analyticsLogger:this.analyticsLogger})),this._audioPlayer.isPlaying()?(StoryLog.StructuredTraceTag(596476127,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Audio pause button clicked",{audioId:this.getAudioPlayerDescriptor()}),this._audioPlayer.pauseAudio()):(StoryLog.StructuredTraceTag(20525714,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Audio play button clicked",{audioId:this.getAudioPlayerDescriptor()}),this._manager.requestToStartPlaying(this.playerId),this._audioPlayer.playAudio()),this.playCallback&&this.playCallback.call(this.parent),TDB.EventPropagation.Bypass},r.prototype.getPlayButtonArgs=function(){return{buttonId:ClientAction.ButtonId.Audio_Play,click:this.playButtonClicked,context:this,cssClass:{value:"AudioLayoutPlayButton"},description:{compute:new TDB.ComputedOptionArgs(this,this.playButtonDescriptionArgs)},fontIconName:{compute:new TDB.ComputedOptionArgs(this,this.playButtonIconArgs)},fontIconSizeClass:FontIcons.PlayAudioButtonIconSize}},r.prototype.playButtonArgs=function(e){var i=this.getPlayButtonArgs();return new TDB.ChildArgs(t.GlyphButtonVE,i)},r.prototype.playButtonIconArgs=function(e){var t=this._manager.getAudioPlayer(this.playerId,e),i=!1;return t&&(i=t.isPlaying(e)),i?FontIcons.PauseAudioButtonIcon:FontIcons.PlayHeaderButtonIcon},r.prototype.playButtonDescriptionArgs=function(e){var t=this._manager.getAudioPlayer(this.playerId,e);return t&&t.isPlaying(e)?Resources.PauseButtonDescription:Resources.PlayButtonDescription},r.prototype.volumeButtonArgs=function(e){if(!this.volumeControlEnabled)return null;var i=this.getVolumeButtonArgs();return new TDB.ChildArgs(t.GlyphButtonVE,i)},r.prototype.getVolumeButtonArgs=function(){return{buttonId:ClientAction.ButtonId.Audio_Play,click:this.volumeButtonClicked,context:this,cssClass:{compute:new TDB.ComputedOptionArgs(this,this.cssWatchableArgs)},description:{value:Resources.VolumeControlDescription},fontIconName:{compute:new TDB.ComputedOptionArgs(this,this.getVolumeButtonIcon)},fontIconSizeClass:FontIcons.VolumeAudioIconSize,hasPopup:!0}},r.prototype.getVolumeButtonIcon=function(e){var t=this.volume.getWatchedValue(e);return 0==t?FontIcons.VolumeMuteAudioIcon:t<r.lowVolumeIconThreshold?FontIcons.VolumeLowAudioIcon:t<r.mediumVolumeIconThreshold?FontIcons.VolumeMediumAudioIcon:FontIcons.VolumeHighAudioIcon},r.prototype.cssWatchableArgs=function(e){var t="AudioLayoutVolumeButton",n=this._volumeShowing.getWatchedValue(e);return this.audioControlsWidth.getWatchedValue(e)<r.progressBarDisplayWidthLimit&&(t="AudioLayoutVolumeButtonNoControls"),n===i.showing&&(t+=" IconOverlayActive"),t},r.prototype.volumeButtonClicked=function(e){var n=this,o=this.controlsWrapperPositionBinding.getPosition().top<r.volumeBarHeight+(t.ViewModel.isEditMode.getValue()?r.appBarHeight+r.previewHeaderHeight:0);return this._volumeShowing.getValue()===i.notShowing?(StoryLog.StructuredTraceTag(20525715,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Open volume button clicked",{audioId:this.getAudioPlayerDescriptor(),direction:o?"bottom":"top"}),TDB.applyUpdate(function(){n._volumeShowing.setValue(i.showing)}),this.volumeSlider&&this.volumeSlider.setFocus()):(StoryLog.StructuredTraceTag(596476128,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Close volume button clicked",{audioId:this.getAudioPlayerDescriptor()}),TDB.applyUpdate(function(){n._volumeShowing.setValue(i.notShowing)})),TDB.EventPropagation.Bypass},r.prototype.keyDown=function(e){var t=this;return e.keyCode===KeyCodeType.EscapeKey?(TDB.applyUpdate(function(){t._volumeShowing.setValue(i.notShowing)}),TDB.EventPropagation.PreventDefault):TDB.EventPropagation.Bubble},r.prototype.durationTextArgs=function(e){var i=0,n=0,o=this._manager.getAudioPlayer(this.playerId,e);return o?0===(i=e.watchValue(o.duration))?r.defaultTimeStamp:((n=e.watchValue(o.playbackPosition))>i&&(n=i),t.AudioLayoutVEBase.formatTime(n,i>=r.secondInAnHour,":")+" / "+t.AudioLayoutVEBase.formatTime(i,i>=r.secondInAnHour,":")):r.defaultTimeStamp},r.prototype.progressBarArgs=function(e){var i={position:this.playbackPosition,cssOverride:"progressSlidebarWrapper",handleWidth:r.progressHandleWidth,onSliderChange:this.seekAudio,vertical:!1,continuousMode:!0,timelineDuration:0,domFocusable:{value:!1},description:Resources.ProgressBarDescription,audioId:this.getAudioPlayerDescriptor()},n=this._manager.getAudioPlayer(this.playerId,e);return n&&n.isLoaded(e)&&(i.timelineDuration=n.duration.getValue(),i.domFocusable={value:!0}),new TDB.ChildArgs(t.TimelineSlidebarVE,i)},r.prototype.seekAudio=function(e){var t=this;this._audioPlayer&&(this._audioPlayer.seekAudio(e),TDB.applyUpdate(function(){t.playbackPosition.setValue(e)}))},r.prototype.volumeControlDivStyleArgs=function(e){return this.audioControlsWidth.getWatchedValue(e)<r.progressBarDisplayWidthLimit&&r.audioButtonsWidth+"px",{visibility:e.watchValue(this._volumeShowing)!==i.notShowing?"visible":"",zIndex:e.watchValue(this._volumeShowing)!==i.notShowing?"3":""}},r.prototype.onVolumeChange=function(e){var t=this;TDB.applyUpdate(function(){t.volume.setValue(e)}),this._audioPlayer&&this._audioPlayer.setVolume(e)},r.prototype.volumeSliderArgs=function(e){if(!this.volumeControlEnabled)return null;var i={position:this.volume,cssOverride:"volumeSlidebarWrapper",handleWidth:r.volumeHandleWidth,onSliderChange:this.onVolumeChange,reverse:!0,continuousMode:!0,volumeShowing:this._volumeShowing,volumeButton:this.volumeButton,description:Resources.VolumeControlDescription,audioId:this.getAudioPlayerDescriptor()};return new TDB.ChildArgs(t.AudioVolumeSliderVE,i)},r.prototype.controlsCssArgs=function(e){var t=this._manager.getAudioPlayer(this.playerId,e),i=!!t&&t.isLoaded(e);return{NoVolumeButton:!this.volumeControlEnabled,FadeOutControls:!i}},r.prototype.controlsStyleArgs=function(e){return{visibility:this._volumeShowing.getWatchedValue(e)===i.showing?"hidden":"visible"}},r.prototype.overlayStyleArgs=function(e){var t=this._manager.getAudioPlayer(this.playerId,e),i=t&&t.isLoaded(e),n=this.volumeControlEnabled?2:1;return i&&this.volumeSlider&&this.volumeSlider.SetVolumeButton(this.volumeButton),{width:i?"0px":"calc(100% - "+n*r.audioButtonsWidth+"px)","z-index":"2"}},r.volumeHandleWidth=5,r.progressHandleWidth=15,r.secondInAnHour=3600,r.defaultTimeStamp="--:-- / --:--",r.volumeBarHeight=100,r.timeStampDisplayWidthLimit=244,r.progressBarDisplayWidthLimit=164,r.audioButtonsWidth=37,r.appBarHeight=50,r.previewHeaderHeight=40,r.lowVolumeIconThreshold=1/3,r.mediumVolumeIconThreshold=2/3,r}(TDB.FocusableViewElement);t.AudioControlsVEBase=o}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Common,n=function(n){function o(e,t){var i=n.call(this,e)||this;return i.player=null,i.args=t,i.playerPlaying=TDB.watchableTag(596476109,i,!1),i.duration=TDB.watchableTag(596476110,i,0),i.playbackPosition=t.playbackPosition,i.volume=t.volume,i.analyticsLogger=t.analyticsLogger,i.audioPlayerId=++o.lastAudioPlayerId,i.createPlayer(),i}return __extends(o,n),o.prototype.dispose=function(e){this.player&&(this.player.removeEventListener(amp.eventName.playing),this.player.removeEventListener(amp.eventName.pause),this.player.removeEventListener(amp.eventName.waiting),this.player.removeEventListener(amp.eventName.error),this.player.removeEventListener(amp.eventName.timeupdate),this.player.removeEventListener(amp.eventName.durationchange),this.player.removeEventListener(amp.eventName.ended),this.player.dispose()),n.prototype.dispose.call(this,!0)},o.prototype.createPlayer=function(){var e=this;this.audioId=this.args.audioId;var t=this.args.resourceFactory.loadResource(0).then(function(t){return e.onPlayerResourcesLoadingDone(t)},function(){return e.onPlayerResourcesLoadingFailure()}),i=this.getAzureAudioStreamingUrl(this.audioId);return $.when(t,i).then(function(t,i){return e.onPlayerLoadSuccess(i)},function(){return e.onPlayerLoadFailure()})},o.prototype.onPlayerResourcesLoadingDone=function(e){return 1===e.state?this.onPlayerResourcesLoadingFailure():$.Deferred().resolve(e)},o.prototype.onPlayerResourcesLoadingFailure=function(e){return StoryLog.StructuredTraceTag(596476111,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.warning,"Azure audio player scripts load failed!",{audioId:this.audioId,error:e?e.error:null}),$.Deferred().reject()},o.prototype.onPlayerLoadFailure=function(){var e=t.NotificationBarViewModel.getNotificationBar(this);e&&e.addNotification({messages:[{text:Resources.UploadAudioNoStreamingUrlErrorNotification}],notificationSource:t.NotificationSource.AzureAudioPlayerUpload,notificationType:t.NotificationType.Info}),StoryLog.StructuredTraceTag(596476112,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.warning,"Azure audio player requirements(resources or streaming info) load failed!",{audioId:this.audioId})},o.prototype.onPlayerLoadSuccess=function(e){StoryLog.StructuredTraceTag(596476113,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Azure audio player requirements(resources or streaming info) loaded",{audioId:this.audioId}),this.initAmsPlayer(e,this.audioId)},o.prototype.initAmsPlayer=function(t,i){var n=this;if(this.audioPlayerId==o.lastAudioPlayerId)if(t){var r=e.Common.AMSHelper.getAMSlanguageCode(CommonSettings.UserLocaleString),a={heuristicProfile:CommonSettings.AMSHeuristicProfileProperty,nativeControlsForTouch:!1,language:r,autoplay:!0};e.Utilities.isMacOsX&&e.Utilities.safari&&!e.Utilities.chrome&&(a.techOrder=["azureHtml5JS","silverlightSS","html5","flashSS"]),StoryLog.StructuredTraceTag(596476115,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Initializing Azure audio player",{audioId:this.audioId});var s=this.findFirstNode(function(e){return"VIDEO"===e.nodeName});if(s){this.player=amp(s,a,function(){StoryLog.StructuredTraceTag(19145545,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Azure audio player ready",{audioId:n.audioId})}),this.player.addEventListener(amp.eventName.waiting,function(){StoryLog.StructuredTraceTag(596476116,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Azure audio player buffering",{audioId:n.audioId})}),this.player.addEventListener(amp.eventName.playing,function(){TDB.applyUpdate(function(){n.playerPlaying.setValue(!0)}),n.setVolume(n.volume.getValue()),n.analyticsLogger.onMediaPlayed(n.audioId,n.duration.getValue(),!0),StoryLog.StructuredTraceTag(19145547,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Azure audio player playing",{audioId:n.audioId,totalDurationSec:n.player?n.player.duration().toString():"undefined"})}),this.player.addEventListener(amp.eventName.error,function(){StoryLog.StructuredTraceTag(596476117,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Azure audio player error",{audioId:n.audioId,errorCode:n.player?n.player.error().code.toString():"undefined",errorMessage:n.player?n.player.error().message:"undefined"})}),this.player.addEventListener(amp.eventName.timeupdate,function(){TDB.applyUpdate(function(){n.playbackPosition.setValue(n.player.currentTime())})}),this.player.addEventListener(amp.eventName.durationchange,function(){TDB.applyUpdate(function(){n.duration.setValue(n.player.duration())})}),this.player.addEventListener(amp.eventName.ended,function(){TDB.applyUpdate(function(){n.playerPlaying.setValue(!1)}),n.analyticsLogger.onMediaPaused(n.audioId,n.duration.getValue())}),this.player.addEventListener(amp.eventName.pause,function(){TDB.applyUpdate(function(){n.playerPlaying.setValue(!1)}),n.analyticsLogger.onMediaPaused(n.audioId,n.duration.getValue())}),StoryLog.StructuredTraceTag(596476118,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Azure audio player constructor has finished, loading audio now",{audioId:this.audioId,streamingInfoVersion:t.Version.toString(),protectionType:t.ProtectionType?t.ProtectionType:"undefined"});var l=$(this.player.playerElement()).children().filter("video");l&&l.attr("webkit-playsinline",""),t.ProtectionType?(t.StreamingToken||StoryLog.StructuredTraceTag(596116105,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.error,"Streaming token is empty for encrypted audio!",{audioId:this.audioId,streamingInfoVersion:t.Version.toString(),protectionType:t.ProtectionType}),this.player.src([{src:t.StreamingUrl,type:t.StreamingUrlType,protectionInfo:[{type:t.ProtectionType,authenticationToken:t.StreamingToken}]}])):this.player.src([{src:t.StreamingUrl,type:t.StreamingUrlType}])}}else StoryLog.StructuredTraceTag(596476114,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.error,"Tried to init AMS player with undefined streamingInfo",{audioId:this.audioId})},o.prototype.getAzureAudioStreamingUrl=function(t){var n=i.UrlHelper.getInstance().getAMSAudioStreamUrl(StoryPageSettings.LookupId),r=new AudioStreamingInfoRequest;return r.StreamingId=t,$.ajax(n,{type:"POST",timeout:o.timeoutMiliseconds,data:JSON.stringify(r),contentType:e.RequestManager.JsonContentType,dataType:"json"}).then(function(e){return e},function(e,i,n){StoryLog.StructuredTraceTag(596476119,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.warning,"Call to get AMS Streaming URL failed",{audioId:t,textStatus:i,errorThrown:n})})},o.prototype.PlayerWrapperCssArgs=function(){return{AzureAudioPlayerWrapper:!e.Utilities.browser.isIE,AzureAudioPlayerWrapperIE:e.Utilities.browser.isIE}},o.prototype.playAudio=function(){var e=this;TDB.applyUpdate(function(){e.player&&e.isLoaded()&&e.player.play()})},o.prototype.pauseAudio=function(){var e=this;TDB.applyUpdate(function(){e.player&&e.player.pause()})},o.prototype.stopAudio=function(){var e=this;TDB.applyUpdate(function(){e.playerPlaying.setValue(!1),e.playbackPosition.setValue(0)},TDB.Justification.Dispose)},o.prototype.seekAudio=function(e){var t=this;TDB.applyUpdate(function(){t.player&&t.player.currentTime(e)})},o.prototype.setVolume=function(e){var t=this;TDB.applyUpdate(function(){t.player&&t.player.volume(e)})},o.prototype.isPlaying=function(e){return this.playerPlaying.getWatchedValue(e)},o.prototype.isLoaded=function(e){return this.duration.getWatchedValue(e)>0},o.timeoutMiliseconds=6e4,o.lastAudioPlayerId=0,o}(TDB.ViewElement);t.AzureAudioPlayerVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i,n=e.Common;!function(e){e[e.QuickStart=0]="QuickStart",e[e.Hybrid=1]="Hybrid",e[e.HighQuality=2]="HighQuality"}(i=t.AzureVideoPlayerQuality||(t.AzureVideoPlayerQuality={}));var o=function(t){function o(e,i){var n=t.call(this,e,i)||this;return n.disposing=!1,n.firePlayingEvents=!1,n.ampEventNames=[],n.preventClickEvents=TDB.watchableTag(596476100,n,!0),n.videoElementId="amsVideo-"+n.id,n.videoId=i.getVideoId(),n.loadPlayer(i.silentFailure),n}return __extends(o,t),o.prototype.doPlayVideo=function(){this.player.play()},o.prototype.doPauseVideo=function(){this.player.pause()},o.prototype.dispose=function(e){if(this.player){this.player.isFullscreen()&&this.player.exitFullscreen();for(var i=0,n=this.ampEventNames;i<n.length;i++){var o=n[i];this.player.removeEventListener(o)}this.ampEventNames=[],this.player.dispose()}this.model.onDispose&&this.model.onDispose(),this.disposing=!0,t.prototype.dispose.call(this,!0)},o.prototype.playerDivEventsInitArgs=function(){return{click:this.divClick}},o.prototype.videoPlayerAttrArgs=function(e){return this.width=this.model.getWidth(e),this.height=this.model.getHeight(e),this.player&&(this.player.width(this.width),this.player.height(this.height)),{width:this.width.toString(),height:this.height.toString(),id:this.videoElementId}},o.prototype.divClick=function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1},o.prototype.mouseClicked=function(e){return TDB.EventPropagation.Bypass},o.prototype.mouseDoubleClicked=function(e){return TDB.EventPropagation.Bypass},o.prototype.videoOverlayEventsInitArgs=function(){return{click:function(e){return e.preventDefault(),!1}}},o.prototype.preventClickEventsArgs=function(e){return this.preventClickEvents.getWatchedValue(e)},o.prototype.onPlayerResourcesLoadingDone=function(e){return 1===e.state?this.onPlayerResourcesLoadingFailure(e):$.Deferred().resolve(e)},o.prototype.onPlayerResourcesLoadingFailure=function(e){return StoryLog.StructuredTraceTag(596476101,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.warning,"Azure video player resources load failed!",{videoId:this.videoId,error:e?e.error:null}),$.Deferred().reject()},o.prototype.onPlayerLoadingDone=function(e){var t=$.Deferred(),i=t.promise();return StoryLog.StructuredTraceTag(596476102,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Azure video player requirements(resources and streaming info) loaded",{videoId:this.videoId}),this.disposing?t.reject():this.initAmsPlayer(e,this.videoId,t),i},o.prototype.doLoadPlayer=function(e){var t=this,i=e.loadResource(0).then(function(e){return t.onPlayerResourcesLoadingDone(e)},function(){return t.onPlayerResourcesLoadingFailure()}),n=this.getAzureVideoStreamingUrl(this.videoId);return this.width=this.model.getWidth(),this.height=this.model.getHeight(),this.videoId=this.model.getVideoId(),$.when(i,n).then(function(e,i){return t.onPlayerLoadingDone(i)})},o.prototype.addAmpEventHandler=function(e,t){this.ampEventNames.push(e),this.player.addEventListener(e,t)},o.prototype.initAmsPlayer=function(t,r,a){var s,l=this;if(this.findFirstNode(function(e){return"VIDEO"===e.nodeName}))if(t){var u=e.Common.AMSHelper.getAMSlanguageCode(CommonSettings.UserLocaleString),d=(s={},s[i.QuickStart]=amp.Player.HeuristicProfile.QuickStart,s[i.Hybrid]=amp.Player.HeuristicProfile.Hybrid,s[i.HighQuality]=amp.Player.HeuristicProfile.HighQuality,s)[this.model.quality];d||(d=amp.Player.HeuristicProfile.Hybrid);var c={heuristicProfile:d,customPlayerSettings:{customHeuristicSettings:{minFragmentsForBandwidthAverage:3}},traceConfig:{TraceTargets:[{target:"memory",maxMemoryTraceCount:500}],maxLogLevel:3},nativeControlsForTouch:!1,language:u,autoplay:this.model.autoplay,controls:!0,width:this.width.toString(),height:this.height.toString(),poster:"",logo:{enabled:!1}};StoryLog.StructuredTraceTag(596476104,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Initializing Azure video player",{videoId:this.videoId}),this.player=amp(this.videoElementId,c,function(){StoryLog.StructuredTraceTag(16823560,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Azure video player ready",{videoId:l.videoId,height:l.height?l.height.toString():"undefined",width:l.width?l.width.toString():"undefined"})}),this.addAmpEventHandler(amp.eventName.loadedmetadata,function(){TDB.applyUpdate(function(){l.preventClickEvents.setValue(!1)})}),this.addAmpEventHandler(amp.eventName.waiting,function(){StoryLog.StructuredTraceTag(596476105,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Azure video player buffering",{videoId:l.videoId,height:l.height?l.height.toString():"undefined",width:l.width?l.width.toString():"undefined"})}),this.addAmpEventHandler(amp.eventName.fullscreenchange,function(){o.fullscreen=l.player.isFullscreen(),l.model.onFullscreenChange&&l.model.onFullscreenChange(l.player.isFullscreen())}),this.addAmpEventHandler(amp.eventName.canplaythrough,function(){l.model.autoplay?(l.firePlayingEvents=!1,l.doPlayVideo()):l.firePlayingEvents=!0,a.resolve()}),this.addAmpEventHandler(amp.eventName.playing,function(){StoryLog.StructuredTraceTag(16823562,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Azure video player playing",{videoId:l.videoId,height:l.height?l.height.toString():"undefined",width:l.width?l.width.toString():"undefined",totalDurationSec:l.player?l.player.duration().toString():"undefined"}),l.model.analyticsLogger.onMediaPlayed(l.videoId,l.player.duration(),!0),l.firePlayingEvents?(l.player&&l.player.getMemoryLog(!0),l.onPlayerPlaying()):l.firePlayingEvents=!0}),this.addAmpEventHandler(amp.eventName.pause,function(){l.firePlayingEvents=!0,l.onPlayerPaused(),l.model.analyticsLogger.onMediaPaused(l.videoId,l.player.duration())}),this.addAmpEventHandler(amp.eventName.ended,function(){l.model.analyticsLogger.onMediaPaused(l.videoId,l.player.duration())}),this.addAmpEventHandler(amp.eventName.error,function(){StoryLog.StructuredTraceTag(596476106,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Azure video player error",{videoId:l.videoId,errorCode:l.player?l.player.error().code.toString():"undefined",errorMessage:l.player?l.player.error().message:"undefined"}),l.logPlayerLogs(),a.reject()}),StoryLog.StructuredTraceTag(596476107,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Azure video player constructor has finished, loading video now",{videoId:this.videoId,streamingInfoVersion:t.Version.toString(),protectionType:t.ProtectionType?t.ProtectionType:"undefined"});var p=[],g=this.model.closedCaptions();if(g)for(var h=0;h<g.getLength();h++){var y=g.itemAtIndex(h);p.push({src:n.UrlHelper.getInstance().closedCaptionUrl(StoryPageSettings.LookupId,y.getCaptionId(),StoryPageSettings.UseCDN&&StoryPageSettings.UseCDNForClosedCaptions),srclang:y.getLanguage(),kind:o.azureVideoPlayerTrackKind,label:y.getLabel()})}t.ProtectionType?(t.StreamingToken||StoryLog.StructuredTraceTag(596116104,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.error,"Streaming token is empty for encrypted video!",{videoId:this.videoId,streamingInfoVersion:t.Version.toString(),protectionType:t.ProtectionType}),this.player.src([{src:t.StreamingUrl,type:t.StreamingUrlType,protectionInfo:[{type:t.ProtectionType,authenticationToken:t.StreamingToken}]}],p)):this.player.src([{src:t.StreamingUrl,type:t.StreamingUrlType}],p)}else StoryLog.StructuredTraceTag(596476103,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.error,"Tried to init AMS player with undefined streamingInfo",{videoId:this.videoId})},o.isFullscreen=function(){return o.fullscreen},o.prototype.getVideoDuration=function(){return this.player?this.player.duration():0},o.prototype.isPaused=function(){return!!this.player&&this.player.paused()},o.prototype.isPlaying=function(){return!1},o.prototype.getAzureVideoStreamingUrl=function(t){var i=n.UrlHelper.getInstance().getAMSVideoStreamUrl(StoryPageSettings.LookupId),r=new VideoStreamingInfoRequest;return r.StreamingId=t,$.ajax(i,{type:"POST",timeout:o.timeoutMiliseconds,data:JSON.stringify(r),contentType:e.RequestManager.JsonContentType,dataType:"json"}).then(function(e){return e},function(e,i,n){StoryLog.StructuredTraceTag(596476108,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.warning,"Call to get AMS Streaming URL failed",{videoId:t,textStatus:i,errorThrown:n})})},o.prototype.logPlayerLogs=function(){if(this.player)for(var e=this.player.getMemoryLog(!0),t=0;e.length>0;){var i=e.substring(0,1e3);e=e.substring(1e3),StoryLog.StructuredTraceTag(595986514,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"AMP logs",{videoId:this.videoId,logPartIndex:t,playerLogPart:i}),t++}},o.timeoutMiliseconds=6e4,o.azureVideoPlayerTrackKind="captions",o}(t.ControllableVideoPlayerVE);t.AzureVideoPlayerVEBase=o}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){!function(e){e[e.Unknown=0]="Unknown",e[e.Sway=1]="Sway",e[e.OneDrive=2]="OneDrive",e[e.OneDriveWord=3]="OneDriveWord",e[e.OneDriveExcel=4]="OneDriveExcel",e[e.OneDrivePowerpoint=5]="OneDrivePowerpoint"}(e.EmbedType||(e.EmbedType={}))}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){function i(e){return e instanceof r.ViewportLayoutElement?e.id:t.createLayoutVE(e,void 0,void 0).getKey()}function n(e){return t.createSceneGraphVE(e,void 0).getKey()}function o(e){return e}var r=e.Model.RM,a=function(){function t(e){this.newRenderModel=e}return t.prototype.wouldKeep=function(t){return!!this.getNewObject(t)&&e.Model.traverseParents(t,this)},t.prototype.getNewObject=function(e){return this.newRenderModel.getModelObject(e.id)},t.prototype.getNewObjects=function(e,t){return{newParent:this.getNewObject(e),newChild:this.getNewObject(t)}},t.prototype.handleRoot=function(e,t){return!0},t.prototype.handleLayoutTree=function(e,t){return!0},t.prototype.handleContainerLayoutElement=function(e,t){var n=this.getNewObjects(e,t),r=n.newParent,a=n.newChild,s=e.children.getCollection().map(i),l=r.children.getCollection().map(i);return TDB.Diff.OrderedDiff.getKeptKeys(s,l,o,o)[i(a)]},t.prototype.handleViewportLayoutElement=function(e,t){var i=this.getNewObjects(e,t),n=i.newParent,o=i.newChild;return n&&n.getChild()===o},t.prototype.handleProjectionLayoutElement=function(e,t){var i=this.getNewObjects(e,t),n=i.newParent,o=i.newChild;return n&&n.getScene3D()===o},t.prototype.handleTextureSceneGraphElement=function(e,t){var i=this.getNewObjects(e,t),n=i.newParent,o=i.newChild;return n&&n.getTexture()===o},t.prototype.handleContainerSceneGraphElement=function(e,t){var i=this.getNewObjects(e,t),r=i.newParent,a=i.newChild,s=e.children.getCollection().map(n),l=r.children.getCollection().map(n);return TDB.Diff.OrderedDiff.getKeptKeys(s,l,o,o)[n(a)]},t}(),s=function(){function e(e){this.newRenderModel=e}return e.prototype.wouldKeep=function(e){return new a(this.newRenderModel).wouldKeep(e)},e}();t.HierarchyComparer=s}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=e.View.Common,o=function(o){function r(e,i){var n=o.call(this,e,i)||this;return n.model=i,n.model.onerror&&(n.timeoutId=platform.setTimeout(function(){n.model.onerror.call(n.model.context,null,t.IframeLoadingFailureCategory.TimedOut)},StoryPageSettings.SiteIframeLoadingTimeoutMiliseconds)),n}return __extends(r,o),r.prototype.isSandboxed=function(e){return this.model.embedModel.getSandboxed(e)},r.prototype.iframeAttr2Args=function(t){var i=o.prototype.iframeAttr2Args.call(this,t),n=e.Utilities.extractHostnameFromUrl(this.getContentUrl(t));return i.id=this.getIframeId(),n&&!StoryPageSettings.BlockService_EmbedDecomp?(i.scrolling=r.getScrollingToString(this.model.embedModel.getScrolling(t)),i.allowfullscreen=this.model.embedModel.getAllowFullScreen(t)?"allowfullscreen":null):(i.src="",i.scrolling="",i.visibility="hidden"),i},r.prototype.getIframeId=function(){return this.model&&this.model.embedModel?"iframe_"+this.model.embedModel.id:""},r.prototype.getContentUrl=function(i){if(!this.model||!this.model.embedModel)return"";var n=this.model.embedModel.getEmbedSourceUrl(i);return n=t.EmbedPlaceholderVE.addAccessibleParamterToEmbedIfInAccessibleMode(n,e.Utilities.query.fetch(e.Common.UrlHelper.URLParamAccessible)==e.Common.UrlHelper.URLParamValueTrue)},r.prototype.iframeEventsInitArgs=function(){var e=this,i={};return this.model.onload&&(i.load=function(t){return!!e.model&&(CommonSettings.SettingSite_IframeVelumEnabled&&n.IframeVelumManager.getInstance().handleIframeOnLoad(e),clearTimeout(e.timeoutId),e.model.onload.call(e.model.context,t))}),this.model.onerror&&(i.error=function(i){if(e.model)return clearTimeout(e.timeoutId),e.model.onerror.call(e.model.context,i,t.IframeLoadingFailureCategory.BrowserLoadingError)}),i},r.prototype.wrapperStyleArgs=function(t){var i,n=this.parent,o=n.getScale(t),a={x:o,y:o},s=new Size(this.model.embedModel.position.getWidth(t),this.model.embedModel.position.getHeight(t)),l=new Size(parseFloat(this.model.embedModel.getWidth(t)),parseFloat(this.model.embedModel.getHeight(t))),u={x:o*s.width/l.width,y:o*s.height/l.height};this.model.embedModel.getShouldScale(t)&&Math.abs(u.y-u.x)<r.c_uniformScaleThreshold?(a=u,i=l):i=s;var d=n.PositionDivStyleArgs(t);return d.width=e.Utilities.toPxStr(i.width),d.height=e.Utilities.toPxStr(i.height),(Math.abs(a.x-1)>=r.c_scaleThreshold||Math.abs(a.y-1)>=r.c_scaleThreshold)&&(d[Modernizr.prefixed("transform")]="scale("+a.x.toFixed(4)+","+a.y.toFixed(4)+")",d[Modernizr.prefixed("transformOrigin")]="0 0"),d},r.prototype.supportsScrollingArgs=function(){return UX.SupportsIframeScrolling()},r.prototype.iframeStyleArgs=function(e){return this.supportsScrollingArgs()?this.wrapperStyleArgs(e):{}},r.prototype.dispose=function(){this.model=null,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),o.prototype.dispose.call(this)},r.getScrollingToString=function(e){switch(e){case i.EmbedScrolling.Auto:return"auto";case i.EmbedScrolling.Yes:return"yes";case i.EmbedScrolling.No:return"no";default:return}},r.c_scaleThreshold=.001,r.c_uniformScaleThreshold=.01,r}(t.IframeVE);t.IframeLayoutVE=o}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function e(e,t){this.isZoomed=e,this.isManipulatingZoom=t}return e}();e.ZoomState=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){!function(e){e[e.Forward=0]="Forward",e[e.Backward=1]="Backward",e[e.Home=2]="Home"}(e.NavigationButtonType||(e.NavigationButtonType={}))}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(i){function n(e){return i.call(this,e,TDB.ControlSetFeatures.None)||this}return __extends(n,i),n.prototype.poweredByButtonArgs=function(){var e={buttonId:ClientAction.ButtonId.AlternateBranding_PoweredBy,click:this.poweredBy,context:this,cssClass:{value:"segoeUISemilight poweredBy"},text:{value:Resources.AlternateBrandingPoweredByButtonText}};return new TDB.ChildArgs(t.TextButtonVE,e)},n.prototype.poweredBy=function(t){var i=CommonSettings.IsRegisteredAuthor?e.Common.UrlHelper.getInstance().mySwaysUrl():e.Common.UrlHelper.getInstance().exploreUrl();try{if(!window.open(i,"_blank'"))throw e.RethrowLogger.createError("Cannot open a new window")}catch(e){StoryLog.StructuredTraceTag(596476046,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"window.open failed on click on Powered By Sway button.",{error:e.message,embedded:(StoryPageSettings&&StoryPageSettings.Mode===StoryViewMode.Embedded)+"",userAgent:navigator.userAgent})}return TDB.EventPropagation.Bypass},n}(t.RegionViewElement);t.PoweredBySwayWrapperVEBase=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(t){function i(i,n){var o=t.call(this,i,n)||this;return o.args=n,o.seekSeconds=5,o._viewModel=new e.View.ViewModel.TimelineSlidebarViewModel({position:n.position,points:n.points,continuousMode:n.continuousMode,timelineDuration:n.timelineDuration}),o}return __extends(i,t),i.prototype.triggerSliderChangeCallback=function(e){if(this.args.onSliderChange){var t=this.args&&this.args.continuousMode?e*this.args.timelineDuration:this._viewModel.getOutputValueFromSnapPoint(e),i=this.args&&this.args.position?this.args.position.getValue():null;StoryLog.StructuredTraceTag(596476033,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Seek slider moved",{audioId:this.args?this.args.audioId:null,currentTime:i?i.toString():null,newTime:t?t.toString():null}),this.args.onSliderChange.call(this.parent,t)}},i.prototype.slidebarClicked=function(e){var t,i=this;t=this.args&&this.args.vertical?e.pageY-this.focusableBinding.getPosition().top-(this.args?this.args.handleWidth:0):e.pageX-this.focusableBinding.getPosition().left-(this.args?this.args.handleWidth:0);var n=this.getPositionRatio(t);return TDB.applyUpdate(function(){return i.setSlider(n)}),!1},i.prototype.slideStyleArgs=function(e){var t=this._viewModel.getSlidebarRatio(e),i=this.args&&this.args.handleWidth?this.args.handleWidth*t:0;return t>=1&&(i=this.args&&this.args.handleWidth?this.args.handleWidth:0),this.args&&this.args.vertical?{top:"calc("+100*(1-t)+"% - "+(this.args.handleWidth-i)+"px)"}:{left:"calc("+100*t+"% - "+i+"px)"}},i.prototype.calculateNewRatio=function(e,t){return this.args&&0!==this.args.timelineDuration?Math.max(Math.min((this.args.position.getValue()+t*this.seekSeconds)/this.args.timelineDuration,1),0):0},i.prototype.getDraggablePositionRatio=function(e){if(this.args&&this.args.vertical)return this.getPositionRatio(e.position.top);var t=e.position.left;return this.getPositionRatio(t)},i.prototype.shouldReverseControls=function(){return!1},i}(t.SlidebarVE);t.TimelineSlidebarVE=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.View.ViewElements,n=function(e){function t(t){var i=e.call(this,t)||this;return i.args=t,i._positionRatio=TDB.watchableTag(596476032,i,0),i}return __extends(t,e),t.prototype.getSlidebarRatio=function(e){return this._isDragging.getWatchedValue(e)?this._positionRatio.getWatchedValue(e):this.args&&0!==this.args.timelineDuration?Math.min(this.args.position.getWatchedValue(e),this.args.timelineDuration)/this.args.timelineDuration:0},t.prototype.slideAttrBaseArgs=function(e){var t={};if(t[Aria.Attributes.Role]=Aria.Roles.Slider,!this.args)return t;if(this.args.continuousMode){var n=this.args.position.getWatchedValue(e),o=this.args.timelineDuration;t[Aria.Attributes.Valuemin]="0",t[Aria.Attributes.Valuemax]=i.AudioLayoutVEBase.formatTime(o,o>=i.AudioControlsVEBase.secondInAnHour," "),t[Aria.Attributes.Valuenow]=Math.floor(n).toString(),t[Aria.Attributes.Valuetext]=i.AudioLayoutVEBase.formatTime(n,o>=i.AudioControlsVEBase.secondInAnHour," ")}else{var r=this.args.position.getWatchedValue(e),a=this.args.points[this.getSnapPointFromOutputValue(r)];t[Aria.Attributes.Valuemin]=this.args.points[0].value.toString(),t[Aria.Attributes.Valuemax]=this.args.points[this.args.points.length-1].value.toString(),t[Aria.Attributes.Valuenow]=a.value.toString(),t[Aria.Attributes.Valuetext]=a.text}return t},t}(t.SlidebarViewModel);t.TimelineSlidebarViewModel=n}(t.ViewModel||(t.ViewModel={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){function t(e){switch(e){case"show":return i.Show;case"hide":return i.Hide;case"toggle":return i.Toggle;default:return}}var i;!function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide",e[e.Toggle=2]="Toggle"}(i=e.ToCActionType||(e.ToCActionType={})),e.actionStringToToCActionType=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.View.Common,n=function(e){function t(t){var i=e.call(this,t)||this;return i._domListener=Obj.implement(i,{domAttached:i.onDomAttached,domDetached:i.onDomDetached}),i._parent=t,i.addDomListener(i._domListener),i._isVelumVisible=TDB.watchableTag(596476003,i,!0),i}return __extends(t,e),t.prototype.getVelumVisibility=function(){return this._isVelumVisible.getValue()},t.prototype.setVelumVisibility=function(e,t){var n=this;void 0===t&&(t=!0),this._isVelumVisible.getValue()!==e&&(t?TDB.applyUpdate(function(){n._isVelumVisible.setValue(e)}):this._isVelumVisible.setValue(e),i.IframeVelumManager.getInstance().handleVelumVisibilityChange(this))},t.prototype.getAbsolutePositionBaseRect=function(){return this._parent.getAbsolutePositionBaseRect()},t.prototype.getIframeId=function(){return this._parent.getIframeId()},t.prototype.velumStyleArgs=function(e){return{display:this._parent.isVelumAllowed(e)&&this._isVelumVisible.getWatchedValue(e)?void 0:"none",position:"absolute",width:this._parent.getWidth(e),height:this._parent.getHeight(e),left:this._parent.getLeft(e),top:this._parent.getTop(e),"z-index":(this._parent._model.getZOrder(e)+1).toString()}},t.prototype.velumAttrArgs=function(e){return{id:"velum_"+this._parent._model.id}},t.prototype.velumEventsInitArgs=function(){return{click:this.onVelumLeftClick,mouseenter:this.onVelumMouseEnter,mouseleave:this.onVelumMouseLeave}},t.prototype.onVelumMouseEnter=function(){return i.IframeVelumManager.getInstance().handleVelumLayoutVEMouseEnter(this),!0},t.prototype.onVelumMouseLeave=function(){return i.IframeVelumManager.getInstance().handleVelumLayoutVEMouseLeave(this),!0},t.prototype.onVelumLeftClick=function(){return i.IframeVelumManager.getInstance().handleVelumLayoutVEMouseLeftClick(this),!0},t.prototype.onDomAttached=function(e){this._parent._model.renderModel.graph.containsObject(this._parent._model.id)&&i.IframeVelumManager.getInstance().registerVelumLayoutElement(this)},t.prototype.onDomDetached=function(e){i.IframeVelumManager.getInstance().unregisterVelumLayoutElement(this)},t.prototype.dispose=function(){i.IframeVelumManager.getInstance().unregisterVelumLayoutElement(this),this._domListener&&this.removeDomListener(this._domListener),e.prototype.dispose.call(this)},t}(TDB.ViewElement);t.VelumLayoutVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function e(e,t,i){this.name=e,this.sizeClass=t,this.wrapperClass=i}return e}();e.FontIconData=t,e.ImageNameToFontIconMapping={"Navigate Home":new t(FontIcons.NavigateHomeIcon,FontIcons.NavigateHomeIconSize,"navigateIconWrapper"),"Navigate Forward":new t(FontIcons.NavigateForwardIcon,FontIcons.NavigateForwardIconSize,"navigateIconWrapper"),"Navigate Back":new t(FontIcons.NavigateBackIcon,FontIcons.NavigateBackIconSize,"navigateIconWrapper"),ExpandCaption:new t(FontIcons.ExpandCaptionIcon,FontIcons.ExpandCaptionIconSize,"expandCaptionIconWrapper"),FullScreen:new t(FontIcons.FullScreenIcon,FontIcons.FullScreenIconSize,"fullScreenIconWrapper"),CloseButton:new t(FontIcons.CloseButtonIcon,FontIcons.CloseButtonIconSize,"navigateIconWrapper"),"ToCView Open":new t(FontIcons.ToCViewOpenIcon,FontIcons.ToCViewOpenIconSize,"navigateIconWrapper")}}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(n){function o(e,t){var i=n.call(this,e)||this;return i.parent=e,i.scale=e.scale,i.model=t.model,i.resourceFactory=t.resourceFactory,i}return __extends(o,n),o.prototype.rootPropsArgs=function(e){var i={id:"viewportbackground_"+this.parent.model().id},n=t.LayoutModelHelper.getClasses(this.model,e);return i.className=["viewport-background"].concat(n).join(" "),i},o.prototype.rootStyleArgs=function(e){return Obj.extend(t.BackgroundModelHelper.getBackgroundStyle(this.model,this.scale.getWatchedValue(e),e),this.fillStyle(e))},o.prototype.getChildOffset=function(e){var t=this.parent.absolutePositioning(e);return{xOffset:Math.max(0,t.left),yOffset:Math.max(0,t.top)}},o.prototype.fillStyle=function(t){var n,o,r,a=this.parent.viewportSize(t),s=this.parent.parent.getWidth(t),l=this.parent.parent.getHeight(t),u=this.parent.absolutePositioning(t);return this.parent.backgroundType(t)===i.ViewportBackgroundType.VerticalFill?(o=Math.max(e.Utilities.cvtServerToPx(this.getScale(t),this.model.getChild(t).position.getWidth(t)),s,a.width),n=Math.max(a.height,l),r=e.Utilities.toPxStr(Math.max(0,u.top))+" 0px"):(o=Math.max(a.width,s),n=Math.max(e.Utilities.cvtServerToPx(this.getScale(t),this.model.getChild(t).position.getHeight(t)),l,a.height),r="0px "+e.Utilities.toPxStr(Math.max(0,u.left))),{padding:r,top:e.Utilities.toPxStr(Math.min(0,-u.top)),left:e.Utilities.toPxStr(Math.min(0,-u.left)),width:e.Utilities.toPxStr(o),height:e.Utilities.toPxStr(n)}},o.prototype.contentArgs=function(e){return t.createLayoutVE(this.model.getChild(e),this.resourceFactory,e)},o.prototype.backgroundArgs=function(){return new TDB.ChildArgs(t.BackgroundVE,this.model)},o.prototype.getScale=function(e){return this.parent.getScale(e)},o.prototype.rootAnimatableInitArgs=function(){return"viewportbackground_"+this.model.id},o.areEqual=function(e,t){return e.model===t.model},o}(TDB.FocusableViewElement);t.ViewportBackgroundVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.View.Common.FRE,o=e.View.ViewElements,r=function(r){function a(e,t){var n=r.call(this,e,TDB.ControlSetFeatures.Isolated)||this;return n.parent=e,n.consumptionSettingsMenuVisible=TDB.watchableTag(596475980,n,!1),n.domListener=Obj.implement(n,{domAttached:n.onDomAttached,domDetached:TDB.DomListenerManager.emptyDomDetatched}),n.args=t,n.overflowVisible=TDB.watchableTag(596475981,n,!1),n.shareMenuVisible=TDB.watchableTag(596132184,n,!1),n.visible=TDB.watchableTag(596475983,n,!0),n.scrollVisibleManager=new i.ScrollVisibleManager(n,new Size(1,1),n.visible),n.scrollVisibleManager.initScrollPositions([0,0]),n.contentSearchVisible=TDB.watchableTag(596475984,n,!1),n.addDomListener(n.domListener),n.shareEnabled=TDB.watcher(n,n,n.calculateShareEnabled),n}return __extends(a,r),a.prototype.calculateShareEnabled=function(e){return this.args.sharingManager.getCurrentSharingLevel(e)!==StoryAudience.Owner||CommonSettings.IsTenantUser},a.prototype.consumptionSettingsMenuArgs=function(){var e=this,t={autoPlayDriver:this.args.autoPlayDriver,isAnimationsDisabled:this.args.isAnimationsDisabled,getControllingElement:function(){return e.getButton(i.AppBarButtonLabel.ConsumptionSettings)},visible:this.consumptionSettingsMenuVisible};return new TDB.ChildArgs(i.ConsumptionSettingsMenuVE,t)},a.prototype.overflowMenuArgs=function(){var e=this,t={menuItems:this.args.overflowButtons,visible:this.overflowVisible,verticalPadding:this.args.verticalPadding,cssClass:"overflowConsumptionWrapper",userState:this.args.userState,currentStory:this.args.currentStory,resourceFactory:this.args.resourceFactory,getControllingElement:function(){return e.getButton(i.AppBarButtonLabel.Overflow)}};return new TDB.ChildArgs(i.OverflowMenuVE,t)},a.prototype.getVisibleWatcher=function(){return this.visible},a.prototype.getConsumptionSettingsMenuVisibleWatcher=function(){return this.consumptionSettingsMenuVisible},a.prototype.getOverflowVisibleWatcher=function(){return this.overflowVisible},a.prototype.buttonGroupsArgs=function(){var e=this;return this.args.buttons.map(function(t){return new TDB.ChildArgs(i.StoryAppBarButtonGroupVE,{children:[t],context:e,mouseEnter:e.mouseEnter,mouseLeave:e.mouseLeave})})},a.prototype.toggleConsumptionSettingsMenu=function(e){return this.consumptionSettingsMenu.isVisible()||this.setChildrenFocusability(!0),this.consumptionSettingsMenu.toggle(),!1},a.prototype.toggleOverflowMenu=function(e){return n.FirstRunTriggers.unauthenticatedUserOpenedMenu(),this.overflowMenu.isVisible()||this.setChildrenFocusability(!0),this.overflowMenu.toggle(),!1},a.prototype.toggleShareMenu=function(){var e=!this.shareMenuVisible.getValue();return this.getShareMenu().mouseClicked(null),this.setShareMenuVisibleState(e),!1},a.prototype.getShareMenuVisibleWatcher=function(){return this.shareMenuVisible},a.prototype.setShareMenuVisibleState=function(e){this.shareMenuVisible.getValue()!==e&&(e?(this.setChildrenFocusability(!0),this.getShareMenu().show()):this.getShareMenu().hide())},a.prototype.resetVisibleMenus=function(){this.getShareMenu()&&this.getShareMenu().hide(),this.overflowMenu&&this.overflowMenu.hide(),this.consumptionSettingsMenu&&this.consumptionSettingsMenu.hide()},a.prototype.getConsumptionSettingsMenu=function(){return this.consumptionSettingsMenu},a.prototype.getOverflowMenu=function(){return this.overflowMenu},a.prototype.onCameraMove=function(e){this.scrollVisibleManager.onCameraMove(e),this.resetVisibleMenus()},a.prototype.areMenusVisible=function(e){return this.overflowVisible.getWatchedValue(e)||this.shareMenuVisible.getWatchedValue(e)||this.consumptionSettingsMenu.isVisible(e)},a.prototype.mouseEnter=function(e){return this.ensureVisible(),!1},a.prototype.mouseLeave=function(e){return this.setFadeTimer(),!1},a.prototype.appbarPlaceholderStyleArgs=function(t){var n=!!i.ViewModel&&i.ViewModel.isToCViewVisible(t);return{minHeight:e.Utilities.toPxStr(UX.appBarButtonHeight),minWidth:e.Utilities.toPxStr(UX.appBarButtonWidth*this.args.buttons.length),visibility:this.isModalDialogOpen(t)||n?"hidden":""}},a.prototype.appbarPlaceholderAttrArgs=function(e){var t=this.isModalDialogOpen(e),n=!!i.ViewModel&&i.ViewModel.isToCViewVisible(e),o={};return o[Aria.Attributes.Hidden]=t||n?Aria.BooleanState.True:Aria.BooleanState.False,o[Aria.Attributes.Disabled]=t||n?Aria.BooleanState.True:Aria.BooleanState.False,o[Aria.Attributes.Label]=Resources.ProductNameShort,o},a.prototype.isModalDialogOpen=function(e){if(this.parent&&this.parent.previewVE){var t=this.parent.previewVE._root.getWatchedValue(e);return t&&t.getModalDialogManager().isDialogOpen(e)}return!1},a.prototype.appbarPlaceholderEventsInitArgs=function(){return{mouseenter:this.mouseEnter,mouseleave:this.mouseLeave}},a.prototype.appbarPlaceholderClassNameArgs=function(e){return"Mobile"===CommonSettings.ClientDevice?"consumptionAppBarMobile":"consumptionAppBar"},a.prototype.wrapperStyleArgs=function(e){return this.appbarPlaceholderStyleArgs(e)},a.prototype.wrapperFadeVisibleInitArgs=function(){return{visibleInit:!e.Utilities.query.has(e.Common.UrlHelper.URLParamNoChrome),transitionOut:"opacity 0.7s ease",disabled:CommonSettings.IsTemplateSway}},a.prototype.wrapperFadeVisibleArgs=function(t){var i=this.contentSearchVisible.getWatchedValue(t),n=t.watchValue(this.visible)&&!i&&!e.Utilities.query.has(e.Common.UrlHelper.URLParamNoChrome);return n||i||this.removeFocusableChild(this),{visible:n,transitionOut:i?"none":"opacity 0.7s ease"}},a.prototype.ensureVisible=function(e){var t=this;void 0===e&&(e=!0),platform.setImmediate(function(){t.scrollVisibleManager.ensureVisible(e)})},a.prototype.getVisible=function(){return this.visible.getValue()},a.prototype.getScrollVisibleManager=function(){return this.scrollVisibleManager},a.prototype.hasButton=function(e){return!!this.getButton(e)},a.prototype.getButton=function(e){for(var t=0;t<this.buttonGroups.length;t++){var i=this.buttonGroups[t].getButton(e);if(i)return i}},a.prototype.clickButton=function(e){for(var t=0;t<this.buttonGroups.length;t++)if(this.buttonGroups[t].hasButton(e)){this.buttonGroups[t].clickButton(e);break}n.getCalloutManager().clearCallouts()},a.prototype.setFadeTimer=function(e){!this.areMenusVisible(e)&&this.visible.getValue()&&this.scrollVisibleManager.startAutoFadeTimer()},a.prototype.consumptionWorldSwitch=function(e){return!!(this.consumptionSettingsMenu&&this.consumptionSettingsMenu.consumptionWorldSwitchSettings&&this.consumptionSettingsMenu.consumptionWorldSwitchSettings.consumptionWorldSwitchItems)&&(this.consumptionSettingsMenu.consumptionWorldSwitchSettings.consumptionWorldSwitchItems.consumptionWorldSwitchItemClicked(e),!0)},a.prototype.ifSearchVisibleArgs=function(e){var i=this,n=this.parent.previewVE._root.getWatchedValue(e),o=StoryPageSettings.ConsumptionSearchEnabled&&this.contentSearchVisible.getWatchedValue(e);return o&&!t.Common.LayoutElementLogger.getInstance().isRendering().getWatchedValue(e)?(this.layoutElementsById=a.mapLayoutElementsByContentId(n),this.contentSearch&&platform.setImmediate(function(){return i.contentSearch.contentUpdated()})):this.layoutElementsById=void 0,o},a.prototype.contentSearchArgs=function(){var e={lookupId:StoryPageSettings.LookupId,context:this,highlighter:this.highlight,closed:this.closeSearch,onNavigate:this.onNavigateSearch};return new TDB.ChildArgs(o.ContentSearchVE,e)},a.prototype.activateSearch=function(e){var t=this;return this.setChildrenFocusability(!1),this.contentSearchVisible.getValue()?this.contentSearch.enter():TDB.applyUpdate(function(){return t.contentSearchVisible.setValue(!0)}),TDB.EventPropagation.PreventDefault},a.prototype.closeSearch=function(){var e=this;return TDB.applyUpdate(function(){return e.contentSearchVisible.setValue(!1)}),this.layoutElementsById=void 0,this.parent.previewVE.enter(),TDB.EventPropagation.Bypass},a.prototype.onNavigateSearch=function(){return!!this.layoutElementsById},a.prototype.highlight=function(e,t){var i=this.parent.previewVE._root.getValue();if(e&&t!==o.HighlightingType.None){var n=e.ranges[0];if(n){for(var r=this.layoutElementsById[n.contentId],a=0;!r&&a<n.parentalChain.length;a++)r=this.layoutElementsById[n.parentalChain[a]];if(r){var s=r.highlight(e,t);t===o.HighlightingType.CurrentSearchHit&&this.navigateToSearchHit(i,n,r,s)}}}else for(var l in this.layoutElementsById)this.layoutElementsById[l].highlight(e,o.HighlightingType.None)},a.prototype.onEntering=function(){var e=this;TDB.applyUpdate(function(){e.visible.setValue(!0)}),this.setChildrenFocusability(!0),r.prototype.onEntering.call(this)},a.prototype.onExiting=function(){this.setChildrenFocusability(!1),r.prototype.onExiting.call(this)},a.prototype.setChildrenFocusability=function(e){for(var t=this,n=this.traverseFocusable(function(e){return e instanceof TDB.Control?e:void 0},function(e){return e===t||!(e instanceof i.RegionViewElement)}),o=0;o<n.length;o++)n[o].setFocusable(e)},a.prototype.canActivate=function(){return!this.contentSearchVisible.getValue()&&r.prototype.canActivate.call(this)},a.prototype.activateButton=function(e){if(!this.enterNoFocus())return!1;var t=this.getButton(e);return!(!t||!t.canActivate())&&t.activate()},a.prototype.containsRegions=function(){return!0},a.prototype.onDomAttached=function(e){this.setChildrenFocusability(!1)},a.prototype.onChildActiveStateChanged=function(e,t){t&&this.setChildrenFocusability(!0),r.prototype.onChildActiveStateChanged.call(this,e,t)},a.prototype.navigateToSearchHit=function(e,t,n,o){var r={snapScene:!0,supressFading:!0,viewportRelativeOffset:.5,layoutElement:n.getRelatedLayoutElement(),layoutElementVE:n.getRelatedLayoutVe(),subElement:o};if(!i.NavigationHelper.navigateToContentId(e,t.contentId,r))for(var a=0;a<t.parentalChain.length;a++){var s=t.parentalChain[a];if(i.NavigationHelper.navigateToContentId(e,s,r))break}},a.mapLayoutElementsByContentId=function(e){var t=e.traverseFocusable(function(e){return e instanceof i.SelectableElement?e:void 0});return ArrayExtensions.toDictionary(t,function(e,t){var i=e.getSearchContentId();i&&!t[i]&&(t[i]=e)})},a.prototype.dispose=function(){this.domListener&&(this.removeDomListener(this.domListener),this.domListener=null),r.prototype.dispose.call(this)},a}(i.RegionViewElement);i.StoryAppBarVEBase=r}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.parent=e,n}return __extends(i,t),i.prototype.getShareMenu=function(){return this.socialFlyout},i.prototype.socialFlyoutArgs=function(){var t=this,i={shouldBubbleMouseClick:!0,titleWatcher:this.args.titleWatcher,lookupId:this.args.currentStory.getLookupId(),storyViewMode:StoryPageSettings.Mode,embedCode:StoryPageSettings.EmbedCode,sharingManager:this.args.sharingManager,visualLinkMode:StoryPageSettings.VisualLinkMode,useCDN:StoryPageSettings.UseCDN},n={flyoutVisibleWatchable:this.shareMenuVisible,getControllingElement:function(){return t.getButton(e.AppBarButtonLabel.Share)},contentArgs:i};return new TDB.ChildArgs(e.SocialFlyoutVE,n)},i}(e.StoryAppBarVEBase);e.ConsumptionAppBarVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=function(n){function o(e,t){var i=n.call(this,e,{features:TDB.ControlSetFeatures.Isolated,role:Aria.Roles.Group,description:Resources.ConsumptionSettingsButtonDescription,getControllingElement:t.getControllingElement,visible:t.visible})||this;return i.args=t,i}return __extends(o,n),o.prototype.wrapperAttrArgs=function(e){return this.getAriaAttributes(e)},o.prototype.wrapperSlideVisibleInitArgs=function(){return!1},o.prototype.wrapperSlideVisibleArgs=function(e){return{visible:e.watchValue(this.visible),done:this.onPopupVisible}},o.prototype.autoplaySettingsVisibleArgs=function(e){return e.watchValue(this.args.autoPlayDriver.autoPlayAvailable)},o.prototype.autoplaySettingsArgs=function(){var e=this,t={autoPlayDriver:this.args.autoPlayDriver,onStart:function(){return e.onAutoplayStart()}};return new TDB.ChildArgs(i.ConsumptionAutoplaySettingsVE,t)},o.prototype.autoPlayWorldSwitchDividerVisibleArgs=function(e){return this.autoplaySettingsVisibleArgs(e)&&this.worldSwitchSettingsEnabledArgs(e)},o.prototype.worldSwitchSettingsArgs=function(){var e=this,t={onWorldClick:function(){return e.hide()}};return new TDB.ChildArgs(i.ConsumptionWorldSwitchSettingsVE,t)},o.prototype.mouseClicked=function(e){return TDB.EventPropagation.Bypass},o.prototype.worldSwitchSettingsEnabledArgs=function(t){return StoryPageSettings.ConsumptionWorldSwitchFeatureEnabled&&i.ViewModel.consumptionWorldSwitchAllowed.getWatchedValue(t)&&e.WorldList.GetSelectableWorlds(t).length>1},o.prototype.onAutoplayStart=function(){this.hide();var e=this.findParent(i.StoryPageVE).previewVE;e&&e.activate()},o.prototype.show=function(){this.setVisible(!0)},o.prototype.canEnter=function(){return n.prototype.canEnter.call(this)&&!this.args.autoPlayDriver.inAutoplay()},o.prototype.animationSwitchDividerVisibleArgs=function(e){return this.animationSwitchEnabledArgs(e)&&this.worldSwitchSettingsEnabledArgs(e)},o.prototype.animationSwitchEnabledArgs=function(e){return o.getAnimationSwitchEnabled(e)},o.getAnimationSwitchEnabled=function(n){var o=i.ViewModel.viewOptionOverridesWatchable.getWatchedValue(n).getConsumptionWorldId();return o||(o=t.Common.LayoutUtilities.getDefaultWorldId(e.Model.RenderModel.getWatchedValue(n),n)),!(!o||"VerticalWorld"!==o&&"PanoramaWorld"!==o)},o.prototype.animationSwitchLabelTextArgs=function(){return Resources.AnimationToggleSwitchLabel},o.prototype.animationToggleSwitchLabelTextArgs=function(e){return!this.args.isAnimationsDisabled.getWatchedValue(e)?Resources.SettingsPaneAutoPlayToggleCheckedLabel:Resources.SettingsPaneAutoPlayToggleUncheckedLabel},o.prototype.animationToggleSwitchArgs=function(e){var t=this,n={buttonId:ClientAction.ButtonId.ConsumptionAnimationToggleSwitch,context:this,cssClass:{value:"homeLink activeHomeLink segoeUILight"},checked:!this.args.isAnimationsDisabled.getValue(),click:function(e){return TDB.applyUpdate(function(){t.args.isAnimationsDisabled.setValue(!t.args.isAnimationsDisabled.getValue())}),ActionLogger.RecordClientAction(new ClientAction.ConsumptionAnimationsToggle(ClientAction.ButtonId.ConsumptionAnimationToggleSwitch,!t.args.isAnimationsDisabled.getValue())),TDB.EventPropagation.Bubble},description:{value:Resources.AnimationToggleSwitchLabel},tooltip:{value:Resources.AnimationToggleSwitchTooltip}};return new TDB.ChildArgs(i.ToggleSwitchVE,n)},o.prototype.onExiting=function(){this.consumptionWorldSwitchSettings&&this.consumptionWorldSwitchSettings.exit(),n.prototype.onExiting.call(this)},o}(i.PopupBaseVE);i.ConsumptionSettingsMenuVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(t){var i=function(i){function n(e,t){var n=i.call(this,e)||this;return n.args=t,n}return __extends(n,i),n.prototype.autoplaySettingsHeadingTextArgs=function(){return Resources.ConsumptionAutoplaySettingsHeading},n.prototype.autoplaySettingsCommonArgs=function(){var e={autoPlayDriver:this.args.autoPlayDriver};return new TDB.ChildArgs(t.ConsumptionAutoplaySettingsCommonVE,e)},n.prototype.autoplayStartArgs=function(){var e={buttonId:ClientAction.ButtonId.Autoplay_Start,text:{value:Resources.ConsumptionAutoplayStartButtonText},description:{value:Resources.ConsumptionAutoplayStartButtonDescription},tooltip:{value:Resources.ConsumptionAutoplayStartButtonTooltip},context:this,click:this.autoplayStartClicked,cssClass:{value:"autoplayStartButton"},enabled:{compute:new TDB.ComputedOptionArgs(this,this.canStartAutoplay)}};return new TDB.ChildArgs(t.TextButtonVE,e)},n.prototype.canStartAutoplay=function(e){return this.args.autoPlayDriver.enabled.getWatchedValue(e)&&!this.args.autoPlayDriver.inAutoplay(e)},n.prototype.autoplayStartClicked=function(){return this.args.autoPlayDriver.start(e.Common.AutoPlayStartType.StartButtonClick),this.args.onStart&&this.args.onStart(),TDB.EventPropagation.Bypass},n}(TDB.FocusableViewElement);t.ConsumptionAutoplaySettingsVEBase=i}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=function(n){function o(e,t){var i=n.call(this,e)||this;return i.args=t,i.moveFocusToPreview=!1,i}return __extends(o,n),o.prototype.itemsArgs=function(t){var n=this,o=e.WorldList.GetSelectableWorlds(t,!0),r=1;return o.map(function(a){var s={};s[Aria.Attributes.Setsize]=o.length.toString(),s[Aria.Attributes.Posinset]=r.toString(),r++;var l={backgroundClipClass:{compute:new TDB.ComputedOptionArgs(n,n.getWorldClipClassName)},backgroundGlyphClass:{value:"consumptionWorldSwitchItemImage"},buttonId:ClientAction.getButtonId("AppBar_ConsumptionWorldId_"+a.id),click:function(){return n.consumptionWorldSwitchItemClicked(a.id)},glyphCheckboxClass:"consumptionWorldSwitchMenuItem",glyphCheckboxWrapperClass:"consumptionWorldSwitchMenuItemWrapper",label:n.defaultWorldLabelText(a.id,t),labelClass:"consumptionWorldSwitchMenuItemText segoeUI",tooltip:{value:n.getButtonDescription(a.id,a.description,t)},role:n.args.itemRole,attributes:{value:s},enabled:n.args.enabled,checkedWatchable:TDB.watcherTag(596475985,n,n,function(e){return n.isWorldSelected(a.id,e)}),glyphUrl:e.Common.UrlHelper.getInstance().getWorldIconUrl(a.id)};return new TDB.ChildArgs(i.GlyphCheckboxVE,l)})},o.prototype.getWorldClipClassName=function(t){return"consumptionWorldSwitchItemImageWrapper"+(e.Model.RenderModel.getWatchedValue(t).getRTL(t)?" MirrorTransform":"")},o.prototype.isWorldSelected=function(n,o){var r=i.ViewModel.viewOptionOverridesWatchable.getWatchedValue(o).getConsumptionWorldId();return r||(r=t.Common.LayoutUtilities.getDefaultWorldId(e.Model.RenderModel.getWatchedValue(o),o)),n===r},o.prototype.defaultWorldLabelText=function(e,t){return o.isDefaultWorld(e,t)?Resources.ConsumptionWorldSwitchDefaultWorldIdentifier:""},o.isDefaultWorld=function(i,n){return i===t.Common.LayoutUtilities.getDefaultWorldId(e.Model.RenderModel.getWatchedValue(n),n)},o.prototype.getButtonDescription=function(e,t,i){var n=this.defaultWorldLabelText(e,i);return t+(""!==n?" ("+n+")":"")},o.prototype.enterPreview=function(e){if(t.Common.LayoutElementLogger.getInstance()){var n=t.Common.LayoutElementLogger.getInstance().isRendering().getWatchedValue(e);if(this.moveFocusToPreview&&!n){var o=this.findParent(i.PageRootVE);if(o){var r=o.getActivatableChildren().firstOrDefault(function(e){return e instanceof i.PreviewVE});r&&platform.setImmediate(function(){r.enter(),r.clearActiveElement()})}this.moveFocusToPreview=!1}}},o.prototype.consumptionWorldSwitchItemClicked=function(n){if(this.args.onWorldClick&&this.args.onWorldClick(n),this.moveFocusToPreview=!0,this.isWorldSelected(n))this.enterPreview(null),StoryLog.TraceTag(596475987,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Attempted to change world of story, in consumption, to the already selected world: "+n);else{var o=i.ViewModel.viewOptionOverridesWatchable;o.getValue().setConsumptionWorldId(n),TDB.applyUpdate(function(){return o.notify()}),o.getValue().getConsumptionWorldId()===t.Common.LayoutUtilities.getDefaultWorldId(e.Model.RenderModel.getValue())&&StoryLog.TraceTag(596475986,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"After having overriden the default world, user is attempting to manually change back to default world of "+n),StoryPageMain.overrideViewOptions(this.pageId)}return TDB.EventPropagation.Bypass},o}(TDB.FocusableViewElement);i.ConsumptionWorldSwitchItemsVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(i){function n(e,t){var n=i.call(this,e,{features:TDB.ControlSetFeatures.TabDisabled|TDB.ControlSetFeatures.HorizontalList|TDB.ControlSetFeatures.TabInto})||this;return n.args=t,n}return __extends(n,i),n.prototype.canActivate=function(){return this.getConsumptionWorldSwitchEnabled(null)},n.prototype.consumptionWorldSwitchHeadingTextArgs=function(){return Resources.ConsumptionWorldSwitchHeading},n.prototype.consumptionWorldSwitchHeadingClassNameArgs=function(e){return"consumptionWorldSwitchSettingsHeading"+(this.getConsumptionWorldSwitchEnabled(e)?"":" consumptionSettingsMenuHeadingDisabled")},n.prototype.itemsWrapperAttrArgs=function(e){var t={};return t[Aria.Attributes.Label]=Resources.ConsumptionWorldSwitchButtonDescription,t},n.prototype.itemsWrapperClassNameArgs=function(e){return"FlexInlineDisplay"},n.prototype.consumptionWorldSwitchItemsArgs=function(){var e={itemRole:Aria.Roles.Radio,onWorldClick:this.args.onWorldClick,enabled:{compute:new TDB.ComputedOptionArgs(this,this.getConsumptionWorldSwitchEnabled)}};return new TDB.ChildArgs(t.ConsumptionWorldSwitchItemsVE,e)},n.prototype.getConsumptionWorldSwitchEnabled=function(t){return e.WorldList.GetSelectableWorlds(t).length>1&&e.Common.Environment.getInstance().isClientOnline(t)},n}(TDB.ControlSet);t.ConsumptionWorldSwitchSettingsVEBase=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(e){function t(i,n){var o=e.call(this,i)||this;o.args=n,o.context=n.context,o.mouseEnter=n.mouseEnter,o.mouseLeave=n.mouseLeave;for(var r=0,a=n.children;r<a.length;r++){var s=a[r];s.args.cssClass||(s.args.cssClass={value:t.getConsumptionButtonClass()})}return o}return __extends(t,e),t.prototype.onMouseEnter=function(e){return this.mouseEnter&&this.context&&this.mouseEnter.call(this.context,e),!1},t.prototype.onMouseLeave=function(e){return this.mouseLeave&&this.context&&this.mouseLeave.call(this.context,e),!1},t.getConsumptionButtonClass=function(){return"Mobile"===CommonSettings.ClientDevice?"consumptionButtonMobile":"consumptionButton"},t.getConsumptionTextButtonClass=function(){return"Mobile"===CommonSettings.ClientDevice?"consumptionTextButtonMobile":"consumptionTextButton"},t.prototype.buttonsArgs=function(){return this.args.children.map(function(e){return new TDB.ChildArgs(e.type,e.args)})},t.prototype.hasButton=function(e){return!!this.args.children.some(function(t){return t.label===e})},t.prototype.getButton=function(e){return this.buttons[ArrayExtensions.indexOfFirst(this.args.children,function(t){return t.label===e})]},t.prototype.clickButton=function(e){this.getButton(e).mouseClicked(void 0)},t.prototype.showButtonGroupEventsInitArgs=function(){var e={};return this.context&&(this.mouseLeave&&(e.mouseleave=this.onMouseLeave),this.mouseEnter&&(e.mouseenter=this.onMouseEnter)),e},t}(TDB.FocusableViewElement);e.StoryAppBarButtonGroupVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Common,n=function(n){function o(t,i){var r=n.call(this,t,{features:TDB.ControlSetFeatures.Isolated,visible:i.flyoutVisibleWatchable,getControllingElement:i.getControllingElement})||this;return r.args=i,r.dismissOnMouseLeave=TDB.watchableTag(596121698,r,!0),r.dismissTimer=new e.Utilities.ScheduledTimeout(r,o.scheduledTimeoutInterval),r}return __extends(o,n),o.prototype.setDismissTimer=function(){var e=this;this.dismissTimer.set(function(){e.hide()})},o.prototype.canAutoDismiss=function(e){return this.dismissOnMouseLeave.getWatchedValue(e)},o.prototype.flyoutWrapperStyleArgs=function(e){var t=320,n=i.Environment.getInstance().getWindowSize(e);return n.w<o.windowSizeThreshold&&(t=n.w-68),{width:t+"px"}},o.prototype.flyoutWrapperFadeVisibleInitArgs=function(){return{onVisible:this.onPopupVisible}},o.prototype.flyoutWrapperFadeVisibleArgs=function(e){return{visible:this.isVisible(e)}},o.prototype.flyoutContentArgs=function(){return new TDB.ChildArgs(t.SocialFlyoutContentVE,this.args.contentArgs)},o.prototype.mouseClicked=function(e){var t=this;return TDB.applyUpdate(function(){t.dismissOnMouseLeave.setValue(!1)}),TDB.EventPropagation.Bypass},o.prototype.onExitingUpdates=function(){var e=this;TDB.applyUpdate(function(){e.dismissOnMouseLeave.setValue(!0)},TDB.Justification.InitialConversion)},o.prototype.onExiting=function(){this.onExitingUpdates(),n.prototype.onExiting.call(this)},o.scheduledTimeoutInterval=250,o.windowSizeThreshold=400,o}(t.PopupBaseVE);t.SocialFlyoutVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.View.ViewElements,n=e.Common,o=function(o){function r(e,t){var i=o.call(this,e)||this;return i.args=t,i}return __extends(r,o),r.prototype.buttonGroupsNewContentArgs=function(e){return this.createNewShareButtons(e).map(function(e){return new TDB.ChildArgs(t.GlyphButtonVE,e)})},r.prototype.createNewShareButtons=function(e){var t=[];return this.args.sharingManager.visualLinkSharingEnabled(this.args.visualLinkMode,e)&&t.push(this.createVisualLinkButton()),this.args.sharingManager.isPublicSharingAllowed(e)&&(t.push(this.createFacebookButton()),t.push(this.createTwitterButton()),CommonSettings.SiteLinkedInSharingEnabled&&t.push(this.createLinkedInButton()),void 0!==this.args.embedCode&&t.push(this.createEmbedButton())),t},r.prototype.createVisualLinkButton=function(){return{buttonId:ClientAction.ButtonId.ShareFlyout_VisualLink,click:this.showVisualLinkDialog,context:this,cssClass:{value:"newShareVisualLinkButton"},description:{value:Resources.VisualLinkButtonDescription},tooltip:{value:Resources.VisualLinkButtonDescription},fontIconName:{value:FontIcons.LinkIcon},fontIconSizeClass:FontIcons.LinkIconSize,fontIconWrapperClass:{value:"shareFontIconWrapperVisualLinkNew"},textClass:"shareButtonText",textPlacementRight:!0,text:{value:Resources.VisualLinkButtonTitle}}},r.prototype.createFacebookButton=function(){return{buttonId:ClientAction.ButtonId.ShareFlyout_Facebook,click:this.shareToFacebook,context:this,cssClass:{value:"newShareDropdownButton"},description:{value:Resources.ShareToFacebookButtonDescription},tooltip:{value:Resources.ShareToFacebookButtonDescription},fontIconName:{value:FontIcons.SocialFacebookIcon},fontIconSizeClass:FontIcons.FacebookIconSize,fontIconWrapperClass:{value:"newShareFontIconWrapperFacebook"},label:t.AppBarButtonLabel.ShareToFacebook,textPlacementRight:!0}},r.prototype.createLinkedInButton=function(){return{buttonId:ClientAction.ButtonId.ShareFlyout_LinkedIn,click:this.shareToLinkedIn,context:this,cssClass:{value:"newShareDropdownButton"},description:{value:Resources.ShareToLinkedinButtonDescription},tooltip:{value:Resources.ShareToLinkedinButtonDescription},fontIconName:{value:FontIcons.SocialLinkedInIcon},fontIconSizeClass:FontIcons.LinkedInIconSize,fontIconWrapperClass:{value:"shareFontIconWrapperLinkedIn"},label:t.AppBarButtonLabel.ShareToLinkedIn,textPlacementRight:!0}},r.prototype.createTwitterButton=function(){return{buttonId:ClientAction.ButtonId.ShareFlyout_Twitter,click:this.shareToTwitter,context:this,cssClass:{value:"newShareDropdownButton"},description:{value:Resources.ShareToTwitterButtonDescription},tooltip:{value:Resources.ShareToTwitterButtonDescription},fontIconName:{value:FontIcons.SocialTwitterIcon},fontIconSizeClass:FontIcons.TwitterIconSize,fontIconWrapperClass:{value:"newShareFontIconWrapperTwitter"},label:t.AppBarButtonLabel.ShareToTwitter,textPlacementRight:!0}},r.prototype.createEmbedButton=function(){return{buttonId:ClientAction.ButtonId.SocialFlyout_GetEmbedCode,click:this.onEmbedCodeButtonClick,context:this,cssClass:{value:"newShareEmbedButton"},description:{value:Resources.EmbedSway},tooltip:{value:Resources.EmbedSway},fontIconName:{value:FontIcons.PreviewEmbedIcon},fontIconSizeClass:FontIcons.PreviewEmbedIconSize24,fontIconWrapperClass:{value:"newShareFontIconWrapperEmbed"},textClass:"shareButtonText",textPlacementRight:!0,text:{value:Resources.SocialFlyoutEmbedButton}}},r.prototype.flyoutHeaderTextArgs=function(){return Resources.Share},r.prototype.copyTextBoxArgs=function(){var i=e.Common.UrlHelper.getInstance().trackedShareLinkUrl(this.args.lookupId,n.SharingReferrers.Link,n.SharingButtonLocations.Play),o={domId:"linkTextBox",description:Resources.ShareByLinkTextBoxDescription,readOnly:!0,selectTextOnFocus:!0,text:i,cssClass:e.Utilities.supportsClipboard()||e.Utilities.supportsClipboard_Experimental()?"NewConsumptionShareDropdownCopyTextBoxWithButton":"NewConsumptionShareDropdownCopyTextBox",tooltip:Resources.ShareByLinkTextBoxTooltip};return new TDB.ChildArgs(t.TextBoxVE,o)},r.prototype.copyTextButtonArgs=function(){if(e.Common.TextCopyHelper.isCopySupported()){var t={buttonArgs:{value:{telemetryId:"copyTextButtonConsumptionId",buttonId:ClientAction.ButtonId.SocialFlyout_CopyText,click:this.onCopyTextButtonClick,context:this,tooltip:{value:Resources.ContextMenuCopyLinkButtonV2},description:{value:Resources.ContextMenuCopyLinkButtonV2},cssClass:{value:"newShareConsumptionCopyLinkButton"},fontIconName:{value:FontIcons.CopyLinkIcon},fontIconSizeClass:FontIcons.CopyLinkIconSize,fontIconWrapperClass:{value:"copyLinkButtonFontIconWrapper"}}},calloutArgs:{value:{calloutWrapperClassName:"CopyLinkButtonCalloutWrapper",calloutTapClassName:"CopyLinkButton-tap-callout",calloutBoxClassName:"CopyLinkButton-callout",headerText:{value:Resources.Copied},readerText:Resources.ContextMenuCopyLinkButtonCalloutReader,beakPosition:i.BeakPosition.TopRight,delay:0,inAnimation:"none",hideCloseButton:!0,visibilityTimeout:3e3}}};return new TDB.ChildArgs(i.TransientCalloutGlyphButtonVE,t)}},r.prototype.onCopyTextButtonClick=function(e){return n.TextCopyHelper.copyHTMLText($("#linkTextBox")[0],$("#copyTextButtonConsumptionId")[0],!1),TDB.EventPropagation.Bypass},r.prototype.onEmbedCodeButtonClick=function(e){return t.StoryShareAction.embed(this.args.lookupId,this.args.embedCode),TDB.EventPropagation.Bypass},r.prototype.showVisualLinkDialog=function(t){var i=new e.View.ViewModel.VisualLinkViewModel({lookupId:this.args.lookupId,urlHelper:n.UrlHelper.getInstance(),sharingManager:this.args.sharingManager,useCDN:this.args.useCDN,urlParameterButtonLocation:n.SharingButtonLocations.Play});return e.View.Common.VisualLinkDialog.show({visualLinkViewModel:i,copyButtonId:ClientAction.ButtonId.ShareDropdown_VisualLinkConsumptionDialogCopyButton}),TDB.EventPropagation.Bypass},r.prototype.shareToFacebook=function(e){return t.StoryShareAction.shareToFacebook(this.args.lookupId,n.SharingButtonLocations.Play,ClientAction.ButtonId.ShareFlyout_Facebook,this.args.sharingManager),TDB.EventPropagation.Bypass},r.prototype.ifPrivateSwayArgs=function(e){return!this.args.sharingManager.isPublicSharingAllowed(e)},r.prototype.privateSwayMessageTextArgs=function(e){return Resources.SocialFlyoutPrivateMessage},r.prototype.sharingLevelTextArgs=function(e){var t=this.args.sharingManager.getCurrentSharingLevel(e);return r.getAudienceText(t)},r.prototype.sharingLevelIconArgs=function(e){var i=this.args.sharingManager.getCurrentSharingLevel(e),n={fontIconName:{value:r.getAudienceIcon(i)},fontIconSizeClass:FontIcons.SharingLevelIconSize,fontIconWrapperClass:{value:"SharingLevelIcon"}};return new TDB.ChildArgs(t.FontIconVE,n)},r.getAudienceText=function(e){switch(e){case StoryAudience.AnyoneWithLink:case StoryAudience.Public:case StoryAudience.Published:case StoryAudience.Unknown:return Resources.SocialFlyoutSharingLevelAnyoneWithLink;case StoryAudience.TenantWithLink:return Resources.SocialFlyoutSharingLevelOrgOnly;case StoryAudience.Owner:return StoryPageSettings.IsOwner?Resources.SocialFlyoutShareWithSpecificPeopleOrGroupsAuthor:Resources.SocialFlyoutShareWithSpecificPeopleOrGroupsCoauthorViewer;default:return TDB.raiseRecoverableError("No string exists for the specified audience "+e),""}},r.getAudienceIcon=function(e){switch(e){case StoryAudience.AnyoneWithLink:case StoryAudience.Public:case StoryAudience.Published:case StoryAudience.Unknown:return FontIcons.GlobeIcon;case StoryAudience.TenantWithLink:return FontIcons.LuggageIcon;case StoryAudience.Owner:return StoryPageSettings.IsOwner?FontIcons.AddAssignmentStageIcon:FontIcons.PeopleWithExistingAccessPermissionsIcon;default:return TDB.raiseRecoverableError("No icon exists for the specified audience "+e),""}},r.prototype.shareToTwitter=function(e){return t.StoryShareAction.shareToTwitter(this.args.lookupId,this.args.storyViewMode===StoryViewMode.Edit,n.SharingButtonLocations.Play,ClientAction.ButtonId.ShareFlyout_Twitter,this.args.sharingManager,this.args.titleWatcher.getValue()),TDB.EventPropagation.Bypass},r.prototype.shareToLinkedIn=function(e){return t.StoryShareAction.shareToLinkedIn(this.args.lookupId,n.SharingButtonLocations.Play,ClientAction.ButtonId.ShareFlyout_LinkedIn,this.args.sharingManager,this.args.titleWatcher.getValue()),TDB.EventPropagation.Bypass},r}(TDB.FocusableViewElement);t.SocialFlyoutContentVEBase=o}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(e,i){var n=t.call(this,e,{features:TDB.ControlSetFeatures.Isolated})||this;return n.args=i,n}return __extends(i,t),i.prototype.getPosition=function(){return this.wrapperPositionBinding.getPosition()},i.prototype.watchContentChanges=function(e){},i.prototype.contentArgs=function(){return new TDB.ChildArgs(e.SocialFlyoutContentVE,this.args.contentArgs)},i.prototype.keyDown=function(e){return e.keyCode===KeyCodeType.EscapeKey?(this.args.closeMenu(),this.escape(),TDB.EventPropagation.PreventDefault):t.prototype.keyDown.call(this,e)},i}(TDB.ControlSet);e.SocialFrameVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){e.watchFrameForPositionChanges=function(e,t){var i=TDB.watchableTag(595951963,null,e.getPosition()),n=TDB.watcherTag(595951964,e,null,e.watchContentChanges),o={id:"contentChangeSubscriber",receiveNotification:function(){n.getValue(),platform.setImmediate(function(){var t=e.getPosition(),n=i.getValue();n.height===t.height&&n.width===t.width||TDB.applyUpdate(function(){return i.setValue(t)})})}};n.subscribe(o),n.resolve();var r={id:"onPositionChange",receiveNotification:function(){return t(i.getValue())}};i.subscribe(r),t(i.getValue())}}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){function i(i,o){if(i instanceof n.ContainerSceneGraphElement)return new TDB.KeyedChildArgs(t.ContainerSceneGraphVE,{model:i,resourceFactory:o},i.id);if(i instanceof n.TextureSceneGraphElement)return new TDB.KeyedChildArgs(t.TextureSceneGraphVE,{model:i,resourceFactory:o},i.id);throw e.RethrowLogger.createError("Unrecognized type for layout element: "+i)}var n=e.Model.RM,o=e.AnimationManager,r=function(e){function t(t,i){var n=e.call(this,t)||this;return n.parent=t,n.args=i,n}return __extends(t,e),t.prototype.getModelObjectId=function(){return this.args.model.id},t.prototype.getAnimatableTransforms=function(e){return this.args.model.transforms.getCollection(e).map(function(t){return o.convertModelTransform(e,t,!0,!1)})},t.areEqual=function(e,t){return e.model===t.model},t}(TDB.FocusableViewElement);t.SceneGraphVE=r,t.createSceneGraphVE=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){function t(e,t,i){return""===t?null:{namespaceUri:i,qualifiedName:e,value:t}}function i(e){for(var t in e){var i=e[t];null!==i&&void 0!==i&&""!==i||delete e[t]}return e}var n=function(t){function i(e,i){var n=t.call(this,e)||this;return n.parent=e,n.params=i,n}return __extends(i,t),i.prototype.svgRootStyleArgs=function(e){return this.params.getPositionning(e)},i.prototype.svgRootAttrArgs=function(e){return{class:(this.params.classes||[]).join(" "),viewBox:[0,0,this.params.getWidth(e),this.params.getHeight(e)].join(" ")}},i.prototype.internalsArgs=function(){return new TDB.ChildArgs(e.SvgInternalsVE,this.params)},i}(TDB.ViewElement);e.SvgVEBase=n;var o=function(e){function t(t,i){var n=e.call(this,t)||this;return n.parent=t,n.params=i,n}return __extends(t,e),t.prototype.groupAttrArgs=function(e){var t=this.params.rectclippathid(e);return t?{"clip-path":"url(#"+t+")"}:{}},t.prototype.hasDefsArgs=function(e){return 0!==this.definitionsArgs(e).length},t.prototype.hasRectsArgs=function(e){return 0!==this.rectanglesArgs(e).length},t.prototype.definitionsArgs=function(e){return this.params.definitions(e)},t.prototype.pathsArgs=function(e){return this.params.paths(e)},t.prototype.rectanglesArgs=function(e){return this.params.rectangles(e)},t}(TDB.ViewElement);e.SvgInternalsVEBase=o;var r=function(e){function t(t,i){var n=e.call(this,t)||this;return n.parent=t,n.params=i,n}return __extends(t,e),t.prototype.domid=function(){return this.params.identifier},t.prototype.clippathAttrArgs=function(e){return{id:this.domid()}},t.prototype.pathAttrArgs=function(e){return{d:this.params.path}},t}(TDB.ViewElement);e.SvgClipPathVEBase=r;var a=function(e){function t(t,i){var n=e.call(this,t)||this;return n.parent=t,n.params=i,n}return __extends(t,e),t.prototype.domid=function(){return this.params.identifier},t.prototype.colorFilterAttrArgs=function(e){return{id:this.domid()}},t.prototype.redAttrArgs=function(e){var t=this.params.color.a;return{slope:this.params.color.r/255*t+1-t}},t.prototype.greenAttrArgs=function(e){var t=this.params.color.a;return{slope:this.params.color.g/255*t+1-t}},t.prototype.blueAttrArgs=function(e){var t=this.params.color.a;return{slope:this.params.color.b/255*t+1-t}},t}(TDB.ViewElement);e.SvgColorFilterVEBase=a;var s=function(e){function t(t,i){var n=e.call(this,t)||this;return n.parent=t,n.params=i,n}return __extends(t,e),t.prototype.domid=function(){return this.params.identifier},t.prototype.dropShadowFilterAttrArgs=function(e){return{id:this.domid()}},t.prototype.offsetAttrArgs=function(e){return{dx:this.params.xOffset,dy:this.params.yOffset}},t.prototype.blurAttrArgs=function(e){var t=this.params.blur;return{stdDeviation:t>=0?t:0}},t}(TDB.ViewElement);e.SvgDropShadowFilterVEBase=s;var l=function(e){function i(t,i){var n=e.call(this,t)||this;return n.parent=t,n.params=i,n}return __extends(i,e),i.prototype.domid=function(){return this.params.identifier},i.prototype.patternAttrArgs=function(e){var t=this.params.position;return{id:this.domid(),x:t.x,y:t.y,width:t.w,height:t.h}},i.prototype.imageAttrArgs=function(e){var t=this.params.position;return{id:"image_"+this.domid(),width:t.w,height:t.h}},i.prototype.imageNamespaceAttrArgs=function(e){return[t("xlink:href",this.params.imageUrl,"https://www.w3.org/1999/xlink")].notNullOrUndefined()},i}(TDB.ViewElement);e.SvgPatternVEBase=l;var u=function(e){function n(t,i){var n=e.call(this,t)||this;return n.parent=t,n.params=i,n}return __extends(n,e),n.prototype.domid=function(){return this.params.identifier},n.prototype.imageAttrArgs=function(e){var t=this.params.position,n=this.params.filterid?"url(#"+this.params.filterid+")":"",o=this.params.clipid?"url(#"+this.params.clipid+")":"";return i({id:this.domid(),x:t.left,y:t.top,width:t.width,height:t.height,filter:n,"clip-path":o})},n.prototype.imageNamespaceAttrArgs=function(e){return[t("xlink:href",this.params.imageUrl,"https://www.w3.org/1999/xlink")].notNullOrUndefined()},n}(TDB.ViewElement);e.SvgImageVEBase=u;var d=function(e){function t(t,i){var n=e.call(this,t)||this;return n.parent=t,n.params=i,n}return __extends(t,e),t.prototype.pathStyleArgs=function(e){return{fill:this.params.fill||"",stroke:this.params.stroke||""}},t.prototype.pathAttrArgs=function(e){var t=this.params.path||"",n=this.params.filterid?"url(#"+this.params.filterid+")":"";return i({class:(this.params.classes||[]).join(" "),"stroke-width":void 0===this.params.strokeWidth?"":this.params.strokeWidth.toString(),filter:n,d:t})},t}(TDB.ViewElement);e.SvgPathVEBase=d;var c=function(e){function t(t,i){var n=e.call(this,t)||this;return n.parent=t,n.params=i,n}return __extends(t,e),t.prototype.rectAttrArgs=function(e){var t=this.params.position,n=this.params.filterid,o=this.params.clipid,r=this.params.fillid;return i({x:t.x,y:t.y,width:t.w,height:t.h,filter:n?"url(#"+n+")":"","clip-path":o?"url(#"+o+")":"",fill:r?"url(#"+r+")":""})},t}(TDB.ViewElement);e.SvgRectVEBase=c}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){!function(e){e[e.None=0]="None",e[e.Color=1]="Color",e[e.Shape=2]="Shape",e[e.Image=3]="Image",e[e.FontIcon=4]="FontIcon"}(t.BackgroundType||(t.BackgroundType={}));var i=function(i){function n(e,t){var n=i.call(this,e)||this;return n.parent=e,n.model=t,n}return __extends(n,i),n.prototype.hasShadow=function(e){var t=this.model;return 0!==t.getBackgroundPathShadowXOff(e)||0!==t.getBackgroundPathShadowYOff(e)||t.getBackgroundPathShadowBlur(e)>0},n.prototype.backgroundShapeArgs=function(){var e=this,i="shadowfilter_"+this.model.id;return new TDB.ChildArgs(t.SvgVE,{classes:["container_background"],definitions:function(n){return e.hasShadow(n)?[new TDB.ChildArgs(t.SvgDropShadowFilterVE,{identifier:i,xOffset:e.model.getBackgroundPathShadowXOff(n),yOffset:e.model.getBackgroundPathShadowYOff(n),blur:e.model.getBackgroundPathShadowBlur(n)})]:[]},rectclippathid:function(e){return null},paths:function(n){var o=e.getPathColor(n),r=t.BackgroundModelHelper.getBackgroundSvgShape(e.model,n),a=r.strokeWidth?"transparent":o,s=o,l=[new TDB.ChildArgs(t.SvgPathVE,{path:r.path,fill:a,stroke:s,strokeWidth:r.strokeWidth,classes:["path_shape",t.BackgroundModelHelper.getFillColorClass(e.model,n)]})];return e.hasShadow(n)&&l.unshift(new TDB.ChildArgs(t.SvgPathVE,{fill:t.LayoutCssClasses.getARGB(e.model.getBackgroundPathShadowColor(n)),path:r.path,filterid:i,classes:["path_shadow"]})),l},rectangles:function(e){return[]},getHeight:function(t){return e.model.position.getHeight(t)},getWidth:function(t){return e.model.position.getWidth(t)},getPositionning:function(e){return{width:"100%",height:"100%"}}})},n.prototype.getPathColor=function(e){return t.LayoutCssClasses.getARGB(this.model.getFillColorOverride(e))},n.prototype.fontIconArgs=function(){var i=e.View.ViewElements.ImageNameToFontIconMapping[this.model.getBackgroundImage().getName()],n={fontIconName:{value:i.name},fontIconSizeClass:i.sizeClass,fontIconWrapperClass:{value:"backgroundFontIconWrapper "+i.wrapperClass}};return new TDB.ChildArgs(t.FontIconVE,n)},n.prototype.backgroundTypeArgs=function(e){return t.BackgroundModelHelper.getBackgroundType(this.model,e)},n}(TDB.ViewElement);t.BackgroundVEBase=i;!function(t){function i(i,r){var a=n[i];if(a||(a=n[i]=TDB.watchableTag(596475989,t,{w:1,h:1,failureCount:0,loaded:!1})),a.getValue().failureCount<StoryPageSettings.MaxImageRetries&&!a.getValue().loaded&&!o[i]){o[i]=!0;var s=a.getValue().failureCount,l=r||new Image;l.onload=e.Utilities.deferredEventHandler(function(){l&&(o[i]=!1,TDB.applyUpdate(function(){var e=l.naturalWidth,t=l.naturalHeight,n=l.width,o=l.height;e>0&&t>0?a.setValue({w:e,h:t,failureCount:s,loaded:!0}):n>0&&o>0?a.setValue({w:n,h:o,failureCount:s,loaded:!0}):(a.setValue({w:1,h:1,failureCount:s+1,loaded:!1}),StoryLog.TraceTag(596475990,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Failed to get image dimensions. Image URL: {0}, naturalWidth: {1}, naturalHeight: {2}, width: {3}, height: {4}, complete: {5}",[i,e,t,n,o,l.complete],null))}),l.onerror=null,l.onload=null,l=null)}),l.onerror=e.Utilities.deferredEventHandler(function(){o[i]=!1,TDB.applyUpdate(function(){a.setValue({w:1,h:1,failureCount:s+1,loaded:!1}),s+1>=StoryPageSettings.MaxImageRetries&&StoryLog.TraceTag(596475991,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Failed to load image. Image URL: {0}",[i],null)}),l&&(l.onerror=null,l.onload=null,l=null)}),l.src=i,l&&l.complete&&$(l).trigger("load")}return a}var n={},o={};t.getImageSize=i}(t.BackgroundImageSizes||(t.BackgroundImageSizes={}))}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(e){function n(t,i){var o=e.call(this,t)||this;return o._rootModelObject=i,i&&(n._layoutMapping[i.id]=o),o}return __extends(n,e),n.prototype.getRelatedLayoutVe=function(){},n.prototype.getRelatedLayoutElement=function(){},n.prototype.getContentId=function(e){var t=this.getRelatedLayoutElement();return t?t.getContentId(e):void 0},n.prototype.getSearchContentId=function(){var e=void 0,t=this.getLayoutContext();if(t){var i=t.getContentProxy();i&&(e=i.id)}return e},n.prototype.getModelId=function(){return this._rootModelObject.id},n.prototype.dispose=function(t){this._rootModelObject&&(n._layoutMapping[this._rootModelObject.id]=null,delete n._layoutMapping[this._rootModelObject.id]),e.prototype.dispose.call(this,t)},n.prototype.mouseClicked=function(i){return e.prototype.mouseClicked.call(this,i),t.ViewModel.handleMouseClick(i,this)?TDB.EventPropagation.Bubble:TDB.EventPropagation.Bypass},n.getLayoutMapping=function(){return n._layoutMapping},n.prototype.getLayoutContext=function(){return null},n.prototype.getContentType=function(){return i.ContentType.None},n.prototype.highlight=function(e,t){},n.prototype.toString=function(){return e.prototype.toString.call(this)+" ContentId='"+this.getContentId()+"' SearchContentId='"+this.getSearchContentId()+"'"},n._layoutMapping={},n}(TDB.FocusableViewElement);t.SelectableElement=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){function n(t,n,r,a){var s=t.id;if(t instanceof l.RegionLayoutElement)return new TDB.KeyedChildArgs(i.RegionLayoutVE,{model:t,resourceFactory:n},s);if(t instanceof l.PanelLayoutElement)return new TDB.KeyedChildArgs(i.PanelLayoutVE,{model:t,resourceFactory:n},s);if(t instanceof l.ContainerLayoutElement)return new TDB.KeyedChildArgs(i.ContainerLayoutVE,{model:t,resourceFactory:n},s);if(t instanceof l.MediaViewportLayoutElement)return new TDB.KeyedChildArgs(i.MediaViewportLayoutVE,{model:t,resourceFactory:n},s);if(t instanceof l.TextBlockLayoutElement)return new TDB.KeyedChildArgs(i.TextBlockLayoutVE,{model:t,resourceFactory:n},s);if(t instanceof l.DecorationLayoutElement)return new TDB.KeyedChildArgs(i.DecorationLayoutVE,t,s);if(t instanceof l.ImageLayoutElement)return new TDB.KeyedChildArgs(i.ImageSelectorVE,{model:t,resourceFactory:n},s);if(t instanceof l.VideoLayoutElement)return new TDB.KeyedChildArgs(i.VideoLayoutVE,{model:t,resourceFactory:n},s);if(t instanceof l.ProjectionLayoutElement)return new TDB.KeyedChildArgs(i.ProjectionVE,{model:t,resourceFactory:n},s);if(t instanceof l.EmbedLayoutElement)return a?new TDB.KeyedChildArgs(i.EmbedLayoutVE,t,s):new TDB.KeyedChildArgs(i.ModeSelectorVE,{model:t,resourceFactory:n},"ms_"+s);if(t instanceof l.StatusUpdateLayoutElement)return a?new TDB.KeyedChildArgs(i.StatusUpdateLayoutVE,t,s):new TDB.KeyedChildArgs(i.ModeSelectorVE,{model:t,resourceFactory:n},"ms_"+s);if(t instanceof l.AgaveLayoutElement)return a?new TDB.KeyedChildArgs(i.AgaveLayoutVE,t,s):new TDB.KeyedChildArgs(i.ModeSelectorVE,{model:t,resourceFactory:n},"ms_"+s);if(t instanceof l.ClientLayoutElement)return o(t);if(t instanceof l.AudioLayoutElement)return t.getClosedCaptionDescriptors(r).getLength(r)>0?new TDB.KeyedChildArgs(i.AudioWithCCLayoutVE,{model:t,resourceFactory:n},"cc_"+s):new TDB.KeyedChildArgs(i.AudioLayoutVE,{model:t,resourceFactory:n},s);if(t instanceof l.CodeBlockLayoutElement)return new TDB.KeyedChildArgs(i.CodeBlockLayoutVE,{model:t,resourceFactory:n},s);throw e.RethrowLogger.createError("Unrecognized type for layout element: "+t)}function o(t){var n=t.getClientRecipe();switch(n){case l.ClientRecipe.EndOfStory:return new TDB.KeyedChildArgs(i.EndOfStoryLayoutVE,t,t.id);case l.ClientRecipe.MadeWithSway:return new TDB.KeyedChildArgs(i.MadeWithSwayLayoutVE,t,t.id);default:throw e.RethrowLogger.createError("Unrecognized client-side recipe for client layout element: "+n)}}function r(e,t,i){if(!e.getAnimated(i)){var n=t.map(function(e){return s(e,i)}).join(" "),o=e.getDownscaleFactor(i);return 1!==o&&(n=a("scale3d","",[o,o,1],1)+n),n}}function a(e,t,i,n){return i.every(function(e){return e===n})?"":e+"("+i.map(function(e){return e.toFixed(d)}).join(t+",")+t+")"}function s(t,i){if(t instanceof l.TranslateTransform2D){var n=t;return a("translate","em",[n.getTranslateX(i)/100,n.getTranslateY(i)/100],0)}if(t instanceof l.RotationTransform2D)return a("rotate","deg",[t.getValue(i)],0);if(t instanceof l.ScaleTransform2D){var o=t;return a("scale","",[o.getScaleX(i),o.getScaleY(i)],1)}if(t instanceof l.TranslateTransform3D){var r=t;return a("translate3d","em",[r.getTranslateX(i),r.getTranslateY(i),r.getTranslateZ(i)],0)}if(t instanceof l.RotationTransform3D){var s=t;return"rotate3d("+s.getProjectX(i).toFixed(d)+","+s.getProjectY(i).toFixed(d)+","+s.getProjectZ(i).toFixed(d)+","+s.getValue(i).toFixed(d)+"deg)"}if(t instanceof l.ScaleTransform3D){var u=t;return a("scale3d","",[u.getScaleX(i),u.getScaleY(i),u.getScaleZ(i)],1)}throw e.RethrowLogger.createError("transform not supported "+t)}var l=e.Model.RM,u=function(n){function o(e,t){var o=n.call(this,e,t)||this;return o._model=t,o.scale=o.findScaleWatchable(),o.scaledPosition=new i.ScalingRectangle(o._model.position,o.scale),o}return __extends(o,n),o.prototype.getRelatedLayoutVe=function(){return this},o.prototype.getRelatedLayoutElement=function(){return this._model},o.prototype.onCreated=function(){var e=t.Common.LayoutElementLogger.getInstance();e&&e.loadedElement(this._model)},o.prototype.getAnimatedElement=function(){return this},o.prototype.getAnimatedProperties=function(){return this.animatedProperties||(this.animatedProperties={}),this.animatedProperties},o.prototype.clearAnimatedProperties=function(){this.animatedProperties=null},o.prototype.getLayoutContext=function(){return this._model.getLayoutContext()},o.prototype.getContentType=function(){return this._model.getContentType()},o.prototype.getModelObjectId=function(){return this._model.id},o.prototype.getAbsolutePosition=function(){var e=t.Common.LayoutUtilities.getAbsolutePosition(this._model),i=this.getRawPosition();return new BaseRect(i.getLeft()+e.left,i.getTop()+e.top,i.getWidth(),i.getHeight())},o.prototype.getDropShadow=function(e){var t=this._model,i=t.getDropShadowXOff(e)||0,n=t.getDropShadowYOff(e)||0,o=t.getDropShadowBlur(e)||0,r=new Color(t.getDropShadowColor(e)),a={xOffset:i,yOffset:n,blur:o,color:r,spread:t.getDropShadowSpread(e)||0,inset:t.getDropShadowInset(e),scale:this.getScale(e)};if(!DropShadow.isDropShadowVisible(a)){var s={xOffset:i=t.getBackgroundPathShadowXOff(e)||0,yOffset:n=t.getBackgroundPathShadowYOff(e)||0,blur:o=t.getBackgroundPathShadowBlur(e)||0,color:r=new Color(t.getBackgroundPathShadowColor(e)),spread:0,inset:!1,scale:this.getScale(e)};DropShadow.isDropShadowVisible(s)&&t.getBackgroundPath(e)&&!t.getBackgroundImage(e)&&(a=s)}return a},o.prototype.getImageClipPath=function(e){var t=this._model,n=t.getBackgroundPath(e);return i.LayoutModelHelper.svgPathFromIPath(n,t.position,e)},o.prototype.getImageFilterPath=function(e){var t=this._model,n=t.getBackgroundFilterPath(e);return i.LayoutModelHelper.svgPathFromIPath(n,t.position,e)},o.prototype.forceSVG=function(e){return!1},o.prototype.getScale=function(e){return this.scale.getWatchedValue(e)/this.getDownscaleFactor(e)},o.prototype.findRootVE=function(){for(var t=this;t&&!(t instanceof i.RootVE);)t=t.parent;if(!t)throw e.RethrowLogger.createError("can't find the layout tree which contains this layout element");return t},o.prototype.findScaleWatchable=function(){for(var e=this.parent;e&&!e.scale;)e=e.parent;return e.scale},o.prototype.getRawPosition=function(){return this._model.position},o.prototype.getScaledPosition=function(){return this.scaledPosition},o.prototype.getClasses=function(e){var t=["container"];return"Desktop"===CommonSettings.ClientDevice&&this._model.transforms.getCollection(e).some(function(t){return t instanceof l.RotationTransform2D&&Math.abs(t.getValue(e))>1e-4})&&t.push("anti-aliased"),t},o.prototype.getDownscaleFactor=function(e){return this._model.getDownscaleFactor(e)},o.prototype.PositionDivPropsArgs=function(e){var t={id:"container_"+this._model.id},i=this.getClasses(e);return(i=i.concat(this.getCommonClasses(e))).length&&(t.className=i.join(" ")),t},o.prototype.PositionDivAnimatableInitArgs=function(){return this._model.id},o.prototype.PositionDivBoxShadowArgs=function(e){return this.getDropShadow(e)},o.prototype.getCommonClasses=function(e){var t=i.LayoutModelHelper.getClasses(this._model,e);1!==this.getDownscaleFactor(e)&&t.push("downscaled");var n=this.getTabIndex(e);(n&&"-"!==n.charAt(0)||this.isDynamicallyFocusable(e))&&t.push(o.FocusableClass);var r=this._model.getFlags();return r.has(l.LayoutFlags.HideOnHighContrast)&&t.push("hideOnHighContrast"),r.has(l.LayoutFlags.HighContrastInvariant)&&t.push("highContrastInvariant"),r.has(l.LayoutFlags.DraggableEdge)&&t.push("draggableEdge"),t},o.prototype.getTabIndex=function(e){var t=this._model.getAccessibilityInfo(e);if(t&&t.attributes){var i=t.attributes.getCollection(e).firstOrDefault(function(t){return t.getName(e)===Aria.Attributes.TabIndex});if(i)return i.getValue(e)}},o.prototype.dynamicallyFocusableParentEntered=function(e){if(this.isDynamicallyFocusable(e))return this.isDynamicallyFocusableAndEntered(e);var t=this.parent;return!(t instanceof o)||t.dynamicallyFocusableParentEntered(e)},o.prototype.isDynamicallyFocusable=function(e){return!!this._model.getFlags(e).has(l.LayoutFlags.DynamicallyFocusable)},o.prototype.isDynamicallyFocusableAndEntered=function(e){return this.isDynamicallyFocusable(e)&&this.findRootVE().getDynamicFocusListener().shouldBeFocusable(e,this._model.id)},o.prototype.borderstyle=function(e){var t=this._model.getBorderRadius(e);if(!t)return{borderRadius:""};var i=this.getScale(e),n=[i*t.getTopLeft(e),i*t.getTopRight(e),i*t.getBottomRight(e),i*t.getBottomLeft(e)];return n.every(function(e){return 0===e})?{borderRadius:""}:{borderRadius:n.join("px ")+"px"}},o.prototype.transformStyle=function(e){var t=r(this._model,this._model.transforms.getCollection(e),e),i={};return i[Modernizr.prefixed("transform")]=void 0===t?"":t.trim(),i},o.prototype.PositionDivStyleArgs=function(t){var n=this.getScaledPosition(),o=this._model.getOpacity(t),r=this._model.getZOrder(t),a=this._model.getIsOverlay(t),s=n.getLeft(t),l=n.getTop(t);if(this.parent instanceof i.ViewportBackgroundVE){var u=this.parent.getChildOffset(t);s+=u.xOffset,l+=u.yOffset}var d={zIndex:0===r?"":r.toString(),left:e.Utilities.toPxStr(s),width:e.Utilities.toPxStr(n.getWidth(t)),top:e.Utilities.toPxStr(l),height:e.Utilities.toPxStr(n.getHeight(t)),opacity:1===o?"":o.toString(),visibility:this._model.getHidden(t)?"hidden":"",pointerEvents:a?"none":"auto","-ms-high-contrast-adjust":a?"none":"",display:this.isHidden(t)?"none":""};return Obj.extendAll(this.borderstyle(t),i.BackgroundModelHelper.getBackgroundStyle(this._model,this.scale.getWatchedValue(t),t),this.transformStyle(t),d,this.animatedProperties)},o.prototype.PositionDivAttrArgs=function(e){return i.createAttributes(e,this._model)},o.prototype.PositionDivFadeVisibleInitArgs=function(){return{disabled:!this._model.getFlags().has(l.LayoutFlags.DetailViewOverlay),visibleInit:!0}},o.prototype.PositionDivFadeVisibleArgs=function(e){var t,i=this._model.getFlags(e).has(l.LayoutFlags.DetailViewOverlay);return i&&(t=this.findRootVE().getDetailViewManager().isDefaultZoom(e)),{disabled:!i,visible:t,transitionIn:"opacity 0.2s ease",transitionOut:"opacity 0.3s ease"}},o.prototype.backgroundArgs=function(){return new TDB.ChildArgs(i.BackgroundVE,this._model)},o.prototype.getLayoutHierarchy=function(){for(var e=[this._model.id],t=this.parent;t;t=t.parent){var n=void 0;if(t instanceof o)n=t._model.id;else if(t instanceof i.SceneGraphVE)n=t.args.model.id;else{if(!(t instanceof i.ViewportVE))continue;n=t.model().id}e.push(n)}return e},o.prototype.isHidden=function(t){return this._model.getFlags(t).has(l.LayoutFlags.HideInAutoplay)&&(this.findRootVE().getAutoPlayDriver().inAutoplay(t)||e.Utilities.query.has(e.Common.UrlHelper.URLParamNoChrome))},o.prototype.isScrollingContainer=function(e){var t=this._model.getFlags(e);return t.has(l.LayoutFlags.ScrollableX)||t.has(l.LayoutFlags.ScrollableY)},o.prototype.touchMove=function(e){return!this.isScrollingContainer()},o.prototype.mouseScrolled=function(e){return this.isScrollingContainer()?TDB.EventPropagation.Bypass:TDB.EventPropagation.Bubble},o.FocusableClass="focusable",o}(i.SelectableElement);i.LayoutVE=u,i.createLayoutVE=n,i.createClientLayoutVE=o,i.transformStyle=r;var d=3}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.getWidth=function(t){return e.Utilities.cvtServerToPxStr(this.getScale(t),this._model.position.getWidth(t))},n.prototype.getHeight=function(t){return e.Utilities.cvtServerToPxStr(this.getScale(t),this._model.position.getHeight(t))},n.prototype.getLeft=function(t){return e.Utilities.cvtServerToPxStr(this.getScale(t),this._model.position.getLeft(t))},n.prototype.getTop=function(t){return e.Utilities.cvtServerToPxStr(this.getScale(t),this._model.position.getTop(t))},n.prototype.getAbsolutePositionBaseRect=function(){return t.Common.LayoutUtilities.getAbsolutePosition(this._model).toBaseRect()},n.prototype.getIframeId=function(){return""},n}(i.LayoutVE);i.VelumOwnerLayoutVE=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(i){function n(e,t){var n=i.call(this,e,t)||this;return n._watchableFailed=TDB.watchableTag(596476129,n,!1),n._agaveModel=t,n._failed=!1,n}return __extends(n,i),n.prototype.setAgaveFailed=function(e){var t=this;this._failed=e,this._watchableFailed.getValue()!=e&&TDB.applyUpdate(function(){return t._watchableFailed.setValue(t._failed)},TDB.Justification.InitialConversion)},n.prototype.AgaveFrameContentAgaveCreateArgs=function(t){return{agaveId:this._agaveModel.getAgaveId(t),agaveData:this._agaveModel.getAgaveData(),agaveManifest:this._agaveModel.getManifest(),agaveHeight:this.getScale()*this._agaveModel.position.getHeight(),agaveWidth:this.getScale()*this._agaveModel.position.getWidth(),agaveIsEdit:e.View.ViewElements.ViewModel.isEditMode.getValue(),agaveSettings:this._agaveModel.getAgaveSettings(),agaveTraversalId:this.getLayoutContext()?this.getLayoutContext().getContentProxy(t).id:null}},n.prototype.AgaveFrameContentAgaveDataChangedArgs=function(e){return{agaveData:this._agaveModel.getAgaveData(e)}},n.prototype.AgaveFrameContentAgaveSizeChangedArgs=function(e){return{agaveHeight:this.getScale(e)*this._agaveModel.position.getHeight(e),agaveWidth:this.getScale(e)*this._agaveModel.position.getWidth(e)}},n.prototype.AgaveFrameContentAgaveIsEditChangedArgs=function(t){return{agaveIsEdit:e.View.ViewElements.ViewModel.isEditMode.getWatchedValue(t)}},n.prototype.AgaveFrameContentAgaveSettingsChangedArgs=function(e){return{agaveSettings:this._agaveModel.getAgaveSettings(e)}},n.prototype.AgaveFrameStyleArgs=function(t){var i=this.getScale(t),n=e.Utilities.cvtServerToPxStr(i,this._agaveModel.position.getTop(t)),o=e.Utilities.cvtServerToPxStr(i,this._agaveModel.position.getLeft(t)),r=e.Utilities.cvtServerToPxStr(i,this._agaveModel.position.getHeight(t)),a=e.Utilities.cvtServerToPxStr(i,this._agaveModel.position.getWidth(t)),s=this.PositionDivStyleArgs(t);return s.position="absolute",s.top=n,s.left=o,s.height=r,s.width=a,s.display=t.watchValue(this._watchableFailed)?"none":"block",s},n.prototype.AgaveFrameAttrArgs=function(e){return{id:"agave_"+this._agaveModel.id,class:"agaveContainer"}},n.prototype.AgaveFailedPlaceholderStyleArgs=function(t){var i=this.getScale(t);return{position:"absolute",top:e.Utilities.cvtServerToPxStr(i,this._agaveModel.position.getTop(t)),left:e.Utilities.cvtServerToPxStr(i,this._agaveModel.position.getLeft(t)),height:e.Utilities.cvtServerToPxStr(i,this._agaveModel.position.getHeight(t)),width:e.Utilities.cvtServerToPxStr(i,this._agaveModel.position.getWidth(t)),display:t.watchValue(this._watchableFailed)?"block":"none"}},n.prototype.ErrorMessageTextArgs=function(e){return Resources.RendererAgaveLoadingErrorMessage},n.prototype.AgaveFailedImageAttrArgs=function(t){return{src:e.View.ViewElements.getFailedImageBase64()}},n.prototype.velumArgs=function(e){if(CommonSettings.SettingSite_IframeVelumEnabled)return new TDB.ChildArgsNoModel(t.VelumLayoutVE)},n.prototype.isVelumAllowed=function(e){return!this._watchableFailed.getWatchedValue(e)},n}(t.VelumOwnerLayoutVE);t.AgaveLayoutVEBase=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.Model.RM,o=e.View.Common.FRE,r=function(r){function a(n,o){var a=r.call(this,n,o.model)||this;return a.parent=n,a.lazyLayoutChildren=new t.Common.LazyArray(a,a.getLayoutChildren,a.selectLazyItem,e.OM.inAutomation),a.isZoomedTimeout=-1,a.keyframeType=o.model.getKeyFrameType(),a.resourceFactory=o.resourceFactory,a.focusableSurrogate=new TDB.FocusableSurrogate(a,{domFocusable:{compute:new TDB.ComputedOptionArgs(a,a.getDomFocusable)}}),a.addFocusableChild(a.focusableSurrogate),a.variableWidthPosition=new i.VariableWidthRectangle(a.getRawPosition(),a.scale),a}return __extends(a,r),a.prototype.getScaledPosition=function(){return this.variableWidthPosition},a.prototype.getDomFocusable=function(e){var t=this.findParent(i.RegionLayoutVE),n=!!this.getTabIndex(e)||this.isScrollingContainer(e)&&!this.hasChunkedScrollingArgs(e)||this.isDynamicallyFocusableAndEntered(e)||this.hasDraggableEdgeArgs(e);return n=n&&this.dynamicallyFocusableParentEntered(e),t&&(n=n&&t.isEntered(e)),n},a.prototype.isScrollingContainer=function(e){var t=this._model,i=t.getFlags(e),o=t.position,r=t.children.getCollection(e);return i.has(n.LayoutFlags.ScrollableX)&&r.some(function(t){return t.position.getLeft(e)+t.position.getWidth(e)>o.getWidth(e)})||i.has(n.LayoutFlags.ScrollableY)&&r.some(function(t){return t.position.getTop(e)+t.position.getHeight(e)>o.getHeight(e)})},a.prototype.FocusableInitArgs=function(){return this.focusableSurrogate?{surrogate:this.focusableSurrogate}:void 0},a.prototype.PositionDivAttrArgs=function(e){var t=r.prototype.PositionDivAttrArgs.call(this,e);return this.focusableBinding&&delete t[Aria.Attributes.TabIndex],t},a.prototype.selectLazyItem=function(e,t){if(!e||0==e.length)return this.lazyChildrenResults=null,null;if(1==e.length)return this.lazyChildrenResults=null,e;var i=this.findRootVE();if(!i)return this.lazyChildrenResults=null,null;var n=i.getViewportRectangle2D();if(!n)return this.lazyChildrenResults=null,null;var o=this.getAbsolutePosition();if(this.lazyChildrenResults&&!t&&this.lazyChildrenResults.visibleRect.equals(n)&&this.lazyChildrenResults.absoluteRect.equals(o)&&this.lazyChildrenResults.results.length==e.length)return[this.lazyChildrenResults.results.pop()];var r=n.getCenter(),a=e.slice(),s=e.sort(function(e,t){var i=new BaseRect(o.left+e.position.getLeft(),o.top+e.position.getTop(),e.position.getWidth(),e.position.getHeight()),s=new BaseRect(o.left+t.position.getLeft(),o.top+t.position.getTop(),t.position.getWidth(),t.position.getHeight()),l=n.overlapsRect(i),u=n.overlapsRect(s);if(l||u){if(l!=u)return l?1:-1}else{var d=i.getCenter(),c=s.getCenter(),p=Math.pow(d.left-r.left,2)+Math.pow(d.top-r.top,2),g=Math.pow(c.left-r.left,2)+Math.pow(c.top-r.top,2);if(p!=g)return g-p}return a.indexOf(t)-a.indexOf(e)});return this.lazyChildrenResults={visibleRect:n,absoluteRect:o,results:s},[this.lazyChildrenResults.results.pop()]},a.prototype.getLayoutChildren=function(e){return this._model.children.getCollection(e)},a.prototype.PositionDivStyleArgs=function(e){var t=r.prototype.PositionDivStyleArgs.call(this,e);return t.overflow=this._model.getOverflow(e)?"":"hidden",t},a.prototype.PositionDivZoomableInitArgs=function(){var e=void 0;return this._model.getFlags().has(n.LayoutFlags.Zoomable)&&(e=this.findRootVE()),{keyboardShortcutProcessor:e,context:this,onZoomChange:this.zoomChange,onZoomEnter:this.zoomEnter,onZoomExit:this.zoomExit,onManipulationStart:this.manipulationStart,onManipulationEnd:this.manipulationEnd,onDeactivate:this.zoomExit,resourceFactory:this.resourceFactory}},a.prototype.getZoomState=function(e){return this._zoomState?this._zoomState.getWatchedValue(e):new i.ZoomState(!1,!1)},a.prototype.zoomChange=function(e,i){var n=this.findRootVE().getDetailViewManager();n.isDefaultZoom()&&i>1&&ActionLogger.RecordClientAction(new ClientAction.PreviewZoomEnter(this._model.id,t.Common.LayoutUtilities.isDetailView(this._model),CommonBindings.View.Bindings.Zoomable.ZoomEventType[e])),n.setDefaultZoom(1===i)},a.prototype.zoomExit=function(){var e=this;-1!==this.isZoomedTimeout&&clearTimeout(this.isZoomedTimeout),this.isZoomedTimeout=platform.setTimeout(function(){e.isZoomedTimeout=-1,TDB.applyUpdate(function(){return e._zoomState.setValue(new i.ZoomState(!1,e._zoomState.getValue().isManipulatingZoom))})},100),this.findRootVE().getDetailViewManager().setDefaultZoom(!0)},a.prototype.zoomEnter=function(e){var t=this;-1!==this.isZoomedTimeout&&(clearTimeout(this.isZoomedTimeout),this.isZoomedTimeout=-1),TDB.applyUpdate(function(){return t._zoomState.setValue(new i.ZoomState(!0,t._zoomState.getValue().isManipulatingZoom))})},a.prototype.manipulationStart=function(){var e=this;TDB.applyUpdate(function(){return e._zoomState.setValue(new i.ZoomState(e._zoomState.getValue().isZoomed,!0))})},a.prototype.manipulationEnd=function(){var e=this;TDB.applyUpdate(function(){return e._zoomState.setValue(new i.ZoomState(e._zoomState.getValue().isZoomed,!1))},TDB.Justification.Dispose)},a.prototype.PositionDivZoomableArgs=function(e){var t=this._model.getFlags(e).has(n.LayoutFlags.Zoomable);return t?this._zoomState||(this._zoomState=TDB.watchableTag(596476065,this,new i.ZoomState(!1,!1))):this._zoomState=void 0,t},a.prototype.hasDraggableEdgeArgs=function(e){return this._model.getFlags(e).has(n.LayoutFlags.DraggableEdge)},a.prototype.comparisonButtonDraggableInitArgs=function(e){var t=this;return this.findRootVE().analyticsLogger.registerComparisonGroup(this.id),{axis:"x",containment:"grandparent",cursor:"pointer",helper:function(){return $(this)},revert:null,start:function(e,i,n){t.focusableBinding.focus()},stop:function(e,i,n){t.focusableBinding.focus()},drag:function(e,i,n){CookieConsent.setUserConsentForCookies();var o=a.sliderSize/2;i.position.left=MathUtils.clamp(i.position.left,0,t._model.getParentContainer().position.getWidth()-a.sliderSize);var r=i.position.left+o;TDB.applyUpdate(function(){t.variableWidthPosition.setWidthOverride(r)}),t.findRootVE().analyticsLogger.onComparisonInteractedWith(t.id)}}},a.prototype.comparisonButtonTouchToMouseArgs=function(e){return{enabled:!0}},a.prototype.comparisonButtonDraggableOptionsArgs=function(e){return{}},a.prototype.comparisonButtonStyleArgs=function(t){var n=this.getScaledPosition(),o=n.getLeft(t),r=n.getTop(t),s=n.getWidth(t),l=n.getHeight(t),u=a.sliderSize/2;return{position:"absolute",left:e.Utilities.toPxStr(o+s-18),top:e.Utilities.toPxStr(r+l/2-u),width:e.Utilities.toPxStr(i.ContainerLayoutVE.sliderSize),height:e.Utilities.toPxStr(i.ContainerLayoutVE.sliderSize)}},a.prototype.comparisonSeparatorTopStyleArgs=function(t){var i=this.getScaledPosition(),n=i.getLeft(t),o=i.getTop(t),r=i.getWidth(t),s=i.getHeight(t);return{position:"absolute",left:e.Utilities.toPxStr(n+r-2),top:e.Utilities.toPxStr(o),width:"4px",height:e.Utilities.toPxStr(s/2-a.sliderSize/2)}},a.prototype.comparisonSeparatorBottomStyleArgs=function(t){var i=this.getScaledPosition(),n=i.getLeft(t),o=i.getTop(t),r=i.getWidth(t),s=i.getHeight(t),l=a.sliderSize/2;return{position:"absolute",left:e.Utilities.toPxStr(n+r-2),top:e.Utilities.toPxStr(o+s/2+l),width:"4px",height:e.Utilities.toPxStr(s/2-l)}},a.prototype.comparisonIconArgs=function(){return new TDB.ChildArgs(i.FontIconVE,{fontIconName:{value:FontIcons.ComparisonSlider},fontIconSizeClass:"fontIconSize20x20"})},a.prototype.layoutChildrenArgs=function(e){var t=this;return this.lazyLayoutChildren.getCollection(e).map(function(n){return i.createLayoutVE(n,t.resourceFactory,e)})},a.prototype.debugArgs=function(){return null},a.prototype.mouseClicked=function(e){var n=r.prototype.mouseClicked.call(this,e),a=this.findParent(i.RegionLayoutVE);return a&&a.setFocusToChild(this),"PhotoStack"==this.keyframeType&&o.FirstRunTriggers.stackClicked(),n!==TDB.EventPropagation.Bubble?n:this.isZoomed()&&t.Common.LayoutUtilities.isDetailView(this._model)?TDB.EventPropagation.Bypass:i.ViewModel.handleMouseClick(e,this)?TDB.EventPropagation.Bubble:TDB.EventPropagation.Bypass},a.prototype.keyDown=function(e){return this.isVerticalScrollingKey(e.keyCode)&&this.isScrollingContainer()?TDB.EventPropagation.Bypass:this.hasDraggableEdgeArgs()&&this.handleDraggableEdgeKeys(e.keyCode)?(this.findRootVE().analyticsLogger.onComparisonInteractedWith(this.id),TDB.EventPropagation.PreventDefault):r.prototype.keyDown.call(this,e)},a.prototype.handleDraggableEdgeKeys=function(e){var t=this,i=0;if(e==KeyCodeType.LeftArrowKey?i=-2:e==KeyCodeType.RightArrowKey&&(i=2),0!=i){var n=this.variableWidthPosition.getWidth(),o=MathUtils.clamp(n+i,a.sliderSize/2,this._model.getParentContainer().position.getWidth()-a.sliderSize/2);return TDB.applyUpdate(function(){t.variableWidthPosition.setWidthOverride(o)}),!0}return!1},a.prototype.isVerticalScrollingKey=function(e){return e===KeyCodeType.DownArrowKey||e===KeyCodeType.UpArrowKey||e===KeyCodeType.PageDownKey||e===KeyCodeType.PageUpKey},a.prototype.swipe=function(e){return this.isZoomed()&&t.Common.LayoutUtilities.isDetailView(this._model)?TDB.EventPropagation.Bypass:TDB.EventPropagation.Bubble},a.prototype.tap=function(e){return this.isZoomed()&&t.Common.LayoutUtilities.isDetailView(this._model)?TDB.EventPropagation.Bypass:TDB.EventPropagation.Bubble},a.prototype.calloutArgs=function(t){var n,r;if("PhotoStack"===this.keyframeType){if(r=o.CalloutID.PhotoStack,!o.getCalloutManager().isActiveCallout(t,r))return;var s="PhotoStack-callout",l="PhotoStack-tap-callout",u=this.getAbsolutePosition().width;u<a.stackCalloutWidthSmall&&u>a.stackCalloutTotalSize?(s="PhotoStackSmall-callout",l="PhotoStackSmall-tap-callout"):u<i.ContainerLayoutVE.stackCalloutTotalSize&&StoryLog.StructuredTraceTag(596476066,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Stack width is smaller than callout",{stackWidth:u.toString()}),n={calloutBoxClassName:s,calloutTapClassName:l,headerText:{value:Resources.FirstRunPhotoStackHeader},readerText:Resources.FirstRunPhotoStackReader,beakPosition:CommonSettings.SiteUiRtl?i.BeakPosition.Left:i.BeakPosition.Right,calloutID:r,updateCloseButtonPosition:!0,isLayoutRtl:e.Model.RenderModel.getWatchedValue(t).getRTL(t),delay:o.getDelayForCallout(r,o.FirstRunType.Default)}}else if(StoryPageSettings.FREDetailViewCloseButtonEnabled&&"DetailView"===this.keyframeType){if(r=o.CalloutID.DetailView,!o.getCalloutManager().isActiveCallout(t,r))return;n={calloutBoxClassName:"DetailViewCloseButton-callout",calloutTapClassName:"Mobile"===CommonSettings.ClientDevice?"DetailViewCloseButtonMobile-tap-callout":"DetailViewCloseButton-tap-callout",headerText:{value:Resources.FirstRunDetailViewCloseButtonHeader},readerText:Resources.FirstRunDetailViewCloseButtonReader,beakPosition:this.getDetailViewBeakPosition(t),calloutID:r,updateCloseButtonPosition:!0,isLayoutRtl:e.Model.RenderModel.getWatchedValue(t).getRTL(t),delay:o.getDelayForCallout(r,o.FirstRunType.Default)}}return n?new TDB.ChildArgs(i.FRECalloutVE,n):void 0},a.prototype.chunkScrollerPreviousButtonArgs=function(e){this.previousChunkButtonVisible||(this.previousChunkButtonVisible=TDB.watchableTag(596464513,this,!1));var t={buttonId:ClientAction.ButtonId.Slideshow_Thumbnails_Previous,fontIconName:{value:FontIcons.PreviousIcon},fontIconSizeClass:FontIcons.ChunkedScrollerIconSize,cssClass:{value:"chunkedScrollerButton left IconOverlay RenderButton"},context:this,click:this.handleScrollPreviousButton,visible:{watchable:this.previousChunkButtonVisible}};return new TDB.ChildArgs(i.GlyphButtonVE,t)},a.prototype.chunkScrollerNextButtonArgs=function(e){this.nextChunkButtonVisible||(this.nextChunkButtonVisible=TDB.watchableTag(596464514,this,!0));var t={buttonId:ClientAction.ButtonId.Slideshow_Thumbnails_Next,context:this,fontIconName:{value:FontIcons.NextIcon},fontIconSizeClass:FontIcons.ChunkedScrollerIconSize,cssClass:{value:"chunkedScrollerButton right IconOverlay RenderButton"},click:this.handleScrollNextButton,visible:{watchable:this.nextChunkButtonVisible}};return new TDB.ChildArgs(i.GlyphButtonVE,t)},a.prototype.handleScrollNextButton=function(){return this.chunkedScrollerBinding.next(),TDB.EventPropagation.PreventDefault},a.prototype.handleScrollPreviousButton=function(){return this.chunkedScrollerBinding.previous(),TDB.EventPropagation.PreventDefault},a.prototype.hasChunkedScrollingArgs=function(e){return!!this.isScrollingContainer(e)&&this._model.getFlags(e).has(n.LayoutFlags.ChunkedScroller)},a.prototype.scrollerButtonWrapperStyleArgs=function(t){var i=this.getScaledPosition();return{left:e.Utilities.toPxStr(i.getLeft(t)),width:e.Utilities.toPxStr(i.getWidth(t)),top:e.Utilities.toPxStr(i.getTop(t)),height:e.Utilities.toPxStr(i.getHeight(t))}},a.prototype.ChunkedScrollerInitArgs=function(){return{context:this,isHorizontal:!!this._model.getFlags().has(n.LayoutFlags.ScrollableX),startCallback:this.chunkedScrollerStartCallback,endCallback:this.chunkedScrollerEndCallback}},a.prototype.chunkedScrollerStartCallback=function(e){var t=this;TDB.applyUpdate(function(){t.previousChunkButtonVisible.setValue(!e)})},a.prototype.chunkedScrollerEndCallback=function(e){var t=this;TDB.applyUpdate(function(){t.nextChunkButtonVisible.setValue(!e)})},a.prototype.getDetailViewBeakPosition=function(t){return CommonSettings.SiteUiRtl&&CommonSettings.SiteUiRtl!==e.Model.RenderModel.getWatchedValue(t).getRTL(t)?i.BeakPosition.TopLeft:i.BeakPosition.TopRight},a.prototype.isZoomed=function(){return this._zoomState&&this._zoomState.getValue().isZoomed},a.prototype.getFocusableSurrogate=function(){return this.focusableSurrogate},a.areEqual=function(e,t){return e.model===t.model},a.prototype.getKeyFrameType=function(){return this.keyframeType},a.stackCalloutWidthSmall=300,a.stackCalloutTotalSize=215,a.sliderSize=36,a}(i.LayoutVE);i.ContainerLayoutVEBase=r}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(e,i){var n=t.call(this,e,TDB.ControlSetFeatures.Isolated)||this;return n.args=i,n}return __extends(i,t),i.prototype.containerArgs=function(){return new TDB.ChildArgs(e.ContainerLayoutVE,this.args)},i.prototype.canActivate=function(){return!e.ViewModel.isEditMode.getValue()&&this.args.model.children.getCollection().length>0&&this.container&&!this.container.isHidden()},i.prototype.setFocusToChild=function(e){if(this.enterNoFocus()){var t=e instanceof TDB.Control?e:e.getFocusableSurrogate();t&&ArrayExtensions.contains(this.getActivatableChildren(),t)&&this.setActiveChild(t)}},i.areEqual=function(e,t){return e.model===t.model},i}(e.RegionViewElement);e.RegionLayoutVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(){function t(e,t){this.modelObject=e,this.scale=t}return t.prototype.getLeft=function(t){return e.Utilities.cvtServerToPx(this.scale.getWatchedValue(t),this.modelObject.getLeft(t))},t.prototype.getTop=function(t){return e.Utilities.cvtServerToPx(this.scale.getWatchedValue(t),this.modelObject.getTop(t))},t.prototype.getWidth=function(t){return e.Utilities.cvtServerToPx(this.scale.getWatchedValue(t),this.modelObject.getWidth(t))},t.prototype.getHeight=function(t){return e.Utilities.cvtServerToPx(this.scale.getWatchedValue(t),this.modelObject.getHeight(t))},t}();t.ScalingRectangle=i;var n=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.widthOverride=TDB.watchableTag(596476043,n,-1/0),n}return __extends(t,e),t.prototype.getWidth=function(t){var i=this.widthOverride.getWatchedValue(t);return i!==-1/0?i:e.prototype.getWidth.call(this,t)},t.prototype.setWidthOverride=function(e){this.widthOverride.setValue(e)},t}(i);t.VariableWidthRectangle=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(e,i){var n=t.call(this,e,{features:TDB.ControlSetFeatures.Isolated|TDB.ControlSetFeatures.TabInto})||this;return n.args=i,n}return __extends(i,t),i.prototype.containerArgs=function(){return new TDB.ChildArgs(e.ContainerLayoutVE,this.args)},i.areEqual=function(e,t){return e.model===t.model},i}(TDB.ControlSet);e.PanelLayoutVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){!function(e){e[e.HomePage=0]="HomePage",e[e.MySways=1]="MySways",e[e.Storyline=2]="Storyline"}(t.RedirectionPath||(t.RedirectionPath={}));var i=function(i){function n(e,n){var o=i.call(this,e,n)||this;o.visible=TDB.watchableTag(596476056,o,!0),o.scrollVisibleManager=new t.ScrollVisibleManager(o,new Size(NaN,NaN),o.visible,!0,!0),o.registeredWithRoot=!1;try{var r=o.findRootVE();r&&(r.registerScrollVisibleManager(o.scrollVisibleManager),r.registerMadeWithSwayButton(o),o.registeredWithRoot=!0)}catch(e){StoryLog.StructuredTraceTag(596476057,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.error,"Unexpected error in MadeWithSwayLayoutVE",{error:e})}return o}return __extends(n,i),n.prototype.dispose=function(e){if(i.prototype.dispose.call(this),this.registeredWithRoot){var t=this.findRootVE();t.unregisterScrollVisibleManager(this.scrollVisibleManager),t.unregisterMadeWithSwayButton(this)}},n.prototype.fontIconVEArgs=function(){var e={fontIconName:{value:FontIcons.SwayWatermarkIcon},fontIconSizeClass:FontIcons.SwayWatermarkIconSize,fontIconWrapperClass:{value:"madeWithSwayIcon"}};return new TDB.ChildArgs(t.FontIconVE,e)},n.prototype.textTextArgs=function(){return Resources.MadeWithSway},n.prototype.PositionDivStyleArgs=function(e){var t=i.prototype.PositionDivStyleArgs.call(this,e);return t.width="initial",t},n.prototype.wrapperFadeVisibleInitArgs=function(){return{visibleInit:!0,transitionOut:"opacity 0.7s ease"}},n.prototype.wrapperFadeVisibleArgs=function(e){return{visible:e.watchValue(this.visible)}},n.prototype.ensureVisibility=function(e){void 0===e&&(e=!0),this.scrollVisibleManager.ensureVisible(e)},n.prototype.showMadeWithSwayArgs=function(){return StoryPageSettings.EmbedHostMode!=EmbedHostType.ddprofile},n.prototype.PositionDivAttrArgs=function(e){var t=i.prototype.PositionDivAttrArgs.call(this,e);return t.dir=CommonSettings.SiteUiRtl?"rtl":"ltr",t},n.prototype.isEmbedded=function(){return e.View.ViewElements.ViewModel.isEmbeddedMode.getValue()},n}(t.LayoutVE);t.MadeWithSwayLayoutVEBase=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.AnimationManager,n=function(e){function n(t,i){var n=e.call(this,t,i)||this;return n.parent=t,n.args=i,n}return __extends(n,e),n.prototype.rootDivStyleArgs=function(e){if(Modernizr.preserve3d)return{};var t=this.getAnimatableTransforms(e).filter(function(e){return e instanceof i.Properties.Scaled}),n=t.length?t[0].get(2):0;return 0===n?{}:{zIndex:n.toFixed()}},n.prototype.childrenArgs=function(e){for(var i=this.args.model.children.getCollection(e),n=[],o=i.length-1;o>=0;--o)n.push(t.createSceneGraphVE(i[o],this.args.resourceFactory));return n},n.prototype.rootDivAnimatableInitArgs=function(){return this.args.model.id},n.areEqual=function(e,t){return e.model===t.model},n}(t.SceneGraphVE);t.ContainerSceneGraphVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(e,i){var n=t.call(this,e,i)||this;switch(n.model=i,n.affectUIVisibility=!1,n.appBarVisible=!1,n.logoVisible=!1,n.model.getKeyFrameType()){case"Navigate Forward":n.affectUIVisibility=!0,n.appBarVisible=!1,n.logoVisible=!1;break;case"Navigate Back":n.affectUIVisibility=!0,n.appBarVisible=!0,n.logoVisible=!1;break;case"Navigate Home":case"ToCView Open":n.affectUIVisibility=!0,n.appBarVisible=!0,n.logoVisible=!0}return n}return __extends(i,t),i.prototype.getClasses=function(e){var i=this.model.getIsOverlay(e),n=t.prototype.getClasses.call(this,e);return i?(n.push("decoration-overlay-div"),n):n},i.prototype.isOverlayArgs=function(e){return this.model.getIsOverlay(e)},i.prototype.forceSVG=function(e){return this.isOverlayArgs(e)},i.prototype.mouseClicked=function(t){if(this.affectUIVisibility&&!e.ViewModel.isEditMode.getValue()){var i=e.ViewModel.getConsumptionAppBar();i&&i.ensureVisible(this.appBarVisible);var n=this.findRootVE().getMadeWithSwayButton();n&&n.ensureVisibility(this.logoVisible)}return TDB.EventPropagation.Bubble},i}(e.LayoutVE);e.DecorationLayoutVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function e(){this.focusableNodes=TDB.watchableTag(596476064,null,[])}return e.prototype.nodeEntered=function(e){var t=this;if(this.isDynamicFocusController(e)){var i=this.getKeyForKeyFrame(e.getKeyFrame());TDB.applyUpdate(function(){t.focusableNodes.getValue().addunique(i),t.focusableNodes.notify()})}},e.prototype.nodeExited=function(e){var t=this;if(this.isDynamicFocusController(e)){var i=this.getKeyForKeyFrame(e.getKeyFrame());TDB.applyUpdate(function(){t.focusableNodes.getValue().removefirst(i),t.focusableNodes.notify()})}},e.prototype.isDynamicFocusController=function(e){var t=e.getBehaviors(),n=e.getKeyFrame().layoutElements.getCollection().firstOrDefault();return!t.has(i.StateBehaviors.YieldFocusControl)&&n&&n.getFlags().has(i.LayoutFlags.DynamicallyFocusable)},e.prototype.getKeyForKeyFrame=function(e){return e.layoutElements.getCollection().first().id},e.prototype.shouldBeFocusable=function(e,t){return this.focusableNodes.getWatchedValue(e).indexOf(t)>=0},e}();t.DynamicFocusListener=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=e.View.Common,o=function(o){function r(e,t,i){var r=o.call(this,e,t)||this;return r.domListener=Obj.implement(r,{domAttached:r.onDomAttached,domDetached:r.onDomDetached}),r.wasIframeLoaded=!1,r._embedModel=t,r.iframeArgs=TDB.watchableTag(596476060,r,null),r.isShowingPlaceholder=TDB.watchableTag(596476061,r,StoryPageSettings.SiteEmbedPlaceholdersEnabled),r.isIframeLoaded=!1,r.lastHostName=null,r.iframeLoadingManager=i||n.IframeLoadingManager.getInstance(),r.addDomListener(r.domListener),r}return __extends(r,o),r.prototype.isLightweightEmbed=function(e){var t=this.getHostName(e);return!(StoryPageSettings.SiteDomainsForEmbedPlaceholders&&ArrayExtensions.contains(StoryPageSettings.SiteDomainsForEmbedPlaceholders,t))},r.prototype.placeholderArgs=function(e){if(this.isShowingPlaceholder.getWatchedValue(e)){var i={embedModel:this.getEmbedModel(),click:this.embedPlaceholderViewClick,context:this,dataStore:this.iframeLoadingManager.placeholderDataStore};return new TDB.ChildArgs(t.EmbedPlaceholderVE,i)}},r.getScrollingToString=function(e){switch(e){case i.EmbedScrolling.Auto:return"auto";case i.EmbedScrolling.Yes:return"yes";case i.EmbedScrolling.No:return"no";default:return}},r.prototype.placeholderImageStyleArgs=function(t){var i=this._model.position;return{height:e.Utilities.toPxStr(i.getHeight()),width:e.Utilities.toPxStr(i.getWidth())}},r.prototype.placeholderImageAttrArgs=function(e){return{id:"embed_"+this.getEmbedModel().id}},r.prototype.embedIframeArgs=function(e){return StoryPageSettings.SiteEmbedPlaceholdersEnabled&&this.wasIframeLoaded&&this.iframeArgs.getValue()&&n.IframeLoadingManager.getInstance().unload(this),this.wasIframeLoaded=!!this.iframeArgs.getValue(),this.isShowingPlaceholder.getWatchedValue(e)?null:this.iframeArgs.getWatchedValue(e)},r.prototype.setPlaceholder=function(){var e=this;TDB.applyUpdate(function(){e.isShowingPlaceholder.setValue(!0)},TDB.Justification.SynchronousBrowserEvent)},r.prototype.setIframe=function(e){var t=this;this.disposed||(this.embedLoadStartTime=platform.now(),TDB.applyUpdate(function(){t.iframeArgs.setValue(e),t.isShowingPlaceholder.setValue(!1)},TDB.Justification.SynchronousBrowserEvent),this.isIframeLoaded=!0)},r.prototype.getEmbedLoadStartTime=function(){return this.embedLoadStartTime},r.prototype.dispose=function(){this.disposed||(n.IframeLoadingManager.getInstance().unregisterEmbedLayoutElement(this),this.removeDomListener(this.domListener),o.prototype.dispose.call(this))},r.prototype.embedPlaceholderViewClick=function(e){var t=this;return this.isShowingPlaceholder.getValue()&&(n.IframeLoadingManager.getInstance().load(this),TDB.applyUpdate(function(){t.isShowingPlaceholder.setValue(!1)})),TDB.EventPropagation.Bypass},r.prototype.onIframeLoad=function(e){var t="unknown",i=-1;return t=this.getHostName(),i=platform.now()-this.getEmbedLoadStartTime(),StoryLog.StructuredTraceTag(596476062,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"An embed has loaded.",{elapsedTime:i.toString(),host:t}),!1},r.prototype.onIframeError=function(e,t){var i=-1,n="unknown";return n=this.getHostName(),i=platform.now()-this.getEmbedLoadStartTime(),StoryLog.StructuredTraceTag(596476063,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Embed failed to load.",{elapsedTime:i.toString(),host:n}),!1},r.prototype.onDomAttached=function(e){this.getEmbedModel()&&n.IframeLoadingManager.getInstance().registerEmbedLayoutElement(this)},r.prototype.onDomDetached=function(e){n.IframeLoadingManager.getInstance().unregisterEmbedLayoutElement(this)},r.prototype.getHostName=function(t){var i=this.getEmbedModel();return i?(this.lastHostName=i.getEmbedSourceUrl(t),e.Utilities.extractHostnameFromUrl(this.lastHostName)):""},r.prototype.removeIframe=function(){var e=this;TDB.applyUpdate(function(){e.iframeArgs.setValue(null)},TDB.Justification.SynchronousBrowserEvent),this.isIframeLoaded=!1,this.setPlaceholder()},r.prototype.velumArgs=function(e){if(CommonSettings.SettingSite_IframeVelumEnabled)return new TDB.ChildArgsNoModel(t.VelumLayoutVE)},r.prototype.isVelumAllowed=function(e){return!this.isShowingPlaceholder.getWatchedValue(e)},r.prototype.getEmbedModel=function(){return this._embedModel.renderModel.graph.containsObject(this._embedModel.id)?this._embedModel:null},r.prototype.getIframeId=function(){var e=this.embedIframe;return e?e.getIframeId():""},r}(t.VelumOwnerLayoutVE);t.EmbedLayoutVEBase=o}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Common,n=function(n){function o(e,t){var i=n.call(this,e,t)||this;return i.parent=e,i}return __extends(o,n),o.prototype.createTextButtonArgs=function(e,i,n,o,r){var a={buttonId:r,click:i,context:e,cssClass:{value:o},text:{value:n}};return new TDB.ChildArgs(t.TextButtonVE,a)},o.prototype.createLinkButtonArgs=function(e,i,n,o,r){var a={url:i,text:{value:n},cssClass:{value:o},nativeKeyboardHandling:!0,buttonId:r,target:"_blank"};return new TDB.ChildArgs(t.LinkButtonVE,a)},o.prototype.createGlyphButtonArgs=function(e,i,n,o,r,a,s){var l={buttonId:s,click:i,context:e,cssClass:{value:r},description:{value:a},tooltip:{value:a},fontIconName:{value:n},fontIconSizeClass:o};return new TDB.ChildArgs(t.GlyphButtonVE,l)},o.prototype.getStarted=function(t){var n=CommonSettings.IsAuthenticated?ClientAction.ButtonId.EndOfStory_Create_SignedIn:ClientAction.ButtonId.EndOfStory_Create_SignedOut;return ActionLogger.RecordClientAction(new ClientAction.ButtonClickAction(n,Diag.ULSCat.msoulscat_Story_Site)),i.UserStories.getInstance().createStoryOrSignIn("EndOfSway",e.Common.UrlHelper.getInstance().getUrlForSwaysPageOnOfficeComOrMySways()),TDB.EventPropagation.Bypass},o.prototype.shareToFacebook=function(e){var n=StoryPageSettings.LookupId,o=this.findRootVE().getSharingManager();return t.StoryShareAction.shareToFacebook(n,i.SharingButtonLocations.EndOfStory,ClientAction.ButtonId.EndOfStory_ShareFacebook,o),TDB.EventPropagation.Bypass},o.prototype.shareToTwitter=function(e){var n=StoryPageSettings.LookupId,o=this.findRootVE().getSharingManager();return t.StoryShareAction.shareToTwitter(n,StoryPageSettings.Mode===StoryViewMode.Edit,i.SharingButtonLocations.EndOfStory,ClientAction.ButtonId.EndOfStory_ShareTwitter,o,this._model.renderModel.renderModelRoot.getTitle()),TDB.EventPropagation.Bypass},o.prototype.shareToLinkedIn=function(e){var n=this.findRootVE().getSharingManager();return t.StoryShareAction.shareToLinkedIn(StoryPageSettings.LookupId,i.SharingButtonLocations.EndOfStory,ClientAction.ButtonId.EndOfStory_ShareLinkedIn,n,this._model.renderModel.renderModelRoot.getTitle()),TDB.EventPropagation.Bypass},o.prototype.shareLink=function(e){var n=this.findRootVE().getSharingManager(),o=i.UrlHelper.getInstance().trackedShareLinkUrl(StoryPageSettings.LookupId,i.SharingReferrers.Link,i.SharingButtonLocations.EndOfStory);return t.StoryShareAction.shareViewLink(o,ClientAction.ButtonId.EndOfStory_ShareLink,n),TDB.EventPropagation.Bypass},o.prototype.getStartedButtonArgs=function(){if(!this.isOwnerOrAuthor()){var e=!1;try{e=window.top!==window}catch(t){e=!0}return e?this.createLinkButtonArgs(this,"/",Resources.EndOfStoryGetStartedButtonText,"segoeUISemilight endOfStoryGetStarted endOfStoryGetStartedLink",ClientAction.ButtonId.EndOfStory_Create):this.createTextButtonArgs(this,this.getStarted,Resources.EndOfStoryGetStartedButtonText,"segoeUISemilight endOfStoryGetStarted",ClientAction.ButtonId.EndOfStory_Create)}},o.prototype.PositionDivAttrArgs=function(e){var t=n.prototype.PositionDivAttrArgs.call(this,e);return t.dir=CommonSettings.SiteUiRtl?"rtl":"ltr",t},o.prototype.getButtonClass=function(){return"endOfStoryShareButton"},o.prototype.getSharingManager=function(){return this.findRootVE().getSharingManager()},o.prototype.shouldCreateFacebookButton=function(e){return this.shouldCreatePublicSharingButtons(e)},o.prototype.shouldCreateTwitterButton=function(e){return this.shouldCreatePublicSharingButtons(e)},o.prototype.shouldCreateLinkedInButton=function(e){return CommonSettings.SiteLinkedInSharingEnabled&&this.shouldCreatePublicSharingButtons(e)},o.prototype.shouldCreateLinkButton=function(e){return this.shouldCreatePublicSharingButtons(e)},o.prototype.shouldCreatePublicSharingButtons=function(e){return StoryPageSettings.EmbedHostMode!==EmbedHostType.dd&&this.getSharingManager().isPublicSharingAllowed(e)&&!this.isOwnerOrAuthor()&&!CommonSettings.IsAADUser},o.prototype.facebookButtonArgs=function(e){if(this.shouldCreateFacebookButton(e)){var t=this.getButtonClass();return this.createGlyphButtonArgs(this,this.shareToFacebook,FontIcons.PreviewFacebookIcon,FontIcons.PreviewFacebookIconSize,t,Resources.ShareToFacebookButtonDescription,ClientAction.ButtonId.EndOfStory_ShareFacebook)}},o.prototype.twitterButtonArgs=function(e){if(this.shouldCreateTwitterButton(e)){var t=this.getButtonClass();return this.createGlyphButtonArgs(this,this.shareToTwitter,FontIcons.PreviewTwitterIcon,FontIcons.PreviewTwitterIconSize,t,Resources.ShareToTwitterButtonDescription,ClientAction.ButtonId.EndOfStory_ShareTwitter)}},o.prototype.linkedInButtonArgs=function(e){if(this.shouldCreateLinkedInButton(e)){var t=this.getButtonClass();return this.createGlyphButtonArgs(this,this.shareToLinkedIn,FontIcons.PreviewLinkedInIcon,FontIcons.PreviewLinkedInIconSize,t,Resources.ShareToLinkedinButtonDescription,ClientAction.ButtonId.EndOfStory_ShareLinkedIn)}},o.prototype.linkButtonArgs=function(e){if(this.shouldCreateLinkButton(e)){var t=this.getButtonClass();return this.createGlyphButtonArgs(this,this.shareLink,FontIcons.PreviewLinkIcon,FontIcons.PreviewLinkIconSize,t,Resources.ShareByLinkButtonDescriptionV2,ClientAction.ButtonId.EndOfStory_ShareLink)}},o.prototype.headingArgs=function(){var i=CommonSettings.SiteRootUrl;CommonSettings.SwayButtonRedirectToOfficeCom&&(i=CommonSettings.IsAuthenticated?e.Common.UrlHelper.getInstance().getUrlForSwaysPageOnOfficeComOrMySways():CommonSettings.OfficeComHomepageUrl);var n={url:i,message:Resources.EndOfStoryHeading,target:"_self",context:this,class:"endOfStoryHeader segoeUISemilight"};return new TDB.ChildArgs(t.ClickableLinkVE,n)},o.prototype.messageTextArgs=function(){return Resources.EndOfStoryMessage},o.prototype.isOwnerOrAuthor=function(){return StoryPageSettings.IsOwner||StoryPageSettings.IsAnAuthorOfThisSway},o.prototype.isAADOwnerOrAuthor=function(){return this.isOwnerOrAuthor()&&CommonSettings.IsAADUser},o.prototype.endOfStoryClassNameArgs=function(e){return this.isAADOwnerOrAuthor()?"endOfStoryAADOwner":this.shouldCreatePublicSharingButtons(e)?"endOfStory":"endOfStoryWithoutButtons"},o}(t.LayoutVE);t.EndOfStoryLayoutVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n,o=e.Common;!function(e){e[e.begin=0]="begin",e[e.fading=1]="fading",e[e.finishing=2]="finishing"}(n||(n={}));var r=function(r){function a(e,o){var a=r.call(this,e,o)||this;return a._isHidden=TDB.watchableTag(596476048,a,!0),a._prevUrl=null,a._imageUrl=TDB.watcherTag(596476049,a,a,a.computeImageUrl),a._currentUrl="",a._fadingState=n.begin,a._timeout=null,a._timeoutNotifier=TDB.notifierTag(596476050,a),a._allowPrefetchingImages=TDB.watcherTag(596476051,a,a,a.allowPrefetchingImages),a.mediaDomListener=Obj.implement(a,{domAttached:a.onDomAttached,domDetached:a.onDomDetached}),a._imageLoader=t.Common.makeImageLoader(a,o),a.engine=i.ViewModel.previewVE._root.getValue()._interactionEngine.getAnimationEngine(),a.addDomListener(a.mediaDomListener),a}return __extends(a,r),a.prototype.getClasses=function(e){return["medialayoutve"]},a.prototype.onHiddenChangedUpdate=function(e){},a.prototype.updateHidden=function(e){var t=this;TDB.applyUpdate(function(){t.onHiddenChangedUpdate(e),t._isHidden.setValue(e)},TDB.Justification.InitialConversion)},a.prototype.isHidden=function(e){return this._isHidden.getWatchedValue(e)},a.prototype.onDomAttached=function(e){this.updateHidden(!1)},a.prototype.onDomDetached=function(e){this.updateHidden(!0)},a.prototype.dispose=function(e){this.mediaDomListener&&(this.removeDomListener(this.mediaDomListener),this.mediaDomListener=null),r.prototype.dispose.call(this,e),this.clearTimeout(),this._imageLoader.dispose()},a.prototype.canFadeInHigherResolutions=function(t){return!(!e.Utilities.browser.isFirefox&&this.getZoomState(t).isZoomed||this._model.getAnimated(t)&&this._model.transforms.getCollection(t).length>0)},a.prototype.getZoomState=function(e){return t.Common.LayoutUtilities.getZoomState(this,e)},a.prototype.advanceState=function(){var t=this;if(null===this._timeout){if(!this.canFadeInHigherResolutions())return this._fadingState=n.begin,void(this._prevUrl=null);var i=-1;switch(this._fadingState){case n.begin:this._fadingState=n.fading,i=500;break;case n.fading:this._fadingState=n.finishing,i=0;break;case n.finishing:this._fadingState=n.begin,this._prevUrl=null;break;default:throw e.RethrowLogger.createError("unknown fading state")}i>=0&&(this._timeout=platform.setTimeout(function(){t._timeout=null,TDB.applyUpdate(function(){return t._timeoutNotifier.notify()})},i))}},a.prototype.clearTimeout=function(){var e=this._timeout;null!==e&&(clearTimeout(e),this._timeout=null)},a.prototype.getImageUrl=function(e){var t=e.watchValue(this._imageUrl);if(this._imageLoader.getFailureCount()>0&&(this._prevUrl=null),this._prevUrl&&this._prevUrl!==t){if(this.advanceState(),e.watch(this._timeoutNotifier),this._fadingState===n.fading&&this._prevUrl)return this._prevUrl;if(this._fadingState==n.finishing)return t}return this._prevUrl=t,t},a.prototype.computeImageUrl=function(e){if(e.watchValue(this._isHidden)&&!e.watchValue(this._allowPrefetchingImages))return this._fadingState=n.begin,this._prevUrl=null,this.clearTimeout(),this._wasZoomed?this._currentUrl:"";var t=this._model,i=CommonSettings,r=t.getImageId(e);if(r&&i){var a=t.imageCrop,s=a.getWidth(e),l=a.getHeight(e);if(0===s&&0===l){var u=t.position;s=u.getWidth(e),l=u.getHeight(e)}var d=Math.max(s,l)*this.getScale(e)*(window.devicePixelRatio||1),c=Math.max(t.getImageOriginalWidth(e),t.getImageOriginalHeight(e));0===c&&(c=3840);var p=this.getZoomState(e);this._wasZoomed=this._wasZoomed||p.isZoomed;var g="",h=t;if(h&&h.getFilterEffects&&(g=h.getFilterEffects(e)),this._wasZoomed){var y=this._imageLoader.getImageUrl(r,d*StoryPageSettings.ConsumptionZoomedImageRequestScale,c,this.getPreserveOriginalImage(e),g,e);p.isManipulatingZoom||(this._currentUrl=y)}else this._currentUrl=this._imageLoader.getImageUrl(r,d,c,this.getPreserveOriginalImage(e),g,e);return this._currentUrl}var m=o.UrlHelper.getInstance().getUrlForUnprocessedImage(t.getImageUrl(e));return StoryLog.TraceTag(596476052,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"No copy of image in our storage, showing fallback image from original, external path."),this._imageLoader.setFallbackUrl(m),m},a.prototype.allowPrefetchingImages=function(e){if(!StoryPageSettings.AllowPrefetchingImages)return!1;var n=this._model;return!!n&&("ExpoWorld"===t.Common.LayoutUtilities.getCurrentWorldId(n.model,e)&&(!e.watchValue(i.ViewModel.isEditMode)&&t.Common.LayoutUtilities.isDetailView(n)))},a.prototype.getPreserveOriginalImage=function(e){return!1},a.prototype.getImagePosition=function(t,i){var n=this._model,o=n.imageCrop,r=n.position,a=o.getLeft(t),s=o.getTop(t),l=o.getWidth(t),u=o.getHeight(t),d=r.getWidth(t),c=r.getHeight(t);return new BaseRect(e.Utilities.cvtServerToPx(i,l?a:0),e.Utilities.cvtServerToPx(i,u?s:0),e.Utilities.cvtServerToPx(i,l||d),e.Utilities.cvtServerToPx(i,u||c))},a.prototype.failedImageArgs=function(e){var t=this._model;return this._imageLoader.getFailed(e)?(null==t.getImageId(e)?StoryLog.TraceTag(596476053,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Failed to load fallback image, showing error message to user in renderer."):StoryLog.TraceTag(596476054,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Failed to load image, showing error message to user in renderer."),new TDB.ChildArgs(i.FailedImageVE,this)):null},a.prototype.failedArgs=function(){return this._imageLoader.getFailedWatchable()},a.prototype.getImageRepeat=function(e){return"no-repeat"},a.prototype.upgradingArgs=function(e){return!!this.canFadeInHigherResolutions(e)&&(this.getImageUrl(e),e.watch(this._timeoutNotifier),this._fadingState!==n.begin)},a.prototype.newImageFadeVisibleInitArgs=function(){return{}},a.prototype.newImageFadeVisibleArgs=function(){return{visible:!0}},a.prototype.getAltText=function(e){var t=this._model.getAccessibilityInfo(e);if(t&&t.attributes)return t.attributes.getCollection(e).firstOrDefault(function(t){return"alt"===t.getName(e)}).getValue(e)},a}(i.LayoutVE);i.MediaLayoutVE=r}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.args=i,n.lineTopOffset=12,n}return __extends(i,t),i.prototype.SetVolumeButton=function(e){this.args.volumeButton=e},i.prototype.triggerSliderChangeCallback=function(e){var i=this.args&&this.args.position?this.args.position.getValue():null;StoryLog.StructuredTraceTag(596476121,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Volume slider moved",{audioId:this.args?this.args.audioId:null,currentValue:i?i.toString():null,newValue:e.toString()}),t.prototype.triggerSliderChangeCallback.call(this,e)},i.prototype.keyDown=function(i){var n=this;switch(i.keyCode){case KeyCodeType.EscapeKey:return TDB.applyUpdate(function(){n.args.volumeShowing.setValue(e.VolumeState.notShowing)}),this.args.volumeButton.setFocus(),TDB.EventPropagation.Bypass;case KeyCodeType.TabKey:return TDB.EventPropagation.PreventDefault}return t.prototype.keyDown.call(this,i)},i.prototype.firstChanceMouseEvent=function(t,i,n){for(var o=this;n&&n!==this&&n!==this.args.volumeButton;)n=n.parent;return n||i!==TDB.ViewElementMouseEventType.MouseDownEvent||TDB.applyUpdate(function(){o.args.volumeShowing.setValue(e.VolumeState.notShowing)}),TDB.EventPropagation.Bubble},i}(e.SlidebarVE);e.AudioVolumeSliderVE=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(t){var i=function(i){function n(e,t){var n=i.call(this,e,t.model)||this;return n.resourceFactory=t.resourceFactory,n}return __extends(n,i),n.prototype.getClasses=function(e){return["AudioLayoutPlayer"]},n.prototype.getAudioPlayerType=function(){return this._model.getAudioPlayerType()},n.prototype.getAudioPlayerDescriptor=function(e){return this._model.getAudioPlayerDescriptor(e)},n.prototype.playerControlsArgs=function(e){var i={id:this._model.id,parent:this,descriptor:this.getAudioPlayerDescriptor(e),playButtonClickCallback:this.playButtonClickCallback,hideVolumeControl:!1,resourceFactory:this.resourceFactory,analyticsLogger:this.findRootVE().analyticsLogger};return new TDB.ChildArgs(t.AudioControlsVE,i)},n.formatTime=function(e,t,i){var n=Math.floor(e/60),o=Math.floor(n/60);return e-=60*n,n-=60*o,(t?("0"+Math.round(o)).slice(-2)+i:"")+("0"+Math.round(n)).slice(-2)+i+("0"+Math.floor(e)).slice(-2)},n.prototype.playButtonClicked=function(){this.playerControls.playButtonClicked(void 0)},n.prototype.volumeButtonClicked=function(){this.playerControls.volumeButtonClicked(void 0)},n.prototype.playButtonClickCallback=function(){this.findRootVE().pauseAutoPlayIfActive(e.Common.AutoPlayPauseType.AudioPlayed)},n.areEqual=function(e,t){return e.model===t.model},n}(t.LayoutVE);t.AudioLayoutVEBase=i}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(e){function t(t,i){var n=e.call(this,t)||this;return n._model=i,n._sourceElement=TDB.watchableTag(596476067,n,n._model.source),n._playerVolume=TDB.watchableTag(596476096,n,1),n._playerPosition=TDB.watchableTag(596476097,n,0),n._playerPlaying=TDB.watchableTag(596476098,n,!1),n.duration=TDB.watchableTag(596476099,n,0),n.playbackPosition=i.playbackPosition,n}return __extends(t,e),t.prototype.playAudio=function(){var e=this;TDB.applyUpdate(function(){e._sourceElement.setValue(e._model.source),e._playerPlaying.setValue(!0)})},t.prototype.pauseAudio=function(){var e=this;TDB.applyUpdate(function(){return e._playerPlaying.setValue(!1)})},t.prototype.stopAudio=function(){var e=this;TDB.applyUpdate(function(){e._playerPlaying.setValue(!1),e._sourceElement.setValue(null),e.duration.setValue(0),e.playbackPosition.setValue(0)},TDB.Justification.Dispose)},t.prototype.seekAudio=function(e){var t=this;TDB.applyUpdate(function(){return t._playerPosition.setValue(e)})},t.prototype.setVolume=function(e){var t=this;TDB.applyUpdate(function(){return t._playerVolume.setValue(e)})},t.prototype.isPlaying=function(e){return this._playerPlaying.getWatchedValue(e)},t.prototype.isLoaded=function(e){return this.duration.getWatchedValue(e)>0},t.prototype.htmlBrowserPlayerAudioInitArgs=function(){return{position:this.playbackPosition,duration:this.duration,playing:this._playerPlaying}},t.prototype.htmlBrowserPlayerAudioSourceArgs=function(e){return e.watchValue(this._sourceElement)?this._sourceElement.getWatchedValue(e):""},t.prototype.htmlBrowserPlayerAudioVolumeArgs=function(e){return e.watchValue(this._playerVolume)},t.prototype.htmlBrowserPlayerAudioPositionArgs=function(e){return e.watchValue(this._playerPosition)},t.prototype.htmlBrowserPlayerAudioPlayingArgs=function(e){return e.watchValue(this._playerPlaying)},t}(TDB.ViewElement);e.BrowserAudioPlayerVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(t){function n(e,i){var n=t.call(this,e,i.model)||this;return n.args=i,n}return __extends(n,t),n.prototype.liplayerLivingImagePlayerArgs=function(i){var o=this,r=this.getImageUrl(i);if(null==r||""===r)return null;var a=this.args.model.getImageId(i);e.Utilities.weblog("livingimage","image id:  "+a+", contentId"+this.args.model.getContentId(i));var s,l=this.args.model.getLivingImageMediaElements(i),u=this.args.model.id,d=this.getScale(i);s=e.View.ViewElements.isComplex(i,this.args.model)?t.prototype.getImagePosition.call(this,i,d*t.prototype.getDownscaleFactor.call(this,i)):{top:d*this.args.model.position.getTop(i),left:d*this.args.model.position.getLeft(i),width:d*this.args.model.position.getWidth(i),height:d*this.args.model.position.getHeight(i)};var c=this.args.model.getImageOriginalWidth(i),p=this.args.model.getImageOriginalHeight(i),g=e.Common.UrlHelper.getInstance();return{imageUrl:r,mediaUrls:l.getCollection(i).map(function(e){return o.getSourceUrl(i,e,g)}),model:this.getMetadata(this.args.model.getRichImagePlayerType(i),l,c,p,i),position:s,contentId:u,logger:function(t,i,o){e.Utilities.weblog("livingimageplayer","EventType:"+LivingImage.LogLevel[t]+", message "+i+", data "+o),StoryLog.StructuredTraceTag(596476058,Diag.ULSCat.msoulscat_Story_Preview,n.livingImageLogLevelToULS(t),i,o)},manager:this.findRootVE().getLivingImageManager()}},n.livingImageLogLevelToULS=function(e){switch(e){case LivingImage.LogLevel.Error:return Diag.ULSTraceLevel.error;case LivingImage.LogLevel.Warning:return Diag.ULSTraceLevel.warning;default:return Diag.ULSTraceLevel.spam}},n.prototype.isPlaying=function(){var e=$("#livingimage_"+this.args.model.id).find("video").css("display");return!!e&&"none"!==e},n.prototype.getSourceUrl=function(e,t,i){return i.mediaUrl(StoryPageSettings.LookupId,t.getMediaId(e),t.getMediaType(e),StoryPageSettings.UseCDN)},n.prototype.getMetadata=function(e,t,n,o,r){var a=this,s=t.getCollection(r).map(function(e,t){return a.getMediaItem(e,t,r)}),l="living";switch(e){case i.RichImagePlayerType.Looping:l="cinemagraph";break;case i.RichImagePlayerType.PlayOnce:l="living";break;default:TDB.raiseRecoverableError("Unknown player type")}return{version:"2",type:l,image:{res:{width:n,height:o},mime:"image/jpeg",source:[-1]},media:s,sprite:this.getSpriteTimings(t,r)}},n.prototype.getSpriteTimings=function(e,t){for(var i=e.getCollection(t),n=0;n<i.length;n++)if("application/x-sprite"===i[n].getMediaType(t))return[i[n].spriteTimings.getCollection(t)];return[[66,132,198,264,330,396,462,528,594,660,726]]},n.prototype.getMediaItem=function(e,t,i){return{res:{width:e.getWidth(i),height:e.getHeight(i)},mime:e.getMediaType(i),source:[t]}},n.areEqual=function(e,t){return e.model===t.model},n}(t.MediaLayoutVE);t.LivingImageVideoViewVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){e.transparentWhite=new Color(255,255,255,0);var t=function(t){function n(e,i){var n=t.call(this,e,i)||this;return n.parent=e,n.imgClipPath=TDB.watcherTag(596475988,n,n,n.createImageClipPath),n}return __extends(n,t),n.prototype.PositionDivAttrArgs=function(e){var i=t.prototype.PositionDivAttrArgs.call(this,e);return i.viewBox=[0,0,this.getRawPosition().getWidth(e),this.getRawPosition().getHeight(e)].join(" "),i},n.prototype.internalsArgs=function(){return new TDB.ChildArgs(e.SvgInternalsVE,this.svgDefinition())},n.prototype.newInternalsArgs=function(){return new TDB.ChildArgs(e.SvgInternalsVE,new i(this,this._imageUrl,this._model.id+"^"))},n.prototype.getImageClipPath=function(e){return this.imgClipPath.getWatchedValue(e)},n.prototype.getImageFilterPath=function(t){var i=this._model,n=i.getFilterPath(t);return e.LayoutModelHelper.svgPathFromIPath(n,i.position,t)},n.prototype.getImageFilterColor=function(t){var i=e.ViewModel.previewVE.getPaletteColor(this._model.getFilterColorName(),t);return i||e.transparentWhite},n.prototype.getImageFilterActive=function(e){return!!this.getImageFilterColor(e).a},n.prototype.PositionDivBoxShadowArgs=function(e){return this.getImageClipPath(e).enable?null:t.prototype.PositionDivBoxShadowArgs.call(this,e)},n.prototype.createImageClipPath=function(t){var i=this._model,n=i.getPath(t);return e.LayoutModelHelper.svgPathFromIPath(n,i.position,t)},n.prototype.svgDefinition=function(){return new i(this)},n}(e.MediaLayoutVE);e.ComplexImageVEBase=t;var i=function(){function t(e,t,i){void 0===i&&(i=e._model.id),this.img=e,this.url=t,this.id=i,this.imageclippathid="clippath_"+this.id,this.filterclippathid="filterclip_"+this.id,this.multiplyfilterid="multiplyfilter_"+this.id,this.dropshadowfilterid="dropshadowfilter_"+this.id}return t.prototype.hasSvgShadow=function(e){var t=this.img.getDropShadow(e);return 0!==t.xOffset||0!==t.yOffset||t.blur>0},t.prototype.definitions=function(t){var i=[],n=this.img.getImageClipPath(t);if(n.enable&&i.push(new TDB.ChildArgs(e.SvgClipPathVE,{identifier:this.imageclippathid,path:n.path})),this.img.getImageFilterActive(t)){var o=this.img.getImageFilterPath(t);o.enable&&i.push(new TDB.ChildArgs(e.SvgClipPathVE,{identifier:this.filterclippathid,path:o.path})),i.push(new TDB.ChildArgs(e.SvgColorFilterVE,{identifier:this.multiplyfilterid,color:this.img.getImageFilterColor(t)}))}if(this.hasSvgShadow(t)){var r=this.img.getDropShadow(t);i.push(new TDB.ChildArgs(e.SvgDropShadowFilterVE,{identifier:this.dropshadowfilterid,xOffset:r.xOffset,yOffset:r.yOffset,blur:r.blur}))}return i},t.prototype.rectclippathid=function(e){return this.img.getImageClipPath(e).enable?this.imageclippathid:null},t.prototype.paths=function(t){if(!this.hasSvgShadow(t))return[];var i=this.img.getImageClipPath(t),n=this.img.getDropShadow(t);return[new TDB.ChildArgs(e.SvgPathVE,{classes:["path_shadow"],fill:n.color.toRGBAString(),path:i.path,filterid:this.dropshadowfilterid})]},t.prototype.rectangles=function(t){var i=[],n=this.img.getImagePosition(t,1),o=this.url?t.watchValue(this.url):this.img.getImageUrl(t);return this.img.getImageFilterPath(t).enable?(i.push(new TDB.ChildArgs(e.SvgImageVE,{identifier:"image_"+this.id,position:n,imageUrl:o})),i.push(new TDB.ChildArgs(e.SvgImageVE,{identifier:"filteredimage_"+this.id,position:n,imageUrl:o,clipid:this.filterclippathid,filterid:this.multiplyfilterid}))):i.push(new TDB.ChildArgs(e.SvgImageVE,{identifier:"image_"+this.id,position:n,imageUrl:o,filterid:this.img.getImageFilterActive(t)?this.multiplyfilterid:void 0})),i},t}()}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(t){function i(e){return t.call(this,e)||this}return __extends(i,t),i.prototype.errorMessageTextArgs=function(e){return Resources.RendererImageLoadingErrorMessage},i.prototype.errorMessageImageURLTextArgs=function(e){return this.parent._imageUrl.getWatchedValue(e)},i.prototype.failedImageIconAttrArgs=function(t){return{src:e.View.ViewElements.getFailedImageBase64()}},i}(TDB.FocusableViewElement);t.FailedImageVEBase=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.parent=t,n}return __extends(t,e),t.prototype.getClasses=function(t){return["imageve"].concat(e.prototype.getClasses.call(this,t))},t.prototype.PositionDivPropsArgs=function(t){var i=this.getImageUrl(t);return Obj.extend(e.prototype.PositionDivPropsArgs.call(this,t),{id:"image_"+this._model.id,src:i})},t.prototype.newImageStyleArgs=function(e){return this.PositionDivStyleArgs(e)},t.prototype.newImagePropsArgs=function(t){return Obj.extend(e.prototype.PositionDivPropsArgs.call(this,t),{src:this._imageUrl.getWatchedValue(t)})},t.prototype.getPreserveOriginalImage=function(e){return this._model.getFlags(e).has(i.LayoutFlags.ForceImageAnimation)},t}(t.MediaLayoutVE);t.ImageVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){function n(e,t){return!!(t.getPath(e)||t.getFilterColorName(e)||t.getFilterPath(e)||t.getBackgroundFilterPath(e)||t.getBackgroundPath(e))}var o=e.Model.RM,r=function(e){function r(t,i){var n=e.call(this,t)||this;return n.args=i,n}return __extends(r,e),r.prototype.getZoomState=function(e){return t.Common.LayoutUtilities.getZoomState(this,e)},r.prototype.imageArgs=function(e){return this.args.model.getRichImagePlayerType(e)!==o.RichImagePlayerType.None&&CommonSettings.LivingImageContentEnabled&&this.args.resourceFactory.loadResourceWithWatchable(12,e)?new TDB.ChildArgs(i.LivingImageVideoViewVE,this.args):n(e,this.args.model)?new TDB.ChildArgs(i.ComplexImageVE,this.args.model):new TDB.ChildArgs(i.ImageVE,this.args.model)},r.areEqual=function(e,t){return e.model===t.model},r}(TDB.FocusableViewElement);i.ImageSelectorVEBase=r,i.isComplex=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(t){function i(e,i){var n=t.call(this,e)||this;return n.urlRegex=/^https:\/\/onedrive(\.live|\.live\-int|)\.com\/.+/i,n.model=i,n}return __extends(i,t),i.prototype.playerIframeAttrArgs=function(t){var i=this.model.getUrl(t);if(!this.urlRegex.test(i))throw e.RethrowLogger.createError("OneDrive embed URL is not in the correct form: "+i);return this.model.autoplay&&(i.indexOf("?")<0?i+="?":i+="&",i+="autoplay=1"),{width:this.model.getWidth(t).toString(),height:this.model.getHeight(t).toString(),src:i}},i.prototype.canControlPlayback=function(){return!1},i.prototype.isPaused=function(){return!1},i.prototype.isPlaying=function(){return!1},i.prototype.playVideo=function(){},i.prototype.pauseVideo=function(){},i.prototype.getVideoDuration=function(){return 0},i}(TDB.ViewElement);t.OneDriveVideoPlayerVEBase=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.Model.RM,o=e.Common,r=e.View.Common,a=function(a){function s(t,i){var n=a.call(this,t,i.model)||this;return n.registered=!1,n.resourceFactory=i.resourceFactory,n.playerShowing=TDB.watchableTag(596475998,n,!1),n.player=TDB.watchableTag(596475999,n,void 0),n.focusableSurrogate=new TDB.FocusableSurrogate(n,{}),n.addFocusableChild(n.focusableSurrogate),n.playerFactory=n.constructVideoPlayerFactory(i,n.resourceFactory),n.info=n.constructContainerInfo(i),n.azureKeyHandler=n.constructKeyHandler(i,n.createKeyHandlerArgs()),n.manager=i.videoPlayerManager||e.View.ViewElements.ViewModel.getVideoPlayerManager(),n}return __extends(s,a),s.prototype.createKeyHandlerArgs=function(){var e=this;return{playerShowing:function(){return e.playerShowing.getValue()},playMedia:function(){e.playButtonClicked()},hideMedia:function(){return TDB.applyUpdate(function(){e.player.getValue()&&e.pauseVideo()})},isFullscreen:function(){return i.AzureVideoPlayerVEBase.isFullscreen()}}},s.prototype.constructKeyHandler=function(e,i){return new t.Common.VideoPlayerKeyHandler(i)},s.prototype.constructVideoPlayerFactory=function(e,i){return new t.Common.VideoPlayerFactory(i)},s.prototype.constructContainerInfo=function(e){return new r.VideoContainerInfo(this)},s.prototype.dispose=function(e){this.registered&&(this.manager.unregisterContainer(this.id),this.registered=!1),this.disposePlayer(),a.prototype.dispose.call(this,e)},s.prototype.getClasses=function(e){return["VideoLayoutPlayer"].concat(a.prototype.getClasses.call(this,e))},s.prototype.updateHidden=function(e){StoryLog.StructuredTraceTag(596476e3,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"updateHidden called",{modelId:this._model.id,hidden:e}),!e&&this._model.renderModel.graph.containsObject(this._model.id)?(this.manager.registerContainer(this.id,this),this.registered=!0):e&&(this.registered&&(this.manager.unregisterContainer(this.id),this.registered=!1),this.disposePlayer()),a.prototype.updateHidden.call(this,e)},s.prototype.onHiddenChangedUpdate=function(e){e&&this.hideVideo()},s.prototype.getWidth=function(e){var t=this.getScale(e),i=this.isCropped()?this._model.getParentContainer().position.getWidth(e):this._model.position.getWidth(e);return Math.floor(i*t)},s.prototype.getHeight=function(e){var t=this.getScale(e),i=this.isCropped()?this._model.getParentContainer().position.getHeight(e):this._model.position.getHeight(e);return Math.floor(i*t)},s.prototype.isCropped=function(){var e=this._model.getParentContainer();return this._model.getContentId()==e.getContentId()},s.prototype.getPlayerDescriptor=function(e){return this._model.getVideoPlayerDescriptor(e)},s.prototype.getPlayerType=function(e){return this._model.getVideoPlayerType(e)},s.prototype.isInModel=function(){return this._model.renderModel.graph.containsObject(this._model.id)},s.prototype.preloadPlayer=function(){var e=this;TDB.applyUpdate(function(){return e.initVideoPlayer(!1,!0)},TDB.Justification.SyncResponse),StoryLog.StructuredTraceTag(596476001,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Started preloading player",{videoId:this.getPlayerDescriptor(),playerType:n.VideoPlayerType[this.getPlayerType()]})},s.prototype.unloadPlayer=function(){this.disposePlayer()},s.prototype.disposePlayer=function(){var e=this;TDB.applyUpdate(function(){e.playerShowing.setValue(!1);var t=e.player.getValue();t&&(t.dispose(),e.player.setValue(void 0))},TDB.Justification.Dispose)},s.prototype.getClosedCaptions=function(e){return this._model.getClosedCaptionDescriptors(e)},s.prototype.playButtonClicked=function(e){var t=this.player.getValue()?"PlayerPreloaded":"NoPlayer";return this.playerShowing.getValue()&&StoryLog.StructuredTraceTag(596476002,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.error,"Play button clicked when it shouldn't have been shown (playerShowing is true)",{videoId:this.getPlayerDescriptor(),playerType:n.VideoPlayerType[this.getPlayerType()]}),this.playVideo(),StoryLog.StructuredTraceTag(16823564,Diag.ULSCat.msoulscat_Story_AddContent,Diag.ULSTraceLevel.info,"Video play button clicked",{videoId:this.getPlayerDescriptor(),height:this.getHeight(void 0).toString(),width:this.getWidth(void 0).toString(),playerType:n.VideoPlayerType[this.getPlayerType()],playerState:t}),TDB.EventPropagation.Bypass},s.prototype.hideVideo=function(){this.isFocusUnder()&&this.setFocus(),this.playerShowing.setValue(!1)},s.prototype.VideoArgs=function(e){var t=this;this._model.getVideoPlayerType(e),this._model.getVideoPlayerDescriptor(e),this._model.getClosedCaptionDescriptors(e);var i=this.player.getWatchedValue(e);if(i){var n=this.getPlayer();return n!==i&&platform.setImmediate(function(){TDB.applyUpdate(function(){t.player.setValue(n),t.playerShowing.setValue(!1)})}),n}},s.prototype.ThumbnailImgAttrArgs=function(e){var t={};return t.alt=this.getAltText(e),t.src=this.getImageUrl(e),t},s.prototype.videoPlaceholderStyleArgs=function(e){var t={display:"block"};return e.watchValue(this.playerShowing)&&(t.display="none"),t},s.prototype.videoContainerStyleArgs=function(e){var t={display:"block",position:"absolute",zIndex:"1",visibility:"inherit"};return e.watchValue(this.playerShowing)||(t["z-index"]="-1",t.visibility="hidden"),t},s.prototype.ThumbnailImgStyleArgs=function(t){var i={display:this.playerShowing.getWatchedValue(t)?"none":void 0};if(this.isCropped()){var n=this.getRawPosition(),o=this.getScale(t);i.left=e.Utilities.cvtServerToPxStr(o,n.getLeft(t)),i.top=e.Utilities.cvtServerToPxStr(o,n.getTop(t))}return i},s.prototype.getOfflinePlayButtonArgs=function(){return{buttonId:ClientAction.ButtonId.Video_Play,enabled:{value:!1},context:this,cssClass:{value:"VideoLayoutPlayButton"},description:{value:Resources.OfflinePlayButtonDescription},fontIconName:{value:FontIcons.PlayMediaButtonIcon},fontIconSizeClass:FontIcons.PlayMediaButtonIconSize}},s.prototype.getOnlinePlayButtonArgs=function(t){var i;if(this.isCropped()){var n=this.getScale(t);i={left:e.Utilities.toPxStr(e.Utilities.cvtServerToPx(n,this._model.getParentContainer().position.getWidth()/2)-36),top:e.Utilities.toPxStr(e.Utilities.cvtServerToPx(n,this._model.getParentContainer().position.getHeight()/2)-36)}}return{buttonId:ClientAction.ButtonId.Video_Play,click:this.playButtonClicked,context:this,cssClass:{value:"VideoLayoutPlayButton"},description:{value:Resources.PlayButtonDescription},fontIconName:{value:FontIcons.PlayMediaButtonIcon},fontIconSizeClass:FontIcons.PlayMediaButtonIconSize,style:i}},s.prototype.PlayButtonArgs=function(e){if(!this.playerShowing.getWatchedValue(e)){var t=o.Environment.getInstance().isClientOnline(e)?this.getOnlinePlayButtonArgs(e):this.getOfflinePlayButtonArgs();return new TDB.ChildArgs(i.GlyphButtonVE,t)}},s.prototype.initVideoPlayer=function(e,t){this.player.setValue(this.getPlayer(e,t))},s.prototype.getPlayer=function(e,t,i){var o=this,r=this.info.updateParams(),a=this.player.getValue(),s=this.getPlayerType();return a&&!r||s===n.VideoPlayerType.UnknownValue?a:this.playerFactory.createVideoPlayer(this,{getWidth:function(e){return o.getWidth(e)},getHeight:function(e){return o.getHeight(e)},getVideoId:function(e){return o.getPlayerDescriptor(e)},getClosedCaptions:function(e){return o.getClosedCaptions(e)},videoType:s,autoplay:e,onReady:function(){i&&i()},onPlaying:function(){return o.onVideoPlaying()},onPaused:function(){return o.onVideoPaused()},onLoadingError:function(){TDB.applyUpdate(function(){return o.playerShowing.setValue(!1)})},silentFailure:t,analyticsLogger:this.findRootVE().analyticsLogger})},s.prototype.PlayerPositionDivStyleArgs=function(t){var i=this.PositionDivStyleArgs(t);if(this.isCropped()){var n=this.getRawPosition(),o=this.getScale(t);i.left=e.Utilities.cvtServerToPxStr(o,-n.getLeft(t)),i.top=e.Utilities.cvtServerToPxStr(o,-n.getTop(t))}else i.left="0px",i.top="0px";return i.transform="",i["-webkit-transform"]="translate3d(0,0,0)",i},s.prototype.FocusableInitArgs=function(){return{surrogate:this.focusableSurrogate}},s.prototype.setFocus=function(){this.focusableSurrogate.setFocus()},s.prototype.cull=function(){this.player.getValue()||a.prototype.cull.call(this)},s.prototype.onVideoPlaying=function(){if(this.getPlayerType()!==n.VideoPlayerType.Azure){var e=this.findRootVE();e.pauseAutoPlayIfActive(t.Common.AutoPlayPauseType.VideoPlayed),e.analyticsLogger.onMediaPlayed(this.id,this.player.getValue().getVideoDuration(),this.player.getValue().canControlPlayback())}this.manager.notifyVideoPlaying(this.id,this.player.getValue().canControlPlayback())},s.prototype.onVideoPaused=function(){if(this.getPlayerType()!==n.VideoPlayerType.Azure){var e=this.player.getValue()?this.player.getValue().getVideoDuration():0,t=!!this.player.getValue()&&this.player.getValue().canControlPlayback();this.findRootVE().analyticsLogger.onMediaPaused(this.id,e,t)}this.manager.notifyVideoPaused(this.id)},s.prototype.pauseVideo=function(){var e=this.player.getValue();e&&(e.canControlPlayback()?e.pauseVideo():this.disposePlayer(),this.onVideoPaused())},s.prototype.isPaused=function(){var e=this.player.getValue();return!!e&&e.isPaused()},s.prototype.isPlaying=function(){var e=this.player.getValue();return!!e&&e.isPlaying()},s.prototype.playVideo=function(){var e=this,t=this.playerShowing.getValue();t||i.ViewModel.deselectElements(),TDB.applyUpdate(function(){t||(e.playerShowing.setValue(!0),e.setFocus()),e.player.getValue()?e.player.getValue().playVideo():e.initVideoPlayer(!0,!1),e.onVideoPlaying()},TDB.Justification.SynchronousBrowserEvent)},s.prototype.keyDown=function(e){return this.azureKeyHandler.handleKeyEvent(e)},s.prototype.getFocusableSurrogate=function(){return this.focusableSurrogate},s.areEqual=function(e,t){return e.model===t.model},s}(i.MediaLayoutVE);i.VideoLayoutVEBase=a}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){!function(e){function t(e){return e?"color_"+e:""}function i(e){return e?"color_"+e+"Bg":""}function n(e){return e?"color_"+e+"Bd":""}function o(e){return e?"font_"+e:""}function r(e){if(!e)return"";var t=parseInt(e.substr(1,2),16);return"rgba("+parseInt(e.substr(3,2),16)+", "+parseInt(e.substr(5,2),16)+", "+parseInt(e.substr(7,2),16)+", "+t/255+")"}e.getColor=t,e.getColorBg=i,e.getColorBd=n,e.getFont=o,e.getARGB=r}(e.LayoutCssClasses||(e.LayoutCssClasses={}))}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM;!function(n){function o(){return{enable:!1,viewbox:"0 0 100 100",path:"m 0 0",strokeWidth:0,info:"none"}}function r(e,t,i){return e?n.getSvgPath(e.getPathType(i),e.getValues(i),e.getStrokeWidth(i),t.getWidth(i),t.getHeight(i)):n.singletonDefaultShape}function a(e,t,r,a,s){if(void 0===e||e!==i.PathType.Ellipse&&!t||!a||!s)return n.singletonDefaultShape;var l=o();l.enable=!0,l.info=i.PathType[e],l.strokeWidth=r;var u=a/100,d=s/100;l.viewbox="0 0 "+a+" "+s;var c;switch(e){case i.PathType.Polygon:if((c=t.match(/[^\s,]+/g))&&c.length%2!=1){var p=c.map(function(e,t){return Math.min(Math.max(parseFloat(e),0),100)*(1&t?d:u)}),g=!1;p.forEach(function(e,t){isNaN(e)&&(g=!0)}),l.path=g?"m 0 0":"M "+p.slice(0,2).join(" ")+" L "+p.slice(2).join(" ")+" z"}else l.path="m 0 0";break;case i.PathType.Ellipse:var h=a/2,y=s/2;l.path=["M",h,0,"A",h,y,0,0,0,h,s,h,y,0,0,0,h,0,"z"].join(" ");break;case i.PathType.RoundedRect:var m=parseFloat(t);m=Math.min(m,a/2,s/2),l.path=!m||m<=0?"m 0 0":["M",0,m,"A",m,m,0,0,1,m,0,"L",a-m,0,"A",m,m,0,0,1,a,m,"L",a,s-m,"A",m,m,0,0,1,a-m,s,"L",m,s,"A",m,m,0,0,1,0,s-m,"z"].join(" ");break;case i.PathType.SvgPath:for(var f=[],v=(c=t.match(/[\-0-9\.e]+|[mzlhvcsqta]/gi)).length,S=[],w="z",T=0;T<v;++T){var C=c[T];if(isNaN(parseFloat(C)))w=C,f.push(w);else{if(!/[mlhvcsqta]/i.test(w)){f.push("m"),f.push("0"),f.push("0");break}--T}switch(w.toLowerCase()){case"h":S=[u];break;case"v":S=[d];break;case"m":case"l":case"t":S=[u,d];break;case"q":case"s":S=[u,d,u,d];break;case"c":S=[u,d,u,d,u,d];break;case"a":S=[u,d,1,1,1,u,d];break;default:S=[]}for(var _=S.length,b=0;b<_;++b)f.push(parseFloat(c[T+1+b])*S[b]);T+=_}l.path=f.join(" ")}return l}function s(i,n){var o=[];t.BackgroundModelHelper.hasBackgroundFillClass(i,n)&&o.push(t.BackgroundModelHelper.getFillColorClass(i,n)),o.push(l(i,n));var r=i.getFlags(n);r.has(e.Model.RM.LayoutFlags.Button)&&o.push(e.View.ViewElements.renderButtonClass);var a=r.has(e.Model.RM.LayoutFlags.ChunkedScroller);return a&&o.push(e.View.ViewElements.chunkedScrollerClass),r.has(e.Model.RM.LayoutFlags.ScrollableX|e.Model.RM.LayoutFlags.ScrollableY)&&!a?(o.push(e.View.ViewElements.horizontalVerticalScrollClass),o.push(t.LayoutVE.FocusableClass)):r.has(e.Model.RM.LayoutFlags.ScrollableY)&&!a?(o.push(e.View.ViewElements.verticalScrollClass),o.push(t.LayoutVE.FocusableClass)):r.has(e.Model.RM.LayoutFlags.ScrollableX)&&!a&&(o.push(e.View.ViewElements.horizontalScrollClass),o.push(t.LayoutVE.FocusableClass)),o}function l(e,t){var n=e.getCursor(t);return n!==i.Cursor.Default?"cursor"+i.Cursor[n]:""}n.getDefaultShape=o,n.singletonDefaultShape=o(),n.svgPathFromIPath=r,n.getSvgPath=a,n.getClasses=s}(t.LayoutModelHelper||(t.LayoutModelHelper={}))}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t;!function(e){e[e.notStarted=0]="notStarted",e[e.loading=1]="loading",e[e.done=2]="done",e[e.failed=3]="failed"}(t||(t={}));var i=function(){function e(e){this.currentStory=e,this.loadedData=TDB.watchableTag(596449249,this,""),this.state=t.notStarted}return e.prototype.getLayout=function(e){var i=this;if(this.state===t.notStarted){var n=platform.now();this.state=t.loading,this.currentStory.getLayoutV2().then(function(e){console.log("Network request for layout html took "+(platform.now()-n)),i.state=t.done,TDB.applyUpdate(function(){i.loadedData.setValue(e)})},function(e){i.state=t.failed})}return this.loadedData.getWatchedValue(e)},e}();e.LayoutV2Loader=i}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){!function(i){function n(e,t){var i=e.getBackgroundImage(t).getFilename(t);return CommonSettings.ContentBaseUrl+i}function o(e,t){switch(e.getBackgroundImage(t).getTiling(t)){case g.ImageTiling.Both:return"repeat";case g.ImageTiling.Vertical:return"repeat-y";case g.ImageTiling.Horizontal:return"repeat-x";default:return"no-repeat"}}function r(e,i){var o=n(e,i);return i.watchValue(t.BackgroundImageSizes.getImageSize(o))}function a(e,i){var n=e.getBackgroundPath(i);return t.LayoutModelHelper.svgPathFromIPath(n,e.position,i)}function s(i,r,a){var s={backgroundImage:"",backgroundPosition:"",backgroundSize:"",backgroundRepeat:"",backgroundColor:""},d=Modernizr.prefixed("transformOrigin");switch(s[d]="",l(i,a)){case t.BackgroundType.Image:var c=p(i,a,r);s.backgroundImage='url("'+n(i,a)+'")',s.backgroundPosition=e.Utilities.toPxStr(c.left)+" "+e.Utilities.toPxStr(c.top),s.backgroundSize=e.Utilities.toPxStr(c.width)+" "+e.Utilities.toPxStr(c.height),s.backgroundRepeat=o(i,a),s.backgroundColor=u(i,a);break;case t.BackgroundType.Color:s.backgroundColor=u(i,a)}var g=i.getTransformOrigin(a);if(g){var h=Math.round(100*g.getX(a)),y=Math.round(100*g.getY(a));50===h&&50===y||(s[d]=h+"% "+y+"%")}return s}function l(i,n){var o=i.getBackgroundImage(n);return o?e.View.ViewElements.ImageNameToFontIconMapping[o.getName(n)]?t.BackgroundType.FontIcon:t.BackgroundType.Image:a(i,n).enable?t.BackgroundType.Shape:i.getFillColorName(n)||i.getFillColorOverride(n)?t.BackgroundType.Color:t.BackgroundType.None}function u(e,i){var n=e.getFillColorOverride(i);if(""!==n)return new Color(n).toRGBAString();var o=t.ViewModel.previewVE.getPaletteColor(e.getFillColorName(),i);if(o)return o=o.clone(),-1!==e.getFillOpacityOverride(i)&&(o.a=e.getFillOpacityOverride(i)),o.toRGBAString()}function d(e,i){return l(e,i)===t.BackgroundType.Color&&-1===e.getFillOpacityOverride(i)}function c(e,i){var n=e.getFillColorName(i);return n&&n.length?t.LayoutCssClasses.getColorBg(n):""}function p(t,i,n){var o=t.position,a=o.getWidth(i),s=o.getHeight(i),l=r(t,i),u=l.w,d=l.h;if(u<=0||d<=0)throw e.RethrowLogger.createError("imageWidth and imageHeight both should > 0");if(a<0||s<0)throw e.RethrowLogger.createError("containerWidth and containerHeight both should be >= 0");if(0==a||0==s)return new BaseRect(0,0,0,0);var c,p,h=u/d,y=a/s,m=0,f=0,v=t.getBackgroundImage(i).getFillStyle(i),S=t.getBackgroundImage(i).getHorizontalAlignment(i),w=t.getBackgroundImage(i).getVerticalAlignment(i);switch(v){case g.ImageFillStyle.None:c=u,p=d;break;case g.ImageFillStyle.FillHorizontal:c=a,p=d*a/u;break;case g.ImageFillStyle.FillVertical:p=s,c=u*s/d;break;case g.ImageFillStyle.Fill:h<y?(c=a,p=d*a/u):(p=s,c=u*s/d);break;case g.ImageFillStyle.Fit:h>y?(c=a,p=d*a/u):(p=s,c=u*s/d);break;case g.ImageFillStyle.Stretch:c=a,p=s;break;default:throw e.RethrowLogger.createError("Unsupported value of imageFillStyle")}var T;switch(S){case g.Alignment.Near:T=0;break;case g.Alignment.Center:T=(a-c)/2;break;case g.Alignment.Far:T=a-c;break;default:throw e.RethrowLogger.createError("Unsupported value for horizontalAlignment")}m+=T;var C;switch(w){case g.Alignment.Near:C=0;break;case g.Alignment.Center:C=(s-p)/2;break;case g.Alignment.Far:C=s-p;break;default:throw e.RethrowLogger.createError("Unsupported value for horizontalAlignment")}return f+=C,new BaseRect(e.Utilities.cvtServerToPx(n,m),e.Utilities.cvtServerToPx(n,f),e.Utilities.cvtServerToPx(n,c),e.Utilities.cvtServerToPx(n,p))}var g=e.Model.RM;i.getBackgroundImageRepeat=o,i.getBackgroundSvgShape=a,i.getBackgroundStyle=s,i.getBackgroundType=l,i.hasBackgroundFillClass=d,i.getFillColorClass=c}(t.BackgroundModelHelper||(t.BackgroundModelHelper={}))}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(){function t(e){this.fullscreenEvents="fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",this._isFullScreen=TDB.watchableTag(596476059,this,!1),this._canAppFullscreen=e,this.setupFullScreenEvents()}return t.prototype.isExternalElement=function(e){return e instanceof HTMLIFrameElement||e instanceof HTMLDivElement&&(e.className.indexOf("vjs")>-1||e.className.indexOf("azuremediaplayer")>-1)},t.prototype.setupFullScreenEvents=function(){var t=this;this.fullscreenEventHandler=function(i){var n=document,o=!!(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement);if(o)if(i.srcElement instanceof Document){var r=i.srcElement;t._isExternalFullScreen=t.isExternalElement(r.activeElement)}else if(i.currentTarget instanceof Document){var a=i.currentTarget;t._isExternalFullScreen=t.isExternalElement(a.activeElement)||a.activeElement instanceof HTMLVideoElement&&a.activeElement.className.indexOf("vjs")>-1||i.srcElement instanceof HTMLDivElement&&i.srcElement.className.indexOf("azuremediaplayer")>-1}else t._isExternalFullScreen=t.isExternalElement(i.srcElement);else t._isExternalFullScreen=!1;if(TDB.applyUpdate(function(){t._isFullScreen.setValue(o)}),e.Utilities.browser.isWebkit){var s=$("#storyroot")[0];if(s){var l=s.style.position;s.style.position="static",s.clientTop,s.style.position=l}}},$(document).on(this.fullscreenEvents,this.fullscreenEventHandler)},t.prototype.dispose=function(){this.fullscreenEventHandler&&$(document).off(this.fullscreenEvents,this.fullscreenEventHandler)},t.prototype.isExternalFullScreen=function(){return this._isExternalFullScreen||this.isExternalElement(document.webkitFullscreenElement)},t.prototype.isFullscreen=function(e){return this._isFullScreen.getWatchedValue(e)},t.prototype.isFullscreenEnabled=function(){var e=document.documentElement,t=document;return e.requestFullscreen?t.fullscreenEnabled:e.webkitRequestFullscreen?t.webkitFullscreenEnabled:e.mozRequestFullScreen?t.mozFullScreenEnabled:!!e.msRequestFullscreen&&t.msFullscreenEnabled},t.prototype.requestFullScreen=function(){var e=document.documentElement.querySelector(".page-root");e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},t.prototype.exitFullScreen=function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},t.prototype.toggleFullscreen=function(){var e=this._isFullScreen,t=!e.getValue();t?this.requestFullScreen():this.exitFullScreen(),TDB.applyUpdate(function(){e.setValue(t)})},t.prototype.canToggleFullscreen=function(e){return void 0===e&&(e=null),this.isFullscreenEnabled()&&this._canAppFullscreen.getWatchedValue(e)},t}();t.FullScreenManager=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(n){function o(t,i){var o=n.call(this,t,TDB.ControlSetFeatures.Isolated)||this;return o._root=TDB.watcherTag(596476044,o,o,o.createRootVE),o.colorStyle=new e.Utilities.DynamicStyle(o),o.fontFaces=new e.Utilities.DynamicStyle(o),o.textStyles=new e.Utilities.EditableDynamicStyle(o),o.args=i,o.currentStory=i.currentStory,o.paletteColors=TDB.watcherTag(596476045,o,o,o.computePaletteColors),o.gotoHashTargetEnabled=!0,o}return __extends(o,n),o.prototype.getRootVE=function(){return this._root.getValue()},o.prototype.getStyleId=function(e){return this.currentStory.getRenderModel(e).getLayoutStyleId(e)},o.prototype.onHashChanged=function(e){this._root.getValue().onHashChanged(e)},o.prototype.onPopState=function(e){this._root.getValue().onPopState(e)},o.prototype.getWidth=function(e){return this.parent.getPreviewWidth(e)},o.prototype.getHeight=function(e){return this.parent.getPreviewHeight(e)},o.prototype.getLayoutTree=function(e){var t=this.currentStory.getRenderModel(e).layoutTrees.getCollection(e);return t.length>0?t[0]:null},o.prototype.mouseClicked=function(e){var i=e.srcElement||e.target,o=TDB.ViewElement.dataFor(i);return o&&o.findParent(t.RegionLayoutVE)||n.prototype.mouseClicked.call(this,e),TDB.EventPropagation.Bubble},o.prototype.getPaletteColor=function(e,t){return this.paletteColors.getWatchedValue(t)[e]},o.prototype.canActivate=function(){return!this.parent.authoringPaneOpen.getValue()||!this.parent.isEditMode.getValue()},o.prototype.computePaletteColors=function(e){var t=this.currentStory.getRenderModel(e);if(!t)return{};var i=t.getPaletteColors(e).getCollection(e);return ArrayExtensions.toDictionary(i,function(t,i){var n=t.getId(e),o=new Color(t.getValue(e));i[n]=o})},o.prototype.updatePaletteColors=function(e){this.colorStyle.define(this.paletteColorFactory.bind(this,e))},o.prototype.paletteColorFactory=function(e,t){var i=this.paletteColors.getWatchedValue(e);for(var n in i){var o=i[n].toRGBAString();t.rule("#storyroot .color_{0}Bg { background-color: {1}; fill: {1}; stroke: {1}; }",n,o),t.rule("#storyroot .color_{0}Bd { border-color: {1}; fill: {1}; stroke: {1}; }",n,o),t.rule("#storyroot .color_{0} { color: {1}; }",n,o)}},o.prototype.updateFontFaces=function(t){var i=this;this.fontFaces.define(this.fontFaceFactory.bind(this,t)),TDB.applyUpdate(function(){return e.View.Common.currentFontLoader().get(i.pageId).notifyFontChange()},TDB.Justification.TextMeasurement)},o.prototype.fontFaceFactory=function(n,r){var a={};o.getTextStylesFromRootVE(this._root,n).forEach(function(s){var l=i.FontStyle[s.getDefinedStyle(n)].toLowerCase(),u=t.TextUtilities.toCSSFontWeight(s.getDefinedWeight(n)).toString(),d=t.TextUtilities.getFontFaceUrl(s.getFileName(n)),c=t.TextUtilities.getFontFamilyForTextStyle(s,n),p=e.Utilities.formatString(o.fontFaceRuleTemplate,[c,d,u,l]);a[p]||(a[p]=!0,r.rule(p))},n)},o.prototype.updateTextStyles=function(e){this.textStyles.define(this.textStyleFactory.bind(this,e))},o.prototype.textStyleFactory=function(n,r){var a=this;o.getTextStylesFromRootVE(this._root,n).forEach(function(s){var l=s.getId(n),u=i.FontStyle[s.getStyle(n)].toLowerCase(),d=t.TextUtilities.toCSSFontWeight(s.getWeight(n)).toString();if("Fallback"!==l.substr(0,8)){var c=i.TextDirection.LeftToRight,p=e.Utilities.toPxStr(UX.getAdjustedFontSize(s.getSize(n))),g=t.TextUtilities.toCSSTextAlignment(s.getTextAlignment(n),c),h=e.Utilities.toPxStr(s.getTracking(n)),y=t.TextUtilities.buildFamilyFallbackChain(s,a.pageId,n);r.rule(o.styleRule,l,y,p,d,u,g,h)}},n)},o.getTextStylesFromRootVE=function(e,t){if(!e)return[];var i=e.getWatchedValue(t);if(!i)return[];var n=i.currentLayoutTree(t);return n?n.getTextStyles(t).getCollection(t):[]},o.prototype.rootArgs=function(){return this._root},o.prototype.createRootVE=function(i){var n=this,o=null;return e.Utilities.checkDebugState(e.Utilities.DebugState.None)?(StoryPerformance.PerformanceManager.getInstance().measurePerformance("createRootVE:PreviewVE",function(){n.currentStory.getRenderModel(i);var e={currentStory:n.currentStory,enabled:{watchable:n.args.isRenderRootEnabled},activityMonitor:t.DomEventRegister.getInstance().getActivityMonitor(),autoPlayDriver:n.args.autoPlayDriver,sharingManager:n.args.sharingManager,resourceFactory:n.args.resourceFactory,storyPage:n.parent,isAnimationsDisabled:n.args.isAnimationsDisabled,historyClientId:n.args.historyClientId,storylineVisible:n.args.storylineVisible};(o=new t.RootVE(n,e)).gotoHashTargetEnabled=n.gotoHashTargetEnabled,n.gotoHashTargetEnabled=!1,n.currentStory.renderModelOverriden(i)||o.setRestoreState(n.restoreState),n.restoreState=null}),o):o},o.prototype.debugArgs=function(){},o.prototype.getDebug=function(){return this.debug},o.prototype.clearRestoreState=function(){this.restoreState=void 0},o.prototype.setRestoreState=function(){this.restoreState||(this.restoreState=t.RestoreState.createRestoreState(this._root.getValue()),this._root.getValue().setRestoreState(this.restoreState))},o.prototype.poweredByWrapperArgs=function(i){if(e.Common.Branding.poweredByButtonVisible()&&"VerticalWorld"===this.parent.getWorldId(i)&&i.watchValue(this.parent.isEditMode))return new TDB.ChildArgsNoModel(t.PoweredBySwayWrapperVE)},o.prototype.clearActiveElement=function(){this.activeElement=void 0},o.prototype.handleKeyEvent=function(i,o){if(i.keyCode===KeyCodeType.TabKey){if(!i.altKey&&!i.ctrlKey&&!i.metaKey){var r=e.Utilities.getDocumentActiveElement(),a=TDB.ViewElement.dataFor(r);a&&a.findParent(t.RegionLayoutVE)||(this.activeElement=r,this.focusActiveElement())}return TDB.EventPropagation.Bypass}return n.prototype.handleKeyEvent.call(this,i,o)},o.prototype.onEntering=function(){n.prototype.onEntering.call(this),this.parent.isEditMode.getValue()||this.focusActiveElement()},o.prototype.focusActiveElement=function(){var e=TDB.ViewElement.dataFor(this.activeElement);if(e){this.activeElement.focus();var i=e;if(i.parent&&i.parent.keyframeType===o.buttonContainerKeyframeType)return;var n=this._root.getValue(),r=t.NavigationHelper.findParentLayoutElementVE(e),a=r?r.getRelatedLayoutElement():void 0;t.NavigationHelper.scrollTo(n,{layoutElement:a,layoutElementVE:r,subElement:this.activeElement,scrollIfNeeded:!0})}},o.prototype.updateActiveChild=function(e,t,i){return!(!TDB.ViewElement.dataFor(this.activeElement)||this.parent.isEditMode.getValue())||n.prototype.updateActiveChild.call(this,e,t,i)},o.prototype.containsRegions=function(){return!0},o.prototype.getOrder=function(){return t.RegionOrderIndex.Preview},o.prototype.onChildActiveStateChanged=function(e,i){var o=!!e.firstOrDefault(function(e){return e instanceof t.RegionLayoutVE});n.prototype.onChildActiveStateChanged.call(this,e,i,o)},o.prototype.getNavigationSyncManager=function(){return this.args.navigationSyncManager},o.buttonContainerKeyframeType="Navigation Button Container",o.fontFaceRuleTemplate='@font-face {\n\t\t\tfont-family: "{0}";\n\t\t\tsrc: {1};\n\t\t\tfont-weight: {2};\n\t\t\tfont-style: {3};\n\t\t}',o.styleRule=".{0} {\n\t\t\tfont-family: {1};\n\t\t\tfont-size: {2};\n\t\t\tfont-weight: {3};\n\t\t\tfont-style: {4};\n\t\t\ttext-align: {5};\n\t\t\tletter-spacing: {6};\n\t\t}",o}(t.RegionViewElement);t.PreviewVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(i){function n(e,t){var n=i.call(this,e,t.model)||this;return n.parent=e,n._model=t.model,n.resourceFactory=t.resourceFactory,n}return __extends(n,i),n.prototype.PositionDivStyleArgs=function(t){var i=this.getScale(t),n=this._model.getZOrder(t),o=e.Utilities.cvtServerToPxStr(i,.5*this._model.position.getWidth(t));return{padding:e.Utilities.cvtServerToPxStr(i,.5*this._model.position.getHeight(t))+" "+o,zIndex:0===n?"":n.toString()}},n.prototype.scenegraphArgs=function(e){var i=this._model.getScene3D(e);return t.createSceneGraphVE(i,this.resourceFactory)},n.areEqual=function(e,t){return e.model===t.model},n}(t.LayoutVE);t.ProjectionVEBase=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){function n(e){var t=e.layoutTrees.getCollection().firstOrDefault();if(t)return t.getDevice()}function o(e){var t=[];return e.cullable&&t.push(e),t.concat(e.children.mapmany(o))}function r(e,t){var i=[];if(t.cullable){if(e.isCulled(t.id))return i;i.push(t)}return i.concat(t.children.mapmany(function(t){return r(e,t)}))}var a=e.AnimationHelper,s=e.Model.RM,l=e.AnimationManager,u=t.Common.FRE,d=e.Model.RM.StateBehaviors,c=e.Common;i.rootKeyframeTypes=["Story","Home"],i.targetDevice=n;var p=function(p){function g(e,t){var i=p.call(this,e,{features:TDB.ControlSetFeatures.Isolated|TDB.ControlSetFeatures.TabInto})||this;return i.parent=e,i.args=t,i.visibleCullableElements=[],i.viewportChangeHandlers=[],i.scrollVisibleManagers=[],i.edgeFollowedListeners={},i.renderModelSerialNumber=0,i.storylineVisible=t.storylineVisible,i.setup(e,t.currentStory),i}return __extends(g,p),g.prototype.setup=function(n,o){var r=this,a=n.getPageId();StoryLog.BufferedTraceTag(596444810,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"RootVEBase::setup start",{pageId:a}),this.tabIndex=g.tabIndex,this.focusableSurrogate=new TDB.FocusableSurrogate(this,{getTabIndex:this.getTabIndex}),this.addFocusableChild(this.focusableSurrogate),this._currentStory=o,this.lastWorldId=this.getCurrentWorldId(),this.currentViewMode=StoryPageSettings.Mode,this._layout=TDB.watcherTag(596476036,this,this,this.updateLayout),this.scroller=TDB.watcherTag(596476037,this,this,this.findScrollable),this.mainviewport=TDB.watcherTag(596476038,this,this,this.computeMainViewport),StoryLog.BufferedTraceTag(596444811,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"RootVEBase::setup Setting up Analytics",{pageId:a});var s={lookupId:o.getLookupId(),isEditMode:StoryPageSettings.IsAnAuthorOfThisSway,activityMonitor:this.args.activityMonitor,keyFrames:this.getKeyframes(),analyticsUploadEnabled:CommonSettings.ConsumerAnalyticsEnabled,periodicUploadInterval:CommonSettings.ConsumerAnalyticsPeriodicUploadIntervalTimespanMilliseconds,dialogManager:e.View.Common.DialogManager.getInstance(),now:Date.now,setInterval:setInterval.bind(window),clearInterval:clearInterval.bind(window)};this.analyticsLogger=new e.Analytics.AnalyticsLogger(s);var u=this.constructExternalActionsProviders(a);this._interactionEngine=new i.InteractionEngine(null,{getInteractionModel:this.getInteractionModel.bind(this),cameraMoved:this.changed.bind(this),allowTouch:this.shouldTouchBeEnabled.bind(this),scrollable:this.scroller,editMode:this.parent.parent.isEditMode.getValue(),embedHostMode:this.parent.parent.inEmbedHostMode,isAnimationsDisabled:this.args.isAnimationsDisabled,externalActionMap:u},this.pageId),this.addEdgeFollowedListener(this._interactionEngine.onTransitionCompleted.bind(this._interactionEngine)),this.addEdgeFollowedListener(i.ViewModel.interactionlogger.edgeFollowed.bind(i.ViewModel.interactionlogger)),this._interactionEngine.getAnimationEngine().addCameraListener(this),this.parent.parent.addClientSignalListener(this),this.restoreState=null,this.textStyles=TDB.watcherTag(596476039,this,this,this.createTextStyleMap),this.registerShortcut(t.Common.autoPlayShortcutIdentifiers,this.getAutoPlayDriver()),this.addResource(e.Utilities.onResize(function(){return r.pauseAutoPlayIfActive(t.Common.AutoPlayPauseType.WindowResize)},this)),this.animationUpdater=new e.AnimationManager.AnimationUpdater(this),this.animations=new l.RootView(this,this.getModelViewports.bind(this),this.animationUpdater,this.pageId),this.is3DWorldWatcher=TDB.watcherTag(596476040,this,this,this.calculateIs3DWorld),this.cullingRootWatcher=TDB.watcherTag(596476041,this,this,this.calculateCullingRoot),this.isDefaultInputTarget=!0,this.blockUpdateBindings=!1,this.historian=i.FsmHistorian.makeHistorian(this,function(e){return r.fetchFSMNode(e)},function(e,t){return!!r.fetchFSMNode(e)&&i.NavigationManager.navigateTo(r,t,{snapScene:!0,refreshNodes:!0})},window.history,function(){return e.View.ViewElements.ViewModel},this.args.historyClientId),t.Common.IframeLoadingManager.getInstance().setRoot(this),i.ViewModel.getVideoPlayerManager().setRoot(this),this.dynamicFocusListener=new i.DynamicFocusListener,this.subscribeToViewportChange(t.Common.ImageRequestManager.getInstance()),CommonSettings.SettingSite_IframeVelumEnabled&&this.subscribeToViewportChange(t.Common.IframeVelumManager.getInstance()),this.navigationSyncManager=this.parent.getNavigationSyncManager(),t.Common.LoadGenerator.shouldGenerateLoad(Math.random,CommonSettings)&&(this.loadGenerator=new t.Common.LoadGenerator(function(){return t.Common.ImageRequestManager.getInstance().imagesPendingLoad()},function(){return r.args.activityMonitor.getActivityFreshness()})),StoryLog.BufferedTraceTag(596444812,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"RootVEBase::setup end",{pageId:a})},g.prototype.getInteractionEngine=function(){return this._interactionEngine},g.prototype.getStoryPage=function(){return this.args.storyPage.getViewElement()},g.prototype.getSharingManager=function(){return this.args.sharingManager},g.prototype.getRenderModelSerialNumber=function(){return this.renderModelSerialNumber},g.prototype.scrollToPreviewTarget=function(e){this.navigationSyncManager&&this.navigationSyncManager.navigationSyncPreview(e)},g.prototype.getRootKeyframeProperties=function(){var t=this.getInteractionModel();return t?e.AnimationHelper.getKeyframeProperties(t.keyFrames.getCollection().firstOrDefault(function(e){return ArrayExtensions.contains(i.rootKeyframeTypes,e.getType())})):void 0},g.prototype.updateActiveChild=function(e,t,i){return TDB.FocusableViewElement.getFocusedElement()===this||p.prototype.updateActiveChild.call(this,e,t,i)},g.prototype.FocusableInitArgs=function(){return{surrogate:this.focusableSurrogate}},g.prototype.getTraveler=function(){return this.traveler},g.prototype.getRestoreState=function(){return this.restoreState},g.prototype.setRestoreState=function(e){this.restoreState=e},g.prototype.initializeTraveler=function(e){!e&&this.traveler&&(e=this.traveler.getKeyframeData()),this.traveler=new i.KeyframeTraveler(this.getKeyframes(),e,i.ViewModel.scrollPositionlogger.recordConsumptionChange.bind(i.ViewModel.scrollPositionlogger),i.ViewModel.isEditMode.getValue())},g.prototype.createTextStyleMap=function(e){return ArrayExtensions.toDictionary(this.currentLayoutTree(e).getTextStyles(e).getCollection(e),function(t,i){i[t.getId(e)]=t})},g.prototype.fetchTextStyle=function(t,i){var n=this.textStyles.getWatchedValue(i)[t];if(!n)throw e.RethrowLogger.createError("unknown text style id: "+t);return n},g.prototype.getScrollOffset=function(e){var t=this.scroller.getValue();return t?t.fetchClientScrollValues()[e]:0},g.prototype.currentLayoutTree=function(e){return this._layout.getWatchedValue(e)},g.prototype.getWidth=function(e){return this.parent.getWidth(e)},g.prototype.getHeight=function(e){return this.parent.getHeight(e)},g.prototype.getLayout=function(e){return this._layout.getWatchedValue(e)},g.prototype.validateLayoutTree=function(t){if(this._currentStory.shouldValidateLayout()){this._currentStory.onLayoutValidating();var n=this.getLayout(t);if(!n||n.getLayoutFailed(t)){var o=n?n.getErrorMessage(t):Resources.LayoutTreeMissing;this._currentStory.onLayoutValidationError(o);var r=new TDB.ChildArgs(i.DialogHtmlContainerVE,{iframe:{html:"<pre>"+$("<div />").text(o).html()+"</pre>",width:500,height:250}}),a={width:500,title:Resources.LayoutFailedTitle,description:Resources.LayoutFailedTitle,messages:[Resources.LayoutFailedMessage],dialogLogMessage:"Layout Error",dialogType:e.View.ViewElements.DialogType.Error,allowCancel:!1,buttonsArgs:[{caption:{value:Resources.ButtonClose},isDefault:!0,id:"idshButtonClose"}],contentArgs:r};TDB.applyUpdate(function(){e.View.Common.DialogManager.createAndShow(a)},TDB.Justification.InitialConversion)}}},g.prototype.viewModeChanged=function(e){var t=this;this.currentViewMode=e,this._interactionEngine.actor()&&(this._interactionEngine.viewModeChanged(e),e===StoryViewMode.Preview&&TDB.applyUpdate(function(){t._interactionEngine.setActor(null)}),this.getAutoPlayDriver().reset())},g.prototype.getRootLayoutContainerElement=function(e){var t=this.getLayout(e);if(!t)return null;var i=t.getRootContainer(e);return i||null},g.prototype.constructExternalActionsProviders=function(e){var n=this;StoryLog.BufferedTraceTag(596444813,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"RootVEBase::constructExternalActionsProviders start",{pageId:e}),this.livingImageManager=new t.Common.LivingImageManager(this),this.detailViewManager=new t.Common.DetailViewManager(this),this.modalDialogManager=new t.Common.ModalDialogManager(this,function(){return n._interactionEngine.getAnimationEngine()}),CommonSettings.ContextualFirstRunEnabled&&(this.firstRunActionProvider=new u.FirstRunActionProvider(this.currentViewMode));var o=DictionaryExtensions.merge([this.livingImageManager.getActionMap(),this.detailViewManager.getActionMap(),this.modalDialogManager.getActionMap(),(new i.ToCViewManager).getActionMap(),(new i.NavigationActionProvider).getActionMap(),this.firstRunActionProvider?this.firstRunActionProvider.getActionMap():{}]);return StoryLog.BufferedTraceTag(596444814,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"RootVEBase::constructExternalActionsProviders end",{pageId:e}),o},g.prototype.getInteractionModel=function(e){var t=this.getLayout(e);return t?t.getInteractionModel(e):null},g.prototype.getStartFSMNode=function(e){var t=this.getInteractionModel(e);return t?t.getStartNode(e):null},g.prototype.getKeyframes=function(e){var t=this.getInteractionModel(e);return t?t.keyFrames.getCollection(e):[]},g.prototype.splitAndTrimToLower=function(e,t){return e?e.split(t).map(function(e,t){return e.toLowerCase().trim()}):[]},g.prototype.findScrollable=function(t){var n=this.viewports.getChildren(t).firstOrDefault(function(e){return!(e instanceof i.ViewportVE)});if(!n)return null;if(!(n instanceof i.AnimatedScrollerVE||n instanceof i.NativeScrollerVE))throw e.RethrowLogger.createError("Elements in viewports collection must either be viewports or IScrollingVE implementations");return n},g.prototype.fetchFSMNode=function(e,t){var i=this.getInteractionModel(t);return i?i.nodes.getCollection(t).firstOrDefault(function(t){return t.id==e}):null},g.prototype.resetActors=function(e,t){var n=this;a.measurePerformance(a.PerfMeasureNames.ResetActorTree,function(){var o=n.getStartFSMNode();if(o){n.renderModelSerialNumber++,n._interactionEngine.actor()&&n._interactionEngine.setActor(null),n.historian&&n.historian.resetAnimationHistory(),n.visibility&&(n.removeResource(n.visibility),n.visibility.dispose(),n.visibility=null),n._interactionEngine.clientCapabilities().has(s.ClientCapabilities.VisibilityDetection)&&(n.visibility=new i.VisibilityChecker,n.addResource(n.visibility));var r={enter:function(e,t,i){return n.fsmNodeEntered(e,t,i)},leave:function(e,t){return n.fsmNodeExited(e,t)},followingEdge:function(e){},edgeFollowed:function(e){return n.fsmEdgeFollowed(e)},sequenceExecuted:function(e){}};n.initializeTraveler();var a=i.FSMActor.createRootActor({renderModelSerialNumber:n.renderModelSerialNumber,getCurrentRenderModelSerialNumber:n.getRenderModelSerialNumber.bind(n),startnode:o,nodes:e,listener:r,engine:n._interactionEngine.getAnimationEngine(),clientState:n._interactionEngine.getClientState(),hydrateAnimationSequence:n._interactionEngine.getHydrateAnimationFunction(),capabilities:n._interactionEngine.clientCapabilities(),scrollable:n.scroller.getValue(),traveler:n.traveler,addEdgeToSequence:n._interactionEngine.addEdgeToSequence.bind(n._interactionEngine),endStateMap:i.NavigationManager.getNavigationEndStateMap(n.getInteractionModel())});n._interactionEngine.setActor(a),TDB.applyUpdate(function(){n._interactionEngine.getAnimationEngine().resetAnimatables.notify(),n.setNavigationState(t)},TDB.Justification.InitialConversion)}})},g.prototype.getActiveCardModelId=function(){var e=this.getStoryPage();return e?e.getActiveCardModelId(!0):void 0},g.prototype.shouldNavigateToPreviewTarget=function(){return this.currentViewMode!==StoryViewMode.Preview&&this.getStoryPage().shouldNavigateToPreviewTarget()},g.prototype.setNavigationState=function(e){this.restoreState&&(this._interactionEngine.getClientState().runAnimationsInstantly=!0),this._interactionEngine.actor().enter(null),this.resetScrollPositionIfNeeded();var t=this.getRootKeyframeProperties();if(t){var n=this.shouldNavigateToPreviewTarget()?this.getStoryPage().getLastEditedContentId()||this.getActiveCardModelId():null;if(n&&(t.scrollability===s.LayoutScrollability.None?e=i.NavigationHelper.getFsmNodeIdFromContentId(this.getInteractionModel(),n):(i.NavigationHelper.scrollTo(this,{contentId:n,scrollAfterSync:!0}),e=null)),!this.restoreState&&e&&i.NavigationManager.navigateTo(this,e,{snapScene:!0,callerMessage:"RootVE:resetActors"}),t.scrollability!==s.LayoutScrollability.None){var o=this._interactionEngine.getAnimationEngine();o.forceTick(i.NavigationHelper.animationClockAdvanceAmount),o.setCameraManuallyReset(),this.changed(o.cameraTransform(),!0)}}else StoryLog.TraceTag(596476042,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Unable to get root keyframe from interaction model")},g.prototype.resetScrollPositionIfNeeded=function(){var e=this.getCurrentWorldId();if(this.lastWorldId!==e){this.lastWorldId=e,this.scroller.getValue()&&this.scroller.getValue().setScrollValues([0,0]);var t=this._interactionEngine.getAnimationEngine().cameraTransform();t.set(0,0),t.set(1,0),this.changed(t)}},g.prototype.fsmNodeEntered=function(e,t,n){this._madeWithSwayButton&&t.getBehaviors().has(d.WorldEntryState)&&this._madeWithSwayButton.ensureVisibility(),this.dynamicFocusListener.nodeEntered(t);var o=this._interactionEngine.getTriggerManager();if(o){var r=[];n&&r.push(n),t&&t.edges.getCollection().forEach(function(e){return r.push(e)}),r.some(function(e){return i.TriggerManager.getTriggerSets(e).some(function(e){return o.isTimingTriggerSet(e)})})&&o.startDelayTimers(!1)}this.visibility&&this.visibility.enter(e,t);var a=this.scroller.getValue();a&&a.getScrollChecker().enter(),this.handleNodeFocus(t,n);var s=this.getAutoPlayDriver();s.autoPlayAvailable.getValue()&&ArrayExtensions.contains(i.rootKeyframeTypes,t.getKeyFrame().getType())&&s.applySettings(this._currentStory.getRenderModel().getAutoPlaySettings())},g.prototype.fsmNodeExited=function(e,t){this.visibility&&this.visibility.leave(e,t),this.dynamicFocusListener.nodeExited(t);var i=this.scroller.getValue();i&&i.getScrollChecker().leave()},g.prototype.handleNodeFocus=function(t,n){var o=this;if(n){var r=n.getFocusTarget()?n.getFocusTarget():t.getKeyFrame();if(r&&!n.getBehaviors().has(s.EdgeBehaviors.NoFocusOnTransition)){var a=e.Utilities.getDocumentActiveElement();n.getBehaviors().has(s.EdgeBehaviors.NoFocusChangeOnTransitionIfFocusDefined)&&a&&a!==document.body||i.TriggerManager.getTriggerSets(n).some(function(e){return e.triggers.getCollection().some(function(e){return(e.selectMethods?e.selectMethods.getCollection():[]).some(function(e){return i.TriggerManager.isUserActionTrigger(e.getMethod())})})})&&this.asyncTrySetFocus(this.getElementForKeyframe(r)).then(function(){},function(){if(r==n.getFocusTarget()){var e=t.getKeyFrame();o.asyncTrySetFocus(o.getElementForKeyframe(e))}})}}},g.prototype.getElementForKeyframe=function(e){var t=this._interactionEngine.getAnimationEngine(),i=e.layoutElements.getCollection().firstOrDefault();return i?t.getElementById(i.id):(TDB.raiseRecoverableError("No layout element found on keyframe"),null)},g.prototype.asyncTrySetFocus=function(t){var i=$.Deferred();return platform.setImmediate(function(){e.View.Common.LayoutUtilities.isElementFocusable(t)?(t.focus(),i.resolve()):i.reject()}),i.promise()},g.prototype.cullingEnabled=function(){return null!==this.bitree},g.prototype.addEdgeFollowedListener=function(e){var t=Obj.properties(this.edgeFollowedListeners).length+1;return this.edgeFollowedListeners[t]=e,t},g.prototype.removeEdgeFollowedListener=function(e){e&&delete this.edgeFollowedListeners[e]},g.prototype.fsmEdgeFollowed=function(t){StoryPageSettings.EnableFSMTraversalHistory&&this.historian&&this.historian.traverse({startState:t.getParentNode().id,endState:t.getTarget().id,historicallyRelevant:t.getHistoricallyRelevant(),animation:!0});var i=t.getBehaviors();i.has(s.EdgeBehaviors.UpdateVisibility)&&(e.Utilities.weblog("visibility","Updating visibility after following edge: "+t.getName()),this.updateVisibilityChecker(this.viewportRectangle(this._interactionEngine.getAnimationEngine().cameraTransform()))),i.has(s.EdgeBehaviors.HideAppBar)&&this.updateAppbarVisibility(!1),i.has(s.EdgeBehaviors.ShowAppBar)&&this.updateAppbarVisibility(!0),i.has(s.EdgeBehaviors.HideMadeWithSway)&&this.updatemadeWithSwayVisibility(!1),i.has(s.EdgeBehaviors.ShowMadeWithSway)&&this.updatemadeWithSwayVisibility(!0),this.analyticsLogger.onFSMNodeChanged(t.getParentNode().getKeyFrame());for(var n in this.edgeFollowedListeners)this.edgeFollowedListeners[n](t)},g.prototype.updateAppbarVisibility=function(t){var n=i.ViewModel.getConsumptionAppBar();n&&(e.Utilities.weblog("appbarvisibility","Updating visibility of appbar to "+t.toString()),n.ensureVisible(t))},g.prototype.updatemadeWithSwayVisibility=function(t){var i=this.getMadeWithSwayButton();i&&(e.Utilities.weblog("madewithswaybuttonvisibility","Updating visibility of madewithsway button to "+t.toString()),i.ensureVisibility(t))},g.prototype.onPopState=function(e){this.historian&&this.historian.onPopState(e.state)},g.prototype.getHistorian=function(){return this.historian},g.prototype.shouldTouchBeEnabled=function(){return!e.AnimationManager.LowFi.getValue()||!i.ViewModel.isEditMode.getValue()},g.prototype.getModalDialogManager=function(){return this.modalDialogManager},g.prototype.getLivingImageManager=function(){return this.livingImageManager},g.prototype.getDetailViewManager=function(){return this.detailViewManager},g.prototype.getAutoPlayDriver=function(){return this.args.autoPlayDriver},g.prototype.getDynamicFocusListener=function(){return this.dynamicFocusListener},g.prototype.initializeOrUpdateStateMachine=function(t){var n=this.getInteractionModel(t);if(n){t.watch(this.args.isAnimationsDisabled),this._currentStory.watchForSync(t),this.analyticsLogger.updateKeyFrames(this.getKeyframes(t));var o=n.nodes.getCollection(t),r=this.shouldTouchBeEnabled();i.DomEventRegister.getInstance().setTouchForAuthoringState(i.AuthoringState.Canvas,r),this.detailViewManager.reset(),this.modalDialogManager.reset();var a=n.getStartNode(t);if(!this.blockUpdateBindings){var s=null,l=this._interactionEngine.actor();if(l){var u=e.AnimationManager.currentAnimationEngine().get(this.pageId);if(!(s=new i.FSMComparer(o,a,u.isNew.bind(u)).checkCurrentStateFromRoot(l.traversalState))){var d=l.getMostRecentActor(!0);if(d){var c=d.getCurrentNode();c&&(s=c.id)}}}this.resetActors(o,s)}}},g.prototype.gotoHashTarget=function(t){var n=this;this.gotoHashTargetEnabled&&!this.blockUpdateBindings&&(this.gotoHashTargetEnabled=!1,platform.setImmediate(function(){n.disposed||i.NavigationHelper.navigateToContentId(n.parent._root.getValue(),e.Utilities.hash().fetch("content"),{snapScene:!0,callerMessage:"RootVE:gotoHashTarget",isDetailView:!!e.Utilities.hash().fetch("dv")})}))},g.prototype.applyRestoreState=function(e){var t=this;this._currentStory.watchForSync(e),this.setBlockUpdateBindings(!1),this.restoreState?platform.setImmediate(function(){t.disposed||(i.RestoreState.restore(t.parent._root.getValue()),t.clearRestoreState())}):this.clearRestoreState()},g.prototype.clearRestoreState=function(){this.parent.clearRestoreState(),this.restoreState=void 0},g.prototype.layoutV2Args=function(){return e.Utilities.query.has(e.Common.UrlHelper.URLParamLayoutV2)},g.prototype.layoutV2WrapperDangerousInnerHtmlArgs=function(e){return this.layoutV2Loader||(this.layoutV2Loader=new i.LayoutV2Loader(this._currentStory)),this.layoutV2Loader.getLayout(e)},g.prototype.convertModelToCullableContainers=function(e,t,i){var n=this,o=[],r=e.getFlags(i);t=t||r.has(s.LayoutFlags.Parallaxed),e instanceof s.ContainerLayoutElement&&(o=e.children.getCollection(i).map(function(e){return n.convertModelToCullableContainers(e,t,i)}));var a,l,u,d,c=null,p=null;return e.visibleCullingRegion.getWidth(i)>0&&e.visibleCullingRegion.getHeight(i)>0&&(a=e.visibleCullingRegion.getLeft(i),l=e.visibleCullingRegion.getTop(i),u=e.visibleCullingRegion.getWidth(i),d=e.visibleCullingRegion.getHeight(i),c=MathUtils.aabb([a,l],[a+u,l+d])),a=e.position.getLeft(i),l=e.position.getTop(i),u=e.position.getWidth(i),d=e.position.getHeight(i),c?p=MathUtils.aabb([a,l],[a+u,l+d]):c=MathUtils.aabb([a,l],[a+u,l+d]),{id:e.id,box:c,children:o,cullable:!t&&r.has(s.LayoutFlags.Cullable),originalBox:p}},g.prototype.calculateCullingRoot=function(e){var i=this.getModelViewports(e).firstOrDefault(function(i){return t.isMainViewport(i,e)});return i?i.getChild(e):null},g.prototype.clearAnimationCache=function(e){this._currentStory.watchForSync(e),this.getLayout(e),this.blockUpdateBindings||this._interactionEngine.getAnimationEngine().clearAnimationCache()},g.prototype.updateSpacePartitioning=function(t){this.bitree=null,this.visibleCullableElements=[];var i=/iphone|ipad/i.test(navigator.userAgent)&&Modernizr.dynamicscrollevents,a=e.Utilities.query.has(e.Common.UrlHelper.URLParamCull);if((a||i||!e.AnimationManager.LowFi.getWatchedValue(t))&&!e.Utilities.query.has(e.Common.UrlHelper.URLParamNoCulling)&&(a||!e.Common.UrlHelper.getInstance().isAccessibilityView(t))){var l=this._currentStory.getRenderModel(t);if(l.layoutTrees.getCollection(t).firstOrDefault()&&(a||n(l)!==s.ClientDevice.Desktop)&&!this.is3DWorldWatcher.getWatchedValue(t)){var u=this.cullingRootWatcher.getWatchedValue(t);if(u){var d=this.convertModelToCullableContainers(u,!1,t);if(!this.blockUpdateBindings){this.bitree=MathUtils.makeBiTree(d,10);var c=this._interactionEngine.getAnimationEngine(),p=o(d).map(function(e){return e.id});c.untrackedTargets(p).forEach(function(e){return c.show(e,!0)}),this.visibleCullableElements=r(c,d).map(function(e){return e.id});var g=this.viewportRectangle(c.cameraTransform());g&&this.updateCulling(g)}}}}},g.prototype.calculateIs3DWorld=function(e){var i=this.getModelViewports(e).firstOrDefault(function(i){return t.isMainViewport(i,e)});return!!i&&i.getChild(e)instanceof s.ProjectionLayoutElement},g.prototype.getModelViewports=function(t){var i=this.getRootLayoutContainerElement(t);if(!i)return[];if(i.getContainerType(t)!==s.LayoutContainerType.Viewports)throw e.RethrowLogger.createError("unsupported root container type: "+i.getContainerType());return i.children.getCollection(t)},g.prototype.makeViewport=function(n,o){if(!t.isMainViewport(n,o)||this.getModelViewports(o).first(function(e){return t.isMainViewport(e,o)})!==n)return new TDB.ChildArgs(i.ViewportVE,{model:n,resourceFactory:this.args.resourceFactory});var r={model:n,enabled:this.args.enabled,resourceFactory:this.args.resourceFactory};return e.AnimationManager.LowFi.getWatchedValue(o)?new TDB.ChildArgs(i.NativeScrollerVE,r):new TDB.ChildArgs(i.AnimatedScrollerVE,r)},g.prototype.computeMainViewport=function(e){var t=this.viewports.getChildren(e).filter(function(e){return e instanceof i.NativeScrollerVE||e instanceof i.AnimatedScrollerVE});return 0===t.length?null:t.first()},g.prototype.rootDivStyleArgs=function(t){var n="hidden";if(StoryPageSettings.Mode==StoryViewMode.Embedded&&e.Utilities.browser.isSafari){var o=this.scroller.getWatchedValue(t);o&&o instanceof i.AnimatedScrollerVE&&(n="scroll")}var r=i.ViewModel.getToCView(t),a=r&&r.isVisible(t);return{width:this.getWidth(t)+"px",height:this.getHeight(t)+"px",display:t.watchValue(this.parent.parent.hidePreview)?"none":"",overflow:n,transitionProperty:a?Modernizr.prefixed("filter"):"",transitionDuration:a?"0.5s":"",transitionTimingFunction:a?"ease":"",filter:a?"blur(25px)":""}},g.prototype.rootDivAttrArgs=function(t){var n={lang:e.Model.RenderModel.getWatchedValue(t).getCulture(t)},o=this.getRootLayoutContainerElement(t);o&&i.createAttributes(t,o,n);var r=e.Model.RenderModel.getWatchedValue(t).getTitle(t);return n[Aria.Attributes.Label]=r||Resources.ProductNameShort,n},g.prototype.rootDivParentAttrArgs=function(t){var i={};return i[Aria.Attributes.Role]=Aria.Roles.Presentation,i.dir=e.Model.RenderModel.getWatchedValue(t).getRTL(t)?"rtl":"ltr",i},g.prototype.rootDivParentClassNameArgs=function(t){return e.Model.RenderModel.getWatchedValue(t).getRTL(t)?"RTL":"LTR"},g.prototype.getAllEmbedLayoutElements=function(e){var t=this.getLayout(e).getRootContainer();return this.getAllEmbedLayoutElementsInContainer(t)},g.prototype.getAllEmbedLayoutElementsInContainer=function(e,t){for(var i=e.children.getCollection(),n=[],o=0;o<i.length;o++)i[o]instanceof s.EmbedLayoutElement&&n.push(i[o]),i[o]instanceof s.ContainerLayoutElement&&n.push.apply(this,this.getAllEmbedLayoutElementsInContainer(i[o],t));return n},g.prototype.onRootDivScroll=function(e){var i=this.scroller.getValue();if(i){var n=e.target,o=n.scrollTop,r=n.scrollLeft;return i.offsetByClientValue(t.ScrollDirection.VERTICAL,o),i.offsetByClientValue(t.ScrollDirection.HORIZONTAL,r),n.scrollTop=0,n.scrollLeft=0,!0}},g.prototype.rootDivEventsInitArgs=function(){return{scroll:this.onRootDivScroll}},g.prototype.viewportsArgs=function(e){var t=this;return this.getModelViewports(e).map(function(i){return t.makeViewport(i,e)})},g.prototype.onHashChanged=function(t){i.NavigationHelper.navigateToContentId(this.parent._root.getValue(),e.Utilities.hash().fetch("content"),{callerMessage:"RootVE:onHashChanged",isDetailView:!!e.Utilities.hash().fetch("dv")})},g.prototype.scaleUpdater=function(e){var t=this._interactionEngine.getAnimationEngine(),i=this.mainviewport.getWatchedValue(e);if(i){var n=i.viewportScale(e).getWatchedValue(e);this.blockUpdateBindings||t.mainScaleChanged(n)}var o=this.viewports.getChildren(e),r=ArrayExtensions.toDictionary(o,function(t,i){i[t.getModelObjectId()]=t.viewportScale(e).getWatchedValue(e)});this.blockUpdateBindings||(t.viewportScalesChanged(r),t.flushTargetState())},g.prototype.getViewportRectangle2D=function(){if(this.is3DWorldWatcher.getValue())return null;var e=this.viewportRectangle(this._interactionEngine.getAnimationEngine().cameraTransform());if(!e)return null;var t=this.cullingRootWatcher.getValue();return t?(e.top<=0&&e.left<=0&&this.restoreState&&this.restoreState.scrollApproximation>0&&(t.getScrollability()===s.LayoutScrollability.Horizontal?e.left=t.position.getWidth()*this.restoreState.scrollApproximation:t.getScrollability()===s.LayoutScrollability.Vertical&&(e.top=t.position.getHeight()*this.restoreState.scrollApproximation)),e.left=Math.min(e.left,t.position.getWidth()-e.width),e.top=Math.min(e.top,t.position.getHeight()-e.height),e):null},g.prototype.getCoverage=function(){return this.traveler?this.traveler.getCoverage():0},g.prototype.changed=function(e,i){void 0===i&&(i=!1);var n=this.viewportRectangle(e);if(n){this.updateCulling(n),i&&(n.width=n.right,n.height=n.bottom,n.left=0,n.top=0);var o=this._interactionEngine.getScrollVisibleValues();this.updateVisibilityChecker(n,o);for(var r=g.getOffsetViewportRect(n,o.scrollValues),a=0;a<this.viewportChangeHandlers.length;a++)this.viewportChangeHandlers[a]&&this.viewportChangeHandlers[a].onViewportUpdate&&this.viewportChangeHandlers[a].onViewportUpdate.call(this.viewportChangeHandlers[a],r);if(!this.isScrolling()){var s=this.parent.parent.getConsumptionAppBar();if(s&&s.onCameraMove(o),StoryPageSettings.UseToCPullDownBar&&c.UserState.getInstance().isUserOnFlight(FlightList.ToCPullDownView1)){var l=this.parent.parent.getToCPullDownRegion();l&&l.onCameraMove(o);var u=this.args.storyPage.getViewElement().getToCView();u&&u.hide()}this.scrollVisibleManagers.forEach(function(e){return e.onCameraMove(o)}),this.updateFreCallouts(o),this.updateViewportTelemetry(o);var d=this.getRootKeyframeProperties();if(d){var p=t.ScrollDirection.fromLayoutScrollability(d.scrollability),h=o.percentScroll[p];this.analyticsLogger.onStoryScrolled(h,r)}}}},g.getOffsetViewportRect=function(e,i){return 0!==e.top||0!==e.left||0===i[t.ScrollDirection.HORIZONTAL]&&0===i[t.ScrollDirection.VERTICAL]?e:new BaseRect(i[t.ScrollDirection.HORIZONTAL],i[t.ScrollDirection.VERTICAL],e.width,e.height)},g.prototype.isScrolling=function(){var e=this.scroller.getValue();return!!e&&e.scrolling()},g.prototype.updateVisibilityChecker=function(e,t){void 0===t&&(t=null),this.visibility&&this.visibility.updateView(e)},g.prototype.digitalPrintAuthoringCalloutArgs=function(t){var i=e.View.Common.FRE.CalloutID.DigitalPrintAuthoring;if(e.View.Common.FRE.getCalloutManager().isActiveCallout(t,i)&&this.currentViewMode===StoryViewMode.Edit&&!this.getStoryPage().isStorylineModeActive())return new TDB.ChildArgs(e.View.ViewElements.FRECalloutVE,e.View.Common.FRE.CalloutArgsCreator.createArgsForDigitalPrintAuthoring())},g.prototype.updateFreCallouts=function(e){var t=u.getCalloutManager().getCurrentCalloutID();(t===u.CalloutID.VerticalNavigation||t===u.CalloutID.PanoramaNavigation||t==u.CalloutID.None)&&(e.scrollValues[0]>0||e.scrollValues[1]>0)&&this.currentViewMode===StoryViewMode.Preview&&u.FirstRunTriggers.navigatedFromPlay()},g.prototype.updateViewportTelemetry=function(e,t){void 0===t&&(t=!1),this.traveler&&this.traveler.setScrollState({scrollX:e.scrollValues[0],scrollY:e.scrollValues[1],visibleScrollX:e.visibleScroll[0],visibleScrollY:e.visibleScroll[1]}),i.ViewModel.scrollPositionlogger.recordMaxScrollChange(e.percentScroll[0],e.percentScroll[1])},g.prototype.viewportRectangle=function(i){if(!(i instanceof l.Properties.Translate2D||i instanceof l.Properties.Translate3D||i instanceof l.Properties.AcceleratedTranslate2D))throw e.RethrowLogger.createError("this method requires the camera transform to be passed in");var n=i,o=[100*n.get(0),100*n.get(1)],r=this.scroller.getValue();if(!r){var a=this.getModelViewports(null).firstOrDefault(function(e){return t.searchForTopLevelKeyframe(e,"Story",null)});if(null==a)return null;var s=a.position;return new BaseRect(s.getLeft(),s.getTop(),s.getWidth(),s.getHeight())}var u=r.visibleViewportSize();return u.left+=o[0],u.top+=o[1],u},g.prototype.updateCulling=function(t){var i=this;if(this.bitree){var n=this.bitree.fetch(MathUtils.aabb([t.left-1*t.width,t.top-1*t.height],[t.left+2*t.width,t.top+2*t.height])),o=this._interactionEngine.getAnimationEngine(),r=n.mapSome(function(e){return e.cullable?e.id:null});this.visibleCullableElements.forEach(function(t){ArrayExtensions.contains(r,t)||(o.hide(t),e.Utilities.weblog("culling","hiding "+t))});var a=this.scroller.getValue(),s=!!a&&a.scrolling();r.forEach(function(t){ArrayExtensions.contains(i.visibleCullableElements,t)||(o.show(t,!s),e.Utilities.weblog("culling","showing "+t))}),s&&r.every(function(e){return o.isCulled(e)})&&r.forEach(function(e){return o.show(e,!0)}),this.visibleCullableElements=r}},g.prototype.fireBackNavigationRequest=function(){this._interactionEngine.fireNavigationAction(i.NavigationButtonType.Backward)},g.prototype.fireForwardNavigationRequest=function(){this._interactionEngine.fireNavigationAction(i.NavigationButtonType.Forward)},g.prototype.fireToCNavigationRequest=function(e){switch(e){case i.ToCActionType.Show:i.ViewModel.getToCView().show();break;case i.ToCActionType.Hide:i.ViewModel.getToCView().hide();break;case i.ToCActionType.Toggle:i.ViewModel.getToCView().toggle()}},g.prototype.fireHomeNavigationRequest=function(){this._interactionEngine.fireNavigationAction(i.NavigationButtonType.Home)},g.prototype.keyDown=function(t){var n=this.handleShortcutKey(t);return i.AzureVideoPlayerVEBase.isFullscreen()||e.View.ViewElements.ViewModel.getAudioPlayerManager().isAmsFullScreen()?TDB.EventPropagation.Bypass:n!==TDB.EventPropagation.Bubble||this._interactionEngine.handleKey(t,e.Utilities.getDocumentActiveElement())!==TDB.EventPropagation.Bubble||t.keyCode===KeyCodeType.TabKey&&this.parent.parent.isEditMode.getValue()?TDB.EventPropagation.PreventDefault:(t.keyCode===KeyCodeType.EscapeKey&&this.parent.parent.isPreviewMode.getValue()&&e.Common.Environment.getInstance().setNativeFullScreen(!1),this.getAutoPlayDriver().handleKeyboardEvent(t))},g.prototype.keyUp=function(e){return this._interactionEngine.handleKeyUp(e)},g.prototype.mouseUp=function(e){return this._interactionEngine.handleMouse(e)},g.prototype.mouseDown=function(e){return this._interactionEngine.handleMouse(e)},g.prototype.mouseClicked=function(e){var n=e.srcElement||e.target,o=TDB.ViewElement.dataFor(n),r=TDB.EventPropagation.Bubble;return o&&o.findParent(i.RegionLayoutVE)||(r=p.prototype.mouseClicked.call(this,e)),r===TDB.EventPropagation.Bubble&&(r=this._interactionEngine.handleMouse(e)),r!==TDB.EventPropagation.Bubble&&this.pauseAutoPlayIfActive(t.Common.AutoPlayPauseType.HandledMouseClick),r},g.prototype.mouseDoubleClicked=function(e){var i=this._interactionEngine.handleMouse(e);return i!==TDB.EventPropagation.Bubble&&this.pauseAutoPlayIfActive(t.Common.AutoPlayPauseType.HandledMouseDoubleClick),i},g.prototype.mouseScrolled=function(e){return CommonSettings.SettingSite_IframeVelumEnabled&&t.Common.IframeVelumManager.getInstance().handleRootVEMouseScroll(e),this._interactionEngine.handleMouseWheel(e)},g.prototype.mouseMoved=function(e){return CommonSettings.SettingSite_IframeVelumEnabled&&t.Common.IframeVelumManager.getInstance().handleRootVEMouseMove(e),TDB.EventPropagation.Bubble},g.prototype.touchMove=function(e){return CommonSettings.SettingSite_IframeVelumEnabled&&t.Common.IframeVelumManager.getInstance().handleRootVETouchMove(e),!0},g.prototype.swipe=function(e){return this._interactionEngine.handleSwipe(e)},g.prototype.tap=function(e){return this._interactionEngine.handleTap(e)},g.prototype.doubleTap=function(e){return this._interactionEngine.handleDoubleTap(e)},g.prototype.handleShortcutKey=function(e){var t=this.getShortcutElements(TDB.ShortcutIdentifier.createShortcutIdentifierFromEvent(e));return t.length>0?this.executeShortcutElements(t,e):TDB.EventPropagation.Bubble},g.prototype.pauseAutoPlayIfActive=function(e){var i=this.getAutoPlayDriver();i.getState()===t.Common.AutoPlayState.Playing&&i.pause(e)},g.prototype.updateLayout=function(e){var t=this._currentStory.getRenderModel(e).layoutTrees.getCollection(e);return t.length>0?t[0]:null},g.prototype.subscribeToViewportChange=function(e){e&&e.onViewportUpdate&&this.viewportChangeHandlers.addunique(e)},g.prototype.unsubscribeFromViewportChange=function(e){e&&this.viewportChangeHandlers.removefirst(e)},g.prototype.registerScrollVisibleManager=function(e){this.scrollVisibleManagers.addunique(e)},g.prototype.unregisterScrollVisibleManager=function(e){this.scrollVisibleManagers.removefirst(e)},g.prototype.registerMadeWithSwayButton=function(e){this._madeWithSwayButton=e},g.prototype.unregisterMadeWithSwayButton=function(e){this._madeWithSwayButton===e&&(this._madeWithSwayButton=null)},g.prototype.getMadeWithSwayButton=function(){return this._madeWithSwayButton},g.prototype.navigationCalloutArgs=function(t){var n,o=this.getCurrentWorldId(t),r=e.Model.RenderModel.getWatchedValue(t).getRTL(t),a=i.ViewModel.isEditMode.getWatchedValue(t);switch(o){case"VerticalWorld":if(n=u.CalloutID.VerticalNavigation,!u.getCalloutManager().isActiveCallout(t,n))return;var s={calloutBoxClassName:a?"VerticalNavigationModeSwitch-callout":"VerticalNavigation-callout",headerText:{value:Resources.FirstRunNavHeader},bodyText:Resources.FirstRunVerticalNavBody,readerText:Resources.FirstRunVerticalNavReader,beakPosition:i.BeakPosition.BottomRight,calloutID:n,delay:u.getDelayForCallout(n,u.FirstRunType.Default),bubbleKeyEvents:[KeyCodeType.UpArrowKey,KeyCodeType.DownArrowKey],updateCloseButtonPosition:!0,isLayoutRtl:r};return new TDB.ChildArgs(i.FRECalloutVE,s);case"PanoramaWorld":if(n=u.CalloutID.PanoramaNavigation,!u.getCalloutManager().isActiveCallout(t,n))return;var l={calloutBoxClassName:a?"PanoramaNavigationModeSwitch-callout":"PanoramaNavigation-callout",calloutTapClassName:this.getPanoramaNavigationTapCalloutClassName(t),headerText:{value:Resources.FirstRunNavHeader},bodyText:Resources.FirstRunPanoNavBody,readerText:Resources.FirstRunPanoNavReader,beakPosition:i.BeakPosition.BottomRight,calloutID:n,delay:u.getDelayForCallout(n,u.FirstRunType.Default),bubbleKeyEvents:[KeyCodeType.LeftArrowKey,KeyCodeType.RightArrowKey],updateCloseButtonPosition:!0,isLayoutRtl:r};return new TDB.ChildArgs(i.FRECalloutVE,l);case"ExpoWorld":if(n=u.CalloutID.ExpoNavigation,!u.getCalloutManager().isActiveCallout(t,n))return;var d={calloutBoxClassName:a?"ExpoNavigationModeSwitch-callout":"ExpoNavigation-callout",calloutTapClassName:this.getExpoNavigationTapCalloutClassName(t),headerText:{value:Resources.FirstRunNavHeader},bodyText:Resources.FirstRunExpoNavBody,readerText:Resources.FirstRunExpoNavReader,beakPosition:i.BeakPosition.BottomRight,calloutID:n,delay:u.getDelayForCallout(n,u.FirstRunType.Default),bubbleKeyEvents:[KeyCodeType.LeftArrowKey,KeyCodeType.RightArrowKey],updateCloseButtonPosition:!0,isLayoutRtl:r};return new TDB.ChildArgs(i.FRECalloutVE,d);default:return}},g.prototype.getPanoramaNavigationTapCalloutClassName=function(e){var t=i.ViewModel.isEditMode.getWatchedValue(e);return"Mobile"===CommonSettings.ClientDevice?"PanoramaNavigationMobile-tap-callout":t?"PanoramaNavigationModeSwitch-tap-callout":"PanoramaNavigation-tap-callout"},g.prototype.getExpoNavigationTapCalloutClassName=function(e){var t=i.ViewModel.isEditMode.getWatchedValue(e);return"Mobile"===CommonSettings.ClientDevice?"ExpoNavigationMobile-tap-callout":t?"ExpoNavigationModeSwitch-tap-callout":"ExpoNavigation-tap-callout"},g.prototype.emptySwayCalloutArgs=function(e){var t=u.CalloutID.EmptySwayPreview;if(u.getCalloutManager().isActiveCallout(e,t)){var n={calloutBoxClassName:"EmptySwayPreview-callout",headerText:{value:Resources.FirstRunPreviewEmptySwayPreviewHeader},bodyText:Resources.FirstRunPreviewEmptySwayPreviewBody,readerText:Resources.FirstRunPreviewEmptySwayReader,beakPosition:i.BeakPosition.BottomRight,calloutID:t,delay:u.getDelayForCallout(t,u.FirstRunType.Default)};return new TDB.ChildArgs(i.FRECalloutVE,n)}},g.prototype.setBlockUpdateBindings=function(e){this.blockUpdateBindings=e},g.prototype.handleAutoAdvanceNextEvent=function(){return StoryLog.StructuredTraceTag(20510599,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Trying to handle auto-advance Next event",{worldId:this.getCurrentWorldId()}),this._interactionEngine.handleClientSignal({signal:i.ClientSignal.AutoAdvanceNext,editMode:!1})!==TDB.EventPropagation.Bubble},g.prototype.handleAutoAdvanceResetEvent=function(){StoryLog.StructuredTraceTag(20510600,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Trying to handle auto-advance Reset event",{worldId:this.getCurrentWorldId()}),this._interactionEngine.handleClientSignal({signal:i.ClientSignal.AutoAdvanceReset,editMode:!1}),this.resetActors(this.getInteractionModel().nodes.getCollection())},g.prototype.getCurrentWorldId=function(e){var i=this._currentStory.getRenderModel(e);return t.Common.LayoutUtilities.getCurrentWorldId(i,e)},g.prototype.dispose=function(){this.parent.parent.removeClientSignalListener(this),this._interactionEngine&&(this._interactionEngine.getAnimationEngine().removeCameraListener(this),this._interactionEngine.dispose()),t.Common.IframeLoadingManager.getInstance().unsubscribeRoot(this),this.unsubscribeFromViewportChange(t.Common.ImageRequestManager.getInstance()),CommonSettings.SettingSite_IframeVelumEnabled&&this.unsubscribeFromViewportChange(t.Common.IframeVelumManager.getInstance()),this.unregisterShortcut(t.Common.autoPlayShortcutIdentifiers,this.getAutoPlayDriver()),this.viewportChangeHandlers=[],p.prototype.dispose.apply(this,arguments)},g.tabIndex=1,g}(TDB.ControlSet);i.RootVEBase=p}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=function(n){function o(e,t){var o=n.call(this,e)||this;return o.parent=e,o.args=t,o._webkitOverflowScrolling=TDB.watchableTag(596476047,o,"touch"),o.model=t.model,o.logic=new i.NativeScrolling(o,o.parent._interactionEngine,t.enabled),o.scrollchecker=new i.ScrollableChecker(o,o.parent._interactionEngine),o.initializeEventListeners(),o}return __extends(o,n),o.prototype.viewportScale=function(e){return this.viewport.getChild(e).scale},o.prototype.getModelObjectId=function(){return this.model.id},o.prototype.rootStyleArgs=function(e){var i={overflowX:"hidden",overflowY:"hidden","-webkit-overflow-scrolling":this._webkitOverflowScrolling.getWatchedValue(e),width:this.parent.getWidth(e)+"px",height:this.parent.getHeight(e)+"px"};return this.logic.shouldShowScrollbar(t.ScrollDirection.VERTICAL,e)?i.overflowY="scroll":this.logic.shouldShowScrollbar(t.ScrollDirection.HORIZONTAL,e)&&(i.overflowX="scroll"),i},o.prototype.getWidth=function(e){var t=this.model.getChild(e).position.getHeight(e)>this.parent.getHeight(e)?UX.GetScrollbarSize():0;return this.parent.getWidth(e)-t},o.prototype.getHeight=function(e){var t=this.model.getChild(e).position.getWidth(e)>this.parent.getWidth(e)?UX.GetScrollbarSize():0;return this.parent.getHeight(e)-t},o.prototype.mouseScrolled=function(i){return e.Utilities.browser.isFirefox&&!i.isMozilla?TDB.EventPropagation.Bubble:this.logic.canScroll(t.ScrollDirection.HORIZONTAL)?(this.logic.offsetScroll(t.ScrollDirection.HORIZONTAL,-i.wheelDelta),TDB.EventPropagation.Bypass):TDB.EventPropagation.Bubble},o.prototype.visibleViewportSize=function(){return this.viewport.getChild(void 0).scaledServerSize()},o.prototype.getScrollChecker=function(){return this.scrollchecker},o.prototype.isScrollableKeyframe=function(e,t){return this.logic.isScrollableKeyframe(e,t)},o.prototype.fetchScrollValues=function(){return this.logic.fetchScrollValues()},o.prototype.fetchClientScrollValues=function(){var e=this;return this.logic.fetchScrollValues().map(function(t){return e.logic.toClientUnits(t)})},o.prototype.setScrollValues=function(e,t){this.logic.setScrollValues(e,t)},o.prototype.scrolling=function(){return this.logic.scrolling()},o.prototype.offsetByClientValue=function(e,t){this.logic.offsetByClientValue(e,t)},o.prototype.offsetScroll=function(e,t){return this.logic.offsetScroll(e,t)},o.prototype.animateOffset=function(e,t){this.logic.animateOffset(e,t)},o.prototype.setScroll=function(e,t){this.logic.setScroll(e,t)},o.prototype.scrollForwardToSnapPoint=function(e,t){this.logic.scrollForwardToSnapPoint(e,t)},o.prototype.scrollBackwardToSnapPoint=function(e,t){this.logic.scrollBackwardToSnapPoint(e,t)},o.prototype.getViewport=function(e){return this.viewport.getChild(e)},o.prototype.viewportArgs=function(e){return new TDB.ChildArgs(i.ViewportVE,{model:this.model,resourceFactory:this.args.resourceFactory})},o.prototype.updateVisibleSize=function(e){this.logic.updateVisibleSize(e)},o.prototype.updateContentSize=function(e){this.logic.updateContentSize(e)},o.prototype.rootNativeScrollInitArgs=function(){return this.logic},o.prototype.rootNativeScrollDirectionArgs=function(e){return this.logic.canScroll(t.ScrollDirection.VERTICAL,e)?t.ScrollDirection.VERTICAL:this.logic.canScroll(t.ScrollDirection.HORIZONTAL,e)?this.model.renderModel.renderModelRoot.getRTL(e)?t.ScrollDirection.HORIZONTAL_REVERSED:t.ScrollDirection.HORIZONTAL:void 0},o.prototype.dispose=function(e){this.disposeEventListeners(),n.prototype.dispose.call(this,e)},o.prototype.initializeEventListeners=function(){e.Utilities.ios&&(this.resetWebkitOverflowScrollingBound=this.resetWebkitOverflowScrolling.bind(this),window.addEventListener("focus",this.resetWebkitOverflowScrollingBound))},o.prototype.disposeEventListeners=function(){e.Utilities.ios&&window.removeEventListener("focus",this.resetWebkitOverflowScrollingBound)},o.prototype.resetWebkitOverflowScrolling=function(){var e=this;TDB.applyUpdate(function(){e._webkitOverflowScrolling.setValue("auto")},TDB.Justification.SynchronousBrowserEvent),platform.setImmediate(function(){TDB.applyUpdate(function(){e._webkitOverflowScrolling.setValue("touch")})})},o.prototype.setMouseWheelScrollBindingEnabled=function(e){this.logic.setMouseWheelScrollBindingEnabled(e)},o.areEqual=function(e,t){return e.model===t.model},o}(TDB.FocusableViewElement);i.NativeScrollerVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.AnimationManager,o=function(e){function o(i,n,o){var r=e.call(this,i)||this;return r.parent=i,r.engine=n,r.mouseWheelScrollBindingEnabled=!0,r.visiblescroll=[null,null],r.contentsize=[null,null],n.resetScrollInterrogables(),r.enabled=TDB.watchableOption(r,o,!0),r.contentsize[t.ScrollDirection.HORIZONTAL]=TDB.watcher(r,r,r.calculateClientSideContentSize.bind(r,t.ScrollDirection.HORIZONTAL)),r.contentsize[t.ScrollDirection.VERTICAL]=TDB.watcher(r,r,r.calculateClientSideContentSize.bind(r,t.ScrollDirection.VERTICAL)),r.visiblescroll[t.ScrollDirection.HORIZONTAL]=TDB.watcher(r,r,r.calculateVisibleScrollArea.bind(r,t.ScrollDirection.HORIZONTAL)),r.visiblescroll[t.ScrollDirection.VERTICAL]=TDB.watcher(r,r,r.calculateVisibleScrollArea.bind(r,t.ScrollDirection.VERTICAL)),r.servercontentsize=TDB.watcher(r,r,r.calculateServerFullContentSize),r}return __extends(o,e),o.prototype.getScrollSize=function(e,i){var n=this.contentsize[e].getWatchedValue(i),o=this.getPadding(i);return e===t.ScrollDirection.HORIZONTAL?n+o.width:n+o.height},o.prototype.canScroll=function(e,t){return!!this.enabled.getWatchedValue(t)&&this.contentsize[e].getWatchedValue(t)-this.visiblescroll[e].getWatchedValue(t)>0},o.prototype.shouldShowScrollbar=function(e,t){return o.scrollbarEnabled.getWatchedValue(t)&&this.canScroll(e,t)},o.setScrollbarEnabled=function(e){TDB.applyUpdate(function(){o.scrollbarEnabled.setValue(e)})},o.prototype.getServerContentSize=function(e,i){var n=this.getScrollableKeyframe(i);return n?e===t.ScrollDirection.HORIZONTAL?n.scrollWidth:n.scrollHeight:0},o.prototype.calculateServerFullContentSize=function(e){var t=this.getScrollableKeyframe(e);return t?new Size(t.scrollWidth,t.scrollHeight):new Size},o.prototype.calculateExtents=function(){var e=this.getContentSize(t.ScrollDirection.HORIZONTAL),i=this.getContentSize(t.ScrollDirection.VERTICAL),n=this.getVisibleSize(t.ScrollDirection.HORIZONTAL),o=this.getVisibleSize(t.ScrollDirection.VERTICAL);return{maxvalx:this.toServerUnits(Math.max(0,e-n)),maxvaly:this.toServerUnits(Math.max(0,i-o))}},o.prototype.updateVisibleSize=function(e){var i=this.engine.getAnimationEngine(),o=e.watchValue(this.visiblescroll[t.ScrollDirection.HORIZONTAL]),r=e.watchValue(this.visiblescroll[t.ScrollDirection.VERTICAL]);i.interrogations().setValue(n.Interrogation.visiblescroll_x,this.toServerUnits(o,e)),i.interrogations().setValue(n.Interrogation.visiblescroll_y,this.toServerUnits(r,e))},o.prototype.getContentSize=function(e,t){return this.contentsize[e].getWatchedValue(t)},o.prototype.getVisibleSize=function(e,t){return this.visiblescroll[e].getWatchedValue(t)},o.prototype.updateContentSize=function(e){var t=this.engine.getAnimationEngine(),i=e.watchValue(this.servercontentsize);t.interrogations().setValue(n.Interrogation.scrollextent_x,i.width),t.interrogations().setValue(n.Interrogation.scrollextent_y,i.height)},o.prototype.getScrollableKeyframe=function(e){return this.parent.getScrollChecker().scrollableKeyframe(e)},o.prototype.getSnapOffsets=function(e,i){var n=this.getScrollableKeyframe();return e===t.ScrollDirection.HORIZONTAL?n.snapPointsHorizontal:n.snapPointsVertical},o.prototype.scrollForwardToSnapPoint=function(e,t){if(this.getScrollableKeyframe()){var n=i.SnapPoints.getNext(this.getScroll(t),e,this.getSnapOffsets(t),t);this.scrollTo(n,t)}},o.prototype.scrollBackwardToSnapPoint=function(e,t){if(this.getScrollableKeyframe()){var n=i.SnapPoints.getPrevious(this.getScroll(t),e,this.getSnapOffsets(t),t);this.scrollTo(n,t)}},o.prototype.scrollTo=function(e,t){this.enabled.getValue()&&this.scrollToImpl(e,t)},o.prototype.animateOffset=function(e,t){this.scrollTo(this.getScroll(e)+t,e)},o.prototype.calculateVisibleScrollArea=function(e,i){var n=this.getPadding(i);return e===t.ScrollDirection.HORIZONTAL?this.parent.getWidth(i)-n.width:this.parent.getHeight(i)-n.height},o.prototype.calculateClientSideContentSize=function(e,t){return this.scrollExtents=null,this.toClientUnits(this.getServerContentSize(e,t),t)},o.prototype.getPadding=function(e){var t=this.parent.getViewport(e);if(!t)return new Size;var i=t.absolutePositioning(e);return new Size(i.left,i.top)},o.prototype.isScrollableKeyframe=function(e,t){var i=this.parent.getViewport(t);if(!i)return!1;var n=i.layoutSize(t);return!new Size(e.scrollWidth,e.scrollHeight).leq(n)},o.prototype.toServerUnits=function(e,t){return e/this.viewportScale(t)},o.prototype.toClientUnits=function(e,t){return e*this.viewportScale(t)},o.prototype.toClientSize=function(e,t){return new Size(this.toClientUnits(e.width,t),this.toClientUnits(e.height,t))},o.prototype.viewportScale=function(e){var t=this.parent.getViewport(e);return t?t.getScale(e):1},o.prototype.dispose=function(){e.prototype.dispose.call(this),this.engine=null},o.prototype.setMouseWheelScrollBindingEnabled=function(e){this.mouseWheelScrollBindingEnabled=e},o.prototype.isMouseWheelScrollBindingEnabled=function(){return this.mouseWheelScrollBindingEnabled},o.scrollbarEnabled=TDB.watchableTag(596475992,null,!0),o}(Disposable);i.GenericScrolling=o;var r=e.Utilities.query.has(e.Common.UrlHelper.URLParamAutoScroll),a=function(){function t(){this.lastposition=0,this.position=0,this.speed=0,this.speedsign=1,this.time=0,this.locked=!0,this.scrollstream=[]}return t.prototype.moving=function(){return!this.locked},t.prototype.push_speed=function(e){var t=this.scrollstream.length;if(t>=4&&(this.scrollstream.shift(),t--),t>1){var i=this.scrollstream[t-1],n=i.distance-this.scrollstream[t-2].distance<0;if(e.distance-i.distance<0!=n){var o=i;this.scrollstream.length=0,this.scrollstream.push(o)}}this.scrollstream.push(e)},t.prototype.finalize_speed=function(){var t=this.scrollstream.length;if(!t||t<=1)return 0;var i=this.scrollstream[t-1],n=(i.distance-this.scrollstream[0].distance)/(i.time-this.scrollstream[0].time);return e.Utilities.weblog("scrolltest","FINALIZESPEED  LEN: "+t.toString()+"; SPEED: "+n.toString()),this.scrollstream.length=0,this.push_speed(i),n},t.prototype.scroll=function(e){this.lock(),this.position=e},t.prototype.unlock=function(n,o){this.locked=!1,this.unlockTime=this.time,this.speed=this.finalize_speed(),this.speedsign=this.speed<0?-1:1,this.unlockPosition=this.position;var r=this.speedsign*this.speed*this.speed/t.defaultK,a=this.position+r;e.Utilities.weblog("scrolltest","***UNLOCK   SPEEDSIGN: "+this.speedsign.toString()+"; DISTANCE: "+r.toString()+"; DESTINATION: "+a.toString()+"; SPEED: "+this.speed.toString());var s=n.map(function(e){return e.getStartPoint()}).concat(n.filter(function(e){return e.getEndPoint()-e.getStartPoint()>o}).map(function(e){return e.getEndPoint()-o})).sort(function(e,t){return e-t}),l=this.position+.5*r,u=this.position+1.5*r,d=i.SnapPoints.findClosestValue(s,a);void 0!==d&&d>=Math.min(l,u)&&d<=Math.max(l,u)?(this.k=this.speed*this.speed/Math.abs(d-this.position),isFinite(this.k)||(this.k=t.defaultK)):this.k=t.defaultK},t.prototype.lock=function(){this.locked=!0},t.prototype.toss=function(e){this.speedsign=e<this.position?-1:1,this.k=t.defaultK,this.speed=this.speedsign*Math.sqrt(this.k*Math.abs(e-this.position)),this.locked=!1,this.unlockTime=this.time,this.unlockPosition=this.position,this.scrollstream.length=0},t.prototype.update=function(t,i){if(r)return.5*(1+Math.sin(t/15e3))*i;if(this.locked){if(this.position=MathUtils.clamp(this.position,0,i),this.push_speed({distance:this.position,time:t}),this.position-this.lastposition!=0){var n=t-this.time;e.Utilities.weblog("scrolltest","UPDATE   POSITION:"+this.position.toString()+"; LASTPOS: "+this.lastposition.toString()+"; TIMEDIFF: "+n.toString()+"; SPEED: "+((this.position-this.lastposition)/n).toString())}}else{var o=Math.abs(2*this.speed/this.k),a=Math.min(o,t-this.unlockTime),s=MathUtils.clamp(this.unlockPosition+this.speed*a-this.speedsign*this.k/4*a*a,0,i);o!==a&&s!==this.position||this.lock(),this.position=s}return this.lastposition=this.position,this.time=t,this.position},t.prototype.getPosition=function(){return this.position},t.defaultK=+e.Utilities.query.fetch(e.Common.UrlHelper.URLParamFriction)||.01,t}();i.Scroller=a}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.AnimationManager,o=+e.Utilities.query.fetch(e.Common.UrlHelper.URLParamTouchMultiplier)||1.3,r=function(r){function l(e,t,n){var o=r.call(this,e,t,n)||this;return o.initialScroll=[0,0],o.initialTouchPos=[0,0],o.fps=new a,o.touchmoved=!1,o.scroller=[new i.Scroller,new i.Scroller],o.fingerOnScreen=!1,o.updateDomScroll=[function(e){},function(e){}],o.getDomScroll=[function(){return 0},function(){return 0}],o.hasMoved=!1,o.crisper=new s(o),o.logAverageTickTime=!0,o.justStoppedScrolling=!1,o.engine.getAnimationEngine().addTickListener(o,o.tick.bind(o)),o}return __extends(l,r),l.prototype.tick=function(i){this.scrollExtents||(this.scrollExtents=this.calculateExtents());var o=this.hasMoved||this.scroller[t.ScrollDirection.HORIZONTAL].moving(),r=this.hasMoved||this.scroller[t.ScrollDirection.VERTICAL].moving();this.hasMoved=!1,o||this.scroller[t.ScrollDirection.HORIZONTAL].scroll(this.toServerUnits(this.getDomScroll[t.ScrollDirection.HORIZONTAL]())),r||this.scroller[t.ScrollDirection.VERTICAL].scroll(this.toServerUnits(this.getDomScroll[t.ScrollDirection.VERTICAL]()));var a=this.scroller[t.ScrollDirection.HORIZONTAL].update(i,this.scrollExtents.maxvalx),s=this.scroller[t.ScrollDirection.VERTICAL].update(i,this.scrollExtents.maxvaly);o&&this.updateDomScroll[t.ScrollDirection.HORIZONTAL](this.toClientUnits(a)),r&&this.updateDomScroll[t.ScrollDirection.VERTICAL](this.toClientUnits(s));var l=this.engine.getAnimationEngine();l.interrogations().setValue(n.Interrogation.scroll_x,a),l.interrogations().setValue(n.Interrogation.scroll_y,s),this.crisper.update(l,a,s),this.scrolling()?(this.logAverageTickTime=!0,this.fps.tick(i)):(this.logAverageTickTime&&(e.Utilities.weblog("animation","average time spent in tick callback: "+this.fps.avg),this.logAverageTickTime=!1),l.showPending(),this.fps.reset(),this.justStoppedScrolling=!1),!this.engine.getAnimationEngine().is3dWorld()&&this.fps.runningSlow()&&this.engine.forceLowFiMode()},l.prototype.fetchScrollValues=function(){return[this.scroller[t.ScrollDirection.HORIZONTAL].getPosition(),this.scroller[t.ScrollDirection.VERTICAL].getPosition()]},l.prototype.fetchClientScrollValues=function(){var e=this;return this.fetchScrollValues().map(function(t){return e.toClientUnits(t)})},l.prototype.setScrollValues=function(e,i){var n=this;[t.ScrollDirection.HORIZONTAL,t.ScrollDirection.VERTICAL].forEach(function(t){n.setScroll(t,e[t]),i&&n.updateDomScroll[t](n.toClientUnits(e[t]))})},l.prototype.scrolling=function(){return this.fingerOnScreen||this.scroller.some(function(e){return e.moving()})},l.prototype.touchStart=function(e){return!!e.ismain&&(this.touchmoved=!1,this.scrolling()?(this.engine.getAnimationEngine().showPending(),this.justStoppedScrolling=!0):this.justStoppedScrolling=!1,this.canScroll(t.ScrollDirection.HORIZONTAL)&&this.stopFreeScrolling(t.ScrollDirection.HORIZONTAL),this.canScroll(t.ScrollDirection.VERTICAL)&&this.stopFreeScrolling(t.ScrollDirection.VERTICAL),this.initialScroll[t.ScrollDirection.HORIZONTAL]=this.toClientUnits(this.scroller[t.ScrollDirection.HORIZONTAL].getPosition()),this.initialTouchPos[t.ScrollDirection.HORIZONTAL]=e.touch.x,this.initialScroll[t.ScrollDirection.VERTICAL]=this.toClientUnits(this.scroller[t.ScrollDirection.VERTICAL].getPosition()),this.initialTouchPos[t.ScrollDirection.VERTICAL]=e.touch.y,this.fingerOnScreen=!0,!1)},l.prototype.touchMove=function(e){if(e.originalEvent.preventDefault(),!e.ismain)return!1;if(this.canScroll(t.ScrollDirection.HORIZONTAL)){var i=e.touch.x-this.initialTouchPos[t.ScrollDirection.HORIZONTAL];e.touch.isTwoFingerSwipe&&(i+=e.touch.y-this.initialTouchPos[t.ScrollDirection.VERTICAL]),this.engine.isRtl()&&(i*=-1),i*=o,this.setScroll(t.ScrollDirection.HORIZONTAL,this.toServerUnits(this.initialScroll[t.ScrollDirection.HORIZONTAL]-i)),this.touchmoved=!0}if(this.canScroll(t.ScrollDirection.VERTICAL)){var n=e.touch.y-this.initialTouchPos[t.ScrollDirection.VERTICAL];n*=o,this.setScroll(t.ScrollDirection.VERTICAL,this.toServerUnits(this.initialScroll[t.ScrollDirection.VERTICAL]-n)),this.touchmoved=!0}return!1},l.prototype.touchStop=function(e){return!!e.ismain&&(this.touchmoved&&(e.originalEvent.preventDefault(),this.canScroll(t.ScrollDirection.HORIZONTAL)&&this.startFreeScrolling(t.ScrollDirection.HORIZONTAL),this.canScroll(t.ScrollDirection.VERTICAL)&&this.startFreeScrolling(t.ScrollDirection.VERTICAL)),this.fingerOnScreen=!1,!1)},l.prototype.handleTapEvent=function(e){return this.justStoppedScrolling?TDB.EventPropagation.Bypass:TDB.EventPropagation.Bubble},l.prototype.mouseClicked=function(e){return this.touchmoved?(this.touchmoved=!1,TDB.EventPropagation.Bypass):this.justStoppedScrolling?(this.justStoppedScrolling=!1,TDB.EventPropagation.Bypass):TDB.EventPropagation.Bubble},l.prototype.onScroll=function(e,t){this.stopFreeScrolling(e),this.scroller[e].scroll(this.toServerUnits(t))},l.prototype.setScroll=function(e,t){this.scroller[e].getPosition()!==t&&(this.scroller[e].scroll(t),this.hasMoved=!0)},l.prototype.getScroll=function(e){return this.scroller[e].getPosition()},l.prototype.scrollToImpl=function(e,t){isNaN(e)||(e=MathUtils.clamp(e,0,Math.max(0,this.toServerUnits(this.getContentSize(t)-this.getVisibleSize(t)))),this.scroller[t].toss(e))},l.prototype.offsetByClientValue=function(e,t){this.offsetScroll(e,this.toClientUnits(t))},l.prototype.offsetScroll=function(e,t){this.stopFreeScrolling(e);var i=this.scroller[e];i.scroll(i.getPosition()+t),this.updateDomScroll[e](this.fetchClientScrollValues()[e])},l.prototype.stopFreeScrolling=function(t){e.Utilities.weblog("touch","stopped free scrolling"),this.scroller[t].lock()},l.prototype.startFreeScrolling=function(t){e.Utilities.weblog("touch","started free scrolling"),this.scroller[t].unlock(this.getSnapOffsets(t),this.toServerUnits(this.getVisibleSize(t)))},l.prototype.dispose=function(){this.stopFreeScrolling(t.ScrollDirection.HORIZONTAL),this.stopFreeScrolling(t.ScrollDirection.VERTICAL),r.prototype.dispose.call(this)},l}(i.GenericScrolling);i.AnimatedScrolling=r;var a=function(){function t(){this.lasttime=0,this.avg=0,this.N=0,this.tries=0}return t.prototype.reset=function(){this.N>0&&e.Utilities.weblog("FramerateAnalyzer ",this.N+": "+this.avg+"ms"),this.N=this.avg=this.lasttime=0},t.prototype.tick=function(e){if(0!==this.lasttime){var t=e-this.lasttime;this.lasttime=e,this.avg=(this.N*this.avg+t)/(this.N+1),this.N+=1}else this.lasttime=e},t.prototype.runningSlow=function(){return!(this.N<3)&&(this.avg<40?(this.tries>0&&this.tries--,!1):++this.tries<=3?(this.reset(),!1):(this.reset(),this.tries=0,!0))},t}(),s=function(){function t(e){this.scroller=e,this.lastx=0,this.lasty=0,this.identicalcount=0}return t.prototype.update=function(t,i,n){if(e.Utilities.browser.isWebkit){var o=this.lastx===i&&this.lasty===n;this.lastx=i,this.lasty=n,o?this.identicalcount++:this.identicalcount=0,0===this.identicalcount||this.scroller.scrolling()?t.accelerateCamera():10===this.identicalcount&&t.decelerateCamera()}},t}()}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.AnimationManager,o=function(e){function o(t,n,o){var r=e.call(this,t,n,o)||this;return r.updateDomScroll=[function(){},function(){}],r.getDomScroll=[function(){return 0},function(){return 0}],r.scroller=[new i.Scroller,new i.Scroller],r.newToss=!1,r.engine.getAnimationEngine().addTickListener(r,r.tick.bind(r)),r}return __extends(o,e),o.prototype.tick=function(e){var i=this.getContentSize(t.ScrollDirection.HORIZONTAL),n=this.getContentSize(t.ScrollDirection.VERTICAL),o=this.getVisibleSize(t.ScrollDirection.HORIZONTAL),r=this.getVisibleSize(t.ScrollDirection.VERTICAL),a=Math.max(0,i-o),s=Math.max(0,n-r);if(this.newToss){this.newToss=!1;var l=this.getDomScroll[this.tossDirection](),u=this.scroller[this.tossDirection];u.moving()||u.update(e-1,this.tossDirection===t.ScrollDirection.HORIZONTAL?a:s),u.scroll(l),u.toss(this.tossDestination)}if(this.scroller[t.ScrollDirection.HORIZONTAL].moving()||this.scroller[t.ScrollDirection.VERTICAL].moving()){var d=this.scroller[t.ScrollDirection.HORIZONTAL].update(e,a),c=this.scroller[t.ScrollDirection.VERTICAL].update(e,s);this.updateDomScroll[t.ScrollDirection.HORIZONTAL](d),this.updateDomScroll[t.ScrollDirection.VERTICAL](c),this.internalSetScroll(t.ScrollDirection.HORIZONTAL,this.toServerUnits(d)),this.internalSetScroll(t.ScrollDirection.VERTICAL,this.toServerUnits(c)),this.scrolling()?this.engine.getAnimationEngine().jumpstart():this.engine.getAnimationEngine().showPending()}},o.prototype.fetchScrollValues=function(){return[this.getScroll(t.ScrollDirection.HORIZONTAL),this.getScroll(t.ScrollDirection.VERTICAL)]},o.prototype.fetchClientScrollValues=function(){var e=this;return this.fetchScrollValues().map(function(t){return e.toClientUnits(t)})},o.prototype.setScrollValues=function(e,i){this.setScroll(t.ScrollDirection.HORIZONTAL,e[0]),this.setScroll(t.ScrollDirection.VERTICAL,e[1])},o.prototype.scrolling=function(){return this.scroller[t.ScrollDirection.HORIZONTAL].moving()||this.scroller[t.ScrollDirection.VERTICAL].moving()},o.prototype.onScroll=function(e,t){this.internalSetScroll(e,this.toServerUnits(MathUtils.clamp(t,0,Math.max(0,this.getContentSize(e)-this.getVisibleSize(e)))))},o.prototype.getScroll=function(e){return this.toServerUnits(this.getDomScroll[e]())},o.prototype.setScroll=function(e,t){var i=this.toClientUnits(t);this.scroller[e].scroll(i),this.updateDomScroll[e](i),this.internalSetScroll(e,t)},o.prototype.scrollToImpl=function(e,t){if(!isNaN(e)){var i=this.toClientUnits(e);this.tossDestination=MathUtils.clamp(i,0,Math.max(0,this.getContentSize(t)-this.getVisibleSize(t))),this.tossDirection=t,this.newToss=!0,this.engine.getAnimationEngine().jumpstart()}},o.prototype.offsetByClientValue=function(e,t){var i=this.toServerUnits(this.getDomScroll[e]()+t);this.setScroll(e,i)},o.prototype.offsetScroll=function(e,t){this.offsetByClientValue(e,this.toClientUnits(t))},o.prototype.internalSetScroll=function(e,i){var o=this.engine.getAnimationEngine();e==t.ScrollDirection.HORIZONTAL?o.interrogations().setValue(n.Interrogation.scroll_x,i):o.interrogations().setValue(n.Interrogation.scroll_y,i),o.cameraTransform().set(e,i/100)},o}(i.GenericScrolling);i.NativeScrolling=o}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(t){var i=function(i){function n(e,n){var o=i.call(this,e)||this;return o.parent=e,o.args=n,o.model=n.model,o.resourceFactory=n.resourceFactory,o.logic=new t.AnimatedScrolling(o,o.parent._interactionEngine,n.enabled),o.scrollchecker=new t.ScrollableChecker(o,o.parent._interactionEngine),o}return __extends(n,i),n.prototype.viewportScale=function(e){return this.viewport.getChild(e).scale},n.prototype.getModelObjectId=function(){return this.model.id},n.prototype.visibleViewportSize=function(){return this.viewport.getChild(void 0).scaledServerSize()},n.prototype.getScrollChecker=function(){return this.scrollchecker},n.prototype.getViewport=function(e){return this.viewport.getChild(e)},n.prototype.getWidth=function(e){return this.parent.getWidth(e)},n.prototype.getHeight=function(e){return this.parent.getHeight(e)},n.prototype.viewportArgs=function(){return new TDB.ChildArgs(t.ViewportVE,{model:this.model,resourceFactory:this.resourceFactory})},n.prototype.touchStart=function(e){return this.logic.touchStart(e)},n.prototype.touchMove=function(e){return this.logic.touchMove(e)},n.prototype.touchStop=function(e){return this.logic.touchStop(e)},n.prototype.handleTapEvent=function(e){return this.logic.handleTapEvent(e)},n.prototype.mouseClicked=function(e){var t=i.prototype.mouseClicked.call(this,e);return t!==TDB.EventPropagation.Bubble?t:this.logic.mouseClicked(e)},n.prototype.isScrollableKeyframe=function(e,t){return this.logic.isScrollableKeyframe(e,t)},n.prototype.fetchScrollValues=function(){return this.logic.fetchScrollValues()},n.prototype.fetchClientScrollValues=function(){var e=this;return this.logic.fetchScrollValues().map(function(t){return e.logic.toClientUnits(t)})},n.prototype.setScrollValues=function(e,t){this.logic.setScrollValues(e,t)},n.prototype.scrolling=function(){return this.logic.scrolling()},n.prototype.scrollForwardToSnapPoint=function(e,t){this.logic.scrollForwardToSnapPoint(e,t)},n.prototype.scrollBackwardToSnapPoint=function(e,t){this.logic.scrollBackwardToSnapPoint(e,t)},n.prototype.offsetByClientValue=function(e,t){this.logic.offsetByClientValue(e,t)},n.prototype.offsetScroll=function(e,t){this.logic.offsetScroll(e,t)},n.prototype.animateOffset=function(e,t){this.logic.animateOffset(e,t)},n.prototype.setScroll=function(e,t){this.logic.setScroll(e,t)},n.prototype.verticalScrollInitArgs=function(){return{direction:e.ScrollDirection.VERTICAL,listener:this.logic}},n.prototype.horizontalScrollInitArgs=function(){return{direction:e.ScrollDirection.HORIZONTAL,listener:this.logic}},n.prototype.horizontalReversedScrollInitArgs=function(){return{direction:e.ScrollDirection.HORIZONTAL_REVERSED,listener:this.logic}},n.prototype.verticalScrollScrollSizeArgs=function(t){return this.logic.getScrollSize(e.ScrollDirection.VERTICAL,t)},n.prototype.horizontalScrollScrollSizeArgs=function(t){return this.logic.getScrollSize(e.ScrollDirection.HORIZONTAL,t)},n.prototype.horizontalReversedScrollScrollSizeArgs=function(t){return this.logic.getScrollSize(e.ScrollDirection.HORIZONTAL,t)},n.prototype.verticalScrollEnabledArgs=function(t){var i=this.parent.parent.parent;return!(i.inEmbedHostMode||i.isEditMode.getWatchedValue(t)&&i.authoringPaneOpen.getWatchedValue(t))&&this.logic.shouldShowScrollbar(e.ScrollDirection.VERTICAL,t)},n.prototype.horizontalScrollEnabledArgs=function(t){return!this.parent.parent.parent.inEmbedHostMode&&this.logic.shouldShowScrollbar(e.ScrollDirection.HORIZONTAL,t)},n.prototype.horizontalReversedScrollEnabledArgs=function(t){return!this.parent.parent.parent.inEmbedHostMode&&this.logic.canScroll(e.ScrollDirection.HORIZONTAL,t)},n.prototype.preventFromShowingArgs=function(t){return this.parent.getAutoPlayDriver().getState(t)===e.Common.AutoPlayState.Playing},n.prototype.verticalScrollPreventFromShowingArgs=function(e){return this.preventFromShowingArgs(e)},n.prototype.horizontalScrollPreventFromShowingArgs=function(e){return this.preventFromShowingArgs(e)},n.prototype.horizontalReversedScrollPreventFromShowingArgs=function(e){return this.preventFromShowingArgs(e)},n.prototype.isRtlArgs=function(e){return this.model.renderModel.renderModelRoot.getRTL(e)},n.prototype.updateVisibleSize=function(e){this.logic.updateVisibleSize(e)},n.prototype.updateContentSize=function(e){this.logic.updateContentSize(e)},n.prototype.setMouseWheelScrollBindingEnabled=function(e){this.logic.setMouseWheelScrollBindingEnabled(e)},n.prototype.mouseScrolled=function(t){return t.isMozilla?TDB.EventPropagation.Bubble:t.ctrlKey?TDB.EventPropagation.Bubble:(this.handleMouseScrollInDirection(t,e.ScrollDirection.HORIZONTAL),this.handleMouseScrollInDirection(t,e.ScrollDirection.VERTICAL),TDB.EventPropagation.PreventDefault)},n.prototype.handleMouseScrollInDirection=function(t,i){if(this.logic.canScroll(i)&&this.logic.isMouseWheelScrollBindingEnabled()){var n=(i===e.ScrollDirection.VERTICAL?t.wheelDeltaY:t.wheelDeltaX)||t.wheelDelta||-30*t.detail;this.logic.offsetByClientValue(i,-.75*n)}},n.areEqual=function(e,t){return e.model===t.model},n}(TDB.FocusableViewElement);t.AnimatedScrollerVEBase=i}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.Common,o=function(o){function r(e,t){var i=o.call(this,e)||this;return i.model=t,i}return __extends(r,o),r.prototype.getPlaceholderInfo=function(e){var t=this.model;return t.dataStore.getData(t.embedModel.getEmbedSourceUrl(e),e)},r.prototype.viewButtonArgs=function(e){var t,o=this.model,r={buttonId:ClientAction.ButtonId.Embed_ViewPlaceholder,click:o.click,context:o.context,textClass:"segoeUI",text:{value:Resources.LayoutEmbedPlaceholderView}};if(this.isLoadingVisibleArgs(e)){var a=n.Environment.getInstance().getAvailableBandwidth();if(a>1024||0==a)return null;t="EmbedPlaceholderLoadNowButton",r.text={value:Resources.LayoutEmbedPlaceholderLoadNow},r.buttonId=ClientAction.ButtonId.Embed_LoadNowPlaceholder}else if(this.isCookieBannerVisibleArgs(e))t="EmbedPlaceholderViewSwayButton";else switch(this.getPlaceholderInfo(e).embedType){case i.EmbedType.Sway:t="EmbedPlaceholderViewSwayButton";break;case i.EmbedType.OneDrive:t="EmbedPlaceholderViewOneDriveButton";break;case i.EmbedType.OneDriveWord:t="EmbedPlaceholderViewWordButton";break;case i.EmbedType.OneDriveExcel:t="EmbedPlaceholderViewExcelButton";break;case i.EmbedType.OneDrivePowerpoint:t="EmbedPlaceholderViewPowerpointButton";break;default:return null}return r.cssClass={value:t},new TDB.ChildArgs(i.TextButtonVE,r)},r.prototype.spinnerStyleArgs=function(e){var t={};return this.isLoadingVisibleArgs(e)?t["background-image"]="url("+CommonSettings.ContentBaseUrl+"spinner_16x16.gif)":t["background-image"]="",t},r.prototype.isLoadingVisibleArgs=function(e){return this.getPlaceholderInfo(e).loadingState===t.Common.PlaceholderLoadingState.loading},r.prototype.loadingTextArgs=function(e){return Resources.Loading},r.prototype.isCookieBannerVisibleArgs=function(e){return CookieConsent.isCookieConsentNotificationVisible(e)},r.prototype.loadingDelayedTextArgs=function(e){return Resources.LayoutEmbedPlaceholderText},r.prototype.iconArgs=function(e){var t,n;switch(this.getPlaceholderInfo(e).embedType){case i.EmbedType.Sway:t=Glyphs.PreviewSwayEmbedIconClip,n=Glyphs.PreviewSwayEmbedIconGlyph;break;case i.EmbedType.OneDrive:t=Glyphs.PreviewOneDriveEmbedIconClip,n=Glyphs.PreviewOneDriveEmbedIconGlyph;break;case i.EmbedType.OneDriveWord:t=Glyphs.PreviewOneDriveWordEmbedIconClip,n=Glyphs.PreviewOneDriveWordEmbedIconGlyph;break;case i.EmbedType.OneDriveExcel:t=Glyphs.PreviewOneDriveExcelEmbedIconClip,n=Glyphs.PreviewOneDriveExcelEmbedIconGlyph;break;case i.EmbedType.OneDrivePowerpoint:t=Glyphs.PreviewOneDrivePowerpointEmbedIconClip,n=Glyphs.PreviewOneDrivePowerpointEmbedIconGlyph;break;default:return null}var o={clipClass:{value:t},glyphClass:{value:n},wrapperClass:{value:"EmbedPlaceholderIcon"}};return new TDB.ChildArgs(i.GlyphVE,o)},r.prototype.backgroundStyleArgs=function(e){var t=this.getPlaceholderInfo(e).info,i={};return t&&t.Thumbnail&&(i["background-image"]="url("+t.Thumbnail+")",i["background-size"]="cover",i.opacity="0.1"),i},r.prototype.hostnameTextArgs=function(t){var i=this.model.embedModel.getEmbedSourceUrl();return e.Utilities.extractHostnameFromUrl(i)},r.prototype.isHostnameVisibleArgs=function(e){return this.getPlaceholderInfo(e).embedType==i.EmbedType.Unknown},r.addAccessibleParamterToEmbedIfInAccessibleMode=function(i,n){var o=i.split("?"),r=void 0===o[1]?"":"?"+o[1],a=new e.Utilities.UrlDict("?",function(){return r}),s=a.fetch(e.Common.UrlHelper.URLParamAccessible)==e.Common.UrlHelper.URLParamValueTrue;return t.Common.EmbedPlaceholderDataStore.isSwayDomain(e.Utilities.extractHostnameFromUrl(i).toLowerCase())&&n&&!s&&(r=a.add(e.Common.UrlHelper.URLParamAccessible,e.Common.UrlHelper.URLParamValueTrue)),o[0].concat(r)},r.prototype.titleTextArgs=function(e){var t=this.getPlaceholderInfo(e).info;return t&&t.Title},r.prototype.isEmbedInfoVisibleArgs=function(e){return!this.isCookieBannerVisibleArgs(e)},r.prototype.titleClassNameArgs=function(e){return this.model.embedModel.position.getHeight()<180?"EmbedPlaceholderTitleSmall":"EmbedPlaceholderTitleLarge"},r.prototype.authorClassNameArgs=function(e){return this.model.embedModel.position.getHeight()<180?"EmbedPlaceholderAuthorSmall":"EmbedPlaceholderAuthorLarge"},r.prototype.authorTextArgs=function(e){var t=this.getPlaceholderInfo(e).info;return t&&t.Author},r}(TDB.FocusableViewElement);i.EmbedPlaceholderVEBase=o}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(e,i){var n=t.call(this,e,i.model)||this;return n.resourceFactory=i.resourceFactory,n}return __extends(i,t),i.prototype.codeBlockArgs=function(t){var i=this;return new TDB.ChildArgs(e.MonacoEditorVE,{resourceFactory:this.resourceFactory,getCode:function(){return i._model.getContent(t)},getLanguage:function(){return i._model.getLanguage(t)},isReadOnly:!0,scrollbarsEnabled:!0,scrollBeyondLastLine:!1})},i.areEqual=function(e,t){return e.model===t.model},i}(e.LayoutVE);e.CodeBlockLayoutVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=ClientAction.StatisticalMeasure,o=function(o){function r(e,t){var i=o.call(this,e,t.model)||this;return i.parent=e,i.textLayoutProps=TDB.watcherTag(596476034,i,i,i.calculateTextLayoutProps),i.resourceFactory=t.resourceFactory,i.allTextRuns=TDB.watcherTag(596476035,i,i,i.findAllTextRuns),i}return __extends(r,o),r.prototype.hasSectionsArgs=function(e){return this._model.getSectionList(e).children.getCollection(e).length>0},r.prototype.sectionListArgs=function(e){var i={model:this._model.getSectionList(e),resourceFactory:this.resourceFactory};return new TDB.ChildArgs(t.TextListVE,i)},r.prototype.getAllParagraphs=function(t,n,o){for(var r=t.children.getCollection(n),a=0,s=r.length;a<s;++a){var l=r[a];if(l instanceof i.TextParagraph)o.push(l);else{if(!(l instanceof i.TextList))throw e.RethrowLogger.createError("unknown text section type");this.getAllParagraphs(l,n,o)}}},r.prototype.findAllTextRuns=function(e){return this.getParagraphChildrenModels(e).mapmany(function(t){return t.runs.getCollection(e)})},r.prototype.getParagraphChildrenModels=function(e){var t=[],i=this._model.getSectionList(e);return i&&this.getAllParagraphs(i,e,t),t},r.prototype.getAllRunModels=function(e){return this.allTextRuns.getWatchedValue(e)},r.prototype.getTextStyleFromId=function(e,t){return this.findRootVE().fetchTextStyle(e,t)},r.prototype.isTextVisible=function(e){return t.TextModelUtilities.isTextVisible(this.findRootVE(),this.getAllRunModels(e),e,this.pageId)},r.prototype.calculateTextLayoutProps=function(e){if(!this.isTextVisible(e))return null;var t=this.calculateLetterSpacingAdjustment(e);return this.logMetrics(t,e),{letterSpacing:t}},r.prototype.calculateLetterSpacingAdjustment=function(e){var t=this,i=this._model.position.getWidth(e);return this.getParagraphChildrenModels(e).map(function(n){return t.getLetterSpacingAdjustment(n,i,e)}).reduce(function(e,t){return Math.min(e,t)},0)},r.prototype.logMetrics=function(e,t){var i=0,o=this.getStyle(t);if(null!=o){var r=o.getSize(t);i=Math.abs(e)/r}ActionLogger.ObserveClientMeasure(n[n.OutputTextAdjustment],{spacingRatio:i})},r.prototype.textWrapperStyleArgs=function(t){var i={};i.display=this.isTextVisible(t)?"":"none";var n=this.getTransformScaleString(t);i[Modernizr.prefixed("transform")]=n;var o=this.getStyle(t);i.fontSize=this.getFontSizeTextForStyle(t,o),i.lineHeight=e.Utilities.toPxStr(this.getAdjustedLineHeight(t)),i.letterSpacing=this.getAdjustedLetterSpacingTextForStyle(t,o),i.whiteSpace=this.getWhiteSpaceStyle(t,o);var r=""!==n,a=this.getRawPosition();return i.width=r?e.Utilities.toPxStr(a.getWidth(t)):"",i.height=r?e.Utilities.toPxStr(a.getHeight(t)):"",i},r.prototype.textWrapperPropsArgs=function(e){var i={},n="text_wrapper ";return n+=this._model.getTextStyleId(e),n+=" "+t.LayoutCssClasses.getColor(this._model.getTextColorId(e)),i.className=n,i},r.prototype.getTransformScaleString=function(e){var t=this.getScale(e).toFixed(4);return"1.0000"===t?"":"scale("+t+")"},r.prototype.getStyle=function(e){var t=this.getStyleId(e);return t?this.getTextStyleFromId(t,e):null},r.prototype.getStyleId=function(e){return this._model.getTextStyleId(e)},r.prototype.getFontSizeTextForStyle=function(t,i){if(!i)return"0";var n=i.getSize(t),o=UX.getAdjustedFontSize(n);return o===n?"":e.Utilities.toPxStr(o)},r.prototype.getAdjustedLineHeight=function(e){var t=this._model.getLineHeight(e);return UX.getAdjustedLineHeight(t)},r.prototype.getAdjustedLetterSpacingTextForStyle=function(t,i){if(!i)return"";var n=this.textLayoutProps.getWatchedValue(t);if(!n||0===n.letterSpacing)return"";var o=i.getTracking(t)+n.letterSpacing;return e.Utilities.toPxStrFloor(o)},r.prototype.getWhiteSpaceStyle=function(e,t){return t&&t.getTextAlignment(e)===i.LayoutTextAlignment.Justified?"normal":""},r.prototype.getLetterSpacingAdjustment=function(e,i,n){for(var o=0,r=this.getIndentation(e,n),a=r,s=0,l=e.runs.getCollection(n),u=l.length,d=0;d<u;++d)for(var c=l[d],p=t.TextModelUtilities.getTextStyle(this.findRootVE(),c,n),g=t.TextUtilities.buildFamilyFallbackChain(p,this.pageId,n),h=c.getText(n).split("\n"),y=0;y<h.length;++y){var m=h[y];a+=t.TextUtilities.getSpanWidth(m,p,g,n),s+=m.length,y!==h.length-1&&(o=t.TextUtilities.updateAdjustment(o,a,i,s),a=r,s=0)}return o=t.TextUtilities.updateAdjustment(o,a,i,s)},r.prototype.getIndentation=function(e,n){if(t.TextModelUtilities.getHierarchyLevel(e,n)<=1)return 0;var o=this.getStyle(n);if(null==o)return 0;for(var r=o.getSize(n),a=0,s=e.getParentList(n);null!=s;s=s.getParentList(n)){var l=s.getStyle(n);l===i.ListStyle.Bulleted?a+=r:l===i.ListStyle.Numbered&&(a+=1.5*r)}return a},r.areEqual=function(e,t){return e.model===t.model},r}(t.LayoutVE);t.TextBlockLayoutVEBase=o,ActionLogger.CreateClientMeasure(n[n.OutputTextAdjustment],{spacingRatio:null})}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(t){function i(e,i){return t.call(this,e,i)||this}return __extends(i,t),i.prototype.contentArgs=function(t){return new TDB.ChildArgs(e.TweetVE,this._model.getSourceId(t))},i.prototype.getTweetVE=function(){return this._tweetVE},i}(e.LayoutVE);e.StatusUpdateLayoutVEBase=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(i){function n(e,n){var o=i.call(this,e)||this;return o.block=e.getContainingBlock(),o._model=n,(o.findParent(t.RegionLayoutVE)||o.findParent(t.PanelLayoutVE))&&(o.focusableSurrogate=new TDB.FocusableSurrogate(o,{domFocusable:{compute:new TDB.ComputedOptionArgs(o,o.hasUrlArgs)}}),o.addFocusableChild(o.focusableSurrogate)),o}return __extends(n,i),n.prototype.FocusableInitArgs=function(){return this.focusableSurrogate?{surrogate:this.focusableSurrogate}:void 0},n.prototype.getModelObjectId=function(){return this._model.id},n.prototype.getTextStyleId=function(e){return this._model.getFontKey(e)},n.prototype.TextSpanTextArgs=function(e){return this._model.getText(e)},n.prototype.TextSpanPropsArgs=function(e){var i=this._model,n=this.block._model,o="",r=this.getTextStyleId(e);r&&r!==n.getTextStyleId(e)&&(o+=r);var a=i.getTextColorName(e);a!==n.getTextColorId(e)&&(o+=" "+t.LayoutCssClasses.getColor(a));var s={className:o,id:"text_"+i.id},l=i.getHyperlinkUri(e);return l&&(s.href=l,s.target="_blank",this.block.findRootVE().getSharingManager().getCurrentSharingLevel(e)!==StoryAudience.Public?s.rel="nofollow noreferrer":s.rel="nofollow"),s},n.prototype.TextSpanJQStyleStyleArgs=function(e){var i=this._model,n=t.LayoutCssClasses.getARGB(i.getTextColorOverride(e)),o=i.getTextOpacityOverride(e),r=i.getTextShadowXOff(e)||0,a=i.getTextShadowYOff(e)||0,s=i.getTextShadowBlur(e)||0,l=i.getTextShadowColor(e)||"#00000000",u={color:n,opacity:o>=0?o:"",textShadow:{xOffset:r,yOffset:a,blur:s,color:l}};return this.addSizingAdjustments(u,e),u},n.prototype.addSizingAdjustments=function(e,t){var i="",n="",o=this.getTextStyleId(t),r=this.block;if(o!==r.getStyleId(t)){var a=r.getTextStyleFromId(o,t);i=r.getFontSizeTextForStyle(t,a),n=r.getAdjustedLetterSpacingTextForStyle(t,a)}e.fontSize=i,e.letterSpacing=n},n.prototype.hasUrlArgs=function(e){return!!this._model.getHyperlinkUri(e)},n.prototype.mouseClicked=function(n){if(1!=n.which)return TDB.EventPropagation.Bubble;if(this.hasUrlArgs()){if(CommonSettings.ExternalLinkWarningDialogIsEnabled){var o=this._model.getHyperlinkUri();if((e.Utilities.browser.isIE||new URL(o).hostname!=window.location.hostname)&&t.RedirectDialog.createAndShow(o))return TDB.EventPropagation.PreventDefault}return TDB.EventPropagation.Bypass}return i.prototype.mouseClicked.call(this,n)},n}(TDB.FocusableViewElement);t.TextRunVEBase=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(e){function n(t,i){return e.call(this,t,i)||this}return __extends(n,e),n.create=function(e,n){if(e instanceof i.TextList){o={model:e,resourceFactory:n};return new TDB.KeyedChildArgs(t.TextListVE,o,e.id)}var o={model:e,resourceFactory:n};return new TDB.KeyedChildArgs(t.TextParagraphVE,o,e.id)},n}(t.SelectableElement);t.TextSectionVE=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(e){function n(t,i){var n=e.call(this,t,i.model)||this;return n.model=i.model,n.resourceFactory=i.resourceFactory,n}return __extends(n,e),n.prototype.sectionChildrenArgs=function(e){var i=this;return this.model.children.getCollection(e).map(function(e){return t.TextSectionVE.create(e,i.resourceFactory)})},n.prototype.listTypeArgs=function(e){return this.model.getStyle(e)},n.prototype.ListAttrArgs=function(e){var t={},n=this.model.getDirection(e);return n!==i.TextDirection.None?t.dir=n===i.TextDirection.RightToLeft?"rtl":"ltr":t.dir="",t},n.prototype.ListStyleArgs=function(e){var i=t.TextModelUtilities.getHierarchyLevel(this.model,e),n=this.model.getStartNum(e)-1;return{counterReset:new Array(i).join("sub")+"section "+n}},n.areEqual=function(e,t){return e.model===t.model},n}(t.TextSectionVE);t.TextListVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=e.View.ViewElements,o=e.Common,r=e.View.Common.FRE,a=function(a){function s(e,t){var i=a.call(this,e,t.model)||this;return i.model=t.model,i.resourceFactory=t.resourceFactory,i}return __extends(s,a),s.prototype.positionTrackerInViewportWatcherInitArgs=function(){return{onVisibilityChanged:this.isInViewportCallback,rootMargin:"20px"}},s.prototype.isInViewportCallback=function(e){e&&!r.getCalloutManager().isActiveCallout(void 0,r.CalloutID.PullQuote)&&r.FirstRunTriggers.pullquoteVisible(this)},s.prototype.shouldTrackPositionArgs=function(e){if(!StoryPageSettings.IsOwner)return!1;var t=this.getContainingBlock().findRootVE().storylineVisible;return(!t||!t.getWatchedValue(e)||o.NavigationContext.IsAuthoringPlay)&&this.model.getIsPullQuote()&&this.resourceFactory.loadResourceWithWatchable(7,e,TDB.Justification.SyncResponse)},s.prototype.pullquoteFreArgs=function(e){var t=r.CalloutID.PullQuote;if(r.getCalloutManager().isActiveCallout(e,t)&&r.getCalloutManager().getCurrentTriggerContext()==this){var i=r.CalloutArgsCreator.createArgsForPullQuote();return(o.NavigationContext.IsAuthoringPlay||o.NavigationContext.IsConsumption)&&(i.linkText=Resources.PullQuoteFREEditLink,i.linkUrl=o.UrlHelper.getInstance().getPublishedStoryViewUrl(StoryPageSettings.LookupId)+"#content="+this.getContentId(),i.linkInSameTab=!0),new TDB.ChildArgs(n.FRECalloutVE,i)}},s.prototype.getRelatedLayoutVe=function(){return this.getContainingBlock()},s.prototype.getRelatedLayoutElement=function(){return this.getContainingBlock()._model},s.prototype.getLayoutContext=function(){return this.model.getLayoutContext()},s.prototype.getContentType=function(){return this.getContainingBlock()._model.getContentType()},s.prototype.runChildrenArgs=function(e){return this.getRunChildrenModels(e).map(function(e){return new TDB.KeyedChildArgs(t.TextRunVE,e,e.id)})},s.prototype.getRunChildrenModels=function(e){return this.model.runs.getCollection(e)},s.prototype.isListItemArgs=function(e){return this.model.getParagraphStyle(e)===i.ParagraphStyle.ListItem},s.prototype.getNumLines=function(e){for(var t=0,i=this.getRunChildrenModels(e),n=i.length,o=null,r=0;r<n;++r)o=i[r].getText(e),t+=s.getNumMatchingSubstringsInString(o,"\n");return 0===t&&(0===n||1===n&&0===o.length)?0:t+1},s.getNumMatchingSubstringsInString=function(e,t){for(var i=0,n=-1;;){if((n=e.indexOf(t,n+1))<0)return i;++i}},s.prototype.calculateContentHeight=function(e){return this.getNumLines(e)*this.getBlockLineHeight(e)},s.prototype.getBlockLineHeight=function(e){return this.getContainingBlock().getAdjustedLineHeight(e)},s.prototype.isTextVisible=function(e){return t.TextModelUtilities.isTextVisible(this.getContainingBlock().findRootVE(),this.getRunChildrenModels(e),e,this.pageId)},s.prototype.ParagraphAttrArgs=function(e){var t={};return t.dir=this.model.getDirection(e)===i.TextDirection.RightToLeft?"rtl":"ltr",t},s.prototype.ParagraphStyleArgs=function(t){var i={paddingBottom:e.Utilities.toPxStr(this.model.getSpacingAfter(t))},n="",o=this.getRunChildrenModels(t).length;0===o&&this.isListItemArgs(t)&&(n=e.Utilities.toPxStr(this.getBlockLineHeight(t))),i.minHeight=n;var r="";return o>0&&this.isTextVisible(t)&&(r=e.Utilities.toPxStr(this.calculateContentHeight(t))),i.maxHeight=r,i.textAlign=this.getInlineTextAlign(t),i},s.prototype.getInlineTextAlign=function(e){var n=this.model.getDirection(e),o=this.isListItemArgs(e);if(n===i.TextDirection.RightToLeft||o){var r=this.getContainingBlock().getStyle(e);if(r){var a=r.getTextAlignment(e);return o&&a===i.LayoutTextAlignment.Center?"":t.TextUtilities.toCSSTextAlignment(a,n)}}return""},s.prototype.ParagraphPropsArgs=function(e){return{id:this.createNodeId()}},s.prototype.highlight=function(t,i){var o=void 0,r=this.createNodeId(),a=this.findFirstNode(function(e){return e instanceof HTMLElement&&e.id===r});if(!a)return o;if(i===n.HighlightingType.None)return this.removeHighlighting(a),o;if(!t)return o;for(var s=0;s<t.ranges.length;s++){var l=t.ranges[s],u=e.Common.TextHelpers.createTextRange(a,l.position,l.length);if(u){this.hasHighlighting=!0,o=u.startContainer.parentNode;var d=n.ContentSearchVE.otherSearchHitClass;if(i===n.HighlightingType.CurrentSearchHit&&(d=n.ContentSearchVE.currentSearchHitClass),o.nodeName===e.Common.TextHelpers.HtmlMarkTag)o.className=d;else{var c=u.extractContents();(o=document.createElement(e.Common.TextHelpers.HtmlMarkTag)).className=d,o.appendChild(c),u.insertNode(o)}}}return o},s.prototype.removeHighlighting=function(t){this.hasHighlighting&&(e.Common.TextHelpers.removeMarks(t),this.hasHighlighting=void 0)},s.prototype.createNodeId=function(){return"paragraph_"+this.model.id},s.prototype.getContainingBlock=function(){return this.findParent(t.TextBlockLayoutVE)},s.areEqual=function(e,t){return e.model===t.model},s}(t.TextSectionVE);t.TextParagraphVEBase=a}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){!function(i){function n(t){switch(t){case m.FontWeight.Thin:case m.FontWeight.ExtraThin:case m.FontWeight.UltraThin:return 100;case m.FontWeight.ExtraLight:case m.FontWeight.UltraLight:return 200;case m.FontWeight.Light:return 300;case m.FontWeight.SemiLight:return 350;case m.FontWeight.Normal:case m.FontWeight.Regular:return 400;case m.FontWeight.Medium:return 500;case m.FontWeight.DemiBold:case m.FontWeight.SemiBold:return 600;case m.FontWeight.Bold:return 700;case m.FontWeight.ExtraBold:case m.FontWeight.UltraBold:return 800;case m.FontWeight.Black:case m.FontWeight.Heavy:case m.FontWeight.ExtraBlack:case m.FontWeight.UltraBlack:return 900;default:throw e.RethrowLogger.createError("invalid font weight value: "+t)}}function o(t,i){switch(t){case m.LayoutTextAlignment.Center:return"center";case m.LayoutTextAlignment.Justified:return"justify";case m.LayoutTextAlignment.Near:return i===m.TextDirection.RightToLeft?"right":"left";case m.LayoutTextAlignment.Far:return i===m.TextDirection.RightToLeft?"left":"right";default:throw e.RethrowLogger.createError("invalid value for LayoutTextAlignment: "+t)}}function r(i){switch(i){case m.FontStyle.Normal:return t.Common.FontStyle.normal;case m.FontStyle.Italic:return t.Common.FontStyle.italic;case m.FontStyle.Oblique:return t.Common.FontStyle.oblique;default:throw e.RethrowLogger.createError("invalid FontStyle: "+i)}}function a(e,t,i){var n=s("",e,t,c(e,i),i);e.fallbackChain.getCollection(i).forEach(function(e){var o=g(e,i);if(o){var r=c(o,i);n=s(n,o,t,r,i)}});var o=e.getGenericFamily(i);return o&&(n=l(n,o,!0)),n}function s(t,i,n,o,r){o=o||c(i,r);var a=e.View.Common.currentFontLoader().get(n).shouldUseSystemFallback(i,r);return i&&!a?l(t,o,!1):t}function l(e,t,i){var n="";return e&&(n=e+", "),i?n+t:n+"'"+t+"'"}function u(e,t,i,n){if(n<=1)return e;var o=(i-t)/(n-1);return Math.min(e,o)}function d(t,i,o,r){var a=[m.FontStyle[i.getStyle(r)],n(i.getWeight(r)),e.Utilities.toPxStr(i.getSize(r)),o].join(" ");return UX.getTextWidth(t,a)}function c(e,t){return e.getFileName(t)}function p(t){var i=e.Model.RenderModel.getWatchedValue(t).layoutTrees.getCollection(t);return 0===i.length?[]:i[0].getTextStyles(t).getCollection(t)}function g(e,t){return ArrayExtensions.firstOrDefault(p(t),function(i){return i.getId(t)===e})}function h(t,n,o){void 0===n&&(n=i.versionedFonts),void 0===o&&(o=i.woff2Fonts);var r=n[t],a=ArrayExtensions.contains(o,t),s=e.Common.UrlHelper.getInstance().getUnversionedContentUrl(t);r&&(s+="-"+r);var l="";return a&&(l=y(s,"woff2")+", "),l+=y(s,"woff")}function y(e,t){return'url("'+e+"."+t+'") format("'+t+'")'}var m=e.Model.RM;i.versionedFonts={},i.woff2Fonts=[],i.toCSSFontWeight=n,i.toCSSTextAlignment=o,i.modelStyleToFontStyle=r,i.buildFamilyFallbackChain=a,i.updateAdjustment=u,i.getSpanWidth=d,i.getFontFamilyForTextStyle=c,i.getRenderModelTextStyles=p,i.getTextStyleForId=g,i.getFontFaceUrl=h,i.getFontFaceSrcPropertyForSpecificFormat=y}(i.TextUtilities||(i.TextUtilities={}))}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){!function(n){function o(e,t,i){return e.fetchTextStyle(t.getFontKey(i),i)}function r(e,n,r,a){var s=o(e,n,r);if(!s)return!0;if(!t.Common.currentFontLoader().get(a).isTextVisible(s,r))return!1;var l=s.fallbackChain.getCollection(r);return 0===l.length||l.every(function(e){var n=i.TextUtilities.getTextStyleForId(e,r);return t.Common.currentFontLoader().get(a).isTextVisible(n,r)})}function a(e,t,i,n){return t.every(function(t){return r(e,t,i,n)})}function s(e,t){for(var i=0,n=e.getParentList(t);n instanceof l.TextList;n=n.getParentList(t))++i;return i}var l=e.Model.RM;n.getTextStyle=o,n.isTextVisible=a,n.getHierarchyLevel=s}(i.TextModelUtilities||(i.TextModelUtilities={}))}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.AnimationManager,n=function(e){function n(t,i){var n=e.call(this,t,i)||this;return n.parent=t,n.args=i,n.resourceFactory=i.resourceFactory,n}return __extends(n,e),n.prototype.transformedStyleArgs=function(e){if(Modernizr.preserve3d)return{};var t=this.getAnimatableTransforms(e).filter(function(e){return e instanceof i.Properties.Scaled});return{zIndex:(t.length?t[0].get(2):0).toFixed()}},n.prototype.containerArgs=function(e){return t.createLayoutVE(this.args.model.getTexture(e),this.resourceFactory,e)},n.prototype.transformedAnimatableInitArgs=function(){return this.args.model.id},n.areEqual=function(e,t){return e.model===t.model},n}(t.SceneGraphVE);t.TextureSceneGraphVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Common,n=function(t){function n(e,i){var n=t.call(this,e)||this;return n.tweetId=i,n}return __extends(n,t),n.prototype.tweetAttrArgs=function(e){var t={};return i.Environment.getInstance().supportsSandbox()||(t.sandbox=void 0),t},n.prototype.tweetPropsArgs=function(e){return CookieConsent.isCookieConsentNotificationVisible(e)?(StoryLog.TraceTag(596133083,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Tweet blocked by cookie compliance."),null):{src:i.UrlHelper.getInstance().twitterIFrameUrl(this.tweetId,this.parent._model.position.getWidth(e),this.parent._model.position.getHeight(e))}},n.prototype.tweetStyleArgs=function(t){var i=this.parent._model.model.getRTL(t),n=this.parent.scale.getWatchedValue(t),o={transform:"scale("+(i?-n:n)+", "+n+")",width:e.Utilities.toPxStr(this.parent._model.position.getWidth(t)),height:e.Utilities.toPxStr(this.parent._model.position.getHeight(t))};return(e.Utilities.browser.isiOS||e.Utilities.browser.isChrome)&&(o.transform+=" translate3d(0,0,0)"),o},n}(TDB.ViewElement);t.TweetVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n,o=e.Model.RM,r=e.View.ViewElements;!function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT"}(n=i.ViewportHorizontalAlignment||(i.ViewportHorizontalAlignment={}));var a;!function(e){e[e.TOP=0]="TOP",e[e.CENTER=1]="CENTER",e[e.BOTTOM=2]="BOTTOM"}(a=i.ViewportVerticalAlignment||(i.ViewportVerticalAlignment={}));var s=function(s){function l(e,i){var n=s.call(this,e)||this;return n.parent=e,n._model=i.model,n.resourceFactory=i.resourceFactory,n.horizontalalignment=TDB.watcherTag(596475993,n,n,n.getHorizontalAlignment),n.verticalalignment=TDB.watcherTag(596475994,n,n,n.getVerticalAlignment),n.scaling=TDB.watcherTag(596475995,n,n,n.getScaling),n.scale=TDB.watcherTag(596475996,n,n,n.computeScale),n.ismain=TDB.watcherTag(6094881,n,n,t.isMainViewport.bind(null,n._model)),n.cachedScaledServerSize=TDB.watcherTag(596475997,n,n,n.computeScaledServerSize),n}return __extends(l,s),l.prototype.model=function(){return this._model},l.prototype.getModelObjectId=function(){return this._model.id},l.prototype.viewportScale=function(e){return this.scale},l.prototype.getHorizontalAlignment=function(t){switch(this._model.getHorizontalAlignment(t)){case o.Alignment.Center:return n.CENTER;case o.Alignment.Near:return n.LEFT;case o.Alignment.Far:return n.RIGHT;default:throw e.RethrowLogger.createError("invalid alignment property for horizontal alignment")}},l.prototype.getScaling=function(e){return this._model.getContentStretch(e)},l.prototype.getVerticalAlignment=function(t){switch(this._model.getVerticalAlignment(t)){case o.Alignment.Center:return a.CENTER;case o.Alignment.Near:return a.TOP;case o.Alignment.Far:return a.BOTTOM;default:throw e.RethrowLogger.createError("invalid alignment property for horizontal alignment")}},l.prototype.layoutSize=function(e){return new Size(this._model.position.getWidth(e),this._model.position.getHeight(e))},l.prototype.absolutePositioning=function(e){var t=this.position(e),i=this.parent.getWidth(e),n=this.parent.getHeight(e);return void 0!==t.left?t.right=i-t.left:void 0!==t.right&&(t.left=i-t.right),void 0!==t.top?t.bottom=n-t.top:void 0!==t.bottom&&(t.top=n-t.bottom),t},l.prototype.position=function(t){var i=this.viewportSize(t),o={},r=this.horizontalalignment.getWatchedValue(t);if(r===n.LEFT)o.left=0;else if(r===n.RIGHT)o.right=i.width;else{var s=this.parent.getWidth(t);o.left=e.Utilities.roundPx(.5*(s-i.width))}var l=this.verticalalignment.getWatchedValue(t);if(l===a.TOP)o.top=0;else if(l===a.BOTTOM)o.bottom=i.height;else{var u=this.parent.getHeight(t);o.top=e.Utilities.roundPx(.5*(u-i.height))}return o},l.prototype.positioningStyle=function(e){var t={},i=this.position(e);return void 0!==i.left?t.left=i.left+"px":void 0!==i.right&&(t.right=i.right+"px"),void 0!==i.top?t.top=i.top+"px":void 0!==i.bottom&&(t.bottom=i.bottom+"px"),t},l.sizeToFit=function(e,t,i,n){var o=n,r=e*(n/t);return r>i&&(r=i,o=t*(i/e)),new Size(r,o)},l.sizeToFill=function(e,t,i,n){var o=e/t,r=n,a=o*r;return a<i&&(r=1/o*(a=i)),new Size(a,r)},l.prototype.backgroundType=function(e){return this._model.getBackgroundType(e)},l.prototype.viewportSize=function(e){var t=this.layoutSize(e),i=this.scaling.getWatchedValue(e);if(i===o.ContentStretch.Fixed)return t;var n=this.parent.getWidth(e),r=this.parent.getHeight(e);return i===o.ContentStretch.Fit?l.sizeToFit(t.width,t.height,n,r):l.sizeToFill(t.width,t.height,n,r)},l.prototype.contentArgs=function(e){return this._model.getBackgroundType(e)===o.ViewportBackgroundType.None?i.createLayoutVE(this.getModelChild(e),this.resourceFactory,e):new TDB.ChildArgs(i.ViewportBackgroundVE,{model:this._model,resourceFactory:this.resourceFactory})},l.prototype.getModelChild=function(e){return this._model.getChild(e)},l.prototype.getScale=function(e){return this.scale.getWatchedValue(e)},l.prototype.computeScale=function(e){var t=this.scaling.getWatchedValue(e);if(t===o.ContentStretch.Stretch||t===o.ContentStretch.Fixed)return 1;if(i.ViewModel.fullScreenManager.isFullscreen(e)&&i.ViewModel.fullScreenManager.isExternalFullScreen())return 1;var n=this.layoutSize(e);return this.viewportSize(e).width/n.width},l.prototype.scaledServerSize=function(){return this.cachedScaledServerSize.getValue().clone()},l.prototype.computeScaledServerSize=function(e){var t=this.parent.getWidth(e),i=this.parent.getHeight(e),n=this.absolutePositioning(e),o=1/this.getScale(e);return new BaseRect(-n.left*o,-n.top*o,t*o,i*o)},l.prototype.PositionDivStyleArgs=function(t){var i=this._model.getZOrder(t),n=0===i?"":i.toString(),r=!1;e.Common.UrlHelper.getInstance().isAccessibilityView(t)&&(r=this.shouldHideInAccessibilityTree(t));var a;if(t.watchValue(this.scaling)===o.ContentStretch.Stretch)a={fontSize:"100px",top:"0px",left:"0px"};else{a=this.positioningStyle(t);var s=t.watchValue(this.scale);a.fontSize=100*s+"px",a[Modernizr.prefixed("transform")]="translateZ(0)"}return a.zIndex=n,a.visibility=r?"hidden":"",e.Utilities.browser.isSafari&&"Desktop"!==CommonSettings.ClientDevice&&(a.display="inline"),a},l.prototype.PositionDivAttrArgs=function(e){var t=i.createAttributes(e,this._model);return this.shouldHideInAccessibilityTree(e)?(t[Aria.Attributes.Hidden]=Aria.BooleanState.True,t[Aria.Attributes.Disabled]=Aria.BooleanState.True):(t[Aria.Attributes.Hidden]=void 0,t[Aria.Attributes.Disabled]=void 0),t},l.prototype.PositionDivAnimatableInitArgs=function(){return this._model.id},l.prototype.shouldHideInAccessibilityTree=function(e){var t=r.ViewModel.previewVE._root.getWatchedValue(e).getModalDialogManager();return t.isDialogOpen(e)&&!t.isActiveViewport(this._model.id,e)},l.areEqual=function(e,t){return e.model===t.model},l}(TDB.FocusableViewElement);i.ViewportVEBase=s}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){function t(e,t,i){void 0===i&&(i=null),i||(i={});var n=t.getUnhashedId(e);n&&(i.unhashedId=n);var o=t.getAccessibilityInfo(e);return o&&o.attributes.getCollection(e).forEach(function(t){return i[t.getName(e)]=t.getValue(e)}),i}function i(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAgCAYAAADud3N8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQVJREFUeNpizM0r3MDAwODPQB/wEYgdmOhoIQjwA3EAE8MAABYs3r9AZTsEgFgfn6UXJk3sc6CmjXn5RSDz9iOLDUjwjhxLWUiMnwAglYCUzR6C+MB0cIBmlgJBARAbAHEjEn8DNIXSzNIGZF8BfQ6i6kEplBTfkhSnWAxWgGU1uiQkoO9AcRsPxBOBjvlAc0uhCWo+EF8EBTm9sswCqIUOpPqSLEuhxRo/NFF9oFfh8AEtEdG2cICmYFBKZaR7MQgM4gJoYqKPpUDLQCVSP7Q0oo+l0OAtJCerkB2nUIsnjNan5ASvADTzUxMYELJUH70RNdpGGrV0UFu6kY72gfpKGwACDAAZ4kYMKNP2EwAAAABJRU5ErkJggg=="}e.createAttributes=t,e.getFailedImageBase64=i}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Common,n=function(e){function n(t,i){var n=e.call(this,t)||this;return n.parent=t,n.args=i,n}return __extends(n,e),n.prototype.subtemplateArgs=function(e){return i.Environment.getInstance().isClientOnline(e)?t.createLayoutVE(this.args.model,this.args.resourceFactory,e,!0):new TDB.ChildArgs(t.OfflineLayoutVE,this.args.model)},n.areEqual=function(e,t){return e.model===t.model},n}(TDB.FocusableViewElement);t.ModeSelectorVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n={"www.google.com":"map_24x24.png","e.infogr.am":"infographic_24x24.png","flickrit.com":"imagePlaceholder.png","giphy.com":"imagePlaceholder.png","mix.office.com":"document_24x24.png","onedrive.live.com":"document_24x24.png","sway.com":"document_24x24.png","www.youtube.com":"VideoPlaceholder.png","vine.co":"VideoPlaceholder.png","player.vimeo.com":"VideoPlaceholder.png","sketchfab.com":"3Dinteractable_24x24_cube.png","w.soundcloud.com":"audio_24x24.png"},o={"www.google.com":Resources.OfflineMapEmbedMessage,"e.infogr.am":Resources.OfflineInfogramEmbedMessage,"flickrit.com":Resources.OfflineImageEmbedMessage,"giphy.com":Resources.OfflineImageEmbedMessage,"mix.office.com":Resources.OfflineDocumentEmbedMessage,"onedrive.live.com":Resources.OfflineDocumentEmbedMessage,"sway.com":Resources.OfflineSwayEmbedMessage,"www.youtube.com":Resources.OfflineVideoEmbedMessage,"vine.co":Resources.OfflineVideoEmbedMessage,"player.vimeo.com":Resources.OfflineVideoEmbedMessage,"sketchfab.com":Resources.Offline3dDocumentEmbedMessage,"w.soundcloud.com":Resources.OfflineAudioEmbedMessage},r=function(t){function r(e,i){var n=t.call(this,e,i)||this;return n.parent=e,n}return __extends(r,t),r.prototype.messageTextArgs=function(e){return this._model instanceof i.EmbedLayoutElement?this.getEmbedContentMessage(e):this._model instanceof i.StatusUpdateLayoutElement?Resources.OfflineTweetMessage:this._model instanceof i.AgaveLayoutElement?Resources.OfflineAgaveMessage:Resources.OfflineDefaultContentMessage},r.prototype.imagePropsArgs=function(e){return{src:this.getIconUrl(e)}},r.prototype.hasImageArgs=function(e){return!!this.getIconUrl(e)},r.prototype.getIconUrl=function(e){return this._model instanceof i.EmbedLayoutElement?this.getEmbedIconUrl(e):this._model instanceof i.StatusUpdateLayoutElement?"TweetPlaceholder.png":(this._model,i.AgaveLayoutElement,"EmbedPlaceholder.png")},r.prototype.getEmbedIconUrl=function(t){if(!(this._model instanceof i.EmbedLayoutElement))throw e.RethrowLogger.createError("Bad cast, element is not an embed");var o=this._model,r=e.Utilities.extractHostnameFromUrl(o.getEmbedSourceUrl(t)),a=n[r];return void 0===a&&(a="EmbedPlaceholder.png"),a},r.prototype.getEmbedContentMessage=function(t){if(!(this._model instanceof i.EmbedLayoutElement))throw e.RethrowLogger.createError("Bad cast, element is not an embed");var n=this._model,r=e.Utilities.extractHostnameFromUrl(n.getEmbedSourceUrl(t)),a=o[r];return void 0===a&&(a=Resources.OfflineEmbedMessage),a},r}(t.LayoutVE);t.OfflineLayoutVEBase=r}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.parent=t,n}return __extends(t,e),t.prototype.PositionDivStyleArgs=function(t){var n=e.prototype.PositionDivStyleArgs.call(this,t);return this._model.renderModel.getSchemaVersion()>=98&&this._model.renderModel.renderModelRoot.getRTL()&&this._model.getFlags().has(i.LayoutFlags.RightJustified)&&(n.right="0px"),n},t.areEqual=function(e,t){return e.model===t.model},t}(t.ContainerLayoutVEBase);t.MediaViewportLayoutVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=function(n){function o(i,o){var r=n.call(this,i,o.model)||this;r.fullscreen=!1,r.audioDomListener=Obj.implement(r,{domAttached:function(){return r.deleteAudioPlayer()},domDetached:function(){return r.deleteAudioPlayer()}}),r.resourceFactory=o.resourceFactory,r.audioId=r._model.id,r.manager=e.View.ViewElements.ViewModel.getAudioPlayerManager(),r.manager.registerAudioWithCC(r.audioId,r),r.audioShowing=TDB.watchableTag(596476120,r,!1),r.focusableSurrogate=new TDB.FocusableSurrogate(r,{}),r.addFocusableChild(r.focusableSurrogate),r.addDomListener(r.audioDomListener);var a={playerShowing:function(){return r.audioShowing.getValue()},playMedia:function(){r.playButtonClicked()},hideMedia:function(){r.deleteAudioPlayer()},isFullscreen:function(){return r.fullscreen}};return r.keyHandler=new t.Common.VideoPlayerKeyHandler(a),r}return __extends(o,n),o.prototype.dispose=function(e){this.manager.unregisterAudioWithCC(this.audioId),this.deleteAudioPlayer(),n.prototype.dispose.call(this,e)},o.prototype.deleteAudioPlayer=function(){var e=this;TDB.applyUpdate(function(){e.audioShowing.setValue(!1)},TDB.Justification.Dispose)},o.prototype.getClasses=function(e){return["AudioWithCCLayoutContainer"].concat(n.prototype.getClasses.call(this,e))},o.prototype.PlayerPositionDivStyleArgs=function(e){var t=this.PositionDivStyleArgs(e);return t.left="0px",t.top="0px",t.transform="",t},o.prototype.ifAudioNotPlayingArgs=function(e){return!this.audioShowing.getWatchedValue(e)},o.prototype.AudioWaveformAttrArgs=function(e){var t={};t.src=Icons.AudioWaveform;var i=this.PositionDivAttrArgs(e);return i[Aria.Attributes.Label]&&(t.alt=i[Aria.Attributes.Label]),t},o.prototype.PlayButtonArgs=function(){var e=this.getPlayButtonArgs();return new TDB.ChildArgs(i.GlyphButtonVE,e)},o.prototype.getPlayButtonArgs=function(){return{buttonId:ClientAction.ButtonId.Audio_Play,click:this.playButtonClicked,context:this,cssClass:{value:"AudioWithCCLayoutButton"},description:{value:Resources.PlayButtonDescription},fontIconName:{value:FontIcons.PlayAudioButtonIcon},fontIconSizeClass:FontIcons.PlayAudioButtonIconSize,style:null}},o.prototype.ClosedCaptionIconArgs=function(){var e={fontIconName:{value:FontIcons.ClosedCaptionIcon},fontIconSizeClass:FontIcons.ClosedCaptionIconSize,fontIconWrapperClass:{value:"ClosedCaptionSign"}};return new TDB.ChildArgs(i.FontIconVE,e)},o.prototype.AudioArgs=function(e){return e.watchValue(this.audioShowing)?this.initAzureVideoPlayer(e):null},o.prototype.initAzureVideoPlayer=function(e){var n=this,o={resourceFactory:this.resourceFactory,getHeight:function(e){return n.getHeight(e)},getWidth:function(e){return n.getWidth(e)},closedCaptions:function(){return n.getClosedCaptions(e)},getVideoId:function(e){return n.getAudioPlayerDescriptor(e)},onPlaying:function(){n.findRootVE().pauseAutoPlayIfActive(t.Common.AutoPlayPauseType.AudioPlayed)},onFullscreenChange:function(e){n.fullscreen=e},onDispose:function(){return n.deleteAudioPlayer()},autoplay:!0,analyticsLogger:this.findRootVE().analyticsLogger};return new TDB.ChildArgs(i.AzureVideoPlayerVE,o)},o.prototype.getHeight=function(e){var t=this.getScale(e);return this._model.position.getHeight(e)*t},o.prototype.getWidth=function(e){var t=this.getScale(e);return this._model.position.getWidth(e)*t},o.prototype.getClosedCaptions=function(e){return this._model.getClosedCaptionDescriptors(e)},o.prototype.getAudioPlayerDescriptor=function(e){return this._model.getAudioPlayerDescriptor(e)},o.prototype.playButtonClicked=function(e){var t=this;return i.ViewModel.deselectElements(),this.manager.requestToStartPlaying(this.audioId),TDB.applyUpdate(function(){t.audioShowing.setValue(!0)}),TDB.EventPropagation.Bypass},o.prototype.keyDown=function(e){return this.keyHandler.handleKeyEvent(e)},o.prototype.FocusableInitArgs=function(){return{surrogate:this.focusableSurrogate}},o.prototype.setFocus=function(){this.focusableSurrogate.setFocus()},o.prototype.getFocusableSurrogate=function(){return this.focusableSurrogate},o.prototype.isAmsFullscreen=function(){return this.fullscreen},o.areEqual=function(e,t){return e.model===t.model},o}(i.LayoutVE);i.AudioWithCCLayoutVEBase=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.View.Bindings,n=CommonBindings.View.Bindings,o=TDB.View.Bindings,r=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new a.Cvisible(i),e,t)},t}(t.AutoplayControlButtonsVEBase);t.AutoplayControlButtonsVE=r;var a;!function(e){var t=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.visibleArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CeventWrapper(n),t,i)},i}(TDB.IfInstructionVE);e.Cvisible=t;var i=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="autoplayControlsEventWrapper",this._EventsBinding=new o.Events.Binding(r,t,n,this,n.eventWrapperEventsInitArgs());this.addChild(new e.CcontrolsContainer(n),r,null),this._addToDom(t,i)},i.prototype.disposeBindings=function(){this._EventsBinding.dispose()},i}(TDB.ViewElement);e.CeventWrapper=i;var r=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var o=this._context,r=document.createElement("div");this.domElement=r,r._context=o,this._ClassNameBinding=new n.ClassName.Binding(r,t,o,this,o.controlsContainerClassNameArgs),this._FadeVisibleBinding=new n.FadeVisible.Binding(r,t,o,this,o.controlsContainerFadeVisibleInitArgs(),o.controlsContainerFadeVisibleArgs);this.addChild(new e.CresumePauseButtonWrapper(o),r,null),this.addChild(new e.CstopButtonWrapper(o),r,null),this.addChild(new e.CsettingsButtonWrapper(o),r,null);var a=o.settingsPopupArgs();a&&this.addChild(a.build(o),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._ClassNameBinding.update(e),this._FadeVisibleBinding.update(e)},i.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose()},i}(TDB.ViewElement);e.CcontrolsContainer=r;var a=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,o=document.createElement("div");this.domElement=o,o._context=i,this._ClassNameBinding=new n.ClassName.Binding(o,e,i,this,i.resumePauseButtonWrapperClassNameArgs);var r=TDB.watcherTag(17323653,i,null,i.resumePauseButtonArgs),a=new TDB.NewSubTemplateInstructionVE(i,r);a.addResource(r),this.addChild(a,o,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._ClassNameBinding.update(e)},t}(TDB.ViewElement);e.CresumePauseButtonWrapper=a;var s=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,o=document.createElement("div");this.domElement=o,o._context=i,this._ClassNameBinding=new n.ClassName.Binding(o,e,i,this,i.stopButtonWrapperClassNameArgs);var r=i.stopButtonArgs();r&&this.addChild(r.build(i),o,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._ClassNameBinding.update(e)},t}(TDB.ViewElement);e.CstopButtonWrapper=s;var l=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,o=document.createElement("div");this.domElement=o,o._context=i,this._ClassNameBinding=new n.ClassName.Binding(o,e,i,this,i.settingsButtonWrapperClassNameArgs);var r=i.settingsButtonArgs();r&&this.addChild(r.build(i),o,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._ClassNameBinding.update(e)},t}(TDB.ViewElement);e.CsettingsButtonWrapper=l}(a||(a={}));var s=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new l.Cwrapper(i),e,t)},t}(t.AutoplaySettingsPopupVEBase);t.AutoplaySettingsPopupVE=s;var l;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,a.className="autoplaySettingsPopup",this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.wrapperAttrArgs),this._SlideVisibleBinding=new n.SlideVisible.Binding(a,t,r,this,r.wrapperSlideVisibleInitArgs(),r.wrapperSlideVisibleArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite);this.addChild(new e.CautoplaySettingsHeading(r),a,null);var s=r.settingsArgs();s&&this.addChild(new TDB.NewSubTemplateInstructionVE(r,TDB.immutableWatchable(s),"settings"),a,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._SlideVisibleBinding.update(e)},i}(TDB.ViewElement);e.Cwrapper=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("h1");this.domElement=n,n._context=i,this._TextBinding=new o.Text.Binding(n,e,i,this,i.autoplaySettingsHeadingTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.CautoplaySettingsHeading=i}(l||(l={}));var u=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this,n=i.slidebarArgs();n&&this.addChild(new TDB.NewSubTemplateInstructionVE(i,TDB.immutableWatchable(n),"timingSlidebar"),e,t),(n=i.loopCheckboxArgs())&&this.addChild(new TDB.NewSubTemplateInstructionVE(i,TDB.immutableWatchable(n),"loopCheckbox"),e,t)},t}(t.ConsumptionAutoplaySettingsCommonVEBase);t.ConsumptionAutoplaySettingsCommonVE=u;var d=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new c.CeditTemplateButtonWrapper(i),e,t)},t}(t.EditTemplateButtonWrapperVEBase);t.EditTemplateButtonWrapperVE=d;var c;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="editTemplateButtonWrapper",this._ClickThroughBinding=new o.ClickThrough.Binding(n,e,i,this);var r=i.editTemplateButtonArgs();r&&this.addChild(new TDB.NewSubTemplateInstructionVE(i,TDB.immutableWatchable(r),"editTemplateButton"),n,null),this._addToDom(e,t)},t.prototype.disposeBindings=function(){this._ClickThroughBinding.dispose()},t}(TDB.ViewElement);e.CeditTemplateButtonWrapper=t}(c||(c={}));var p=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new g.Ceditor(i),e,t)},t}(t.MonacoEditorVEBase);t.MonacoEditorVE=p;var g;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="monaco-container",this._EventsBinding=new o.Events.Binding(r,e,n,this,n.editorEventsInitArgs()),this._MonacoBinding=n.editorMonacoBinding=new i.Monaco.Binding(r,e,n,this,n.editorMonacoInitArgs(),n.editorMonacoUpdateArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._MonacoBinding.update(e)},t.prototype.disposeBindings=function(){this._EventsBinding.dispose(),this._MonacoBinding.dispose(),this._context.editorMonacoBinding=void 0},t}(TDB.ViewElement);e.Ceditor=t}(g||(g={}));var h=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._subscribeToWatchable(n._triggerPreviewCalloutWatcher=TDB.watcherTag(5796370,n,n,n.triggerPreviewCallout),TDB.UpdatePhase.WriteOnly),n._subscribeToWatchable(n._storyViewModeUpdatedWatcher=TDB.watcherTag(5796370,n,n,n.storyViewModeUpdated),TDB.UpdatePhase.WriteOnly),n}return __extends(t,e),t.prototype._create=function(e,t){var i=this;TDB.perfMeasurement("StoryPageVE_create",function(){var n=i;i.addChild(new y.CpageRoot(n),e,t),i.addChild(new y.CshowDummySwitcher(n),e,t),i._triggerPreviewCalloutWatcher.resolve(),i._storyViewModeUpdatedWatcher.resolve()})},t.prototype.onUpdate=function(e){e===TDB.UpdatePhase.WriteOnly&&(this._triggerPreviewCalloutWatcher.resolve(),this._storyViewModeUpdatedWatcher.resolve())},t}(t.StoryPageVEBase);t.StoryPageVE=h;var y;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="page-root",this._StyleBinding=new o.Style.Binding(r,t,n,this,n.pageRootStyleArgs),this._EventsBinding=new o.Events.Binding(r,t,n,this,n.pageRootEventsInitArgs()),this._AttrBinding=new o.Attr.Binding(r,t,n,this,n.pageRootAttrArgs);this.addChild(new e.CshowAccessibleModeLink(n),r,null);var a=TDB.watcherTag(17323653,n,null,n.tocPullDownRegionArgs),s=new TDB.NewSubTemplateInstructionVE(n,a,"tocPullDownRegion");s.addResource(a),this.addChild(s,r,null),this.addChild(new e.CappBarWrapper(n),r,null),this.addChild(new e.CnotificationBarWrapper(n),r,null),n.showEditTemplateButtonArgs()&&(l=n.editTemplateButtonArgs())&&this.addChild(new TDB.NewSubTemplateInstructionVE(n,TDB.immutableWatchable(l),"editTemplateButtonWrapper"),r,null),this.addChild(new e.CpaneHolder(n),r,null),this.addChild(new e.Capplication(n),r,null);var l=n.blockingProgressArgs();l&&this.addChild(l.build(n),r,null);var u=TDB.watcherTag(4543753,n,null,n.audioPlayersArgs);(s=new TDB.ForeachInstructionVE(!0,u)).addResource(u),this.addChild(s,r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._AttrBinding.update(e)},i.prototype.disposeBindings=function(){this._EventsBinding.dispose()},i}(TDB.ViewElement);e.CpageRoot=t;var i=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.showAccessibleModeLinkArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CaccessibleModeLink(n),t,i)},i}(TDB.IfInstructionVE);e.CshowAccessibleModeLink=i;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("a");this.domElement=n,n._context=i,n.className="accessibleModeLink segoeUI",this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.accessibleModeLinkAttrArgs),this._TextBinding=new o.Text.Binding(n,e,i,this,i.accessibleModeLinkTextArgs),this._EventsBinding=new o.Events.Binding(n,e,i,this,i.accessibleModeLinkEventsInitArgs()),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.accessibleModeLinkStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._TextBinding.update(e),this._StyleBinding.update(e)},t.prototype.disposeBindings=function(){this._EventsBinding.dispose()},t}(TDB.ViewElement);e.CaccessibleModeLink=r;var a=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="appBarWrapper",this._StyleBinding=new o.Style.Binding(n,e,i,this,i.appBarWrapperStyleArgs);var r=TDB.watcherTag(4543755,i,null,i.appBarArgs),a=new TDB.SubTemplateInstructionVE(!0,r);a.addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e)},t}(TDB.ViewElement);e.CappBarWrapper=a;var s=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="storyNotificationBarWrapper",this._StyleBinding=new o.Style.Binding(n,e,i,this,i.notificationBarWrapperStyleArgs);var r=i.notificationBarWrapperArgs();r&&this.addChild(r.build(i),n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e)},t}(TDB.ViewElement);e.CnotificationBarWrapper=s;var l=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,a.id="pane-holder",this._StyleBinding=new o.Style.Binding(a,t,r,this,r.paneHolderStyleArgs),this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.paneHolderAttrArgs),this._ClassNameBinding=new n.ClassName.Binding(a,t,r,this,r.paneHolderClassNameArgs);this.addChild(new e.CpreviewPane(r),a,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._AttrBinding.update(e),this._ClassNameBinding.update(e)},i}(TDB.ViewElement);e.CpaneHolder=l;var u=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.id="preview",this._PropsBinding=new o.Props.Binding(r,t,n,this,n.previewPanePropsArgs),this._StyleBinding=new o.Style.Binding(r,t,n,this,n.previewPaneStyleArgs);this.addChild(new e.CUpdateStatus(n),r,null);var a=n.surfaceAuthoringArgs();a&&this.addChild(a,r,null),(a=n.offlineVellumArgs())&&this.addChild(a,r,null),(a=n.previewArgs())&&this.addChild(a,r,null);var s=n.toCViewArgs();s&&this.addChild(s.build(n),r,null),this.addChild(new e.CautoplayControlsVisible(n),r,null),this.addChild(new e.CautoPlayStatus(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e)},i}(TDB.ViewElement);e.CpreviewPane=u;var d=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="updateStatus",this._StyleBinding=new o.Style.Binding(r,t,n,this,n.UpdateStatusStyleArgs);this.addChild(new e.CTransientUpdateStatus(n),r,null),this.addChild(new e.CBlockingUpdateStatus(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e)},i}(TDB.ViewElement);e.CUpdateStatus=d;var c=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var o=this._context,r=document.createElement("div");this.domElement=r,r._context=o,this._SlideVisibleBinding=new n.SlideVisible.Binding(r,t,o,this,o.TransientUpdateStatusSlideVisibleInitArgs(),o.TransientUpdateStatusSlideVisibleArgs),this._ClassNameBinding=new n.ClassName.Binding(r,t,o,this,o.TransientUpdateStatusClassNameArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite);this.addChild(new e.CTransientUpdatingGif(o),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._SlideVisibleBinding.update(e),this._ClassNameBinding.update(e)},i}(TDB.ViewElement);e.CTransientUpdateStatus=c;var p=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("img");this.domElement=n,n._context=i,this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.TransientUpdatingGifAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.CTransientUpdatingGif=p;var g=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="blockingUpdateStatus",this._VisibleBinding=new o.Visible.Binding(r,t,n,this,n.BlockingUpdateStatusVisibleArgs);this.addChild(new e.CBlockingUpdatingGif(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._VisibleBinding.update(e)},i}(TDB.ViewElement);e.CBlockingUpdateStatus=g;var h=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("img");this.domElement=n,n._context=i,this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.BlockingUpdatingGifAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.CBlockingUpdatingGif=h;var y=function(e){function t(t){var i=this,n=TDB.watcherTag(4543754,t,null,t.autoplayControlsVisibleArgs);return(i=e.call(this,n)||this).addResource(n),i._context=t,i}return __extends(t,e),t.prototype.buildChildren=function(e,t){var i=this._context,n=i.autoplayControlsArgs();n&&this.addChild(n.build(i),e,t)},t}(TDB.IfInstructionVE);e.CautoplayControlsVisible=y;var m=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("span");this.domElement=n,n._context=i,n.setAttribute("aria-live","assertive"),n.className="autoPlayStatus",this._TextBinding=new o.Text.Binding(n,e,i,this,i.autoPlayStatusTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.CautoPlayStatus=m;var f=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.id="application",n.className="application-root",n.setAttribute("role","application"),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.applicationStyleArgs),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.applicationAttrArgs);var r=i.authoringPageArgs();r&&this.addChild(r,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._AttrBinding.update(e)},t}(TDB.ViewElement);e.Capplication=f;var v=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.showDummySwitcherArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.C1(n),t,i)},i}(TDB.IfInstructionVE);e.CshowDummySwitcher=v;var S=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="dummySwitcherWrapper";this.addChild(new e.C2(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=S;var w=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.id="sw_bar",this._addToDom(e,t)},t}(TDB.ViewElement);e.C2=w}(y||(y={}));var m=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new f.CpullDownButton(i),e,t)},t}(t.ToCPullDownButtonVEBase);t.ToCPullDownButtonVE=m;var f;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="consumptionButtonToC",this._FocusableBinding=n.focusableBinding=new o.Focusable.Binding(r,t,n,this,n.FocusableInitArgs()),this._AttrBinding=new o.Attr.Binding(r,t,n,this,n.pullDownButtonAttrArgs);this.addChild(new e.CtocIcon(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._FocusableBinding.update(e),this._AttrBinding.update(e)},i.prototype.disposeBindings=function(){this._FocusableBinding.dispose(),this._context.focusableBinding=void 0},i}(TDB.ViewElement);e.CpullDownButton=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,o=document.createElement("div");this.domElement=o,o._context=i,this._ClassNameBinding=new n.ClassName.Binding(o,e,i,this,i.tocIconClassNameArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._ClassNameBinding.update(e)},t}(TDB.ViewElement);e.CtocIcon=i}(f||(f={}));var v=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new S.CtocPullDownBanner(i),e,t)},t}(t.ToCPullDownRegionVEBase);t.ToCPullDownRegionVE=v;var S;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.setAttribute("role","banner"),r.className="ToCButtonBanner",this._EventsBinding=new o.Events.Binding(r,t,n,this,n.tocPullDownBannerEventsInitArgs()),this._AttrBinding=new o.Attr.Binding(r,t,n,this,n.tocPullDownBannerAttrArgs);this.addChild(new e.Cwrapper(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._AttrBinding.update(e)},i.prototype.disposeBindings=function(){this._EventsBinding.dispose()},i}(TDB.ViewElement);e.CtocPullDownBanner=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,r=document.createElement("div");this.domElement=r,r._context=i,r.className="tocBarCollapsableContainer",this._FadeVisibleBinding=new n.FadeVisible.Binding(r,e,i,this,i.wrapperFadeVisibleInitArgs(),i.wrapperFadeVisibleArgs),this._StyleBinding=new o.Style.Binding(r,e,i,this,i.wrapperStyleArgs);var a=i.buttonArgs();a&&this.addChild(new TDB.NewSubTemplateInstructionVE(i,TDB.immutableWatchable(a),"button"),r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._FadeVisibleBinding.update(e),this._StyleBinding.update(e)},t.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose()},t}(TDB.ViewElement);e.Cwrapper=i}(S||(S={}));var w=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;switch(i.toCPullDownViewArgs()){case!0:this.addChild(new T.Coverlay(i),e,t);break;case!1:this.addChild(new T.Coverlay1(i),e,t)}},t}(t.TimelineToCViewVEBase);t.TimelineToCViewVE=w;var T;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,a.className="ToCPullDownViewOpen",this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.overlayAttrArgs),this._EventsBinding=new o.Events.Binding(a,t,r,this,r.overlayEventsInitArgs()),this._FadeVisibleBinding=new n.FadeVisible.Binding(a,t,r,this,r.overlayFadeVisibleInitArgs(),r.overlayFadeVisibleArgs),this._StyleBinding=new o.Style.Binding(a,t,r,this,r.overlayStyleArgs);this.addChild(new e.C1(r),a,null);var s=TDB.watcherTag(17323653,r,null,r.tileRegionArgs),l=new TDB.NewSubTemplateInstructionVE(r,s);l.addResource(s),this.addChild(l,a,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._FadeVisibleBinding.update(e),this._StyleBinding.update(e)},i.prototype.disposeBindings=function(){this._EventsBinding.dispose(),this._FadeVisibleBinding.dispose()},i}(TDB.ViewElement);e.Coverlay=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="ToCPullDownCloseButtonWrapper";var o=i.toCPullDownCloseButtonArgs();o&&this.addChild(o.build(i),n,null),this._addToDom(e,t)},t}(TDB.ViewElement);e.C1=i;var r=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,a.className="TimelineToCViewOverlay",this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.overlayAttrArgs),this._EventsBinding=new o.Events.Binding(a,t,r,this,r.overlayEventsInitArgs()),this._FadeVisibleBinding=new n.FadeVisible.Binding(a,t,r,this,r.overlayFadeVisibleInitArgs(),r.overlayFadeVisibleArgs),this._StyleBinding=new o.Style.Binding(a,t,r,this,r.overlayStyleArgs);var s=TDB.watcherTag(17323653,r,null,r.tileRegionArgs),l=new TDB.NewSubTemplateInstructionVE(r,s);l.addResource(s),this.addChild(l,a,null),this.addChild(new e.CcloseButtonWrapper(r),a,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._FadeVisibleBinding.update(e),this._StyleBinding.update(e)},i.prototype.disposeBindings=function(){this._EventsBinding.dispose(),this._FadeVisibleBinding.dispose()},i}(TDB.ViewElement);e.Coverlay1=r;var a=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,o=document.createElement("div");this.domElement=o,o._context=i,this._ClassNameBinding=new n.ClassName.Binding(o,e,i,this,i.closeButtonWrapperClassNameArgs);var r=i.closeButtonArgs();r&&this.addChild(r.build(i),o,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._ClassNameBinding.update(e)},t}(TDB.ViewElement);e.CcloseButtonWrapper=a}(T||(T={}));var C=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new _.Couter(i),e,t)},t}(t.TimelineToCTileRegionVEBase);t.TimelineToCTileRegionVE=C;var _;!function(e){var t=function(t){function o(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(o,t),o.prototype._create=function(t,o){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,a.className="TimelineToCViewTileOuterContainer",this._ClassNameBinding=new n.ClassName.Binding(a,t,r,this,r.outerClassNameArgs),this._CarouselBinding=r.outerCarouselBinding=new i.Carousel.Binding(a,t,r,this,r.outerCarouselInitArgs(),r.outerCarouselArgs),this._StaggeredAnimationBinding=new i.StaggeredAnimation.Binding(a,t,r,this,r.outerStaggeredAnimationInitArgs(),r.outerStaggeredAnimationArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite);this.addChild(new e.Cinner(r),a,null);var s=TDB.watcherTag(17323653,r,null,r.paddleLeftArgs),l=new TDB.NewSubTemplateInstructionVE(r,s);l.addResource(s),this.addChild(l,a,null);s=TDB.watcherTag(17323653,r,null,r.paddleRightArgs);(l=new TDB.NewSubTemplateInstructionVE(r,s)).addResource(s),this.addChild(l,a,null),this._addToDom(t,o)},o.prototype.onUpdate=function(e){this._ClassNameBinding.update(e),this._CarouselBinding.update(e),this._StaggeredAnimationBinding.update(e)},o.prototype.disposeBindings=function(){this._CarouselBinding.dispose(),this._context.outerCarouselBinding=void 0},o}(TDB.ViewElement);e.Couter=t;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="TimelineToCViewTileInnerContainer",this._EventsBinding=new o.Events.Binding(n,e,i,this,i.innerEventsInitArgs());var r=TDB.watcherTag(17323652,i,null,i.tilesArgs),a=new TDB.NewForeachInstructionVE(i,r);a.addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.disposeBindings=function(){this._EventsBinding.dispose()},t}(TDB.ViewElement);e.Cinner=r}(_||(_={}));var b=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new A.Ctile(i),e,t)},t}(t.TimelineToCTileVEBase);t.TimelineToCTileVE=b;var A;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="TimelineToCViewTileWidthWrapper",this._FocusableBinding=n.focusableBinding=new o.Focusable.Binding(r,t,n,this,n.FocusableInitArgs()),this._AttrBinding=new o.Attr.Binding(r,t,n,this,n.tileAttrArgs);this.addChild(new e.C1(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._FocusableBinding.update(e),this._AttrBinding.update(e)},i.prototype.disposeBindings=function(){this._FocusableBinding.dispose(),this._context.focusableBinding=void 0},i}(TDB.ViewElement);e.Ctile=t;var i=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="TimelineToCViewTileHeightWrapper";this.addChild(new e.C2(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=i;var r=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="TimelineToCViewTile";this.addChild(new e.CshouldShowMobileThumbnail(n),o,null),this.addChild(new e.C4(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C2=r;var a=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.shouldShowMobileThumbnailArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.C3(n),t,i)},i}(TDB.IfInstructionVE);e.CshouldShowMobileThumbnail=a;var s=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="TimelineToCViewTileTop";this.addChild(new e.CchapterNumber(n),o,null),this.addChild(new e.Cslider(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C3=s;var l=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="TimelineToCViewTileNumber",this._StyleBinding=new o.Style.Binding(n,e,i,this,i.chapterNumberStyleArgs),this._TextBinding=new o.Text.Binding(n,e,i,this,i.chapterNumberTextArgs);var r=i.homeIconArgs();r&&this.addChild(r.build(i),n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._TextBinding.update(e)},t}(TDB.ViewElement);e.CchapterNumber=l;var u=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,o=document.createElement("div");this.domElement=o,o._context=i,o.className="TimelineToCViewTileSlider",this._ClassNameBinding=new n.ClassName.Binding(o,e,i,this,i.sliderClassNameArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._ClassNameBinding.update(e)},t}(TDB.ViewElement);e.Cslider=u;var d=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="TimelineToCViewTileBottom";this.addChild(new e.CshouldShowMobileThumbnail1(n),o,null),this.addChild(new e.CisMobile(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C4=d;var c=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.shouldShowMobileThumbnailArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.Cheading(n),t,i),this.addChild(new e.C5(n),t,i)},i}(TDB.IfInstructionVE);e.CshouldShowMobileThumbnail1=c;var p=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,r=document.createElement("div");this.domElement=r,r._context=i,r.className="TimelineToCViewTileHeader",this._ClassNameBinding=new n.ClassName.Binding(r,e,i,this,i.headingClassNameArgs),this._TextBinding=new o.Text.Binding(r,e,i,this,i.headingTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._ClassNameBinding.update(e),this._TextBinding.update(e)},t}(TDB.ViewElement);e.Cheading=p;var g=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="TimelineToCViewTileContent";this.addChild(new e.CimageWrapper(n),o,null),this.addChild(new e.Cmask(n),o,null),this.addChild(new e.Cbody(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C5=g;var h=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="TimelineToCViewTileContentImage",this._StyleBinding=new o.Style.Binding(r,t,n,this,n.imageWrapperStyleArgs);this.addChild(new e.Cimage(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e)},i}(TDB.ViewElement);e.CimageWrapper=h;var y=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("img");this.domElement=n,n._context=i,this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.imageAttrArgs),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.imageStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._StyleBinding.update(e)},t}(TDB.ViewElement);e.Cimage=y;var m=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="TimelineToCViewTileContentMask",this._VisibleBinding=new o.Visible.Binding(n,e,i,this,i.maskVisibleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._VisibleBinding.update(e)},t}(TDB.ViewElement);e.Cmask=m;var f=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="TimelineToCViewTileContentText",this._TextBinding=new o.Text.Binding(n,e,i,this,i.bodyTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.Cbody=f;var v=function(t){function i(e){var i=t.call(this,e.isMobileArgs())||this;return i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CmobileTileWrapper(n),t,i)},i}(TDB.IfInstructionVE);e.CisMobile=v;var S=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var o=this._context,r=document.createElement("div");this.domElement=r,r._context=o,r.className="TimelineToCViewTileMobileOuter",this._ClassNameBinding=new n.ClassName.Binding(r,t,o,this,o.mobileTileWrapperClassNameArgs);this.addChild(new e.C6(o),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._ClassNameBinding.update(e)},i}(TDB.ViewElement);e.CmobileTileWrapper=S;var w=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="TimelineToCViewTileMobileInner";this.addChild(new e.CmobileTitle(n),o,null),this.addChild(new e.CshowMobileBody(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C6=w;var T=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="TimelineToCViewTileMobileTitle",this._TextBinding=new o.Text.Binding(n,e,i,this,i.mobileTitleTextArgs),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.mobileTitleStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e),this._StyleBinding.update(e)},t}(TDB.ViewElement);e.CmobileTitle=T;var C=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.showMobileBodyArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CmobileBody(n),t,i)},i}(TDB.IfInstructionVE);e.CshowMobileBody=C;var _=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="TimelineToCViewTileMobileText",this._TextBinding=new o.Text.Binding(n,e,i,this,i.mobileBodyTextArgs),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.mobileBodyStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e),this._StyleBinding.update(e)},t}(TDB.ViewElement);e.CmobileBody=_}(A||(A={}));var P=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new I.CPositionDiv(i),e,t);var n=TDB.watcherTag(17323653,i,null,i.failedImageArgs),o=new TDB.NewSubTemplateInstructionVE(i,n);o.addResource(n),this.addChild(o,e,t)},t}(t.ComplexImageVEBase);t.ComplexImageVE=P;var I;!function(e){var t=function(t){function n(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(n,t),n.prototype._create=function(t,n){var r=this._context,a=document.createElementNS("http://www.w3.org/2000/svg","svg");this.domElement=a,a._context=r,a.setAttribute("version","1.1"),a.setAttribute("preserveaspectratio","none"),a.setAttribute("role","img"),this._AnimatableBinding=new i.Animatable.Binding(a,t,r,this,r.PositionDivAnimatableInitArgs()),this._PropsBinding=new o.Props.Binding(a,t,r,this,r.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(a,t,r,this,r.PositionDivStyleArgs),this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.PositionDivAttrArgs),this._BoxShadowBinding=new i.BoxShadow.Binding(a,t,r,this,r.PositionDivBoxShadowArgs);var s=r.internalsArgs();s&&this.addChild(s.build(r),a,null),this.addChild(new e.Cupgrading(r),a,null),this._addToDom(t,n)},n.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._AttrBinding.update(e),this._BoxShadowBinding.update(e)},n.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},n}(TDB.ViewElement);e.CPositionDiv=t;var r=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.upgradingArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CnewImage(n),t,i)},i}(TDB.IfInstructionVE);e.Cupgrading=r;var a=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,o=document.createElementNS("http://www.w3.org/2000/svg","g");this.domElement=o,o._context=i,this._FadeVisibleBinding=new n.FadeVisible.Binding(o,e,i,this,i.newImageFadeVisibleInitArgs(),i.newImageFadeVisibleArgs);var r=i.newInternalsArgs();r&&this.addChild(r.build(i),o,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._FadeVisibleBinding.update(e)},t.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose()},t}(TDB.ViewElement);e.CnewImage=a}(I||(I={}));var E=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new D.C1(i),e,t)},t}(t.FailedImageVEBase);t.FailedImageVE=E;var D;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="missingImageBlock";this.addChild(new e.CfailedImageIcon(n),o,null),this.addChild(new e.CerrorMessage(n),o,null),this.addChild(new e.CerrorMessageImageURL(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("img");this.domElement=n,n._context=i,n.className="missingImageIcon",this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.failedImageIconAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.CfailedImageIcon=i;var n=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("span");this.domElement=n,n._context=i,this._TextBinding=new o.Text.Binding(n,e,i,this,i.errorMessageTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.CerrorMessage=n;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("span");this.domElement=n,n._context=i,n.className="missingImageBlockURL",this._TextBinding=new o.Text.Binding(n,e,i,this,i.errorMessageImageURLTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.CerrorMessageImageURL=r}(D||(D={}));var B=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new V.Cfailed(i),e,t)},t}(t.ImageVEBase);t.ImageVE=B;var V;!function(e){var t=function(t){function i(e){var i=t.call(this,e.failedArgs())||this;return i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i,n){var o=this._context;switch(t){case!1:this.addChild(new e.CPositionDiv(o),i,n),this.addChild(new e.Cupgrading(o),i,n);break;case!0:var r=TDB.watcherTag(17323653,o,null,o.failedImageArgs),a=new TDB.NewSubTemplateInstructionVE(o,r);a.addResource(r),this.addChild(a,i,n)}},i}(TDB.SwitchInstructionVE);e.Cfailed=t;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("img");this.domElement=r,r._context=n,r.className="container",this._AnimatableBinding=new i.Animatable.Binding(r,e,n,this,n.PositionDivAnimatableInitArgs()),this._PropsBinding=new o.Props.Binding(r,e,n,this,n.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(r,e,n,this,n.PositionDivStyleArgs),this._BoxShadowBinding=new i.BoxShadow.Binding(r,e,n,this,n.PositionDivBoxShadowArgs),this._AttrBinding=new o.Attr.Binding(r,e,n,this,n.PositionDivAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._BoxShadowBinding.update(e),this._AttrBinding.update(e)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);e.CPositionDiv=r;var a=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.upgradingArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CnewImage(n),t,i)},i}(TDB.IfInstructionVE);e.Cupgrading=a;var s=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,r=document.createElement("img");this.domElement=r,r._context=i,r.className="container",this._PropsBinding=new o.Props.Binding(r,e,i,this,i.newImagePropsArgs),this._StyleBinding=new o.Style.Binding(r,e,i,this,i.newImageStyleArgs),this._FadeVisibleBinding=new n.FadeVisible.Binding(r,e,i,this,i.newImageFadeVisibleInitArgs(),i.newImageFadeVisibleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._FadeVisibleBinding.update(e)},t.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose()},t}(TDB.ViewElement);e.CnewImage=s}(V||(V={}));var M=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new L.CsvgRoot(i),e,t)},t}(t.SvgVEBase);t.SvgVE=M;var L;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","svg");this.domElement=n,n._context=i,n.setAttribute("version","1.1"),n.setAttribute("preserveaspectratio","none"),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.svgRootStyleArgs),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.svgRootAttrArgs);var r=i.internalsArgs();r&&this.addChild(r.build(i),n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._AttrBinding.update(e)},t}(TDB.ViewElement);e.CsvgRoot=t}(L||(L={}));var k=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new x.CbackgroundType(i),e,t)},t}(t.BackgroundVEBase);t.BackgroundVE=k;var x;!function(e){var i=function(e){function i(t){var i=this,n=TDB.watcherTag(4519824,t,null,t.backgroundTypeArgs);return(i=e.call(this,n)||this).addResource(n),i._context=t,i}return __extends(i,e),i.prototype.buildChildren=function(e,i,n){var o=this._context;switch(e){case t.BackgroundType.Shape:(r=o.backgroundShapeArgs())&&this.addChild(r.build(o),i,n);break;case t.BackgroundType.FontIcon:var r=o.fontIconArgs();r&&this.addChild(r.build(o),i,n)}},i}(TDB.SwitchInstructionVE);e.CbackgroundType=i}(x||(x={}));var R=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new O.ChasDefs(i),e,t);var n=TDB.watcherTag(17323652,i,null,i.pathsArgs),o=new TDB.NewForeachInstructionVE(i,n);o.addResource(n),this.addChild(o,e,t),this.addChild(new O.ChasRects(i),e,t)},t}(t.SvgInternalsVEBase);t.SvgInternalsVE=R;var O;!function(e){var t=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.hasDefsArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.C1(n),t,i)},i}(TDB.IfInstructionVE);e.ChasDefs=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","defs");this.domElement=n,n._context=i;var o=TDB.watcherTag(17323652,i,null,i.definitionsArgs),r=new TDB.NewForeachInstructionVE(i,o);r.addResource(o),this.addChild(r,n,null),this._addToDom(e,t)},t}(TDB.ViewElement);e.C1=i;var n=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.hasRectsArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.Cgroup(n),t,i)},i}(TDB.IfInstructionVE);e.ChasRects=n;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","g");this.domElement=n,n._context=i,this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.groupAttrArgs);var r=TDB.watcherTag(17323652,i,null,i.rectanglesArgs),a=new TDB.NewForeachInstructionVE(i,r);a.addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.Cgroup=r}(O||(O={}));var F=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new U.Cclippath(i),e,t)},t}(t.SvgClipPathVEBase);t.SvgClipPathVE=F;var U;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.domElement=r,r._context=n,this._AttrBinding=new o.Attr.Binding(r,t,n,this,n.clippathAttrArgs);this.addChild(new e.Cpath(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._AttrBinding.update(e)},i}(TDB.ViewElement);e.Cclippath=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","path");this.domElement=n,n._context=i,this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.pathAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.Cpath=i}(U||(U={}));var N=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new z.CcolorFilter(i),e,t)},t}(t.SvgColorFilterVEBase);t.SvgColorFilterVE=N;var z;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElementNS("http://www.w3.org/2000/svg","filter");this.domElement=r,r._context=n,this._AttrBinding=new o.Attr.Binding(r,t,n,this,n.colorFilterAttrArgs);this.addChild(new e.C1(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._AttrBinding.update(e)},i}(TDB.ViewElement);e.CcolorFilter=t;var i=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElementNS("http://www.w3.org/2000/svg","feComponentTransfer");this.domElement=o,o._context=n;this.addChild(new e.Cred(n),o,null),this.addChild(new e.Cgreen(n),o,null),this.addChild(new e.Cblue(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=i;var n=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","feFuncR");this.domElement=n,n._context=i,n.setAttribute("type","linear"),n.setAttribute("intercept","0"),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.redAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.Cred=n;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","feFuncG");this.domElement=n,n._context=i,n.setAttribute("type","linear"),n.setAttribute("intercept","0"),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.greenAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.Cgreen=r;var a=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","feFuncB");this.domElement=n,n._context=i,n.setAttribute("type","linear"),n.setAttribute("intercept","0"),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.blueAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.Cblue=a}(z||(z={}));var H=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new W.CdropShadowFilter(i),e,t)},t}(t.SvgDropShadowFilterVEBase);t.SvgDropShadowFilterVE=H;var W;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElementNS("http://www.w3.org/2000/svg","filter");this.domElement=r,r._context=n,this._AttrBinding=new o.Attr.Binding(r,t,n,this,n.dropShadowFilterAttrArgs);this.addChild(new e.Coffset(n),r,null),this.addChild(new e.Cblur(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._AttrBinding.update(e)},i}(TDB.ViewElement);e.CdropShadowFilter=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","feOffset");this.domElement=n,n._context=i,n.setAttribute("result","offOut"),n.setAttribute("in","SourceGraphic"),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.offsetAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.Coffset=i;var n=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");this.domElement=n,n._context=i,n.setAttribute("result","blurOut"),n.setAttribute("in","offOut"),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.blurAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.Cblur=n}(W||(W={}));var K=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new j.Cpattern(i),e,t)},t}(t.SvgPatternVEBase);t.SvgPatternVE=K;var j;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElementNS("http://www.w3.org/2000/svg","pattern");this.domElement=r,r._context=n,r.setAttribute("patternunits","userSpaceOnUse"),this._AttrBinding=new o.Attr.Binding(r,t,n,this,n.patternAttrArgs);this.addChild(new e.Cimage(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._AttrBinding.update(e)},i}(TDB.ViewElement);e.Cpattern=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","image");this.domElement=n,n._context=i,n.setAttribute("preserveAspectRatio","none"),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.imageAttrArgs),this._NamespaceAttrBinding=new o.NamespaceAttr.Binding(n,e,i,this,i.imageNamespaceAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._NamespaceAttrBinding.update(e)},t}(TDB.ViewElement);e.Cimage=i}(j||(j={}));var q=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new j.Cimage(i),e,t)},t}(t.SvgImageVEBase);t.SvgImageVE=q;var G=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new X.Cpath(i),e,t)},t}(t.SvgPathVEBase);t.SvgPathVE=G;var X;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","path");this.domElement=n,n._context=i,this._StyleBinding=new o.Style.Binding(n,e,i,this,i.pathStyleArgs),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.pathAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._AttrBinding.update(e)},t}(TDB.ViewElement);e.Cpath=t}(X||(X={}));var Y=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Z.Crect(i),e,t)},t}(t.SvgRectVEBase);t.SvgRectVE=Y;var Z;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElementNS("http://www.w3.org/2000/svg","rect");this.domElement=n,n._context=i,this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.rectAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.Crect=t}(Z||(Z={}));var $=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new J.CAgaveFrame(i),e,t);var n=TDB.watcherTag(17323653,i,null,i.velumArgs),o=new TDB.NewSubTemplateInstructionVE(i,n);o.addResource(n),this.addChild(o,e,t),this.addChild(new J.CAgaveFailedPlaceholder(i),e,t)},t}(t.AgaveLayoutVEBase);t.AgaveLayoutVE=$;var J;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,this._AttrBinding=new o.Attr.Binding(r,e,n,this,n.AgaveFrameAttrArgs),this._ContentAgaveBinding=new i.ContentAgave.Binding(r,e,n,this,n.AgaveFrameContentAgaveCreateArgs,n.AgaveFrameContentAgaveDataChangedArgs,n.AgaveFrameContentAgaveSizeChangedArgs,n.AgaveFrameContentAgaveIsEditChangedArgs,n.AgaveFrameContentAgaveSettingsChangedArgs),this._StyleBinding=new o.Style.Binding(r,e,n,this,n.AgaveFrameStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._ContentAgaveBinding.update(e),this._StyleBinding.update(e)},t.prototype.disposeBindings=function(){this._ContentAgaveBinding.dispose()},t}(TDB.ViewElement);e.CAgaveFrame=t;var n=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="missingAgaveBlock",this._StyleBinding=new o.Style.Binding(r,t,n,this,n.AgaveFailedPlaceholderStyleArgs);this.addChild(new e.CAgaveFailedImage(n),r,null),this.addChild(new e.CErrorMessage(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e)},i}(TDB.ViewElement);e.CAgaveFailedPlaceholder=n;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("img");this.domElement=n,n._context=i,n.className="missingAgaveIcon",this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.AgaveFailedImageAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.CAgaveFailedImage=r;var a=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("span");this.domElement=n,n._context=i,this._TextBinding=new o.Text.Binding(n,e,i,this,i.ErrorMessageTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.CErrorMessage=a}(J||(J={}));var Q=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new ee.CPositionDiv(i),e,t)},t}(t.CodeBlockLayoutVEBase);t.CodeBlockLayoutVE=Q;var ee;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,this._PropsBinding=new o.Props.Binding(r,e,n,this,n.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(r,e,n,this,n.PositionDivStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(r,e,n,this,n.PositionDivAnimatableInitArgs()),this._BoxShadowBinding=new i.BoxShadow.Binding(r,e,n,this,n.PositionDivBoxShadowArgs);var a=TDB.watcherTag(17323653,n,null,n.codeBlockArgs),s=new TDB.NewSubTemplateInstructionVE(n,a,"codeBlock");s.addResource(a),this.addChild(s,r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._BoxShadowBinding.update(e)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);e.CPositionDiv=t}(ee||(ee={}));var te=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new ie.CrootDiv(i),e,t)},t}(t.ContainerSceneGraphVEBase);t.ContainerSceneGraphVE=te;var ie;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="containerscenegraph virtual",this._StyleBinding=new o.Style.Binding(r,e,n,this,n.rootDivStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(r,e,n,this,n.rootDivAnimatableInitArgs());var a=TDB.watcherTag(17323652,n,null,n.childrenArgs),s=new TDB.KeyedNewForeachInstructionVE(n,a);s.addResource(a),this.addChild(s,r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);e.CrootDiv=t}(ie||(ie={}));var ne=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new oe.CplaceholderImage(i),e,t);var n=TDB.watcherTag(17323653,i,null,i.velumArgs),o=new TDB.NewSubTemplateInstructionVE(i,n);o.addResource(n),this.addChild(o,e,t)},t}(t.EmbedLayoutVEBase);t.EmbedLayoutVE=ne;var oe;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,this._StyleBinding=new o.Style.Binding(n,e,i,this,i.placeholderImageStyleArgs),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.placeholderImageAttrArgs);var r=TDB.watcherTag(17323653,i,null,i.placeholderArgs),a=new TDB.NewSubTemplateInstructionVE(i,r);a.addResource(r),this.addChild(a,n,null);r=TDB.watcherTag(17323653,i,null,i.embedIframeArgs);(a=new TDB.NewSubTemplateInstructionVE(i,r,"embedIframe")).addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._AttrBinding.update(e)},t}(TDB.ViewElement);e.CplaceholderImage=t}(oe||(oe={}));var re=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new ae.C1(i),e,t)},t}(t.EmbedPlaceholderVEBase);t.EmbedPlaceholderVE=re;var ae;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="EmbedPlaceholderWrapper";this.addChild(new e.Cbackground(n),o,null);var r=TDB.watcherTag(17323653,n,null,n.iconArgs),a=new TDB.NewSubTemplateInstructionVE(n,r);a.addResource(r),this.addChild(a,o,null),this.addChild(new e.Cspinner(n),o,null),this.addChild(new e.CisLoadingVisible(n),o,null),this.addChild(new e.CisCookieBannerVisible(n),o,null),this.addChild(new e.CisHostnameVisible(n),o,null),this.addChild(new e.C2(n),o,null);r=TDB.watcherTag(17323653,n,null,n.viewButtonArgs);(a=new TDB.NewSubTemplateInstructionVE(n,r)).addResource(r),this.addChild(a,o,null),this.addChild(new e.CisEmbedInfoVisible(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="EmbedPlaceholderBackground",this._StyleBinding=new o.Style.Binding(n,e,i,this,i.backgroundStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e)},t}(TDB.ViewElement);e.Cbackground=i;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="EmbedPlaceholderSpinner",this._StyleBinding=new o.Style.Binding(n,e,i,this,i.spinnerStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e)},t}(TDB.ViewElement);e.Cspinner=r;var a=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.isLoadingVisibleArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.Cloading(n),t,i)},i}(TDB.IfInstructionVE);e.CisLoadingVisible=a;var s=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="EmbedPlaceholderLoading",this._TextBinding=new o.Text.Binding(n,e,i,this,i.loadingTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.Cloading=s;var l=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.isCookieBannerVisibleArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CloadingDelayed(n),t,i)},i}(TDB.IfInstructionVE);e.CisCookieBannerVisible=l;var u=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="EmbedPlaceholderStatus",this._TextBinding=new o.Text.Binding(n,e,i,this,i.loadingDelayedTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.CloadingDelayed=u;var d=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.isHostnameVisibleArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.Chostname(n),t,i)},i}(TDB.IfInstructionVE);e.CisHostnameVisible=d;var c=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="EmbedPlaceholderHostname",this._TextBinding=new o.Text.Binding(n,e,i,this,i.hostnameTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.Chostname=c;var p=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="EmbedPlaceholderViewButtonGhost",this._addToDom(e,t)},t}(TDB.ViewElement);e.C2=p;var g=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.isEmbedInfoVisibleArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.Ctitle(n),t,i),this.addChild(new e.Cauthor(n),t,i)},i}(TDB.IfInstructionVE);e.CisEmbedInfoVisible=g;var h=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,r=document.createElement("div");this.domElement=r,r._context=i,this._TextBinding=new o.Text.Binding(r,e,i,this,i.titleTextArgs),this._ClassNameBinding=new n.ClassName.Binding(r,e,i,this,i.titleClassNameArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e),this._ClassNameBinding.update(e)},t}(TDB.ViewElement);e.Ctitle=h;var y=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,r=document.createElement("div");this.domElement=r,r._context=i,this._TextBinding=new o.Text.Binding(r,e,i,this,i.authorTextArgs),this._ClassNameBinding=new n.ClassName.Binding(r,e,i,this,i.authorClassNameArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e),this._ClassNameBinding.update(e)},t}(TDB.ViewElement);e.Cauthor=y}(ae||(ae={}));var se=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new le.CPositionDiv(i),e,t)},t}(t.EndOfStoryLayoutVEBase);t.EndOfStoryLayoutVE=se;var le;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="endOfStoryWrapper",this._StyleBinding=new o.Style.Binding(r,t,n,this,n.PositionDivStyleArgs),this._AttrBinding=new o.Attr.Binding(r,t,n,this,n.PositionDivAttrArgs);this.addChild(new e.CendOfStory(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._AttrBinding.update(e)},i}(TDB.ViewElement);e.CPositionDiv=t;var i=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var o=this._context,r=document.createElement("div");this.domElement=r,r._context=o,this._ClassNameBinding=new n.ClassName.Binding(r,t,o,this,o.endOfStoryClassNameArgs);var a=o.headingArgs();a&&this.addChild(a.build(o),r,null),this.addChild(new e.Cmessage(o),r,null),this.addChild(new e.C1(o),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._ClassNameBinding.update(e)},i}(TDB.ViewElement);e.CendOfStory=i;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("p");this.domElement=n,n._context=i,n.className="endOfStoryBodyText segoeUISemilight",this._TextBinding=new o.Text.Binding(n,e,i,this,i.messageTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.Cmessage=r;var a=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="endOfStoryControlsWrapper";var r=n.getStartedButtonArgs();r&&this.addChild(r.build(n),o,null),this.addChild(new e.C2(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=a;var s=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="endOfStoryShareWrapper";var o=TDB.watcherTag(17323653,i,null,i.facebookButtonArgs),r=new TDB.NewSubTemplateInstructionVE(i,o);r.addResource(o),this.addChild(r,n,null);o=TDB.watcherTag(17323653,i,null,i.twitterButtonArgs);(r=new TDB.NewSubTemplateInstructionVE(i,o)).addResource(o),this.addChild(r,n,null);o=TDB.watcherTag(17323653,i,null,i.linkedInButtonArgs);(r=new TDB.NewSubTemplateInstructionVE(i,o)).addResource(o),this.addChild(r,n,null);o=TDB.watcherTag(17323653,i,null,i.linkButtonArgs);(r=new TDB.NewSubTemplateInstructionVE(i,o)).addResource(o),this.addChild(r,n,null),this._addToDom(e,t)},t}(TDB.ViewElement);e.C2=s}(le||(le={}));var ue=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;i.showMadeWithSwayArgs()&&this.addChild(new de.CPositionDiv(i),e,t)},t}(t.MadeWithSwayLayoutVEBase);t.MadeWithSwayLayoutVE=ue;var de;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="madeWithSwayWrapper",this._StyleBinding=new o.Style.Binding(r,t,n,this,n.PositionDivStyleArgs),this._AttrBinding=new o.Attr.Binding(r,t,n,this,n.PositionDivAttrArgs);this.addChild(new e.Cwrapper(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._AttrBinding.update(e)},i}(TDB.ViewElement);e.CPositionDiv=t;var i=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var o=this._context,r=document.createElement("div");this.domElement=r,r._context=o,this._FadeVisibleBinding=new n.FadeVisible.Binding(r,t,o,this,o.wrapperFadeVisibleInitArgs(),o.wrapperFadeVisibleArgs);var a=o.fontIconVEArgs();a&&this.addChild(a.build(o),r,null),this.addChild(new e.Ctext(o),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._FadeVisibleBinding.update(e)},i.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose()},i}(TDB.ViewElement);e.Cwrapper=i;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="madeWithSwayText",this._TextBinding=new o.Text.Binding(n,e,i,this,i.textTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.Ctext=r}(de||(de={}));var ce=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new pe.Ctransformed(i),e,t)},t}(t.TextureSceneGraphVEBase);t.TextureSceneGraphVE=ce;var pe;!function(e){var t=function(t){function n(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(n,t),n.prototype._create=function(t,n){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,a.className="texturescenegraph",this._StyleBinding=new o.Style.Binding(a,t,r,this,r.transformedStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(a,t,r,this,r.transformedAnimatableInitArgs());this.addChild(new e.C1(r),a,null),this._addToDom(t,n)},n.prototype.onUpdate=function(e){this._StyleBinding.update(e)},n.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},n}(TDB.ViewElement);e.Ctransformed=t;var n=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="visuals";this.addChild(new e.C2(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=n;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="layout";var o=TDB.watcherTag(17323653,i,null,i.containerArgs),r=new TDB.NewSubTemplateInstructionVE(i,o);r.addResource(o),this.addChild(r,n,null),this._addToDom(e,t)},t}(TDB.ViewElement);e.C2=r}(pe||(pe={}));var ge=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._subscribeToWatchable(n._updatePaletteColorsWatcher=TDB.watcherTag(5796370,n,n,n.updatePaletteColors),TDB.UpdatePhase.WriteOnly),n._subscribeToWatchable(n._updateFontFacesWatcher=TDB.watcherTag(5796370,n,n,n.updateFontFaces),TDB.UpdatePhase.WriteOnly),n._subscribeToWatchable(n._updateTextStylesWatcher=TDB.watcherTag(5796370,n,n,n.updateTextStyles),TDB.UpdatePhase.WriteOnly),n}return __extends(t,e),t.prototype._create=function(e,t){var i=this;TDB.perfMeasurement("PreviewVE_create",function(){var n=i;i.addChild(new TDB.SubTemplateInstructionVE(!1,n.rootArgs()),e,t);var o=TDB.watcherTag(17323653,n,null,n.poweredByWrapperArgs),r=new TDB.NewSubTemplateInstructionVE(n,o);r.addResource(o),i.addChild(r,e,t);var a=n.debugArgs();a&&i.addChild(new TDB.NewSubTemplateInstructionVE(n,TDB.immutableWatchable(a),"debug"),e,t),i._updatePaletteColorsWatcher.resolve(),i._updateFontFacesWatcher.resolve(),i._updateTextStylesWatcher.resolve()})},t.prototype.onUpdate=function(e){e===TDB.UpdatePhase.WriteOnly&&(this._updatePaletteColorsWatcher.resolve(),this._updateFontFacesWatcher.resolve(),this._updateTextStylesWatcher.resolve())},t}(t.PreviewVEBase);t.PreviewVE=ge;var he=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new ye.CcontrolsWrapper(i),e,t)},t}(t.AudioControlsVEBase);t.AudioControlsVE=he;var ye;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="audioControlsWrapper",this._PositionBinding=n.controlsWrapperPositionBinding=new o.Position.Binding(r,t,n,this);var a=TDB.watcherTag(17323653,n,null,n.playButtonArgs),s=new TDB.NewSubTemplateInstructionVE(n,a);s.addResource(a),this.addChild(s,r,null),this.addChild(new e.Coverlay(n),r,null),this.addChild(new e.CifControls(n),r,null),this.addChild(new e.CifVolumeControl(n),r,null),this._addToDom(t,i)},i.prototype.disposeBindings=function(){this._context.controlsWrapperPositionBinding=void 0},i}(TDB.ViewElement);e.CcontrolsWrapper=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="AudioControlsOverlay",this._StyleBinding=new o.Style.Binding(n,e,i,this,i.overlayStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e)},t}(TDB.ViewElement);e.Coverlay=i;var n=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.ifControlsArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.Ccontrols(n),t,i)},i}(TDB.IfInstructionVE);e.CifControls=n;var r=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="AudioLayoutControlsDiv",this._CssBinding=new o.Css.Binding(r,t,n,this,n.controlsCssArgs),this._StyleBinding=new o.Style.Binding(r,t,n,this,n.controlsStyleArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite);this.addChild(new e.CifTimeStamp(n),r,null);var a=TDB.watcherTag(17323653,n,null,n.progressBarArgs),s=new TDB.NewSubTemplateInstructionVE(n,a,"progressBar");s.addResource(a),this.addChild(s,r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._CssBinding.update(e),this._StyleBinding.update(e)},i}(TDB.ViewElement);e.Ccontrols=r;var a=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.ifTimeStampArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.Cduration(n),t,i)},i}(TDB.IfInstructionVE);e.CifTimeStamp=a;var s=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="AudioLayoutDuration",this._TextBinding=new o.Text.Binding(n,e,i,this,i.durationTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.Cduration=s;var l=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.ifVolumeControlArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context,o=TDB.watcherTag(17323653,n,null,n.volumeButtonArgs),r=new TDB.NewSubTemplateInstructionVE(n,o,"volumeButton");r.addResource(o),this.addChild(r,t,i),this.addChild(new e.CvolumeControlDiv(n),t,i)},i}(TDB.IfInstructionVE);e.CifVolumeControl=l;var u=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="AudioLayoutVolumeControl",this._StyleBinding=new o.Style.Binding(n,e,i,this,i.volumeControlDivStyleArgs);var r=TDB.watcherTag(17323653,i,null,i.volumeSliderArgs),a=new TDB.NewSubTemplateInstructionVE(i,r,"volumeSlider");a.addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e)},t}(TDB.ViewElement);e.CvolumeControlDiv=u}(ye||(ye={}));var me=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new fe.CPositionDiv(i),e,t)},t}(t.ProjectionVEBase);t.ProjectionVE=me;var fe;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="projection",this._PropsBinding=new o.Props.Binding(r,e,n,this,n.PositionDivPropsArgs),this._AnimatableBinding=new i.Animatable.Binding(r,e,n,this,n.PositionDivAnimatableInitArgs()),this._StyleBinding=new o.Style.Binding(r,e,n,this,n.PositionDivStyleArgs),this._BoxShadowBinding=new i.BoxShadow.Binding(r,e,n,this,n.PositionDivBoxShadowArgs),this._AttrBinding=new o.Attr.Binding(r,e,n,this,n.PositionDivAttrArgs);var a=n.backgroundArgs();a&&this.addChild(a.build(n),r,null);var s=TDB.watcherTag(17323653,n,null,n.scenegraphArgs),l=new TDB.NewSubTemplateInstructionVE(n,s);l.addResource(s),this.addChild(l,r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._BoxShadowBinding.update(e),this._AttrBinding.update(e)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);e.CPositionDiv=t}(fe||(fe={}));var ve=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._subscribeToWatchable(n._scaleUpdaterWatcher=TDB.watcherTag(5796370,n,n,n.scaleUpdater),TDB.UpdatePhase.WriteOnly),n._subscribeToWatchable(n._clearAnimationCacheWatcher=TDB.watcherTag(5796370,n,n,n.clearAnimationCache),TDB.UpdatePhase.ReadWrite),n._subscribeToWatchable(n._updateSpacePartitioningWatcher=TDB.watcherTag(5796370,n,n,n.updateSpacePartitioning),TDB.UpdatePhase.ReadWrite),n._subscribeToWatchable(n._initializeOrUpdateStateMachineWatcher=TDB.watcherTag(5796370,n,n,n.initializeOrUpdateStateMachine),TDB.UpdatePhase.ReadWrite),n._subscribeToWatchable(n._gotoHashTargetWatcher=TDB.watcherTag(5796370,n,n,n.gotoHashTarget),TDB.UpdatePhase.ReadWrite),n._subscribeToWatchable(n._validateLayoutTreeWatcher=TDB.watcherTag(5796370,n,n,n.validateLayoutTree),TDB.UpdatePhase.ReadWrite),n._subscribeToWatchable(n._applyRestoreStateWatcher=TDB.watcherTag(5796370,n,n,n.applyRestoreState),TDB.UpdatePhase.ReadWrite),n._subscribeToWatchable(n._scrollToPreviewTargetWatcher=TDB.watcherTag(5796370,n,n,n.scrollToPreviewTarget),TDB.UpdatePhase.ReadWrite),n.viewports=TDB.methodNewForeachState(n,n.viewportsArgs),n}return __extends(t,e),t.prototype._create=function(e,t){var i=this;TDB.perfMeasurement("RootVE_create",function(){var n=i;i.addChild(new Se.CrootDivParent(n),e,t),i._scaleUpdaterWatcher.resolve(),i.receivePhaseNotification(TDB.UpdatePhase.ReadWrite)})},t.prototype.onUpdate=function(e){e===TDB.UpdatePhase.WriteOnly?this._scaleUpdaterWatcher.resolve():e===TDB.UpdatePhase.ReadWrite&&(this._clearAnimationCacheWatcher.resolve(),this._updateSpacePartitioningWatcher.resolve(),this._initializeOrUpdateStateMachineWatcher.resolve(),this._gotoHashTargetWatcher.resolve(),this._validateLayoutTreeWatcher.resolve(),this._applyRestoreStateWatcher.resolve(),this._scrollToPreviewTargetWatcher.resolve())},t}(t.RootVEBase);t.RootVE=ve;var Se;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,a.id="rootve",this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.rootDivParentAttrArgs),this._ClassNameBinding=new n.ClassName.Binding(a,t,r,this,r.rootDivParentClassNameArgs);this.addChild(new e.CrootDiv(r),a,null);var s=TDB.watcherTag(17323653,r,null,r.emptySwayCalloutArgs),l=new TDB.NewSubTemplateInstructionVE(r,s);l.addResource(s),this.addChild(l,a,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._ClassNameBinding.update(e)},i}(TDB.ViewElement);e.CrootDivParent=t;var i=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.id="storyroot",this._StyleBinding=new o.Style.Binding(r,t,n,this,n.rootDivStyleArgs),this._EventsBinding=new o.Events.Binding(r,t,n,this,n.rootDivEventsInitArgs()),this._AttrBinding=new o.Attr.Binding(r,t,n,this,n.rootDivAttrArgs),this._FocusableBinding=n.focusableBinding=new o.Focusable.Binding(r,t,n,this,n.FocusableInitArgs());switch(n.layoutV2Args()){case!0:this.addChild(new e.ClayoutV2Wrapper(n),r,null);break;case!1:var a=n.viewports;this.addChild(new TDB.NewForeachInstructionVE(n,a.raw(),void 0,a),r,null)}var s=TDB.watcherTag(17323653,n,null,n.digitalPrintAuthoringCalloutArgs),l=new TDB.NewSubTemplateInstructionVE(n,s);l.addResource(s),this.addChild(l,r,null);s=TDB.watcherTag(17323653,n,null,n.navigationCalloutArgs);(l=new TDB.NewSubTemplateInstructionVE(n,s)).addResource(s),this.addChild(l,r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._AttrBinding.update(e),this._FocusableBinding.update(e)},i.prototype.disposeBindings=function(){this._EventsBinding.dispose(),this._FocusableBinding.dispose(),this._context.focusableBinding=void 0},i}(TDB.ViewElement);e.CrootDiv=i;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="fullSizeScroller",this._DangerousInnerHtmlBinding=new o.DangerousInnerHtml.Binding(n,e,i,this,i.layoutV2WrapperDangerousInnerHtmlArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._DangerousInnerHtmlBinding.update(e)},t}(TDB.ViewElement);e.ClayoutV2Wrapper=r}(Se||(Se={}));var we=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Te.C1(i),e,t)},t}(t.OneDriveVideoPlayerVEBase);t.OneDriveVideoPlayerVE=we;var Te;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n;this.addChild(new e.CplayerIframe(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("iframe");this.domElement=n,n._context=i,n.setAttribute("frameborder","0"),n.setAttribute("scrolling","no"),n.setAttribute("allowfullscreen","true"),n.setAttribute("allow","autoplay"),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.playerIframeAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.CplayerIframe=i}(Te||(Te={}));var Ce=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new _e.Cvelum(i),e,t)},t}(t.VelumLayoutVEBase);t.VelumLayoutVE=Ce;var _e;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.velumAttrArgs),this._EventsBinding=new o.Events.Binding(n,e,i,this,i.velumEventsInitArgs()),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.velumStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._StyleBinding.update(e)},t.prototype.disposeBindings=function(){this._EventsBinding.dispose()},t}(TDB.ViewElement);e.Cvelum=t}(_e||(_e={}));var be=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Ae.CPositionDiv(i),e,t)},t}(t.VideoLayoutVEBase);t.VideoLayoutVE=be;var Ae;!function(e){var t=function(t){function n(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(n,t),n.prototype._create=function(t,n){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.PositionDivAttrArgs),this._PropsBinding=new o.Props.Binding(a,t,r,this,r.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(a,t,r,this,r.PositionDivStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(a,t,r,this,r.PositionDivAnimatableInitArgs()),this._BoxShadowBinding=new i.BoxShadow.Binding(a,t,r,this,r.PositionDivBoxShadowArgs),this._FocusableBinding=r.focusableBinding=new o.Focusable.Binding(a,t,r,this,r.FocusableInitArgs());this.addChild(new e.CPlayerPositionDiv(r),a,null),this._addToDom(t,n)},n.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._PropsBinding.update(e),this._StyleBinding.update(e),this._BoxShadowBinding.update(e),this._FocusableBinding.update(e)},n.prototype.disposeBindings=function(){this._AnimatableBinding.dispose(),this._FocusableBinding.dispose(),this._context.focusableBinding=void 0},n}(TDB.ViewElement);e.CPositionDiv=t;var n=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,this._StyleBinding=new o.Style.Binding(r,t,n,this,n.PlayerPositionDivStyleArgs);this.addChild(new e.CvideoContainer(n),r,null),this.addChild(new e.CvideoPlaceholder(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e)},i}(TDB.ViewElement);e.CPlayerPositionDiv=n;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,this._StyleBinding=new o.Style.Binding(n,e,i,this,i.videoContainerStyleArgs);var r=TDB.watcherTag(4543755,i,null,i.VideoArgs),a=new TDB.SubTemplateInstructionVE(!0,r);a.addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e)},t}(TDB.ViewElement);e.CvideoContainer=r;var a=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,this._StyleBinding=new o.Style.Binding(r,t,n,this,n.videoPlaceholderStyleArgs);this.addChild(new e.CThumbnailImg(n),r,null);var a=TDB.watcherTag(17323653,n,null,n.PlayButtonArgs),s=new TDB.NewSubTemplateInstructionVE(n,a);s.addResource(a),this.addChild(s,r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e)},i}(TDB.ViewElement);e.CvideoPlaceholder=a;var s=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("img");this.domElement=n,n._context=i,n.className="VideoLayoutThumbnail",this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.ThumbnailImgAttrArgs),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.ThumbnailImgStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._StyleBinding.update(e)},t}(TDB.ViewElement);e.CThumbnailImg=s}(Ae||(Ae={}));var Pe=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Ie.CPositionDiv(i),e,t)},t}(t.ViewportVEBase);t.ViewportVE=Pe;var Ie;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="viewport layout",this._StyleBinding=new o.Style.Binding(r,e,n,this,n.PositionDivStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(r,e,n,this,n.PositionDivAnimatableInitArgs()),this._AttrBinding=new o.Attr.Binding(r,e,n,this,n.PositionDivAttrArgs);var a=TDB.watcherTag(17323653,n,null,n.contentArgs),s=new TDB.NewSubTemplateInstructionVE(n,a);s.addResource(a),this.addChild(s,r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._AttrBinding.update(e)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);e.CPositionDiv=t}(Ie||(Ie={}));var Ee=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._subscribeToWatchable(n._updateVisibleSizeWatcher=TDB.watcherTag(5796370,n,n,n.updateVisibleSize),TDB.UpdatePhase.ReadWrite),n._subscribeToWatchable(n._updateContentSizeWatcher=TDB.watcherTag(5796370,n,n,n.updateContentSize),TDB.UpdatePhase.ReadWrite),n.viewport=TDB.methodNewSubtemplateState(n,n.viewportArgs),n}return __extends(t,e),t.prototype._create=function(e,t){var i=this,n=i.viewport;this.addChild(new TDB.NewSubTemplateInstructionVE(i,n.raw(),void 0,n),e,t),this.addChild(new De.Cvertical(i),e,t),this.addChild(new De.CisRtl(i),e,t),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite)},t.prototype.onUpdate=function(e){e===TDB.UpdatePhase.ReadWrite&&(this._updateVisibleSizeWatcher.resolve(),this._updateContentSizeWatcher.resolve())},t}(t.AnimatedScrollerVEBase);t.AnimatedScrollerVE=Ee;var De;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.id="vertical-scrollbar",o.className="scrollbar-element vertical scrollbar-hidden",this._ScrollBinding=new i.Scroll.Binding(o,e,n,this,n.verticalScrollInitArgs(),n.verticalScrollScrollSizeArgs,n.verticalScrollEnabledArgs,n.verticalScrollPreventFromShowingArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._ScrollBinding.update(e)},t.prototype.disposeBindings=function(){this._ScrollBinding.dispose()},t}(TDB.ViewElement);e.Cvertical=t;var n=function(t){function i(e){var i=this,n=TDB.watcherTag(4519824,e,null,e.isRtlArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i,n){var o=this._context;switch(t){case!1:this.addChild(new e.Chorizontal(o),i,n);break;case!0:this.addChild(new e.ChorizontalReversed(o),i,n)}},i}(TDB.SwitchInstructionVE);e.CisRtl=n;var o=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.id="horizontal-scrollbar",o.className="scrollbar-element horizontal scrollbar-hidden",this._ScrollBinding=new i.Scroll.Binding(o,e,n,this,n.horizontalScrollInitArgs(),n.horizontalScrollScrollSizeArgs,n.horizontalScrollEnabledArgs,n.horizontalScrollPreventFromShowingArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._ScrollBinding.update(e)},t.prototype.disposeBindings=function(){this._ScrollBinding.dispose()},t}(TDB.ViewElement);e.Chorizontal=o;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.id="horizontal-scrollbar",o.className="scrollbar-element horizontal horizontalReversed scrollbar-hidden",this._ScrollBinding=new i.Scroll.Binding(o,e,n,this,n.horizontalReversedScrollInitArgs(),n.horizontalReversedScrollScrollSizeArgs,n.horizontalReversedScrollEnabledArgs,n.horizontalReversedScrollPreventFromShowingArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._ScrollBinding.update(e)},t.prototype.disposeBindings=function(){this._ScrollBinding.dispose()},t}(TDB.ViewElement);e.ChorizontalReversed=r}(De||(De={}));var Be=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._subscribeToWatchable(n._updateVisibleSizeWatcher=TDB.watcherTag(5796370,n,n,n.updateVisibleSize),TDB.UpdatePhase.ReadWrite),n._subscribeToWatchable(n._updateContentSizeWatcher=TDB.watcherTag(5796370,n,n,n.updateContentSize),TDB.UpdatePhase.ReadWrite),n.viewport=TDB.methodNewSubtemplateState(n,n.viewportArgs),n}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Ve.Croot(i),e,t),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite)},t.prototype.onUpdate=function(e){e===TDB.UpdatePhase.ReadWrite&&(this._updateVisibleSizeWatcher.resolve(),this._updateContentSizeWatcher.resolve())},t}(t.NativeScrollerVEBase);t.NativeScrollerVE=Be;var Ve;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.className="native-scroller",this._StyleBinding=new o.Style.Binding(r,e,n,this,n.rootStyleArgs),this._NativeScrollBinding=new i.NativeScroll.Binding(r,e,n,this,n.rootNativeScrollInitArgs(),n.rootNativeScrollDirectionArgs);var a=n.viewport;this.addChild(new TDB.NewSubTemplateInstructionVE(n,a.raw(),void 0,a),r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._NativeScrollBinding.update(e)},t.prototype.disposeBindings=function(){this._NativeScrollBinding.dispose()},t}(TDB.ViewElement);e.Croot=t}(Ve||(Ve={}));var Me=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this,n=TDB.watcherTag(17323653,i,null,i.subtemplateArgs),o=new TDB.NewSubTemplateInstructionVE(i,n);o.addResource(n),this.addChild(o,e,t)},t}(t.ModeSelectorVEBase);t.ModeSelectorVE=Me;var Le=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new ke.CPositionDiv(i),e,t)},t}(t.OfflineLayoutVEBase);t.OfflineLayoutVE=Le;var ke;!function(e){var t=function(t){function n(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(n,t),n.prototype._create=function(t,n){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,this._PropsBinding=new o.Props.Binding(a,t,r,this,r.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(a,t,r,this,r.PositionDivStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(a,t,r,this,r.PositionDivAnimatableInitArgs()),this._BoxShadowBinding=new i.BoxShadow.Binding(a,t,r,this,r.PositionDivBoxShadowArgs),this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.PositionDivAttrArgs);this.addChild(new e.C1(r),a,null),this._addToDom(t,n)},n.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._BoxShadowBinding.update(e),this._AttrBinding.update(e)},n.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},n}(TDB.ViewElement);e.CPositionDiv=t;var n=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="offlineContentBackground";this.addChild(new e.C2(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=n;var r=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="offlineContentWrapper";this.addChild(new e.ChasImage(n),o,null),this.addChild(new e.Cmessage(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C2=r;var a=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.hasImageArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.Cimage(n),t,i),this.addChild(new e.C3(n),t,i)},i}(TDB.IfInstructionVE);e.ChasImage=a;var s=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("img");this.domElement=n,n._context=i,n.className="offlineContentImage",this._PropsBinding=new o.Props.Binding(n,e,i,this,i.imagePropsArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e)},t}(TDB.ViewElement);e.Cimage=s;var l=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="offlineContentSpacer",this._addToDom(e,t)},t}(TDB.ViewElement);e.C3=l;var u=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="offlineContentMessage",this._TextBinding=new o.Text.Binding(n,e,i,this,i.messageTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.Cmessage=u}(ke||(ke={}));var xe=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Re.Croot(i),e,t)},t}(t.ViewportBackgroundVEBase);t.ViewportBackgroundVE=xe;var Re;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,this._PropsBinding=new o.Props.Binding(r,e,n,this,n.rootPropsArgs),this._StyleBinding=new o.Style.Binding(r,e,n,this,n.rootStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(r,e,n,this,n.rootAnimatableInitArgs());var a=n.backgroundArgs();a&&this.addChild(a.build(n),r,null);var s=TDB.watcherTag(17323653,n,null,n.contentArgs),l=new TDB.NewSubTemplateInstructionVE(n,s);l.addResource(s),this.addChild(l,r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);e.Croot=t}(Re||(Re={}));var Oe=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Fe.Cliplayer(i),e,t)},t}(t.LivingImageVideoViewVEBase);t.LivingImageVideoViewVE=Oe;var Fe;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="container livingimage_container",this._LivingImagePlayerBinding=new i.LivingImagePlayer.Binding(o,e,n,this,n.liplayerLivingImagePlayerArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._LivingImagePlayerBinding.update(e)},t.prototype.disposeBindings=function(){this._LivingImagePlayerBinding.dispose()},t}(TDB.ViewElement);e.Cliplayer=t}(Fe||(Fe={}));var Ue=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this,n=TDB.watcherTag(17323653,i,null,i.imageArgs),o=new TDB.NewSubTemplateInstructionVE(i,n);o.addResource(n),this.addChild(o,e,t)},t}(t.ImageSelectorVEBase);t.ImageSelectorVE=Ue;var Ne=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new ze.ChasUrl(i),e,t)},t}(t.TextRunVEBase);t.TextRunVE=Ne;var ze;!function(e){var t=function(t){function i(e){var i=this,n=TDB.watcherTag(4519824,e,null,e.hasUrlArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i,n){var o=this._context;switch(t){case!0:this.addChild(new e.CTextSpan(o),i,n);break;case!1:this.addChild(new e.CTextSpan1(o),i,n)}},i}(TDB.SwitchInstructionVE);e.ChasUrl=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("a");this.domElement=n,n._context=i,this._TextBinding=new o.Text.Binding(n,e,i,this,i.TextSpanTextArgs),this._PropsBinding=new o.Props.Binding(n,e,i,this,i.TextSpanPropsArgs),this._JQStyleBinding=new o.JQStyle.Binding(n,e,i,this,i.TextSpanJQStyleStyleArgs),this._FocusableBinding=i.focusableBinding=new o.Focusable.Binding(n,e,i,this,i.FocusableInitArgs()),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e),this._PropsBinding.update(e),this._JQStyleBinding.update(e),this._FocusableBinding.update(e)},t.prototype.disposeBindings=function(){this._FocusableBinding.dispose(),this._context.focusableBinding=void 0},t}(TDB.ViewElement);e.CTextSpan=i;var n=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("span");this.domElement=n,n._context=i,this._TextBinding=new o.Text.Binding(n,e,i,this,i.TextSpanTextArgs),this._PropsBinding=new o.Props.Binding(n,e,i,this,i.TextSpanPropsArgs),this._JQStyleBinding=new o.JQStyle.Binding(n,e,i,this,i.TextSpanJQStyleStyleArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e),this._PropsBinding.update(e),this._JQStyleBinding.update(e)},t}(TDB.ViewElement);e.CTextSpan1=n}(ze||(ze={}));var He=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new We.CPositionDiv(i),e,t),this.addChild(new We.ChasChunkedScrolling(i),e,t),this.addChild(new We.ChasDraggableEdge(i),e,t)},t}(t.ContainerLayoutVEBase);t.ContainerLayoutVE=He;var We;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,this._PropsBinding=new o.Props.Binding(a,e,r,this,r.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(a,e,r,this,r.PositionDivStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(a,e,r,this,r.PositionDivAnimatableInitArgs()),this._BoxShadowBinding=new i.BoxShadow.Binding(a,e,r,this,r.PositionDivBoxShadowArgs),this._AttrBinding=new o.Attr.Binding(a,e,r,this,r.PositionDivAttrArgs),this._ZoomableBinding=new n.Zoomable.Binding(a,e,r,this,r.PositionDivZoomableInitArgs(),r.PositionDivZoomableArgs),this._FadeVisibleBinding=new n.FadeVisible.Binding(a,e,r,this,r.PositionDivFadeVisibleInitArgs(),r.PositionDivFadeVisibleArgs),this._FocusableBinding=r.focusableBinding=new o.Focusable.Binding(a,e,r,this,r.FocusableInitArgs()),this._ChunkedScrollerBinding=r.chunkedScrollerBinding=new i.ChunkedScroller.Binding(a,e,r,this,r.ChunkedScrollerInitArgs()),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite);var s=TDB.watcherTag(17323653,r,null,r.calloutArgs),l=new TDB.NewSubTemplateInstructionVE(r,s);l.addResource(s),this.addChild(l,a,null);var u=r.backgroundArgs();u&&this.addChild(u.build(r),a,null);var d=TDB.watcherTag(17323652,r,null,r.layoutChildrenArgs),c=new TDB.KeyedNewForeachInstructionVE(r,d);c.addResource(d),this.addChild(c,a,null),(u=r.debugArgs())&&this.addChild(u.build(r),a,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._BoxShadowBinding.update(e),this._AttrBinding.update(e),this._ZoomableBinding.update(e),this._FadeVisibleBinding.update(e),this._FocusableBinding.update(e)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose(),this._ZoomableBinding.dispose(),this._FadeVisibleBinding.dispose(),this._FocusableBinding.dispose();var e=this._context;e.focusableBinding=void 0,e.chunkedScrollerBinding=void 0},t}(TDB.ViewElement);e.CPositionDiv=t;var r=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.hasChunkedScrollingArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CscrollerButtonWrapper(n),t,i)},i}(TDB.IfInstructionVE);e.ChasChunkedScrolling=r;var a=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="container chunkedScrollerWrapper",this._StyleBinding=new o.Style.Binding(n,e,i,this,i.scrollerButtonWrapperStyleArgs);var r=TDB.watcherTag(17323653,i,null,i.chunkScrollerPreviousButtonArgs),a=new TDB.NewSubTemplateInstructionVE(i,r);a.addResource(r),this.addChild(a,n,null);r=TDB.watcherTag(17323653,i,null,i.chunkScrollerNextButtonArgs);(a=new TDB.NewSubTemplateInstructionVE(i,r)).addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e)},t}(TDB.ViewElement);e.CscrollerButtonWrapper=a;var s=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.hasDraggableEdgeArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CcomparisonSeparatorTop(n),t,i),this.addChild(new e.CcomparisonSeparatorBottom(n),t,i),this.addChild(new e.CcomparisonButton(n),t,i)},i}(TDB.IfInstructionVE);e.ChasDraggableEdge=s;var l=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="comparisonSeparator",this._StyleBinding=new o.Style.Binding(n,e,i,this,i.comparisonSeparatorTopStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e)},t}(TDB.ViewElement);e.CcomparisonSeparatorTop=l;var u=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="comparisonSeparator",this._StyleBinding=new o.Style.Binding(n,e,i,this,i.comparisonSeparatorBottomStyleArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._StyleBinding.update(e)},t}(TDB.ViewElement);e.CcomparisonSeparatorBottom=u;var d=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,r=document.createElement("div");this.domElement=r,r._context=i,r.className="comparisonButton IconOverlay focusable ButtonVE",this._DraggableBinding=new o.Draggable.Binding(r,e,i,this,i.comparisonButtonDraggableInitArgs(),i.comparisonButtonDraggableOptionsArgs),this._StyleBinding=new o.Style.Binding(r,e,i,this,i.comparisonButtonStyleArgs),this._TouchToMouseBinding=new n.TouchToMouse.Binding(r,e,i,this,i.comparisonButtonTouchToMouseArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite);var a=i.comparisonIconArgs();a&&this.addChild(a.build(i),r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._DraggableBinding.update(e),this._StyleBinding.update(e),this._TouchToMouseBinding.update(e)},t.prototype.disposeBindings=function(){this._DraggableBinding.dispose(),this._TouchToMouseBinding.dispose()},t}(TDB.ViewElement);e.CcomparisonButton=d}(We||(We={}));var Ke=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this,n=i.containerArgs();n&&this.addChild(new TDB.NewSubTemplateInstructionVE(i,TDB.immutableWatchable(n),"container"),e,t)},t}(t.RegionLayoutVEBase);t.RegionLayoutVE=Ke;var je=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this,n=i.containerArgs();n&&this.addChild(n.build(i),e,t)},t}(t.PanelLayoutVEBase);t.PanelLayoutVE=je;var qe=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Ge.CPositionDiv(i),e,t)},t}(t.MediaViewportLayoutVEBase);t.MediaViewportLayoutVE=qe;var Ge;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,this._PropsBinding=new o.Props.Binding(r,e,n,this,n.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(r,e,n,this,n.PositionDivStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(r,e,n,this,n.PositionDivAnimatableInitArgs()),this._BoxShadowBinding=new i.BoxShadow.Binding(r,e,n,this,n.PositionDivBoxShadowArgs),this._AttrBinding=new o.Attr.Binding(r,e,n,this,n.PositionDivAttrArgs);var a=n.backgroundArgs();a&&this.addChild(a.build(n),r,null);var s=TDB.watcherTag(17323652,n,null,n.layoutChildrenArgs),l=new TDB.KeyedNewForeachInstructionVE(n,s);l.addResource(s),this.addChild(l,r,null),(a=n.debugArgs())&&this.addChild(a.build(n),r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._BoxShadowBinding.update(e),this._AttrBinding.update(e)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);e.CPositionDiv=t}(Ge||(Ge={}));var Xe=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Ye.CPositionDiv(i),e,t)},t}(t.TextBlockLayoutVEBase);t.TextBlockLayoutVE=Xe;var Ye;!function(e){var t=function(t){function n(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(n,t),n.prototype._create=function(t,n){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,this._PropsBinding=new o.Props.Binding(a,t,r,this,r.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(a,t,r,this,r.PositionDivStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(a,t,r,this,r.PositionDivAnimatableInitArgs()),this._BoxShadowBinding=new i.BoxShadow.Binding(a,t,r,this,r.PositionDivBoxShadowArgs),this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.PositionDivAttrArgs);var s=r.backgroundArgs();s&&this.addChild(s.build(r),a,null),this.addChild(new e.ChasSections(r),a,null),this._addToDom(t,n)},n.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._BoxShadowBinding.update(e),this._AttrBinding.update(e)},n.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},n}(TDB.ViewElement);e.CPositionDiv=t;var n=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.hasSectionsArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CtextWrapper(n),t,i)},i}(TDB.IfInstructionVE);e.ChasSections=n;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="text_wrapper",this._PropsBinding=new o.Props.Binding(n,e,i,this,i.textWrapperPropsArgs),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.textWrapperStyleArgs);var r=TDB.watcherTag(17323653,i,null,i.sectionListArgs),a=new TDB.NewSubTemplateInstructionVE(i,r);a.addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e)},t}(TDB.ViewElement);e.CtextWrapper=r}(Ye||(Ye={}));var Ze=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this,n=TDB.watcherTag(17323653,i,null,i.pullquoteFreArgs),o=new TDB.NewSubTemplateInstructionVE(i,n);o.addResource(n),this.addChild(o,e,t),this.addChild(new $e.CisListItem(i),e,t),this.addChild(new $e.CshouldTrackPosition(i),e,t)},t}(t.TextParagraphVEBase);t.TextParagraphVE=Ze;var $e;!function(e){var t=function(t){function i(e){var i=this,n=TDB.watcherTag(4519824,e,null,e.isListItemArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i,n){var o=this._context;switch(t){case!0:this.addChild(new e.CParagraph(o),i,n);break;case!1:this.addChild(new e.CParagraph1(o),i,n)}},i}(TDB.SwitchInstructionVE);e.CisListItem=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("li");this.domElement=n,n._context=i,this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.ParagraphAttrArgs),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.ParagraphStyleArgs),this._PropsBinding=new o.Props.Binding(n,e,i,this,i.ParagraphPropsArgs);var r=TDB.watcherTag(17323652,i,null,i.runChildrenArgs),a=new TDB.KeyedNewForeachInstructionVE(i,r);a.addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._StyleBinding.update(e),this._PropsBinding.update(e)},t}(TDB.ViewElement);e.CParagraph=i;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("p");this.domElement=n,n._context=i,this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.ParagraphAttrArgs),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.ParagraphStyleArgs),this._PropsBinding=new o.Props.Binding(n,e,i,this,i.ParagraphPropsArgs);var r=TDB.watcherTag(17323652,i,null,i.runChildrenArgs),a=new TDB.KeyedNewForeachInstructionVE(i,r);a.addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._StyleBinding.update(e),this._PropsBinding.update(e)},t}(TDB.ViewElement);e.CParagraph1=r;var a=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.shouldTrackPositionArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CpositionTracker(n),t,i)},i}(TDB.IfInstructionVE);e.CshouldTrackPosition=a;var s=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,o=document.createElement("div");this.domElement=o,o._context=i,o.className="positionTracker",this._InViewportWatcherBinding=new n.InViewportWatcher.Binding(o,e,i,this,i.positionTrackerInViewportWatcherInitArgs()),this._addToDom(e,t)},t.prototype.disposeBindings=function(){this._InViewportWatcherBinding.dispose()},t}(TDB.ViewElement);e.CpositionTracker=s}($e||($e={}));var Je=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Qe.CPositionDiv(i),e,t)},t}(t.AudioWithCCLayoutVEBase);t.AudioWithCCLayoutVE=Je;var Qe;!function(e){var t=function(t){function n(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(n,t),n.prototype._create=function(t,n){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,this._PropsBinding=new o.Props.Binding(a,t,r,this,r.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(a,t,r,this,r.PositionDivStyleArgs),this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.PositionDivAttrArgs),this._AnimatableBinding=new i.Animatable.Binding(a,t,r,this,r.PositionDivAnimatableInitArgs()),this._BoxShadowBinding=new i.BoxShadow.Binding(a,t,r,this,r.PositionDivBoxShadowArgs),this._FocusableBinding=r.focusableBinding=new o.Focusable.Binding(a,t,r,this,r.FocusableInitArgs());this.addChild(new e.CPlayerPositionDiv(r),a,null),this._addToDom(t,n)},n.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._AttrBinding.update(e),this._BoxShadowBinding.update(e),this._FocusableBinding.update(e)},n.prototype.disposeBindings=function(){this._AnimatableBinding.dispose(),this._FocusableBinding.dispose(),this._context.focusableBinding=void 0},n}(TDB.ViewElement);e.CPositionDiv=t;var n=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,this._StyleBinding=new o.Style.Binding(r,t,n,this,n.PlayerPositionDivStyleArgs);this.addChild(new e.CifAudioNotPlaying(n),r,null);var a=TDB.watcherTag(17323653,n,null,n.AudioArgs),s=new TDB.NewSubTemplateInstructionVE(n,a);s.addResource(a),this.addChild(s,r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e)},i}(TDB.ViewElement);e.CPlayerPositionDiv=n;var r=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.ifAudioNotPlayingArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.C1(n),t,i)},i}(TDB.IfInstructionVE);e.CifAudioNotPlaying=r;var a=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="AudioWithCCLayoutOverlay";var r=n.ClosedCaptionIconArgs();r&&this.addChild(r.build(n),o,null),this.addChild(new e.CAudioWaveform(n),o,null),(r=n.PlayButtonArgs())&&this.addChild(r.build(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=a;var s=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("img");this.domElement=n,n._context=i,n.className="AudioWaveform",this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.AudioWaveformAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.CAudioWaveform=s}(Qe||(Qe={}));var et=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new tt.ClistType(i),e,t)},t}(t.TextListVEBase);t.TextListVE=et;var tt;!function(t){var i=function(i){function n(e){var t=this,n=TDB.watcherTag(4519824,e,null,e.listTypeArgs);return(t=i.call(this,n)||this).addResource(n),t._context=e,t}return __extends(n,i),n.prototype.buildChildren=function(i,n,o){var r=this._context;switch(i){case e.Model.RM.ListStyle.Bulleted:this.addChild(new t.CList(r),n,o);break;case e.Model.RM.ListStyle.Numbered:this.addChild(new t.CList1(r),n,o);break;case e.Model.RM.ListStyle.Flat:var a=TDB.watcherTag(17323652,r,null,r.sectionChildrenArgs),s=new TDB.KeyedNewForeachInstructionVE(r,a);s.addResource(a),this.addChild(s,n,o)}},n}(TDB.SwitchInstructionVE);t.ClistType=i;var n=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("ul");this.domElement=n,n._context=i,this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.ListAttrArgs),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.ListStyleArgs);var r=TDB.watcherTag(17323652,i,null,i.sectionChildrenArgs),a=new TDB.KeyedNewForeachInstructionVE(i,r);a.addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._StyleBinding.update(e)},t}(TDB.ViewElement);t.CList=n;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("ol");this.domElement=n,n._context=i,this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.ListAttrArgs),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.ListStyleArgs);var r=TDB.watcherTag(17323652,i,null,i.sectionChildrenArgs),a=new TDB.KeyedNewForeachInstructionVE(i,r);a.addResource(r),this.addChild(a,n,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._StyleBinding.update(e)},t}(TDB.ViewElement);t.CList1=r}(tt||(tt={}));var it=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new nt.CPositionDiv(i),e,t)},t}(t.DecorationLayoutVEBase);t.DecorationLayoutVE=it;var nt;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,this._PropsBinding=new o.Props.Binding(a,e,r,this,r.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(a,e,r,this,r.PositionDivStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(a,e,r,this,r.PositionDivAnimatableInitArgs()),this._BoxShadowBinding=new i.BoxShadow.Binding(a,e,r,this,r.PositionDivBoxShadowArgs),this._AttrBinding=new o.Attr.Binding(a,e,r,this,r.PositionDivAttrArgs),this._FadeVisibleBinding=new n.FadeVisible.Binding(a,e,r,this,r.PositionDivFadeVisibleInitArgs(),r.PositionDivFadeVisibleArgs);var s=r.backgroundArgs();s&&this.addChild(s.build(r),a,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._BoxShadowBinding.update(e),this._AttrBinding.update(e),this._FadeVisibleBinding.update(e)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose(),this._FadeVisibleBinding.dispose()},t}(TDB.ViewElement);e.CPositionDiv=t}(nt||(nt={}));var ot=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new rt.CPositionDiv(i),e,t)},t}(t.StatusUpdateLayoutVEBase);t.StatusUpdateLayoutVE=ot;var rt;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,this._PropsBinding=new o.Props.Binding(r,e,n,this,n.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(r,e,n,this,n.PositionDivStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(r,e,n,this,n.PositionDivAnimatableInitArgs()),this._BoxShadowBinding=new i.BoxShadow.Binding(r,e,n,this,n.PositionDivBoxShadowArgs),this._AttrBinding=new o.Attr.Binding(r,e,n,this,n.PositionDivAttrArgs);var a=TDB.watcherTag(17323653,n,null,n.contentArgs),s=new TDB.NewSubTemplateInstructionVE(n,a,"_tweetVE");s.addResource(a),this.addChild(s,r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._BoxShadowBinding.update(e),this._AttrBinding.update(e)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);e.CPositionDiv=t}(rt||(rt={}));var at=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new st.Ctweet(i),e,t)},t}(t.TweetVEBase);t.TweetVE=at;var st;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("iframe");this.domElement=n,n._context=i,n.className="tweet",n.setAttribute("frameborder","0"),n.setAttribute("scrolling","no"),n.setAttribute("allowtransparency","true"),n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-popups"),this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.tweetAttrArgs),this._StyleBinding=new o.Style.Binding(n,e,i,this,i.tweetStyleArgs),this._PropsBinding=new o.Props.Binding(n,e,i,this,i.tweetPropsArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._StyleBinding.update(e),this._PropsBinding.update(e)},t}(TDB.ViewElement);e.Ctweet=t}(st||(st={}));var lt=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._subscribeToWatchable(n._setFadeTimerWatcher=TDB.watcherTag(5796370,n,n,n.setFadeTimer),TDB.UpdatePhase.ReadWrite),n}return __extends(t,e),t.prototype._create=function(e,t){var i=this;TDB.perfMeasurement("ConsumptionAppBarVE_create",function(){var n=i;i.addChild(new ut.CappbarPlaceholder(n),e,t),i.receivePhaseNotification(TDB.UpdatePhase.ReadWrite)})},t.prototype.onUpdate=function(e){e===TDB.UpdatePhase.ReadWrite&&this._setFadeTimerWatcher.resolve()},t}(t.ConsumptionAppBarVEBase);t.ConsumptionAppBarVE=lt;var ut;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,a.setAttribute("role","banner"),this._EventsBinding=new o.Events.Binding(a,t,r,this,r.appbarPlaceholderEventsInitArgs()),this._StyleBinding=new o.Style.Binding(a,t,r,this,r.appbarPlaceholderStyleArgs),this._ClassNameBinding=new n.ClassName.Binding(a,t,r,this,r.appbarPlaceholderClassNameArgs),this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.appbarPlaceholderAttrArgs);this.addChild(new e.Cwrapper(r),a,null),this.addChild(new e.CifSearchVisible(r),a,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._StyleBinding.update(e),this._ClassNameBinding.update(e),this._AttrBinding.update(e)},i.prototype.disposeBindings=function(){this._EventsBinding.dispose()},i}(TDB.ViewElement);e.CappbarPlaceholder=t;var i=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,a.className="appBarCollapsableContainer",this._FadeVisibleBinding=new n.FadeVisible.Binding(a,t,r,this,r.wrapperFadeVisibleInitArgs(),r.wrapperFadeVisibleArgs),this._StyleBinding=new o.Style.Binding(a,t,r,this,r.wrapperStyleArgs);this.addChild(new e.C1(r),a,null);var s=r.socialFlyoutArgs();s&&this.addChild(new TDB.NewSubTemplateInstructionVE(r,TDB.immutableWatchable(s),"socialFlyout"),a,null),(s=r.overflowMenuArgs())&&this.addChild(new TDB.NewSubTemplateInstructionVE(r,TDB.immutableWatchable(s),"overflowMenu"),a,null),(s=r.consumptionSettingsMenuArgs())&&this.addChild(new TDB.NewSubTemplateInstructionVE(r,TDB.immutableWatchable(s),"consumptionSettingsMenu"),a,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._FadeVisibleBinding.update(e),this._StyleBinding.update(e)},i.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose()},i}(TDB.ViewElement);e.Cwrapper=i;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="appBarButtonGroups";this.addChild(new TDB.NewForeachInstructionVE(i,TDB.immutableWatchable(i.buttonGroupsArgs()),"buttonGroups"),n,null),this._addToDom(e,t)},t}(TDB.ViewElement);e.C1=r;var a=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.ifSearchVisibleArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.C2(n),t,i)},i}(TDB.IfInstructionVE);e.CifSearchVisible=a;var s=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="consumptionSearchContainer";var o=i.contentSearchArgs();o&&this.addChild(new TDB.NewSubTemplateInstructionVE(i,TDB.immutableWatchable(o),"contentSearch"),n,null),this._addToDom(e,t)},t}(TDB.ViewElement);e.C2=s}(ut||(ut={}));var dt=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new ct.C1(i),e,t)},t}(t.ConsumptionAutoplaySettingsVEBase);t.ConsumptionAutoplaySettingsVE=dt;var ct;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="consumptionAutoplaySettingsWrapper";this.addChild(new e.CautoplaySettingsHeading(n),o,null);var r=n.autoplaySettingsCommonArgs();r&&this.addChild(new TDB.NewSubTemplateInstructionVE(n,TDB.immutableWatchable(r),"consumptionAutoPlaySettingsCommon"),o,null),(r=n.autoplayStartArgs())&&this.addChild(new TDB.NewSubTemplateInstructionVE(n,TDB.immutableWatchable(r),"autoPlayStartButton"),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("h1");this.domElement=n,n._context=i,n.className="consumptionAutoplaySettingsHeading",this._TextBinding=new o.Text.Binding(n,e,i,this,i.autoplaySettingsHeadingTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.CautoplaySettingsHeading=i}(ct||(ct={}));var pt=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new gt.C1(i),e,t)},t}(t.ConsumptionWorldSwitchSettingsVEBase);t.ConsumptionWorldSwitchSettingsVE=pt;var gt;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="consumptionWorldSwitchSettingsWrapper";this.addChild(new e.CconsumptionWorldSwitchHeading(n),o,null),this.addChild(new e.CitemsWrapper(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,r=document.createElement("h1");this.domElement=r,r._context=i,this._ClassNameBinding=new n.ClassName.Binding(r,e,i,this,i.consumptionWorldSwitchHeadingClassNameArgs),this._TextBinding=new o.Text.Binding(r,e,i,this,i.consumptionWorldSwitchHeadingTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._ClassNameBinding.update(e),this._TextBinding.update(e)},t}(TDB.ViewElement);e.CconsumptionWorldSwitchHeading=i;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,r=document.createElement("div");this.domElement=r,r._context=i,r.setAttribute("role","radiogroup"),this._AttrBinding=new o.Attr.Binding(r,e,i,this,i.itemsWrapperAttrArgs),this._ClassNameBinding=new n.ClassName.Binding(r,e,i,this,i.itemsWrapperClassNameArgs);var a=i.consumptionWorldSwitchItemsArgs();a&&this.addChild(new TDB.NewSubTemplateInstructionVE(i,TDB.immutableWatchable(a),"consumptionWorldSwitchItems"),r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._ClassNameBinding.update(e)},t}(TDB.ViewElement);e.CitemsWrapper=r}(gt||(gt={}));var ht=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new yt.Cwrapper(i),e,t)},t}(t.ConsumptionSettingsMenuVEBase);t.ConsumptionSettingsMenuVE=ht;var yt;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var r=this._context,a=document.createElement("div");this.domElement=a,a._context=r,a.className="consumptionSettingsMenu",this._AttrBinding=new o.Attr.Binding(a,t,r,this,r.wrapperAttrArgs),this._SlideVisibleBinding=new n.SlideVisible.Binding(a,t,r,this,r.wrapperSlideVisibleInitArgs(),r.wrapperSlideVisibleArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite);this.addChild(new e.CautoplaySettingsVisible(r),a,null),this.addChild(new e.CautoPlayWorldSwitchDividerVisible(r),a,null),this.addChild(new e.CworldSwitchSettingsEnabled(r),a,null),this.addChild(new e.CanimationSwitchDividerVisible(r),a,null),this.addChild(new e.CanimationSwitchEnabled(r),a,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._AttrBinding.update(e),this._SlideVisibleBinding.update(e)},i}(TDB.ViewElement);e.Cwrapper=t;var i=function(e){function t(t){var i=this,n=TDB.watcherTag(4543754,t,null,t.autoplaySettingsVisibleArgs);return(i=e.call(this,n)||this).addResource(n),i._context=t,i}return __extends(t,e),t.prototype.buildChildren=function(e,t){var i=this._context,n=i.autoplaySettingsArgs();n&&this.addChild(new TDB.NewSubTemplateInstructionVE(i,TDB.immutableWatchable(n),"consumptionAutoPlaySettings"),e,t)},t}(TDB.IfInstructionVE);e.CautoplaySettingsVisible=i;var r=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.autoPlayWorldSwitchDividerVisibleArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.C1(n),t,i)},i}(TDB.IfInstructionVE);e.CautoPlayWorldSwitchDividerVisible=r;var a=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="consumptionSettingsDivider",this._addToDom(e,t)},t}(TDB.ViewElement);e.C1=a;var s=function(e){function t(t){var i=this,n=TDB.watcherTag(4543754,t,null,t.worldSwitchSettingsEnabledArgs);return(i=e.call(this,n)||this).addResource(n),i._context=t,i}return __extends(t,e),t.prototype.buildChildren=function(e,t){var i=this._context,n=i.worldSwitchSettingsArgs();n&&this.addChild(new TDB.NewSubTemplateInstructionVE(i,TDB.immutableWatchable(n),"consumptionWorldSwitchSettings"),e,t)},t}(TDB.IfInstructionVE);e.CworldSwitchSettingsEnabled=s;var l=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.animationSwitchDividerVisibleArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.C1(n),t,i)},i}(TDB.IfInstructionVE);e.CanimationSwitchDividerVisible=l;var u=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.animationSwitchEnabledArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.C3(n),t,i)},i}(TDB.IfInstructionVE);e.CanimationSwitchEnabled=u;var d=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="animationSwitchWrapper";this.addChild(new e.CanimationSwitchLabel(n),o,null),this.addChild(new e.C4(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C3=d;var c=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="animationSwitchToggleLabel",this._TextBinding=new o.Text.Binding(n,e,i,this,i.animationSwitchLabelTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.CanimationSwitchLabel=c;var p=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="animationSwitchToggleWrapper";this.addChild(new e.CanimationToggleSwitchLabel(n),o,null);var r=TDB.watcherTag(17323653,n,null,n.animationToggleSwitchArgs),a=new TDB.NewSubTemplateInstructionVE(n,r,"animationSwitch");a.addResource(r),this.addChild(a,o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C4=p;var g=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="animationSwitchToggleLabel",this._TextBinding=new o.Text.Binding(n,e,i,this,i.animationToggleSwitchLabelTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.CanimationToggleSwitchLabel=g}(yt||(yt={}));var mt=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._subscribeToWatchable(n._enterPreviewWatcher=TDB.watcherTag(5796370,n,n,n.enterPreview),TDB.UpdatePhase.ReadWrite),n}return __extends(t,e),t.prototype._create=function(e,t){var i=this,n=TDB.watcherTag(17323652,i,null,i.itemsArgs),o=new TDB.NewForeachInstructionVE(i,n);o.addResource(n),this.addChild(o,e,t),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite)},t.prototype.onUpdate=function(e){e===TDB.UpdatePhase.ReadWrite&&this._enterPreviewWatcher.resolve()},t}(t.ConsumptionWorldSwitchItemsVEBase);t.ConsumptionWorldSwitchItemsVE=mt;var ft=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new vt.CshowButtonGroup(i),e,t)},t}(t.StoryAppBarButtonGroupVEBase);t.StoryAppBarButtonGroupVE=ft;var vt;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="consumptionButtonGroup",this._EventsBinding=new o.Events.Binding(n,e,i,this,i.showButtonGroupEventsInitArgs());this.addChild(new TDB.NewForeachInstructionVE(i,TDB.immutableWatchable(i.buttonsArgs()),"buttons"),n,null),this._addToDom(e,t)},t.prototype.disposeBindings=function(){this._EventsBinding.dispose()},t}(TDB.ViewElement);e.CshowButtonGroup=t}(vt||(vt={}));var St=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new wt.CflyoutWrapper(i),e,t)},t}(t.SocialFlyoutVEBase);t.SocialFlyoutVE=St;var wt;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,r=document.createElement("div");this.domElement=r,r._context=i,r.setAttribute("role","group"),r.setAttribute("aria-labelledby","socialFlyoutHeader"),r.className="SocialFlyoutWrapper",this._FadeVisibleBinding=new n.FadeVisible.Binding(r,e,i,this,i.flyoutWrapperFadeVisibleInitArgs(),i.flyoutWrapperFadeVisibleArgs),this._StyleBinding=new o.Style.Binding(r,e,i,this,i.flyoutWrapperStyleArgs);var a=i.flyoutContentArgs();a&&this.addChild(a.build(i),r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._FadeVisibleBinding.update(e),this._StyleBinding.update(e)},t.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose()},t}(TDB.ViewElement);e.CflyoutWrapper=t}(wt||(wt={}));var Tt=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Ct.CflyoutHeader(i),e,t),this.addChild(new Ct.C1(i),e,t),this.addChild(new Ct.C2(i),e,t),this.addChild(new Ct.C3(i),e,t)},t}(t.SocialFlyoutContentVEBase);t.SocialFlyoutContentVE=Tt;var Ct;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.id="socialFlyoutHeader",n.className="NewSocialFlyoutHeader",this._TextBinding=new o.Text.Binding(n,e,i,this,i.flyoutHeaderTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.CflyoutHeader=t;var i=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,o=document.createElement("div");this.domElement=o,o._context=n,o.className="SharingLevelInfoWrapper";var r=n.sharingLevelIconArgs();r&&this.addChild(r.build(n),o,null),this.addChild(new e.CsharingLevel(n),o,null),this._addToDom(t,i)},i}(TDB.ViewElement);e.C1=i;var n=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="SharingLevelMessage",this._TextBinding=new o.Text.Binding(n,e,i,this,i.sharingLevelTextArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._TextBinding.update(e)},t}(TDB.ViewElement);e.CsharingLevel=n;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="CopyTextBoxWrapper";var o=i.copyTextBoxArgs();o&&this.addChild(o.build(i),n,null),(o=i.copyTextButtonArgs())&&this.addChild(o.build(i),n,null),this._addToDom(e,t)},t}(TDB.ViewElement);e.C2=r;var a=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="ShareButtonsConsumptionWrapper";var o=TDB.watcherTag(17323652,i,null,i.buttonGroupsNewContentArgs),r=new TDB.NewForeachInstructionVE(i,o);r.addResource(o),this.addChild(r,n,null),this._addToDom(e,t)},t}(TDB.ViewElement);e.C3=a}(Ct||(Ct={}));var _t=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new bt.Cwrapper(i),e,t)},t}(t.SocialFrameVEBase);t.SocialFrameVE=_t;var bt;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="SocialFrameWrapper",this._PositionBinding=i.wrapperPositionBinding=new o.Position.Binding(n,e,i,this);var r=i.contentArgs();r&&this.addChild(r.build(i),n,null),this._addToDom(e,t)},t.prototype.disposeBindings=function(){this._context.wrapperPositionBinding=void 0},t}(TDB.ViewElement);e.Cwrapper=t}(bt||(bt={}));var At=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Pt.CPositionDiv(i),e,t)},t}(t.AudioLayoutVEBase);t.AudioLayoutVE=At;var Pt;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,this._PropsBinding=new o.Props.Binding(r,e,n,this,n.PositionDivPropsArgs),this._StyleBinding=new o.Style.Binding(r,e,n,this,n.PositionDivStyleArgs),this._AnimatableBinding=new i.Animatable.Binding(r,e,n,this,n.PositionDivAnimatableInitArgs()),this._BoxShadowBinding=new i.BoxShadow.Binding(r,e,n,this,n.PositionDivBoxShadowArgs),this._AttrBinding=new o.Attr.Binding(r,e,n,this,n.PositionDivAttrArgs);var a=TDB.watcherTag(17323653,n,null,n.playerControlsArgs),s=new TDB.NewSubTemplateInstructionVE(n,a,"playerControls");s.addResource(a),this.addChild(s,r,null),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._PropsBinding.update(e),this._StyleBinding.update(e),this._BoxShadowBinding.update(e),this._AttrBinding.update(e)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);e.CPositionDiv=t}(Pt||(Pt={}));var It=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Et.ChtmlBrowserPlayer(i),e,t)},t}(t.BrowserAudioPlayerVEBase);t.BrowserAudioPlayerVE=It;var Et;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("audio");this.domElement=n,n._context=i,n.className="AudioLayoutPlayer",this._AudioBinding=new o.Audio.Binding(n,e,i,this,i.htmlBrowserPlayerAudioInitArgs(),i.htmlBrowserPlayerAudioSourceArgs,i.htmlBrowserPlayerAudioVolumeArgs,i.htmlBrowserPlayerAudioPositionArgs,i.htmlBrowserPlayerAudioPlayingArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AudioBinding.update(e)},t}(TDB.ViewElement);e.ChtmlBrowserPlayer=t}(Et||(Et={}));var Dt=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Bt.CPlayerWrapper(i),e,t)},t}(t.AzureAudioPlayerVEBase);t.AzureAudioPlayerVE=Dt;var Bt;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,r.setAttribute("aria-hidden","true"),this._CssBinding=new o.Css.Binding(r,t,n,this,n.PlayerWrapperCssArgs),this.receivePhaseNotification(TDB.UpdatePhase.ReadWrite);this.addChild(new e.C1(n),r,null),this._addToDom(t,i)},i.prototype.onUpdate=function(e){this._CssBinding.update(e)},i}(TDB.ViewElement);e.CPlayerWrapper=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("video");this.domElement=n,n._context=i,this._addToDom(e,t)},t}(TDB.ViewElement);e.C1=i}(Bt||(Bt={}));var Vt=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new Mt.CplayerDiv(i),e,t)},t}(t.AzureVideoPlayerVEBase);t.AzureVideoPlayerVE=Vt;var Mt;!function(e){var t=function(t){function i(e){var i=t.call(this,null)||this;return i._context=e,i}return __extends(i,t),i.prototype._create=function(t,i){var n=this._context,r=document.createElement("div");this.domElement=r,r._context=n,this._EventsBinding=new o.Events.Binding(r,t,n,this,n.playerDivEventsInitArgs());this.addChild(new e.CvideoPlayer(n),r,null),this.addChild(new e.CpreventClickEvents(n),r,null),this._addToDom(t,i)},i.prototype.disposeBindings=function(){this._EventsBinding.dispose()},i}(TDB.ViewElement);e.CplayerDiv=t;var i=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("video");this.domElement=n,n._context=i,n.setAttribute("tabindex","0"),n.className="AzureMediaPlayerPosition azuremediaplayer amp-default-skin amp-big-play-centered",this._AttrBinding=new o.Attr.Binding(n,e,i,this,i.videoPlayerAttrArgs),this._addToDom(e,t)},t.prototype.onUpdate=function(e){this._AttrBinding.update(e)},t}(TDB.ViewElement);e.CvideoPlayer=i;var n=function(t){function i(e){var i=this,n=TDB.watcherTag(4543754,e,null,e.preventClickEventsArgs);return(i=t.call(this,n)||this).addResource(n),i._context=e,i}return __extends(i,t),i.prototype.buildChildren=function(t,i){var n=this._context;this.addChild(new e.CvideoOverlay(n),t,i)},i}(TDB.IfInstructionVE);e.CpreventClickEvents=n;var r=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.className="AzureVideoPlayerOverlay",this._EventsBinding=new o.Events.Binding(n,e,i,this,i.videoOverlayEventsInitArgs()),this._addToDom(e,t)},t.prototype.disposeBindings=function(){this._EventsBinding.dispose()},t}(TDB.ViewElement);e.CvideoOverlay=r}(Mt||(Mt={}));var Lt=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype._create=function(e,t){var i=this;this.addChild(new kt.C1(i),e,t)},t}(t.PoweredBySwayWrapperVEBase);t.PoweredBySwayWrapperVE=Lt;var kt;!function(e){var t=function(e){function t(t){var i=e.call(this,null)||this;return i._context=t,i}return __extends(t,e),t.prototype._create=function(e,t){var i=this._context,n=document.createElement("div");this.domElement=n,n._context=i,n.setAttribute("role","note");var o=i.poweredByButtonArgs();o&&this.addChild(o.build(i),n,null),this._addToDom(e,t)},t}(TDB.ViewElement);e.C1=t}(kt||(kt={}))}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.View.ViewElements,n=function(e){function t(n,o){var r=e.call(this,n,o)||this;return o.embedModel.getEmbedSourceUrl()==t.errorIframe?platform.setImmediate(function(){o.onerror.call(r)}):o.embedModel.getEmbedSourceUrl()==t.neverloadingIframe?platform.setImmediate(function(){o.onerror.call(r,null,i.IframeLoadingFailureCategory.TimedOut)}):platform.setImmediate(function(){o.onload.call(r)}),r}return __extends(t,e),t.prototype.iframeEventsInitArgs=function(){return{}},t.errorIframe="error",t.neverloadingIframe="neverloading",t}(i.IframeLayoutVE);t.MockIframeLayoutVE=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i;!function(e){e[e.TriggerPlay=0]="TriggerPlay"}(i=t.LivingImageManagerActionType||(t.LivingImageManagerActionType={}));var n=function(t){function n(e){var i=t.call(this,e)||this;return i.timedelay=750,i.m_actionBuffer=[],i.maxBufferedActions=5,i}return __extends(n,t),n.prototype.getActionMap=function(){var t={};return t[e.Model.RM.ExternalAction.LivingImage_Seen]={action:this.livingImageSeen,context:this},t},n.prototype.registerPlayer=function(i,n){if(t.prototype.registerPlayer.call(this,i,n),this.m_actionBuffer){var o=this.m_actionBuffer.firstOrDefault(function(e){return e.targetId===i});o&&(e.Utilities.weblog("livingimage","Re-triggering action for newly registered target "+i),this.processAction(o),this.m_actionBuffer.removefirst(o))}},n.prototype.livingImageSeen=function(t,n){e.Utilities.weblog("livingimage","Living image id:"+t+" spotted"),this.processAction({actionType:i.TriggerPlay,targetId:t})},n.prototype.processAction=function(e){switch(e.actionType){case i.TriggerPlay:return void this.triggerPlay(e);default:StoryLog.TraceTag(596476160,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Unknown action type, {0}, from action {1}",[e.actionType,e])}},n.prototype.triggerPlay=function(t){if(e.Utilities.weblog("livingimage","Attempting to play living image player with id= "+t.targetId),this.getPlayerHandle(t.targetId)){var i=this.getPlayerHandle(t.targetId);i.preload(),e.Utilities.setTimeoutIfSpecified(this.timedelay,null,function(){i.play()})}else e.Utilities.weblog("livingimage","Can't find the living image player associated with id = "+t.targetId+"."),this.m_actionBuffer&&this.m_actionBuffer.length<this.maxBufferedActions&&this.m_actionBuffer.push(t)},n}(t.TriggerContentManagerBase);t.LivingImageManager=n}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){!function(t){var i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.triggerPlayEntered=function(){var i=e.View.ViewElements.ViewModel;if(!i.isAutoplayStarted()&&CommonSettings.ClientApp!==AppType.iOSApp)switch(i.getWorldId()){case"VerticalWorld":t.FirstRunTriggers.playEnteredFromVertical();break;case"PanoramaWorld":t.FirstRunTriggers.playEnteredFromPanorama();break;case"ExpoWorld":t.FirstRunTriggers.playEnteredFromExpo()}},n.reopeningContentPane=function(){n.contentPaneReopening=2},n.ignoreContentPaneShowHide=function(){var e=n.contentPaneReopening>0;return e&&n.contentPaneReopening--,e},n.contentPaneReopening=0,n}(t.CommonFirstRunHelper);t.StoryFirstRunHelper=i}(t.FRE||(t.FRE={}))}(t.Common||(t.Common={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function e(){}return e.LeftMouseButton=1,e.ClickEventType="click",e.MouseUpEventType="mouseup",e.MouseDownEventType="mousedown",e.DoubleClickEventType="dblclick",e.MouseWheelEventType="mousewheel",e.KeyUpEventType="keyup",e}();e.EventConstants=t;!function(e){e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e[e.Touch=2]="Touch",e[e.Timing=3]="Timing",e[e.Client=4]="Client"}(e.EventType||(e.EventType={}));!function(e){e[e.EditMode=0]="EditMode",e[e.AutoAdvanceNext=1]="AutoAdvanceNext",e[e.AutoAdvanceReset=2]="AutoAdvanceReset"}(e.ClientSignal||(e.ClientSignal={}))}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.Model.RM,o=e.AnimationInterfaces,r=e.AnimationHelper,a=function(a){function s(t,o,r){var s=a.call(this,t)||this;s.owner=t,s.data=o,s.pageId=r,s.fsmactor=TDB.watchable(s,null),s.capabilities=new Flags(n.ClientCapabilities,0),s.keyupCallbacks=[],s.currentKey=-1,s.keysDown=[],s.renderModelSchemaVersion=-1,StoryLog.BufferedTraceTag(596444816,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"InteractionEngine::Constructor start"),s.getInteractionModel=o.getInteractionModel,s.cameraMoved=o.cameraMoved,s.transitionData=TDB.watcherTag(596476170,s,s,s.getTransitionData),s.detectCapabilities();var l=s.getInteractionModel();return l&&l.renderModel&&(s.renderModelSchemaVersion=l.renderModel.getSchemaVersion(),s.renderModelSchemaVersion>=96&&l.renderModel.renderModelRoot.getStoryboards().getCollection().length>0&&(s.asyncAnimationGenerator=new e.StoryboardProcessing.AsyncAnimationGenerator(s,l,s.actor.bind(s)))),s.engine=new e.AnimationManager.AnimationEngine({state:s.queryStateVariable.bind(s)},s,s.capabilities,function(){return s.transitionData.getValue()},o.externalActionMap,s.renderModelSchemaVersion),StoryLog.BufferedTraceTag(596444817,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"InteractionEngine::Constructor Setting Animation Engine"),e.AnimationManager.currentAnimationEngine().set(r,s.engine),s.clientState=new i.ClientState,s.clientState.editMode=s.data.editMode,s.clientState.isNavigating=!1,s.clientState.accessibilityMode=s.data.isAnimationsDisabled,s.triggerManager=new i.TriggerManager(s,s.handleTimeout.bind(s)),StoryLog.BufferedTraceTag(596444818,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"InteractionEngine::Constructor end"),s}return __extends(s,a),s.prototype.getHydrateAnimationFunction=function(){var e=this;return this.asyncAnimationGenerator?function(t){return e.asyncAnimationGenerator.getStoryboardProcessor().hydrateAnimationSequence(t)}:null},s.prototype.clientCapabilities=function(){return this.capabilities},s.prototype.isRtl=function(e){return this.data.getInteractionModel(e).renderModel.renderModelRoot.getRTL(e)},s.prototype.getTriggerManager=function(){return this.triggerManager},s.prototype.fireNavigationAction=function(e){var t,o=this.getRootKeyframe().getScrollability();switch(e){case i.NavigationButtonType.Forward:t=o===n.LayoutScrollability.Vertical?KeyCodeType.DownArrowKey:KeyCodeType.RightArrowKey;break;case i.NavigationButtonType.Backward:t=o===n.LayoutScrollability.Vertical?KeyCodeType.UpArrowKey:KeyCodeType.LeftArrowKey;break;case i.NavigationButtonType.Home:t=KeyCodeType.HomeKey}if(void 0!==t){var r={which:t};this.handleKey(r,void 0),this.handleKeyUp(r,!0)}},s.prototype.detectCapabilities=function(){this.capabilities.reset(),Modernizr.dynamicscrollevents&&this.capabilities.set(n.ClientCapabilities.VisibilityDetection)},s.prototype.scrollchecker=function(){var e=this.data.scrollable.getValue();return e?e.getScrollChecker():null},s.prototype.onTransitionCompleted=function(e){this.asyncAnimationGenerator&&this.asyncAnimationGenerator.generateNextAnimations(e)},s.prototype.viewModeChanged=function(e){var n=e===StoryViewMode.Edit;if(this.clientState.editMode=n,!n){var o=this.data.scrollable.getValue();o&&(o.setScroll(t.ScrollDirection.HORIZONTAL,0),o.setScroll(t.ScrollDirection.VERTICAL,0))}this.handleClientSignal({signal:i.ClientSignal.EditMode,editMode:n})},s.prototype.handleClientSignal=function(e){return this.defaultEventHandler({eventType:i.EventType.Client,inputEvent:e})},s.prototype.handleKey=function(e,t){this.currentKey=e.which;var n=this.simulateClick(e);return n===TDB.EventPropagation.Bubble&&(n=this.defaultEventHandler({eventType:i.EventType.Keyboard,inputEvent:e,focusedElement:t})),this.currentKey=-1,ArrayExtensions.contains(this.keysDown,e.which)||this.keysDown.push(e.which),n},s.prototype.handleKeyUp=function(e,t){return this.keyupCallbacks=this.keyupCallbacks.filter(function(t){return t.which!==e.which||(t.fn(),!1)}),this.keysDown.removefirst(e.which),t?TDB.EventPropagation.Bubble:this.defaultEventHandler({eventType:i.EventType.Keyboard,inputEvent:e})},s.prototype.handleMouseWheel=function(e){return this.defaultEventHandler({eventType:i.EventType.Mouse,inputEvent:e})},s.prototype.handleMouse=function(e){return this.defaultEventHandler({eventType:i.EventType.Mouse,inputEvent:e})},s.prototype.handleSwipe=function(e){return this.defaultEventHandler({eventType:i.EventType.Touch,inputEvent:e})},s.prototype.handleTap=function(e){if(this.data.allowTouch())return TDB.EventPropagation.Bypass;var t=$.Event("click",{type:"click",which:1,target:e.target});return this.defaultEventHandler({eventType:i.EventType.Mouse,inputEvent:t})},s.prototype.handleDoubleTap=function(e){var t=$.Event("dblclick",{type:"dblclick",which:1,target:e.target});return this.defaultEventHandler({eventType:i.EventType.Mouse,inputEvent:t})},s.prototype.handleTimeout=function(e){var t=this,n={eventType:i.EventType.Timing,inputEvent:e};this.triggerManager.killDelayTimer(n),r.log(r.AnimationLogLabels.timer,function(){return"timeout callback invoked for triggerset: "+e.triggerSet.id});var o=this.defaultEventHandler(n);if(e.quickTrigger&&o===TDB.EventPropagation.Bubble)r.log(r.AnimationLogLabels.timer,function(){return"scheduling quick trigger retry for triggerset: "+e.triggerSet.id}),platform.setTimeout(function(){return t.triggerManager.startDelayTimers(!0,e.triggerSet)},i.TriggerManager.quickTriggerRetryDelay);else{var a=this.actor();a&&a.findCurrentNode()||this.triggerManager.startDelayTimers(!1,e.triggerSet)}return o},s.prototype.queryStateVariable=function(e,t){if(!this.actor())return 0;switch(t){case"scroll_x":return this.scrollchecker().fetchStateScroll(e)[0];case"scroll_y":return this.scrollchecker().fetchStateScroll(e)[1];default:return 0}},s.prototype.getClientState=function(){return this.clientState},s.prototype.getAnimationEngine=function(){return this.engine},s.prototype.actor=function(e){var t=this.actorHandle(e);return t?t.get():null},s.prototype.actorHandle=function(e){return this.fsmactor?this.fsmactor.getWatchedValue(e):null},s.prototype.setActor=function(e){var t=this.fsmactor,n=t.getValue();n&&n.get()&&n.get().dispose(),this.fsmactor=TDB.watchableTag(596476171,this,new i.Handle(e)),e&&(this.triggerManager.startDelayTimers(!0),this.asyncAnimationGenerator&&this.asyncAnimationGenerator.refresh(this.getInteractionModel())),TDB.applyUpdate(function(){return t.notify()},TDB.Justification.InitialConversion)},s.prototype.addEdgeToSequence=function(e,t,n,o,r){var a=this;n&&(e.run(function(e){o&&o.visitedEdgeIds.some(function(e){return e===n.id})||e&&e.get()&&(e.get().followEdge(n,o&&o.exitAnimationSequences),o&&(o.exitAnimationSequences=void 0))},t),r?e.waitfor(function(){return!a.actor()||(a.getAnimationEngine().forceTick(i.NavigationHelper.animationClockAdvanceAmount),null!==a.actor().findCurrentNode())},0):this.waitForExecutingAnimations(e),e.run(function(){a.actor()&&a.cameraMoved(a.getAnimationEngine().cameraTransform(),!0)}))},s.prototype.forceLowFiMode=function(){e.AnimationManager.forcedToLowFi.getValue()||(StoryLog.StructuredActivityTag(596476172,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"FallbackToLowEndMode","The user is experiencing performance issues and would have been switched to low end mode",StoryPageSettings.StoryId,{UserAgent:navigator.userAgent,ClientDevice:CommonSettings.ClientDevice}),TDB.applyUpdate(function(){return e.AnimationManager.forcedToLowFi.setValue(!0)}),e.AnimationManager.LowFi.getValue()&&i.NotificationBarViewModel.getNotificationBar(i.ViewModel.getViewElement()).addNotification({messages:[{text:Resources.LowEndModeEnabledBrowserMessage}],notificationSource:i.NotificationSource.InteractionEngineLowEndMode,notificationType:i.NotificationType.Info},!1))},s.prototype.getTransitionData=function(e){var t=this.getInteractionModel(e);return{transitions:t?t.getTransitions(e).getCollection():[],containers:t?t.getAnimationContainers(e).getCollection():[],effects:t?t.getAnimationEffects(e).getCollection():[]}},s.prototype.defaultEventHandler=function(e){var t=TDB.EventPropagation.Bubble;if(this.disposed)return TDB.EventPropagation.Bypass;this.engine.checkDisposableAnimations();var i=this.triggerManager.mapEventToTriggerSets(e);return i&&i.length&&this.handleTrigger(i)&&(e.inputEvent.preventDefault&&e.inputEvent.preventDefault(),t=TDB.EventPropagation.Bypass),t},s.prototype.waitForExecutingAnimations=function(e){var t=this;e&&e.waitfor(function(){return!t.actor()||null!==t.actor().findCurrentNode()},500)},s.prototype.handleTrigger=function(e){if(this.clientState.runAnimationsInstantly=!1,!e||0===e.length)return StoryLog.TraceTag(596476173,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,"null passed to handleTrigger",null),!1;var t=this.actor();if(!t)return!1;var i,o=!1,a=[];for(i=0;i<e.length;i++){if(r.log(r.AnimationLogLabels.trigger,function(){return"attempting triggerset: "+e[i].modelTriggerSet.id+" "+e[i].modelTriggerSet.getName()}),this.data.embedHostMode&&e[i].modelTriggerSet.getBehaviors().has(n.TriggerSetBehaviors.DisabledWhenEmbedHostMode))return!1;if(this.triggerManager.isTimingTriggerSet(e[i].modelTriggerSet)||t.setFastForwardState(!1),t.followEdgesForTriggerSet(e[i].modelTriggerSet)){if(this.asyncAnimationGenerator&&this.asyncAnimationGenerator.abortAnimationGeneration(),this.triggerManager.startDelayTimers(!1),r.log(r.AnimationLogLabels.trigger,function(){return"processed triggerset: "+e[i].modelTriggerSet.id+" "+e[i].modelTriggerSet.getName()}),e[i].modelTriggerSet.getAlwaysTryDefaultAction())break;return!0}if(t.findCurrentNode())!o&&this.triggerManager.isAutoAdvanceTriggerSet(e[i].modelTriggerSet)&&a.push(e[i]);else if(r.log(r.AnimationLogLabels.trigger,function(){return"triggerset ignored due to busy actor tree."}),this.tryFastForward(t,e[i].modelTriggerSet)){o=!0;break}}if(!o)for(var s=0,l=a;s<l.length;s++){var u=l[s];if(this.tryAutoAdvanceTrigger(u))return!0}for(i=0;i<e.length;i++)if(this.tryDefaultAction(t,e[i]))return!0;return o},s.prototype.tryFastForward=function(e,t){return!this.triggerManager.isTimingTriggerSet(t)&&(!(!t.getBehaviors().has(n.TriggerSetBehaviors.IsDefaultNavigationTriggerSet)&&!e.getNextTriggerSetInfo().some(function(e){return e.triggerSetId===t.id}))&&(this.actor().setFastForwardState(!0),this.engine.fastForward(),!0))},s.prototype.tryAutoAdvanceTrigger=function(t){var i=this.getRootKeyframe().getScrollability();if(i===n.LayoutScrollability.None)return!1;var o=this.getScrollVisibleValues(),r=i===n.LayoutScrollability.Horizontal?e.AnimationManager.Interrogation.scroll_x:e.AnimationManager.Interrogation.scroll_y;if(o.maxScrollReached[0]||o.maxScrollReached[1]){if(this.triggerManager.isAutoAdvanceTriggerSet(t.modelTriggerSet,!0))return this.setInterrogable(r,0,!1),!0}else if(this.triggerManager.isAutoAdvanceTriggerSet(t.modelTriggerSet,!1)){var a={};return a.Direction="forward",this.snapInterrogable(this.actor(),r,a),!0}return!1},s.prototype.tryDefaultAction=function(e,t){var i=this;if(-1===t.firedTriggerIndex)return!1;var n=t.modelTriggerSet.triggers.getCollection();if(t.firedTriggerIndex>=n.length)return!1;var o=n[t.firedTriggerIndex].defaultActions.getCollection();return!!o.length&&(o.forEach(function(n){return i.applyDefaultAction(e,n,t)},this),!0)},s.prototype.getTargetForTrigger=function(e){for(var t=0,i=e.selectMethods.getCollection();t<i.length;t++){var n=i[t];if(n.getTargetId())return n.getTargetId()}},s.prototype.applyDefaultAction=function(i,r,a){if(!i.hasModalChild()){var s=ArrayExtensions.toDictionary(r.parameters.getCollection(),function(e,t){t[e.getParameterName()]=e.getParameterValue()}),l=r.getAction(),u=e.AnimationManager.Interrogation[s.Interrogable];switch(l){case n.DefaultTriggerAction.OffSetInterrogable:case n.DefaultTriggerAction.SetInterrogable:var d=parseInt(s.InterrogableValue);this.setInterrogable(u,d,l==n.DefaultTriggerAction.OffSetInterrogable);break;case n.DefaultTriggerAction.SnapInterrogable:this.snapInterrogable(i,u,s);break;case n.DefaultTriggerAction.MoveToEnd:if(u===e.AnimationManager.Interrogation.scroll_x||u===e.AnimationManager.Interrogation.scroll_y){var c=u===e.AnimationManager.Interrogation.scroll_x?t.ScrollDirection.HORIZONTAL:t.ScrollDirection.VERTICAL,p=this.getRootKeyframe(),g=c===t.ScrollDirection.HORIZONTAL?p.getScrollWidth():p.getScrollHeight();this.data.scrollable.getValue().setScroll(c,g)}break;case n.DefaultTriggerAction.ExternalAction:var h=s[e.AnimationHelper.actionTypeParameterName];h||TDB.raiseRecoverableError("External action default actions must specify an action type");var y=a.modelTriggerSet.triggers.getCollection()[a.firedTriggerIndex],m=this.getTargetForTrigger(y),f=r.parameters.getCollection();f.addunique(new o.AnimationParameter(e.AnimationHelper.contentIdParameterName,a.contentId));var v=EnumParser.getValueFromString(h,n.ExternalAction);this.engine.executeExternalAction(v,m,f)}}},s.prototype.setInterrogable=function(i,n,o){if(i===e.AnimationManager.Interrogation.scroll_x||i===e.AnimationManager.Interrogation.scroll_y){var r=i===e.AnimationManager.Interrogation.scroll_x?t.ScrollDirection.HORIZONTAL:t.ScrollDirection.VERTICAL,a=this.data.scrollable.getValue();o?a.offsetScroll(r,n):a.setScroll(r,n)}else o&&(n+=this.engine.interrogations().getValue(i)),this.engine.interrogations().setValue(i,n)},s.prototype.snapInterrogable=function(i,n,o){var r=this,a=o.Direction,s=n===e.AnimationManager.Interrogation.scroll_x,l=this.engine.interrogations(),u=s?e.AnimationManager.Interrogation.visiblescroll_x:e.AnimationManager.Interrogation.visiblescroll_y,d=l.getValue(u),c=this.data.scrollable.getValue(),p=s?t.ScrollDirection.HORIZONTAL:t.ScrollDirection.VERTICAL;if(this.getRootKeyframe().getScrollability()===t.ScrollDirection.toLayoutScrollability(p))if(ArrayExtensions.contains(this.keysDown,this.currentKey)){switch(a.toLowerCase()){case"forward":c.animateOffset(p,d);break;case"backward":c.animateOffset(p,-d);break;default:throw e.RethrowLogger.createError("unknown direction "+a)}this.keyupCallbacks.some(function(e){return e.which===r.currentKey})||this.keyupCallbacks.push({which:this.currentKey,fn:function(){return r.snapInterrogable(i,n,o)}})}else switch(a.toLowerCase()){case"forward":c.scrollForwardToSnapPoint(d,p);break;case"backward":c.scrollBackwardToSnapPoint(d,p);break;default:throw e.RethrowLogger.createError("unknown direction "+a)}},s.prototype.simulateClick=function(t){var n=TDB.EventPropagation.Bubble,o=t.srcElement||t.target;if((t.keyCode===KeyCodeType.EnterKey||t.keyCode===KeyCodeType.SpaceKey)&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&!t.metaKey&&o===e.Utilities.getDocumentActiveElement()&&$(o).hasClass(i.LayoutVE.FocusableClass)){var r=document.createEvent("MouseEvents"),a=document.createEvent("MouseEvents");return r.initMouseEvent("click",t.bubbles,t.cancelable,window,-1,-1,-1,-1,-1,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),a.initMouseEvent("dblclick",t.bubbles,t.cancelable,window,-1,-1,-1,-1,-1,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),o.dispatchEvent(r),o.dispatchEvent(a),TDB.EventPropagation.Bypass}return n},s.prototype.getScrollVisibleValues=function(){var t=this.getAnimationEngine().interrogations(),i=t.getValue(e.AnimationManager.Interrogation.visiblescroll_x),n=t.getValue(e.AnimationManager.Interrogation.visiblescroll_y),o=t.getValue(e.AnimationManager.Interrogation.scrollextent_x),r=t.getValue(e.AnimationManager.Interrogation.scrollextent_y),a=t.getValue(e.AnimationManager.Interrogation.scroll_x),s=t.getValue(e.AnimationManager.Interrogation.scroll_y),l=0===o?0:(a+i)/Math.floor(o),u=0===r?0:(s+n)/Math.floor(r);return{scrollValues:[a,s],visibleScroll:[i,n],percentScroll:[l,u],maxScrollReached:[l>=1,u>=1]}},s.prototype.getRootKeyframe=function(){return this.getInteractionModel().keyFrames.getCollection().firstOrDefault(function(e){return ArrayExtensions.contains(i.rootKeyframeTypes,e.getType())})},s.prototype.dispose=function(){var e=this.fsmactor.getValue();if(e){var t=e.get();t&&t.dispose()}this.fsmactor=null,this.triggerManager.dispose(),this.disposed=!0,this.data.scrollable=null,a.prototype.dispose.call(this)},s.prototype.resetScrollInterrogables=function(){this.engine.interrogations().setValue(e.AnimationManager.Interrogation.scroll_x,0),this.engine.interrogations().setValue(e.AnimationManager.Interrogation.scroll_y,0)},s}(Disposable);i.InteractionEngine=a}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=e.AnimationHelper,o=function(o){function s(t,i,n,r){var s=o.call(this,t)||this;return s.startnode=i,s.data=n,s.parentNodeId=r,s.inifiniteDuration="-1",s.animatingSequences=[],s.queueEdges=!1,s.immediatenode=i,s.currentnode=TDB.watchable(s,new a(i)),s.cacheImmediateNodeValues(i),s.cachecurrentNodeValues(i),s.childactors=s.data.childmap.getOrCreateChildActors(s,i),s.createAtlas(i),s.firstEnter=!0,s.initialAmbientsComplete=!0,s.startNodeId=i?i.id:void 0,s.traversalState={currentPath:null,currentKeyframeId:null,currentAmbientFunctionIds:"",edgeIds:n.edgeIds,originalNodeId:s.startNodeId,parentNodeId:r,getChildTraversalStates:function(e){return s.data.childmap.getChildActors(e).map(function(e){return e.traversalState})},lastUpdated:0},i&&(s.startNodeName=i.getName(),s.updateTraversalState(i),n.ownersMap[s.startNodeId]=s,s.startNodeKeyframeProperties=e.AnimationHelper.getKeyframeProperties(i.getKeyFrame())),s}return __extends(s,o),s.createRootActor=function(e,i){void 0===i&&(i=!1);var n={actorInitializationData:e,childmap:null,edgeIds:t.getEdgeIds(e.nodes),lookAheadTriggersets:[],fastForwarding:!1,dirtyNodes:{},traversalMode:i,ownersMap:{},cleaningDirtyActors:!1};n.childmap=new r(n);var o=new s(null,e.startnode,n,null);return n.ownersMap[e.startnode.id]=o,o},s.prototype.getStartNodeKeyframeProperties=function(){return this.startNodeKeyframeProperties},s.prototype.getStartNodeId=function(){return this.startNodeId},s.prototype.getParentNodeId=function(){return this.parentNodeId},s.prototype.getStartNodeName=function(){return this.startNodeName},s.prototype.getPath=function(e){return this.atlas.directionsTo(e)},s.prototype.getEnteringEdge=function(e){var t=this.atlas.directionsTo(e);if(t&&0!==t.targets.length){var i=t.targets.last();return i.target.id===e?i.edge:null}return null},s.prototype.getChildActorsOfNode=function(e){return e?this.data.childmap.getOrCreateChildActors(this,e):null},s.prototype.getOwningActor=function(e){if(!e)return null;var t=e.getStartState()||e;return this.data.ownersMap[t.id]||this.createActor(e)},s.prototype.createActor=function(e){var t=e.getStartState()?e.getStartState().id:e.id,i=ArrayExtensions.firstOrDefault(this.data.actorInitializationData.nodes,function(e){return!(!e||0===e.childStartStates.getCollection().length)&&e.childStartStates.getCollection().some(function(e){return e.id===t})});if(!i)return null;var n=this.getOwningActor(i),o=this.data.childmap.getOrCreateChildActors(n,i);return ArrayExtensions.firstOrDefault(o,function(e){return e.getStartNodeId()===t})},s.prototype.markNodeAsDirty=function(e){e&&e.getBehaviors().has(i.StateBehaviors.CanBeDirtied)&&(this.data.dirtyNodes[e.id]=!0)},s.prototype.setTraversalMode=function(e){void 0===e&&(e=!0),this.data.traversalMode=e},s.prototype.createAtlas=function(e){return e?(this.atlas=t.createAtlas(e),this.atlas):null},s.prototype.enter=function(e){var n=this;if(this.exitOnEndTransition)this.exitOnEndTransition=!1;else{var o=this.immediatenode;if(o!==this.startnode&&this.startnode.getBehaviors().has(i.StateBehaviors.AutoResetFsmWhenEntered)&&(o=this.startnode,this.setImmediateNode(o),TDB.applyUpdate(function(){n.setCurrentNode(o)})),o){this.data.actorInitializationData.listener.enter(this,o,e),this.data.actorInitializationData.traveler&&this.data.actorInitializationData.traveler.visit(o.getKeyFrame()),this.cacheAnimations(o);var r=this.convertAnimationSequence(o.getAmbientAnimationSequence());r&&(this.initialAmbientsComplete=r.getAnimationsCompleteFunction()===this.inifiniteDuration,this.runAnimationSequence(r,function(){n.killRunningAnimations(),n.followEdgesForTriggerSetWorker(null)}),this.traversalState.currentAmbientFunctionIds=t.getFunctionIds(r)),this.childactors.forEach(function(t){return t.enter(e)}),!this.parentNodeId&&this.firstEnter&&(this.firstEnter=!1,this.followEdgesForTriggerSetWorker(null))}}},s.prototype.canExit=function(e){return void 0===e&&(e=!1),e&&(this.initialAmbientsComplete=!0),!!this.selfCanExit(e)&&this.childactors.every(function(t){return t.allowDeferredExit||t.canExit(e)})},s.prototype.exit=function(){var e=this.immediatenode;if(!this.selfCanExit()){if(e.getAllowDeferredExit())return void(this.exitOnEndTransition=!0);StoryLog.StructuredTraceTag(595969370,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,"tried exiting an fsm that wasn't ready to be exited",{startNodeName:this.startnode?this.startnode.getName():"",startNodeId:this.data.actorInitializationData.startnode.id,startNodeKeyframeType:this.startNodeKeyframeProperties.type,startNodeKeyframeLayoutId:this.startNodeKeyframeProperties.layoutElementId,immediateNodeId:this.immediatenode?this.immediatenode.id:"",immediateNodeName:this.immediatenode?this.immediatenode.getName():"",immediateNodeKeyframe:this.immediatenode?this.immediatenode.getKeyFrame():"",parentNodeId:this.parentNodeId,actorIsDisposing:this.disposing,animatingSequenceIds:this.animatingSequences.map(function(e){return"\nSequence Name: "+e.getName()+"\n"})})}this.killRunningAnimations(),this.data.actorInitializationData.listener.leave(this,e),this.childactors.forEach(function(e){return e.exit()})},s.prototype.selfCanExit=function(e){var t=this;void 0===e&&(e=!1);var i=e||this.data&&this.data.cleaningDirtyActors||this.initialAmbientsComplete&&null!==this.currentnode.getValue().get();return i||n.log(n.AnimationLogLabels.traversal,function(){return"Actor: "+t.startNodeId+" canExit: "+i+". initialAmbientsComplete: "+t.initialAmbientsComplete+" currentnode: "+t.currentnode.getValue().get()+" cleaningDirty: "+(e||t.data&&t.data.cleaningDirtyActors)}),i},s.prototype.children=function(){return this.childactors.slice(0)},s.prototype.getNextTriggerSetInfo=function(){return this.data.lookAheadTriggersets.slice(0)},s.prototype.followEdgesForTriggerSet=function(e){return!this.disposing&&(this.data.lookAheadTriggersets=[],s.collectNextTriggersets(this),this.data.lookAheadTriggersets=ArrayExtensions.unique(this.data.lookAheadTriggersets,function(e){return e.triggerSetId}),this.followEdgesForTriggerSetWorker(e))},s.prototype.setFastForwardState=function(e){this.data.fastForwarding=e},s.prototype.hasModalChild=function(){return s.checkForModalChild(this.childactors)},s.prototype.isRenderModelCurrent=function(t){void 0===t&&(t=!0);var i=this.data.actorInitializationData.renderModelSerialNumber===this.data.actorInitializationData.getCurrentRenderModelSerialNumber();if(t&&!i)try{throw e.RethrowLogger.createError()}catch(e){var n={startNodeId:this.data.actorInitializationData.startnode.id,startNodeKeyframeType:this.startNodeKeyframeProperties.type,startNodeKeyframeLayoutId:this.startNodeKeyframeProperties.layoutElementId,immediateNodeId:this.immediatenode?this.immediatenode.id:"",parentNodeId:this.parentNodeId,actorIsDisposing:this.disposing,animatingSequenceIds:this.animatingSequences.map(function(e){return e.id})};StoryLog.StructuredTraceTag(596476178,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Fsm actor attempted to access a stale render model object.",n,e.stack)}return i},s.prototype.followEdgesForTriggerSetWorker=function(o){var r=this;if(this.disposing)return!0;if(!this.currentnode||!this.currentnode.getValue())throw e.RethrowLogger.createError("Attempted to get edges for an actor during a state transition.");var a=!1,s=this.currentnode.getValue().get();if(!s)return!1;if(this.childactors.forEach(function(e){return a=e.followEdgesForTriggerSetWorker(o)||a}),!a){if(this.hasModalChild()||this.checkForModalSibling())return!1;var l=s.edges.getCollection().firstOrDefault(function(e){return r.isEdgeAutomatic(e)||t.TriggerManager.edgeHasTriggerSet(e,o)});if(l)return o&&n.log(n.AnimationLogLabels.traversal,function(){return"Actor: "+r.startNodeId+" responding to triggerset ID: "+o.id+", Name: "+o.getName()}),!!this.followEdge(l)&&(this.isEdgeAutomatic(l)&&this.data.fastForwarding&&this.data.actorInitializationData.engine.fastForward(),o&&(this.data.lookAheadTriggersets=this.data.lookAheadTriggersets.filter(function(e){return e.edgeId!==l.id})),!(l.getAllowBubbling()||l.getBehaviors().has(i.EdgeBehaviors.AllowBubbling)))}return a},s.prototype.followEdge=function(i,o){var r=this;if(void 0===o&&(o=void 0),n.log(n.AnimationLogLabels.traversal,function(){return"Following edge ID: "+i.id+", Name: "+i.getName()}),!this.canExit())return!1;if(t.TriggerManager.getTriggerSets(i).some(function(e){return!r.data.actorInitializationData.clientState.compareTo(e.getClientState())}))return n.log(n.AnimationLogLabels.traversal,function(){return"Ignoring edge ID: "+i.id+", Name: "+i.getName()+" due to client state mismatch"}),!1;if(this.queueEdges)return this.queuedEdge=i,!1;this.data.actorInitializationData.listener.followingEdge(i),this.killRunningAnimations(),this.updateTraversalState(i.getTarget()),this.ensureCleanEdge(i);var a=this.getExitAnimations().slice(0);o&&(a=o.concat(a)),this.startTransition(i),a.push(this.convertAnimationSequence(i.getTransitionOutAnimationSequence())),a.push(this.convertAnimationSequence(i.getTransitionInAnimationSequence()));var s=e.AnimationManager.after(a.length,this,this.onAnimationsComplete,i);return a.forEach(function(e){return r.runAnimationSequence(e,s)}),!0},s.prototype.findCurrentNode=function(){return this.canExit()?this.currentnode.getValue().get():null},s.prototype.getCurrentNode=function(e){var t=this.immediatenode;return t&&this.allowDeferredExit?t:this.currentnode.getWatchedValue(e).get()},s.prototype.getImmediateNode=function(){return this.isRenderModelCurrent()&&this.immediatenode.renderModel.getModelObject(this.immediatenode.id)?this.immediatenode:null},s.prototype.dispose=function(){this.disposing=!0,this.killRunningAnimations(),o.prototype.dispose.call(this),this.setCurrentNode(null),this.data=null,this.startnode=null,this.atlas=null},s.prototype.getMostRecentActor=function(e){var t=this;return!e||t.getCurrentNode()&&(t.currentNodeIsDefaultNavigation||t.currentNodeCanNavigateTo)?(this.childactors.forEach(function(i){var n=i.getMostRecentActor(e);n&&n.traversalState.lastUpdated>=t.traversalState.lastUpdated&&(t=n)}),t):null},s.prototype.getImmediatesMap=function(){var e={};return this.populateImmediatesMap(e),e},s.collectNextTriggersets=function(e){if(e.isRenderModelCurrent()){var i=e.getImmediateNode();if(i){for(var n;;){var o=(n=i.edges.getCollection()).firstOrDefault(function(e){return!t.TriggerManager.getTriggerSets(e).length});if(!o)break;i=o.getTarget()}var r=n.mapmany(function(e){return t.TriggerManager.getTriggerSets(e).map(function(t){return{edgeId:e.id,triggerSetId:t.id}})});e.data.lookAheadTriggersets=e.data.lookAheadTriggersets.concat(r),e.childactors.forEach(function(e){return s.collectNextTriggersets(e)})}}},s.prototype.onAnimationsComplete=function(e){var i=this;TDB.applyUpdate(function(){if(e.renderModel.graph.containsObject(e.id)&&!i.disposing&&i.isRenderModelCurrent()){var n=i.convertAnimationSequence(e.getTarget().getAmbientAnimationSequence());i.endTransition(e),i.killRunningAnimations(),i.runAnimationSequence(n,function(){i.killRunningAnimations()}),i.traversalState.currentAmbientFunctionIds=t.getFunctionIds(n),i.followEdgesForTriggerSetWorker(null),i.data.actorInitializationData.listener.edgeFollowed(e)}},TDB.Justification.InitialConversion)},s.prototype.ensureCleanEdge=function(e){var t=this.data.dirtyNodes[e.getTarget().id]&&e.getBehaviors().has(i.EdgeBehaviors.PrimaryNavigationPrevious);if(e.getResetDescendants()&&this.resetTargetStateMachines(e),t){delete this.data.dirtyNodes[e.getTarget().id];var n=this.getEnteringEdge(e.getTarget().id);n&&this.sendToEndTargetStateMachines(n)}},s.prototype.isEdgeAutomatic=function(e){var t=this.data.actorInitializationData.clientState.editMode&&e.getBehaviors().has(i.EdgeBehaviors.AutoFollowInEditMode);return t=t||this.data.fastForwarding&&e.getBehaviors().has(i.EdgeBehaviors.IsTweeningEdge)},s.prototype.checkForModalSibling=function(){var e=this;return!!this.parentNodeId&&this.data.childmap.getChildActors(this.parentNodeId).filter(function(t){return t.startNodeId!==e.startNodeId}).some(function(e){return e.immediatenode&&e.immediateNodeIsModal})},s.checkForModalChild=function(e){if(e.some(function(e){return e.currentnode.getValue().get()&&e.immediateNodeIsModal}))return!0;for(var t=0;t<e.length;t++)if(s.checkForModalChild(e[t].children()))return!0;return!1},s.prototype.resetTargetStateMachines=function(i){var o;o=i?i.getTarget():this.getCurrentNode();var r=this.data.childmap.getOrCreateChildActors(this,o);this.resetDescendants(r),r.forEach(function(o){o.enter(i);var r=e.Utilities.sequence(n.logSequenceError);r.waitfor(function(){return o.canExit(!0)},50).run(function(e){e.disposing||e.immediatenode.edges.getCollection().forEach(function(i){t.TriggerManager.getTriggerSets(i).length||e.followEdge(i)})},o),r.start()})},s.prototype.resetStateMachines=function(){this.reset(),this.resetTargetStateMachines()},s.prototype.sendActorToNode=function(e,t){if(t){var i=this.getPath(t.id);if(!i)return;for(var n=0;n<i.targets.length;n++){for(var o=i.targets[n],r=o.edge,s=o.target,l=0,u=this.getChildActorsOfNode(s);l<u.length;l++){var d=u[l];d.sendActorToNode(e,d.data.actorInitializationData.endStateMap[d.startnode.id])}this.data.actorInitializationData.addEdgeToSequence(e,new a(this),r,void 0,!0)}}},s.prototype.sendToEndTargetStateMachines=function(t){var i=this,o=e.Utilities.sequence(n.logSequenceError);this.getOwningActor(t.getTarget());o.run(function(){i.data.cleaningDirtyActors=!0,i.data.actorInitializationData.engine.hideOutput(),i.resetTargetStateMachines(t)}),this.getChildActorsOfNode(t.getTarget()).forEach(function(e){e.sendActorToNode(o,e.data.actorInitializationData.endStateMap[e.startNodeId]||e.startnode)}),o.waitfor(function(){return i.data.actorInitializationData.engine.fastForward(),null!==i.findCurrentNode()},0),o.run(function(){i.data.actorInitializationData.engine.showOutput(void 0,void 0,!1),i.data.cleaningDirtyActors=!1}),o.start()},s.prototype.populateImmediatesMap=function(e){this.childactors.forEach(function(t){return t.populateImmediatesMap(e)}),e[this.startNodeId]=this.getImmediateNode()},s.prototype.getExitAnimations=function(){var e=this.childactors.mapmany(function(e){return e.getExitAnimations()}),t=this.currentnode.getValue().get();return t&&t.id!==this.startNodeId&&e.unshift(this.convertAnimationSequence(t.getExitAnimationSequence())),e},s.prototype.killRunningAnimations=function(){var e=this.animatingSequences.slice(0);this.animatingSequences=[];for(var t=0;t<e.length;++t)this.data.actorInitializationData.engine.killAnimationSequence(e[t]);this.initialAmbientsComplete=!0},s.prototype.resetDescendants=function(e){e||(e=this.childactors),e.forEach(function(e){return e.reset()}),e.forEach(function(e){return e.resetDescendants(null)})},s.prototype.reset=function(e){var t=this;this.setImmediateNode(this.startnode),TDB.applyUpdate(function(){t.setCurrentNode(t.startnode)},TDB.Justification.InitialConversion),this.exitOnEndTransition=!1,e&&this.resetDescendants()},s.prototype.setImmediateNode=function(e){this.immediatenode=e,this.cacheImmediateNodeValues(e)},s.prototype.setCurrentNode=function(e){var t=this.currentnode.getValue();t&&t.dispose(),this.disposing||(this.currentnode.setValue(new a(e)),this.cachecurrentNodeValues(e))},s.prototype.cacheImmediateNodeValues=function(e){e&&(this.immediateNodeIsModal=e.getIsModal(),this.allowDeferredExit=e.getAllowDeferredExit())},s.prototype.cachecurrentNodeValues=function(e){e&&(this.currentNodeCanNavigateTo=e.getCanNavigateTo(),this.currentNodeIsDefaultNavigation=e.getKeyFrame().getIsDefaultNavigation())},s.prototype.startTransition=function(t){var i=this,o=t.getTarget();if(n.log(n.AnimationLogLabels.traversal,function(){return"Starting Transition: Actor ID: "+i.startNodeId+", Edge ID: "+t.id+", Target State ID: "+o.id+", Parent Actor ID: "+i.parentNodeId+"\n\tActor Name: "+i.startnode.getName()+"\n\tEdge Name: "+t.getName()+"\n\tTarget State Name: "+o.getName()}),this.exitOnEndTransition)throw e.RethrowLogger.createError("tried to start a transition on an fsm that is waiting to be exited");var r=this.immediatenode;this.data.actorInitializationData.listener.leave(this,r);var a=this.immediateNodeIsModal;this.setImmediateNode(o),TDB.applyUpdate(function(){i.setCurrentNode(null)}),this.data.actorInitializationData.scrollable&&(this.immediateNodeIsModal||a)&&this.data.actorInitializationData.scrollable.setMouseWheelScrollBindingEnabled(!this.immediateNodeIsModal),this.childactors.forEach(function(e){return e.exit()})},s.prototype.endTransition=function(e){var t=this;this.setCurrentNode(this.immediatenode),n.log(n.AnimationLogLabels.traversal,function(){return"Ending Transition: Actor ID: "+t.startNodeId+", Edge ID: "+e.id+", New State ID: "+t.immediatenode.id+"\n\tNew State Name: "+t.immediatenode.getName()}),this.queueEdges=!0,this.queuedEdge=null,this.data.actorInitializationData.listener.enter(this,this.immediatenode,e);var i=this.currentnode.getValue().get();this.data.actorInitializationData.traveler&&this.data.actorInitializationData.traveler.visit(i.getKeyFrame()),this.childactors=this.data.childmap.getOrCreateChildActors(this,i),this.childactors.forEach(function(t){return t.enter(e)}),this.queueEdges=!1,this.queuedEdge&&this.followEdge(this.queuedEdge),this.exitOnEndTransition&&(this.exitOnEndTransition=!1,this.exit())},s.prototype.updateTraversalState=function(e){var t=e.getKeyFrame();this.traversalState.currentKeyframeId=t.id;var i=this.atlas.directionsTo(e.id);this.traversalState.currentPath=i&&i.targets?i.targets.map(function(e){return null!=e.edge?e.edge.id:null}):null,this.traversalState.lastUpdated=(new Date).getTime()},s.prototype.convertAnimationSequence=function(t){var i=this;if(!t)return null;var n=new e.AnimationInterfaces.AnimationSequence(t,function(e){return i.data.actorInitializationData.clientState.compareTo(e.getClientState())});return this.data.actorInitializationData.hydrateAnimationSequence&&this.data.actorInitializationData.hydrateAnimationSequence(n),n},s.prototype.runAnimationSequence=function(e,t){e&&!this.animatingSequences.some(function(t){return t.id===e.id})&&(this.data.actorInitializationData.listener.sequenceExecuted(e),!this.data.traversalMode&&e.animations.getCollection().length&&this.data.actorInitializationData.engine.executeAnimationSequence(e,!1,t))?this.animatingSequences.push(e):t()},s.prototype.cacheAnimations=function(e){var n=this,o=this.data.actorInitializationData.capabilities.has(i.ClientCapabilities.VisibilityDetection);e.edges.getCollection().forEach(function(e){var r=t.TriggerManager.getTriggerSets(e);r.some(function(e){return!n.data.actorInitializationData.clientState.compareTo(e.getClientState())})||!o&&r.some(function(e){return e.triggers.getCollection().some(function(e){return e.selectMethods.getCollection().some(function(e){return e.getMethod()===i.TriggerMethod.Camera})})})||e.getPreFetchAnimations()&&(n.data.actorInitializationData.engine.cacheAnimationSequence(n.convertAnimationSequence(e.getTransitionInAnimationSequence())),n.data.actorInitializationData.engine.cacheAnimationSequence(n.convertAnimationSequence(e.getTransitionOutAnimationSequence())))})},s}(Disposable);t.FSMActor=o;var r=function(){function e(e){this.data=e,this.map={}}return e.prototype.getOrCreateChildActors=function(e,t){return this.map[t.id]||this.createChildActors(e,t)},e.prototype.getChildActors=function(e){var t=this.map[e];return t||[]},e.prototype.createChildActors=function(e,t){var i=this,n=t.childStartStates.getCollection().map(function(n){return new o(e,n,i.data,t.id)});return this.map[t.id]=n,n},e}(),a=function(){function e(e,t){this.item=e,this.ondispose=t,e?e.addResource(this):this.item=null}return e.prototype.get=function(){return this.item},e.prototype.dispose=function(){this.item&&(this.item.removeResource(this),this.ondispose&&this.ondispose(this.item),this.ondispose=null,this.item=null)},e}();t.Handle=a}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){function i(e,t){return e.length<=t.length}function n(e,t,i){var n=e.edges.getCollection(i).map(function(e){return{edge:e,target:e.getTarget(i)}}),o=e.childStartStates.getCollection(i).map(function(e){return t?t[e.id]||e:e}).map(function(e){return{edge:null,target:e}});return n.concat(o)}function o(t,o,l){var u={};r(t,u,l);var d={};for(var c in u)d[c]=new s(c,Number.POSITIVE_INFINITY);d[t.id].length=0;var p=[d[t.id]];for(var c in u)c!==t.id&&p.push(d[c]);for(;0!==p.length;)for(var g=p.shift(),h=n(u[g.nodeid],o,l),y=0;y<h.length;++y){var m=h[y],f=d[m.target.id];if(f.length>g.length+1){var v=s.extend(g,m);d[m.target.id]=v;var S=p.indexOf(f);p.splice(S,1),e.Utilities.insertInOrder(p,v,i)}}return new a(t,d)}function r(e,t,i){if(!t[e.id]){t[e.id]=e;for(var o=n(e,null,i),a=0;a<o.length;++a)r(o[a].target,t,i);for(var s=e.childStartStates.getCollection(i),a=0;a<s.length;a++)r(s[a],t,i)}}var a=function(){function e(e,t){this.startnode=e,this.pathmap=t}return e.prototype.directionsTo=function(e){return this.pathmap[e]},e}();t.FSMAtlas=a;var s=function(){function e(e,t,i){this.nodeid=e,this.targets=[],this.length=t||0,this.targets=i||[]}return e.extend=function(t,i){var n=t.targets.slice(0);return n.push(i),new e(i.target.id,t.length+1,n)},e}();t.FSMPath=s,t.createAtlas=o}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){function t(e){var t="";return e&&e.animations&&e.animations.getCollection().forEach(function(e){e.animationFunctions&&e.animationFunctions.getCollection().forEach(function(e){return t+=e.id})}),t}function i(e){return e.mapmany(function(e){return e.edges.getCollection().map(function(e){return e.id})})}var n=function(){function e(e,t,i){this.nodes=e,this.rootNode=t,this.isNewKeyframe=i}return e.prototype.checkCurrentStateFromRoot=function(e){return this.checkCurrentState(this.rootNode,e)},e.prototype.checkCurrentState=function(e,n){if(!n)return null;if(!e.edges.getCollection().length&&n.currentPath&&n.currentPath.length)return e.id;var o,r=e,a=!1,s=!0;if(n.currentPath){var l=i(this.nodes),u=this;for(o=0;o<n.currentPath.length&&"break"!==function(){var e=n.currentPath[o],t=r.edges.getCollection().firstOrDefault(function(t){return t.id===e});return t?u.isNewKeyframe(r.getKeyFrame())?(a=!0,"break"):(r=t.getTarget(),l.indexOf(e)!=n.edgeIds.indexOf(e)?"break":void 0):"break"}();o++);s=o==n.currentPath.length}var d=this.keyframeChanged(r,n),c=n.currentAmbientFunctionIds!=t(r.getAmbientAnimationSequence()),p=this.isStaleTraversalState(n);return a||d||c||!s||p?r.id:this.checkChildren(n)},e.prototype.isStaleTraversalState=function(e){return!this.nodes.some(function(t){return t.id==e.originalNodeId})},e.prototype.findBestChildStateId=function(e){var t=e.parentNodeId;return this.nodes.some(function(e){return e.id==t})||(t=this.rootNode.id),t},e.prototype.checkChildren=function(e){var t=e.getChildTraversalStates(e.originalNodeId);if(!t.length)return null;for(var i=this,n=0;n<t.length;n++){var o=function(e){var n=t[e],o=i.nodes.firstOrDefault(function(e){return e.id==n.originalNodeId});if(!o)return{value:i.findBestChildStateId(n)};var r=i.checkCurrentState(o,n);return r?{value:r}:void 0}(n);if("object"==typeof o)return o.value}return null},e.prototype.keyframeChanged=function(e,t){var i=e.getKeyFrame();return t.currentKeyframeId!==i.id},e}();e.FSMComparer=n,e.getFunctionIds=t,e.getEdgeIds=i}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,r,a,s){var l=e.call(this,t)||this;return l.owner=t,l.fetchModel=i,l.navfun=n,l.clientId=r,l.storyPageGetter=a,l.stackPosition=-1,l.ignorePopState=!0,StoryLog.BufferedTraceTag(596444819,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"FsmHistorian::Constructor start "),l.historyStack=[],l.traversedNodes=[],s&&(l.historyStack=s.historyStack,l.stackPosition=s.stackPosition,l.traversedNodes=s.traversedNodes,l.ignorePopState=s.ignorePopState),o.registerClient?(l.history=o.registerClient(r,l),l.historyManager=o):l.history=o,StoryLog.BufferedTraceTag(596444820,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"FsmHistorian::Constructor end "),l}return __extends(t,e),t.makeHistorian=function(e,i,n,o,r,a){if(void 0===r&&(r=null),void 0===a&&(a=null),!o||window.top!==window)return null;var s,l,u="FSMHistorian_"+StoryPageSettings.LookupId;if(CommonSettings.AuthoringFromLandingPageContextEnabled){var d=HistoryManager.getHistoryManagerInstance(o);if(!d)return null;l=d,a?(u=a,s=d.deserializeClientArgs(a)):u=d.getUniqueClientId(u)}else l=o;return new t(e,i,n,l,u,r,s)},t.prototype.serialize=function(){var e={historyStack:this.historyStack,stackPosition:this.stackPosition,traversedNodes:this.traversedNodes,ignorePopState:this.ignorePopState};return JSON.stringify(e)},t.prototype.traverse=function(e){if(StoryPageSettings.EnableTraversalHistory){var t=e.startState,i=e.endState;if(!(this.stackPosition>-1&&i==this.getCurrentNode())&&(this.stackPosition>-1&&(t==this.historyStack[this.stackPosition].nodeId||t==this.historyStack[this.stackPosition].replaceNodeId)&&e.animation&&!e.historicallyRelevant&&(this.historyStack[this.stackPosition].replaceNodeId=i),e.historicallyRelevant&&void 0!=t&&void 0!=i&&t!=i))if(this.alreadyTraversed(e))this.traversedNodes.removefirst(e.startState);else{this.ignorePopState=!1,this.traversedNodes=[];var n=this.indexOfLast(i),o=this.indexOfLast(t);if(StoryLog.StructuredTraceTag(596476174,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,"FSMHistorian traverse",{startState:t,startIndex:o.toString(),endState:i,endIndex:n.toString(),currentStackPossition:this.stackPosition.toString()}),n>=0&&(o>=0&&1==Math.abs(o-n)||o<0&&n==this.stackPosition-1)){var r=n-this.stackPosition;this.traverseNodes(r),this.history.state!=i&&0!=r&&(this.ignorePopState=!0,this.history.go(r)),this.stackPosition=n}else(0===this.historyStack.length||this.history.state!=t&&this.historyStack.last().nodeId!=t)&&(-1!=o&&0!=(r=this.stackPosition-o)&&(this.ignorePopState=!0,this.history.go(-r)),this.insertState(t,e,!0)),this.insertState(i,e,!1)}}},t.prototype.insertState=function(e,t,i){this.stackPosition!=this.historyStack.length-1&&(t.animation==this.historyStack[this.stackPosition].stateEdge.animation&&i?(this.historyStack.length=this.stackPosition,this.stackPosition--):this.historyStack.length=this.stackPosition+1),i?(this.history.replaceState(e,document.title,null),0==this.historyStack.length?(this.historyStack.push({nodeId:e,replaceNodeId:"",stateEdge:t}),this.stackPosition++):this.historyStack.last().nodeId!=e&&(this.historyStack.last().replaceNodeId=e)):(this.history.pushState(e,document.title,null),this.historyStack.push({nodeId:e,replaceNodeId:"",stateEdge:t}),this.stackPosition++)},t.prototype.onPopState=function(e){StoryPageSettings.EnableTraversalHistory&&e&&(this.ignorePopState?this.ignorePopState=!1:0!==this.historyStack.length?this.go(e)?this.stackPosition=this.indexOfLast(e):StoryLog.StructuredTraceTag(596476176,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Unsuccessful attempt to visit a node",{nodeId:e}):StoryLog.StructuredTraceTag(596476175,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Unsuccessful attempt to visit a node because local history stack is empty",{nodeId:e}))},t.prototype.onContextChange=function(){this.stackPosition>-1&&(this.stackPosition=0)},t.prototype.go=function(e){this.traversedNodes=[];var t=this.indexOfLast(e);if(t<0)return!1;for(var i=t<this.stackPosition,n=!1,o="",r=this;t!=this.stackPosition;){var a=function(){var e=i?r.stackPosition-1:r.stackPosition+1,t=r.historyStack[r.stackPosition].nodeId,a=r.historyStack[r.stackPosition].replaceNodeId,s=r.historyStack[e].nodeId,l=r.historyStack[e].replaceNodeId;0==r.traversedNodes.length&&(r.traversedNodes.push(t),a&&r.traversedNodes.push(a)),r.traversedNodes.push(s),""!=l&&r.traversedNodes.push(l);var u=r.fetchModel(t);null==u&&a&&(u=r.fetchModel(a),t=a);var d=r.fetchModel(s);null==d&&l&&(d=r.fetchModel(l),s=l);var c=i?r.historyStack[r.stackPosition].stateEdge:r.historyStack[e].stateEdge;if(!u&&!c)return{value:!1};if(u&&d)n=r.navfun(t,s);else if(null!=c&&null!=c.toggleState){if(n=!1,r.storyPageGetter){var p=r.storyPageGetter().getViewElement().traverseFocusable(function(e){return e.className()==c.contextName?e:void 0}).firstOrDefault();n=p&&"string"==typeof c.toggleState&&"function"==typeof p[c.toggleState]?p[c.toggleState].call(p)!==TDB.EventPropagation.Bubble:"function"==typeof c.toggleState&&c.toggleState.call(p)!==TDB.EventPropagation.Bubble}}else n=!1;if(!n)return"break";o&&(o+=", "),o+=t,r.stackPosition=e}();if("object"==typeof a)return a.value;if("break"===a)break}return o&&(o="Traversed nodes: "+o,n&&(o=o+", "+e),StoryLog.StructuredTraceTag(596476177,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,"User clicked browser back button",{transitionMessage:o})),n},t.prototype.resetAnimationHistory=function(){for(var e=0;this.stackPosition>0&&this.historyStack[this.stackPosition].stateEdge.animation;)this.stackPosition--,e++;e>0&&(this.traversedNodes=[],this.ignorePopState=!0,this.history.go(-e))},t.prototype.indexOfLast=function(e){return this.historyStack?this.historyStack.indexOfLast(function(t){return t.nodeId==e||t.replaceNodeId==e}):-1},t.prototype.alreadyTraversed=function(e){if(this.traversedNodes.length>0){var t=this.traversedNodes.indexOf(e.startState),i=this.traversedNodes.indexOf(e.endState);return-1!=t&&-1!=i&&t<i}return!1},t.prototype.traverseNodes=function(e){for(var t=e>0?1:-1,i=this.stackPosition,n=this.stackPosition+e;i!=n&&i>=0&&i<this.historyStack.length;){var o=this.historyStack[i];this.traversedNodes.push(o.nodeId),""!=o.replaceNodeId&&this.traversedNodes.push(o.replaceNodeId),i+=t}},t.prototype.getCurrentNode=function(){return this.historyStack[this.stackPosition].nodeId},t.prototype.getCurrentReplaceNode=function(){return this.historyStack[this.stackPosition].replaceNodeId},t.prototype.getHistory=function(){return this.history},t.prototype.getState=function(){return this.stackPosition>-1?this.getCurrentNode():null},t.prototype.getReplaceState=function(){return this.stackPosition>-1?this.getCurrentReplaceNode():null},t.prototype.dispose=function(){this.historyManager&&(this.historyManager.serializeAndUnregisterClient(this.clientId),this.historyManager=void 0),this.resetAnimationHistory(),e.prototype.dispose.call(this)},t}(Disposable);e.FsmHistorian=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=MathUtils,n=function(){function t(e){this.listener=e,this.targets=[]}return t.prototype.setViewport=function(e){this.lastViewport=this.viewport,this.viewport=e;for(var t=this.targets.slice(0),i=0;i<t.length;++i)this.checkWanted(t[i])},t.prototype.registerWantedObject=function(e,t){void 0===t&&(t=!0);var i=new a(e);this.targets.push(i),t&&this.checkWanted(i)},t.prototype.unRegisterWantedObject=function(t){for(var i=0;i<this.targets.length;++i)if(this.targets[i].target.id===t)return void this.targets.splice(i,1);throw e.RethrowLogger.createError("Target not found "+t)},t.prototype.checkWanted=function(e){if(this.viewport){var t=this.fetchScaledAndOffset(this.viewport,e),n=this.lastViewport?this.fetchScaledAndOffset(this.lastViewport,e):null;n&&!i.aabbsIntersect(n,t)&&this.checkBox(i.aabbUnion(t,n),e),this.checkBox(t,e)}},t.prototype.checkBox=function(e,t){var n=i.aabbIntersection2d(e,t.target.aabb),a=Math.round(n/t.maxintersection*100)/100;if(t.state!==r.In&&(t.target.criteria.confidence<a||1===a))(s=t.target.notify)!==o.In&&s!==o.Both||!this.listener.targetSpotted(t.target)||(t.state=r.In);else if(t.state!==r.Out&&(a<t.target.criteria.confidence||0===a)){var s=t.target.notify;s!==o.Out&&s!==o.Both||!this.listener.targetLost(t.target)||(t.state=r.Out)}},t.prototype.fetchScaledAndOffset=function(e,t){var i=t.target.criteria,n=i.scale[0],o=i.scale[1],r=i.offsetRatio[0],a=i.offsetRatio[1];if(1===n&&1===o&&0===r&&0===a)return e;var s=e.scaled(n,o);return(r||a)&&s.move([e.width()*i.offsetRatio[0],e.height()*i.offsetRatio[1]]),s},t}();t.Lookout=n;var o;!function(e){e[e.Both=0]="Both",e[e.Out=1]="Out",e[e.In=2]="In"}(o=t.NotifyOn||(t.NotifyOn={}));var r;!function(e){e[e.Out=0]="Out",e[e.In=1]="In",e[e.New=2]="New"}(r||(r={}));var a=function(){function t(t){if(this.target=t,this.state=r.New,this.maxintersection=0,this.maxintersection=t.aabb.space(),t.criteria.confidence<0||1<t.criteria.confidence)throw e.RethrowLogger.createError("desired confidence must be a ratio between [0, 1]")}return t}()}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function e(e){this.triggerManager=e}return e.prototype.getTriggerSetsForEvent=function(e){return e.signal==t.ClientSignal.EditMode?this.getTriggerSetsForEditModeEvent(e):e.signal==t.ClientSignal.AutoAdvanceNext?this.getTriggerSetsForAutoAdvanceEvent(e,!1):e.signal==t.ClientSignal.AutoAdvanceReset?this.getTriggerSetsForAutoAdvanceEvent(e,!0):[]},e.prototype.getTriggerSetsForEditModeEvent=function(e){return this.triggerManager.findTriggerSets(i.TriggerMethod.Client,function(t){return!!(t.objectType==i.ObjectType.ClientSelectMethod&&t.getSignal()instanceof i.EditModeClientSignal&&e.editMode)})},e.prototype.getTriggerSetsForAutoAdvanceEvent=function(e,n){return this.triggerManager.findTriggerSets(i.TriggerMethod.Client,function(e){return t.TriggerManager.isAutoAdvanceSelectMethod(e,n)})},e}();t.ClientEventMapper=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function e(){}return e.prototype.compareTo=function(e){if(!e)return!0;var t=!0;switch(e.getEditMode()){case i.ClientStateValue.True:t=this.editMode;break;case i.ClientStateValue.False:t=!this.editMode}switch(e.getIsNavigating()){case i.ClientStateValue.True:t=t&&this.isNavigating;break;case i.ClientStateValue.False:t=t&&!this.isNavigating}switch(e.getAccessibilityMode()){case i.ClientStateValue.True:t=t&&this.accessibilityMode.getValue();break;case i.ClientStateValue.False:t=t&&!this.accessibilityMode.getValue()}return t},e}();t.ClientState=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=function(t){function i(e,i){var n=t.call(this,e)||this;return n.scroller=e,n.interactions=i,n.scrollmemory={},n.lastscrollid="",n.current=TDB.watcher(n,n,n.calculateCurrent),n}return __extends(i,t),i.prototype.leave=function(){var e=this.current.getValue();this.lastscrollid=this.scrollId(e),e&&this.lastscrollid&&(this.scrollmemory[this.lastscrollid]=this.scroller.fetchScrollValues())},i.prototype.enter=function(){var e=this.current.getValue(),t=this.scrollId(e);if(this.lastscrollid!==t){var i=this.scrollmemory[t];i&&this.scroller.setScrollValues(i)}},i.prototype.fetchStateScroll=function(e){var t=this.scrollmemory[e];return t||(t=this.scrollmemory[e]=[0,0]),t},i.prototype.updateScrollMemory=function(e,t){if(e&&t&&2==t.length){var i=this.scrollId(e);this.scrollmemory[i]=t,this.lastscrollid=i}},i.prototype.scrollableKeyframe=function(e){return this.current.getWatchedValue(e)},i.prototype.scrollId=function(e){return e?e.layoutElementId:""},i.prototype.findScrollable=function(t,i){var n=t&&t.getCurrentNode(i);if(!n)return null;var o=e.AnimationHelper.getKeyframeProperties(n.getKeyFrame(i),i);if(this.scroller.isScrollableKeyframe(o,i))return o;for(var r=t.children(),a=0;a<r.length;++a)if(o=this.findScrollable(r[a],i))return o;return null},i.prototype.calculateCurrent=function(e){return this.findScrollable(this.interactions.actor(e),e)},i}(Disposable);t.ScrollableChecker=i}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function n(){this.lookout=new t.Lookout(this),this.followedtargets={},this.disposed=!1}return n.prototype.updateView=function(e){this.disposed||this.lookout.setViewport(this.rectToAAABB(e))},n.prototype.enter=function(n,o){var r=this;this.disposed||o.edges.getCollection().mapmany(function(e){return r.selectsFromEdge(n,e)}).forEach(function(n){var a=n.id,s=n.select(),l=s.getCheckOnEntry();r.lookout.registerWantedObject({id:a,aabb:r.keyframeToAABB(o.getKeyFrame()),notify:s.getAction()===i.ViewAction.Enter?t.NotifyOn.In:t.NotifyOn.Out,criteria:r.toCriteria(s),triggerSetId:n.triggerSet.id},l),e.Utilities.weblog("visibility","Entering node "+o.getName()+" and watching target "+a),a in r.followedtargets&&e.Utilities.weblog("visibility","ERROR: tried overwriting select that already exists"),r.followedtargets[a]=n})},n.prototype.leave=function(n,o){var r=this;this.disposed||o.edges.getCollection().mapmany(function(e){return t.TriggerManager.getTriggerSets(e).mapmany(function(e){return e.triggers.getCollection().mapmany(function(e){return e.selectMethods.getCollection()}).filter(function(e){return e.getMethod()===i.TriggerMethod.Camera}).map(function(e){return e.id})})}).forEach(function(t){e.Utilities.weblog("visibility","Leaving node "+o.getName()+" and clearing target "+t),r.clearVisibilityData(t)})},n.prototype.targetSpotted=function(t){if(this.disposed)return!1;var i=this.followedtargets[t.id];if(!i)return!1;var n=i.edge();return e.Utilities.weblog("trigger","target: "+t.id+" spotted with visibility trigger: "+t.triggerSetId),i.actor.followEdge(n)},n.prototype.targetLost=function(t){if(this.disposed)return!1;var i=this.followedtargets[t.id];if(!i)return!1;var n=i.edge();return e.Utilities.weblog("trigger","target: "+t.id+" lost with visibility trigger: "+t.triggerSetId),i.actor.followEdge(n)},n.prototype.dispose=function(){for(var e in this.followedtargets)this.clearVisibilityData(e);this.lookout=null,this.disposed=!0},n.prototype.clearVisibilityData=function(e){e in this.followedtargets&&(this.lookout.unRegisterWantedObject(e),this.followedtargets[e].dispose(),delete this.followedtargets[e])},n.prototype.toCriteria=function(e){return{confidence:e.getVisibilityRatio(),scale:[e.getViewportScaleX(),e.getViewportScaleY()],offsetRatio:[e.getViewportOffsetRatioX(),e.getViewportOffsetRatioY()]}},n.prototype.keyframeToAABB=function(t){if(!t.layoutElements.getCollection().first().position)throw e.RethrowLogger.createError("Layout element doesn't have a position with which to create a bounding box");for(var i=this.determineTarget(t),n=0,o=0;i.parent;)n+=i.parent.position.getLeft(),o+=i.parent.position.getTop(),i.parent=i.parent.getParentContainer();return MathUtils.Vec2.add([n,o],i.aabb.min,i.aabb.min),MathUtils.Vec2.add([n,o],i.aabb.max,i.aabb.max),i.aabb},n.prototype.determineTarget=function(t){var n=t.layoutElements.getCollection().first();if(!n.position)throw e.RethrowLogger.createError("Layout element doesn't have a position with which to create a bounding box");var o=n.position,r=n.getParentContainer();return r&&r instanceof i.MediaViewportLayoutElement&&(o=r.position,r=r.getParentContainer()),{parent:r,aabb:this.rectangleToAAABB(o)}},n.prototype.selectsFromEdge=function(e,n){var r=this.clearVisibilityData.bind(this);return t.TriggerManager.getTriggerSets(n).mapmany(function(t){return t.triggers.getCollection().mapmany(function(e){return e.selectMethods.getCollection()}).mapSome(function(a){return a.getMethod()===i.TriggerMethod.Camera?new o(a.id,n,t,a.getCameraSelect(),e,r):null})})},n.prototype.rectToAAABB=function(e){var t=[e.left,e.top],i=[e.width,e.height];return new MathUtils.AxisAlignedBoundingBox(t,MathUtils.Vec2.add(t,i))},n.prototype.rectangleToAAABB=function(e){var t=[e.getLeft(),e.getTop()],i=[e.getWidth(),e.getHeight()];return new MathUtils.AxisAlignedBoundingBox(t,MathUtils.Vec2.add(t,i))},n}();t.VisibilityChecker=n;var o=function(){function e(e,i,n,o,r,a){var s=this;this.id=e,this.triggerSet=n,this.actor=r,this.onDispose=a;var l=function(){s.onDispose&&s.onDispose(e)};this.edgehandle=new t.Handle(i,l),this.selecthandle=new t.Handle(o,l)}return e.prototype.edge=function(){return this.edgehandle.get()},e.prototype.select=function(){return this.selecthandle.get()},e.prototype.dispose=function(){this.onDispose=null,this.actor=null,this.edgehandle.dispose(),this.selecthandle.dispose()},e}()}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function e(e){this.triggerManager=e}return e.prototype.getTriggerSetsForEvent=function(i,n){if(i.type===t.EventConstants.KeyUpEventType)return this.lastKeyDown=-1,[];var o,r=!1;if(i.which>=48&&i.which<=57||i.which>=65&&i.which<=90?(o=String.fromCharCode(i.which),r=!0):o=e.keycodeMapping[i.which],this.triggerManager.getInteractionEngine().isRtl()&&e.rtlRemapping[o]&&(o=e.rtlRemapping[o]),StoryPageSettings.Mode!==StoryViewMode.Edit&&!r){var a=null;i.altKey?a="ALT":i.ctrlKey?a="CTRL":i.shiftKey?a="SHIFT":void 0!==o&&(a=o),StoryLog.StructuredTraceTag(596476169,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.verbose,"User Action: Key pressed",{Key:a,"User Id":CommonSettings.AnonUserId,"Story Id":StoryPageSettings.StoryId})}var s=[];if(i.shiftKey&&(o="SHIFT"+o),o&&n){var l=this.getTargetedTriggerSets(o,n);null!=l&&(s=[l])}return!o||i.metaKey||i.altKey||i.ctrlKey||0!=s.length||(s=this.getTriggerSetsByKey(o)),s.length&&this.lastKeyDown===i.which&&s.forEach(function(e){return e.isKeyHeld=!0}),this.lastKeyDown=i.which,s},e.prototype.getTargetedTriggerSets=function(e,n){for(var o=new t.TriggerSetPicker(this.triggerManager),r=TDB.ViewElement.dataFor(n),a=e.toUpperCase();r&&!(r instanceof t.RootVEBase);){var s=r.getModelObjectId(),l=o.getPickingTriggerSet(i.TriggerMethod.Keypress,s,function(e){return ArrayExtensions.contains(e.getKeyNames().toUpperCase().split(","),a)});if(l)return l;r=r.parent}return null},e.prototype.getTriggerSetsByKey=function(e){var t=this,n=e.toUpperCase();return this.triggerManager.findTriggerSets(i.TriggerMethod.Keypress,function(e){return e.getMethod()==i.TriggerMethod.Keypress&&ArrayExtensions.contains(e.getKeyNames().toUpperCase().split(","),n)&&t.doesNotHaveTarget(e)})},e.prototype.doesNotHaveTarget=function(e){return"DefaultTargetId"==e.getTargetId()||""==e.getTargetId()},e.keycodeMapping={32:"SPACE",33:"PAGEUP",34:"PAGEDOWN",35:"END",36:"HOME",27:"ESCAPE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",96:"0",97:"1",98:"2",99:"3",101:"4",102:"5",103:"6",104:"7",105:"8",106:"9"},e.rtlRemapping={LEFT:"RIGHT",RIGHT:"LEFT"},e}();t.KeyboardEventMapper=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function e(e,t,i,n){this.recordConsumptionChange=i,this.keyFrameData={},this.initializeKeyframeData(e,t),this.firstVisit=!t,this.lastVisitedKeyFrameId=void 0,this.isEditMode=n,this.currentLocation=0,this.totalNavigatingDistance=0,this.totalScrollingDistance=0}return e.prototype.getLastScrollState=function(){var e=this.lastScrollState;return{scrollX:e.scrollX,scrollY:e.scrollY,visibleScrollX:e.visibleScrollX,visibleScrollY:e.visibleScrollY}},e.prototype.getCoverage=function(){var e=this,t=Obj.properties(this.keyFrameData);if(!t.length)return 0;if(this.isEditMode)return this.currentLocation?Math.round(this.currentLocation/t.length*100)/100:0;var n=0;return t.forEach(function(t){var o=e.keyFrameData[t];o.visited&&(o.scrollability==i.LayoutScrollability.None?n+=1:n+=o.scrollExtent?Math.min(o.scrolled/o.scrollExtent,1):1)}),Math.round(n/t.length*100)/100},e.prototype.getScrollingDistance=function(){return this.totalScrollingDistance},e.prototype.getPercentageNavigatingDistance=function(){var e=Obj.properties(this.keyFrameData);return e.length&&this.totalNavigatingDistance?Math.round(this.totalNavigatingDistance/e.length*100)/100:0},e.prototype.getAbsoluteNavigatingDistance=function(){return this.totalNavigatingDistance},e.prototype.visit=function(e){var t=this.keyFrameData[e.id];t&&(t.visited=!0,t.scrollability!=i.LayoutScrollability.None&&(this.scrollableKeyframeId=e.id,this.setScrollCoverage(t)),this.lastVisitedKeyFrameId=e.id,this.setNavigationLocation(t),this.recordCoverage())},e.prototype.setScrollState=function(e){this.lastScrollState=e;var t=this.keyFrameData[this.scrollableKeyframeId];t&&(this.setScrollCoverage(t),this.setNavigationLocation(t),this.recordCoverage())},e.prototype.getKeyframeData=function(){return Obj.extend({},this.keyFrameData)},e.prototype.recordCoverage=function(){this.recordConsumptionChange(this.getCoverage(),this.firstVisit),this.firstVisit=!1},e.prototype.setNavigationLocation=function(e){if(this.isEditMode&&e){var t=this.currentLocation,n=Obj.properties(this.keyFrameData);if(this.currentLocation=n.indexOf(this.lastVisitedKeyFrameId),e.scrollability===i.LayoutScrollability.None)this.currentLocation+=1;else{var o=0;if(this.lastScrollState)switch(e.scrollability){case i.LayoutScrollability.Horizontal:o=this.lastScrollState.visibleScrollX+this.lastScrollState.scrollX;break;case i.LayoutScrollability.Vertical:o=this.lastScrollState.visibleScrollY+this.lastScrollState.scrollY}this.currentLocation+=Math.min(o/e.scrollExtent,1)}this.totalNavigatingDistance+=Math.abs(this.currentLocation-t)}},e.prototype.setScrollCoverage=function(e){if(this.lastScrollState){var t=e.scrolled;switch(e.scrollability){case i.LayoutScrollability.Horizontal:e.scrolled=Math.max(e.scrolled,this.lastScrollState.visibleScrollX+this.lastScrollState.scrollX);break;case i.LayoutScrollability.Vertical:e.scrolled=Math.max(e.scrolled,this.lastScrollState.visibleScrollY+this.lastScrollState.scrollY)}this.totalScrollingDistance+=e.scrolled-t}},e.prototype.initializeKeyframeData=function(e,t){var n=this;this.keyFrameData={},e.forEach(function(e){var o=t?t[e.id]:null;switch(e.getCoverageMethod()){case i.CoverageMethod.Visited:n.keyFrameData[e.id]=o||{visited:!1,scrollability:i.LayoutScrollability.None,scrollExtent:0,scrolled:0};break;case i.CoverageMethod.Scrolled:var r=e.getScrollWidth(),a=e.getScrollHeight(),s=e.getScrollability();n.keyFrameData[e.id]={visited:!1,scrollability:s,scrollExtent:s==i.LayoutScrollability.Horizontal?r:a,scrolled:0},o&&(n.keyFrameData[e.id].visited=o.visited,n.keyFrameData[e.id].scrolled=o.scrolled)}})},e}();t.KeyframeTraveler=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function e(e){this.triggerManager=e,this.mouseDownIntervalId=-1,this.mouseClickRepeatInterval=150,this.mouseWheelDeltaAccumulators={}}return e.prototype.getTriggerSetsForEvent=function(e){switch(e.type){case t.EventConstants.MouseWheelEventType:return this.onMouseWheel(e);case t.EventConstants.DoubleClickEventType:case t.EventConstants.ClickEventType:return this.onMouseClick(e);case t.EventConstants.MouseDownEventType:case t.EventConstants.MouseUpEventType:this.onMouseUpDown(e)}return[]},e.prototype.onMouseWheel=function(e){var t=this,n=e.wheelDelta;return this.triggerManager.findTriggerSets(n>=0?i.TriggerMethod.WheelUp:i.TriggerMethod.WheelDown,function(e){return e.getMethod()===i.TriggerMethod.WheelUp&&n>=0||e.getMethod()===i.TriggerMethod.WheelDown&&n<0}).filter(function(e){var o=0;if(e.modelTriggerSet.triggers.getCollection().mapmany(function(e){return e.selectMethods.getCollection()}).filter(function(e){return e instanceof i.MouseSelectMethod}).forEach(function(e){var t=e.getMouseWheelReactionDistance();t>o&&(o=t)}),o>0){var r=t.mouseWheelDeltaAccumulators[e.modelTriggerSet.id];if(r||(r=0),(r+=Math.abs(n))<o)return t.mouseWheelDeltaAccumulators[e.modelTriggerSet.id]=r,!1}return t.mouseWheelDeltaAccumulators[e.modelTriggerSet.id]=0,!0})},e.prototype.onMouseUpDown=function(e){var n=this;if(e.type===t.EventConstants.MouseDownEventType){this.isMouseDown=!0;var o=TDB.ViewElement.dataFor(e.target);o&&o instanceof t.LayoutVE&&o._model.getFlags().has(i.LayoutFlags.Button)&&!o._model.getFlags().has(i.LayoutFlags.ButtonSingleClick)&&(this.tryClearMouseDownInterval(),this.mouseDownIntervalId=platform.setInterval(function(){return n.triggerManager.getInteractionEngine().handleMouse($.Event(t.EventConstants.ClickEventType,{type:t.EventConstants.ClickEventType,which:1,target:e.target}))},this.mouseClickRepeatInterval))}else e.type===t.EventConstants.MouseUpEventType&&(this.tryClearMouseDownInterval(),this.isMouseDown=!1)},e.prototype.tryClearMouseDownInterval=function(){-1!==this.mouseDownIntervalId&&(clearInterval(this.mouseDownIntervalId),this.mouseDownIntervalId=-1)},e.prototype.onMouseClick=function(e){var n=this;if(StoryPageSettings.Mode!==StoryViewMode.Edit&&e.pageX&&e.pageY&&StoryLog.StructuredTraceTag(596476167,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.verbose,"User Action: Mouse event",{Type:e.type,X:e.pageX.toString(),Y:e.pageY.toString(),"User Id":CommonSettings.AnonUserId,"Story Id":StoryPageSettings.StoryId}),e.which===t.EventConstants.LeftMouseButton){var o=e.target;if(!(o&&o.firstChild instanceof Text)||getSelection().isCollapsed){var r=e.type===t.EventConstants.ClickEventType?i.TriggerMethod.Click:i.TriggerMethod.DoubleClick,a=[];if(o){var s=this.findTargetTriggerSet(e,r,o);s&&a.push(s)}return(a=a.concat(this.getClickTriggerSets(r))).forEach(function(e){return e.isMouseDown=n.isMouseDown}),a}}},e.prototype.findTargetTriggerSet=function(e,n,o){for(var r=TDB.ViewElement.dataFor(o),a=!1,s=-1===e.pageX&&-1===e.pageY,l=new t.TriggerSetPicker(this.triggerManager);r&&!(r instanceof t.RootVEBase);){var u=r.getModelObjectId(),d=r instanceof t.SelectableElement?r.getContentId():void 0,c=r,p=void 0!==c&&c._model&&"function"==typeof c._model.getFlags?c._model.getFlags():void 0;if(p&&p.has(i.LayoutFlags.ClickTargetParent)&&!a&&!s)break;var g=l.getPickingTriggerSet(n,u);if(!g){if(p&&p.has(i.LayoutFlags.ClickTarget)&&(a=!0),r=r.parent)continue;break}return g.contentId=d,g}},e.prototype.getClickTriggerSets=function(e){return this.triggerManager.findTriggerSets(e,function(t){return t.getMethod()===e&&t.getTarget()===i.TriggerTarget.None})},e}();t.MouseEventMapper=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.Model.RM,o=function(){function o(){}return o.getDetailViewKeyFrameType=function(){return"DetailViewPage"},o.getFsmNodeIdFromContentId=function(e,t){if(!t)return null;var i=e.getContentNavigationMarkerCollections().getCollection().firstOrDefault(function(e){return e.getContentId()===t});return i?i.navigationMarkers.itemAtIndex(0).getFsmNodeId():null},o.navigateToContentId=function(e,t,n){var r=this;if(!e||!t)return!1;var a=e.getInteractionModel();if(!a)return!1;var s=o.getFsmNodeIdFromContentId(a,t);if(!s)return!1;if(n.isDetailView&&!e.parent.parent.isEditMode.getValue()){var l=a.nodes.getCollection().firstOrDefault(function(e){var i=e.getKeyFrame();return i.getType()===r.getDetailViewKeyFrameType()&&i.layoutElements.getCollection()[0].getContentId()===t});l&&(s=l.id)}return!!i.NavigationManager.navigateToFsmNodeById(e,s,n.snapScene)&&(n.contentId=t,o.scrollTo(e,n),!0)},o.getRootActor=function(e){var t=e._interactionEngine.actor();if(!t)return null;var i=t.getCurrentNode();return i?i.getKeyFrame().getIsDefaultNavigation()?t.children().firstOrDefault(function(e){return!e.getStartNodeKeyframeProperties().isDefaultNavigation}):t:null},o.scrollTo=function(e,i){if(!e||!i||!i.layoutElement&&!i.contentId)return!1;var n=e.getRootKeyframeProperties();if(!n)return!1;if(e.is3DWorldWatcher.getValue())return!1;var r=i.layoutElement;if(!r){var a=e.cullingRootWatcher.getValue();r=o.findLayoutElement(a,i.contentId)}if(!r)return!1;if(i.scrollAfterSync&&o.isCaptionLayoutElement(r))return!1;var s=e.scroller.getValue();if(!s)return!1;for(var l=new Point(r.position.getLeft(),r.position.getTop()),u=r.getParentContainer();u;)l.left+=u.position.getLeft(),l.top+=u.position.getTop(),u=u.getParentContainer();if(i.subElement&&i.layoutElementVE&&i.layoutElementVE!==TDB.ViewElement.dataFor(i.subElement))for(var d=i.subElement.offsetParent,c=i.subElement;d;){l.left+=c.offsetLeft,l.top+=c.offsetTop;var p=TDB.ViewElement.dataFor(d);if(!p||p===i.layoutElementVE)break;c=c.offsetParent,d=d.offsetParent}var g=s.visibleViewportSize(),h=i.viewportRelativeOffset?i.viewportRelativeOffset:0,y=g.width*h,m=g.height*h,f=[Math.max(0,Math.min(n.scrollWidth,l.left-y)),Math.max(0,Math.min(n.scrollHeight,l.top-m))];if(i.scrollIfNeeded){var v=s.fetchClientScrollValues(),S=new Point(v[t.ScrollDirection.HORIZONTAL],v[t.ScrollDirection.VERTICAL]),w=new Point(v[t.ScrollDirection.HORIZONTAL]+s.getWidth(),v[t.ScrollDirection.VERTICAL]+s.getHeight());if(S.left<=f[t.ScrollDirection.HORIZONTAL]&&w.left>f[t.ScrollDirection.HORIZONTAL]&&S.top<=f[t.ScrollDirection.VERTICAL]&&w.top>f[t.ScrollDirection.VERTICAL])return!0}if(i.appbarVisible){var T=e.parent.parent.getConsumptionAppBar();T&&T.getScrollVisibleManager().initScrollPositions(f)}var C=e._interactionEngine.getAnimationEngine(),_=i.snapScene&&!i.supressFading;return _&&C.hideOutput(),s.setScrollValues(f),s.getScrollChecker().updateScrollMemory(n,f),_&&C.showOutput(null,this.animationClockAdvanceAmount),e.changed(C.cameraTransform(),!0),!0},o.getScrollDirection=function(e){var t=this.getRootKeyframe(e);return t?t.scrollability:n.LayoutScrollability.None},o.hasContentOverflow=function(){var t,o,r,a=i.ViewModel.previewVE._root.getValue(),s=a._interactionEngine.getAnimationEngine(),l=this.getScrollDirection(a);if(l===n.LayoutScrollability.Vertical)t=e.AnimationManager.Interrogation.visiblescroll_y,o=e.AnimationManager.Interrogation.scrollextent_y,r=s.interrogations().getValue(o)>s.interrogations().getValue(t);else if(l===n.LayoutScrollability.Horizontal)t=e.AnimationManager.Interrogation.visiblescroll_x,o=e.AnimationManager.Interrogation.scrollextent_x,r=s.interrogations().getValue(o)>s.interrogations().getValue(t);else{var u=a.getTraveler();r=!!u&&Obj.properties(u.getKeyframeData()).length>1}return r},o.isContentIdVisible=function(e,t){var i=o.getScrollDirection(e);return i===n.LayoutScrollability.None?o.isContentIdVisibleInStatefulWorld(e,t):o.isContentIdVisibleInScrollingWorld(e,t,i)},o.isContentIdVisibleInStatefulWorld=function(e,t){var n=e._interactionEngine.actor().getMostRecentActor(!1),r=e.getInteractionModel(),a=o.getFsmNodeIdFromContentId(r,t);if(!a)return!1;for(var s=n.getCurrentNode();s&&s.id!==a;)s=i.NavigationManager.getParentNode(s,r.nodes.getCollection());return!!s&&s.id===a},o.isContentIdVisibleInScrollingWorld=function(t,i,o){var r=t.cullingRootWatcher.getValue(),a=this.findLayoutElement(r,i);if(a){var s=0,l=0,u=a.getParentContainer();if(o===n.LayoutScrollability.Vertical){for(s=a.position.getTop();u;)s+=u.position.getTop(),u=u.getParentContainer();l=s+a.position.getHeight();var d=t._interactionEngine.getAnimationEngine().interrogations().getValue(e.AnimationManager.Interrogation.scroll_y)+5;return d>=s&&d<l}if(o===n.LayoutScrollability.Horizontal){for(s=a.position.getLeft();u;)s+=u.position.getLeft(),u=u.getParentContainer();l=s+a.position.getWidth();var c=t._interactionEngine.getAnimationEngine().interrogations().getValue(e.AnimationManager.Interrogation.scroll_x)+5;return c>=s&&c<l}}return!1},o.getRootKeyframe=function(e){var t=this.getRootActor(e);return t?t.getStartNodeKeyframeProperties():null},o.findLayoutElement=function(e,t){if(!e||!t)return null;if(e.getContentId()===t)return e;if(e instanceof n.ContainerLayoutElement)for(var i=e.children.getCollection(),o=0;o<i.length;o++){var r=this.findLayoutElement(i[o],t);if(r)return r}return null},o.isCaptionLayoutElement=function(e){return e&&e.getContentType()===n.ContentType.Caption},o.findParentLayoutElementVE=function(e){if(!e)return null;for(var t=e;t;){if(t instanceof i.LayoutVE)return t;t=t.parent}return null},o.animationClockAdvanceAmount=1e6,o}();i.NavigationHelper=o}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(i){var n=e.Model.RM,o=e.Common,r=function(){function e(){}return e.generateRestoreUrl=function(e,t){return e?o.UrlHelper.getInstance().storyRestoreUrl(StoryPageSettings.LookupId,e):null},e.generateRestoreUrlFromRestorePoint=function(e){var t=this.createRestoreState(e);return t?this.generateRestoreUrl(t.contentId,t.isDetailView):null},e.createRestoreState=function(e){if(!e)return null;var t=e.getTraveler(),n=t?t.getKeyframeData():null,o=!1,r=e.parent.parent.getConsumptionAppBar();r&&(o=r.getVisible());var a=this.getCurrentFsmNode(e);if(!a)return null;for(var s=null,l=null,u={};!s;){var d=e.getInteractionModel().getContentNavigationMarkerCollections().getCollection();u={};for(var c=0;c<d.length;c++){var p=d[c].getContentId();u[p]=!0;for(var g=d[c].navigationMarkers.getCollection(),h=0;h<g.length&&!s;h++)g[h].getFsmNodeId()==a.id?s=p:a.getKeyFrame().getType()==i.NavigationHelper.getDetailViewKeyFrameType()&&a.getKeyFrame().layoutElements.getCollection()[0].getContentId()==p&&(s=p,l=!0)}if(!s){var y=i.NavigationManager.getParentNode(a,e.getInteractionModel().nodes.getCollection());if(!y)break;a=y}}return s=l?s:this.getVisibleContentId(e,a.getKeyFrame().layoutElements.getCollection().firstOrDefault(),u)||s,{contentId:s,appbarVisible:o,scrollApproximation:this.getApproximateScrollPosition(e),oldCoverageData:n,isDetailView:l}},e.restore=function(e){if(e){var t=e.getRestoreState();t&&(e.initializeTraveler(t.oldCoverageData),e._interactionEngine.getAnimationEngine().fastForward(),i.NavigationHelper.navigateToContentId(e,t.contentId,{snapScene:!0,callerMessage:"RestoreState: restore",refreshNodes:!0,isDetailView:t.isDetailView,appbarVisible:t.appbarVisible}))}},e.getCurrentFsmNode=function(e){var t=i.NavigationHelper.getRootActor(e);return t?(t=t.getMostRecentActor(!0),t?t.getCurrentNode():null):null},e.getVisibleContentId=function(e,i,n){if(!i||!e)return null;var o=e.scroller.getValue();if(!o)return null;var r=o.fetchScrollValues();if(0==r[t.ScrollDirection.HORIZONTAL]&&0==r[t.ScrollDirection.VERTICAL])return null;var a=o.visibleViewportSize();return a.left+=r[t.ScrollDirection.HORIZONTAL],a.top+=r[t.ScrollDirection.VERTICAL],this.findLayoutContentId(a,i,n)},e.findLayoutContentId=function(e,t,i,o){if(!e||!t||!t.position)return null;o||(o=new BaseRect(0,0,0,0));var r=t.position,a=new BaseRect(r.getLeft()+o.left,r.getTop()+o.top,r.getWidth(),r.getHeight());if(!e.overlapsRect(a))return null;if(t instanceof n.ContainerLayoutElement){for(var s=t.children.getCollection(),l=0;l<s.length;l++){var u=this.findLayoutContentId(e,s[l],i,a);if(u)return u}return null}var d=t.getContentId();return i[d]?d:null},e.getApproximateScrollPosition=function(e){var i=e.scroller.getValue(),o=e.cullingRootWatcher.getValue();if(!i||!o||!o.getScrollability)return null;var r=i.fetchScrollValues();0==r[t.ScrollDirection.HORIZONTAL]&&0==r[t.ScrollDirection.VERTICAL]&&(r=i.getScrollChecker().fetchStateScroll(o.id));var a=0;return o.position.getWidth()>0&&o.getScrollability()===n.LayoutScrollability.Horizontal?a=r[t.ScrollDirection.HORIZONTAL]/o.position.getWidth():o.position.getHeight()>0&&o.getScrollability()===n.LayoutScrollability.Vertical&&(a=r[t.ScrollDirection.VERTICAL]/o.position.getHeight()),a},e}();i.RestoreState=r}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){!function(e){var t=function(){function e(e){this.triggerManager=e}return e.prototype.getTriggerSetsForEvent=function(e){return[{modelTriggerSet:e.triggerSet,firedTriggerIndex:e.triggerIndex,isMouseDown:!1,isKeyHeld:!1}]},e}();e.TimingEventMapper=t}(e.ViewElements||(e.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function t(e){this.triggerManager=e}return t.prototype.getTriggerSetsForEvent=function(t){return e.Utilities.weblog("im","swipe detected! "+TDB.Touch.SwipeDirection[t.direction]),this.getTriggerSetsBySwipe(t.direction)},t.prototype.getTriggerSetsBySwipe=function(e){return this.triggerManager.findTriggerSets(i.TriggerMethod.Swipe,function(t){if(t.getMethod()===i.TriggerMethod.Swipe){var n=t.getKeyNames().toUpperCase();if(e===TDB.Touch.SwipeDirection.UP&&"UP"===n)return!0;if(e===TDB.Touch.SwipeDirection.DOWN&&"DOWN"===n)return!0;if(e===TDB.Touch.SwipeDirection.LEFT&&"LEFT"===n)return!0;if(e===TDB.Touch.SwipeDirection.RIGHT&&"RIGHT"===n)return!0}return!1})},t}();t.TouchEventMapper=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){function i(e,t){for(var i=t.modelTriggerSet.triggers.getCollection(),n=0;n<i.length;n++)if(i[n].selectMethods.getCollection().some(e))return t.firedTriggerIndex=n,!0;return!1}var n=e.Model.RM,o=function(o){function r(e,i){var n=o.call(this,e)||this;return n.engine=e,n.onTimeout=i,n.eventMappers={},n.runningTimers={},n.triggerSetMap=TDB.watcherTag(596476163,n,n,n.createTriggersetMap),n.eventMappers[t.EventType.Keyboard]=new t.KeyboardEventMapper(n),n.eventMappers[t.EventType.Mouse]=new t.MouseEventMapper(n),n.eventMappers[t.EventType.Touch]=new t.TouchEventMapper(n),n.eventMappers[t.EventType.Timing]=new t.TimingEventMapper(n),n.eventMappers[t.EventType.Client]=new t.ClientEventMapper(n),n}return __extends(r,o),r.getTriggerSets=function(e){return e.triggerSets.getCollection()},r.edgeHasTriggerSet=function(e,t){void 0===t&&(t=null);var i=e.triggerSets.getCollection();return 0===i.length||ArrayExtensions.contains(i,t)},r.prototype.getInteractionEngine=function(){return this.engine},r.prototype.mapEventToTriggerSets=function(e){var t=this.triggerSetMap.getValue();for(var i in t)t[i].forEach(function(e){e.firedTriggerIndex=-1,e.isKeyHeld=!1,e.isMouseDown=!1});var o=null;return this.hasTriggers()&&(o=this.eventMappers[e.eventType].getTriggerSetsForEvent(e.inputEvent,e.focusedElement))&&o.some(function(e){return e.isKeyHeld||e.isMouseDown&&e.modelTriggerSet.getBehaviors().has(n.TriggerSetBehaviors.IsDefaultNavigationTriggerSet)})&&(o=this.findTriggerSets(n.TriggerMethod.Timing).filter(function(e){return e.modelTriggerSet.getBehaviors().has(n.TriggerSetBehaviors.IsRevealTriggerSet)}).concat(o)),o},r.prototype.findTriggerSets=function(e,t){var n=this.triggerSetMap.getValue()[e];return n?(t||(t=function(){return!0}),n.filter(i.bind(null,t))):[]},r.prototype.isTimingTriggerSet=function(e){var t=this.triggerSetMap.getValue()[n.TriggerMethod.Timing];return!!t&&t.some(function(t){return t.modelTriggerSet.id===e.id})},r.prototype.isAutoAdvanceTriggerSet=function(e,t){var o=this.triggerSetMap.getValue()[n.TriggerMethod.Client];return!!o&&o.some(function(n){return n.modelTriggerSet.id===e.id&&i(function(e){return r.isAutoAdvanceSelectMethod(e,t)},n)})},r.prototype.killDelayTimer=function(e){var t=e.inputEvent;if(t.triggerSet){var i=this.runningTimers[t.triggerSet.id];i&&(clearTimeout(i),delete this.runningTimers[t.triggerSet.id])}},r.prototype.startDelayTimers=function(t,i){var o=this;void 0===i&&(i=null),i||this.killTimers();var r=this.triggerSetMap.getValue()[n.TriggerMethod.Timing];r&&0!==r.length&&r.map(function(e){return e.modelTriggerSet}).forEach(function(r){i&&i.id!==r.id||(i&&e.Utilities.weblog("timer","timer trigger was reset: "+r.id),r.triggers.getCollection().forEach(function(i,a){return i.selectMethods.getCollection().forEach(function(i){if(i.getMethod()===n.TriggerMethod.Timing){var s=500,l=t&&i.getTimingSelect().getFireOnStart();if(l)e.Utilities.weblog("timer","immediately firing timer trigger: "+r.id);else{s=o.parseInterval(i.getTimingSelect().getTime()),e.Utilities.weblog("timer","setting up timer trigger: "+r.id+" for interval: "+s);var u=i.getTimingSelect().getVariance();if(u){var d=Math.floor(Math.random()*u);s=Math.max(0,s+d),e.Utilities.weblog("timer","adjusted timer trigger: "+r.id+" to interval: "+s)}}o.addTimer(s,l,r,a)}})}))})},r.isUserActionTrigger=function(e){return e===n.TriggerMethod.Click||e===n.TriggerMethod.DoubleClick||e===n.TriggerMethod.Swipe||e===n.TriggerMethod.Keypress},r.prototype.dispose=function(){o.prototype.dispose.call(this),this.killTimers(),this.onTimeout=null},r.prototype.parseInterval=function(e){var t=e.split(":");return 3===t.length?6e4*parseInt(t[0])+1e3*parseInt(t[1])+parseInt(t[2]):(StoryLog.StructuredTraceTag(596476164,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Invalid time interval string "+e,null),0)},r.prototype.addTimer=function(e,t,i,n){if(this.onTimeout&&!this.runningTimers[i.id]){var o=this.onTimeout;this.runningTimers[i.id]=platform.setTimeout(function(){o({triggerSet:i,triggerIndex:n,quickTrigger:t})},e)}},r.prototype.killTimers=function(){for(var e in this.runningTimers)clearTimeout(this.runningTimers[e]);this.runningTimers={}},r.prototype.hasTriggers=function(){var e=this.engine.getInteractionModel();return!(!e||!e.triggerSets)},r.prototype.createTriggersetMap=function(e){var t=this.engine.getInteractionModel(e);if(!t)return{};for(var i={},n=t.triggerSets.getCollection(e),o=this.getUseableTriggerSetIds(t,n),r=0;r<n.length;r++)!function(t){for(var r=n[t].triggers.getCollection(e),a=0;a<r.length;a++)r[a].selectMethods.getCollection(e).forEach(function(r){var a=r.getMethod(e);i[a]||(i[a]=[]),ArrayExtensions.contains(o,n[t].id)&&i[a].push({firedTriggerIndex:-1,modelTriggerSet:n[t],isMouseDown:!1,isKeyHeld:!1})})}(r);return i},r.prototype.getUseableTriggerSetIds=function(e,t){var i=e.nodes.getCollection().mapmany(function(e){return e.edges.getCollection().mapmany(function(e){return r.getTriggerSets(e).map(function(e){return e.id})})});return t.forEach(function(e){var t=!1;e.triggers.getCollection().forEach(function(n){n.defaultActions.getCollection().length>0?i.push(e.id):t||(t=n.selectMethods.getCollection().some(function(e){return r.isAutoAdvanceSelectMethod(e)}))}),t&&i.push(e.id)}),i},r.isAutoAdvanceSelectMethod=function(e,t){if(e.objectType==n.ObjectType.ClientSelectMethod){var i=e.getSignal();if(i instanceof n.AutoAdvanceClientSignal)return null==t||void 0==t||i.getIsReset()===t}return!1},r.quickTriggerRetryDelay=500,r}(Disposable);t.TriggerManager=o}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){!function(t){var i=e.Model.RM,n=function(){function e(e){this.triggerManager=e}return e.prototype.getPickingTriggerSet=function(e,t,n){var o=this.triggerManager.findTriggerSets(e,function(o){return o.getMethod()===e&&(o.getTarget()!==i.TriggerTarget.None&&o.getTargetId()===t&&(!n||n(o)))});return o&&0!==o.length?(o.length>1&&StoryLog.TraceTag(596465025,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"More than one trigger set found for element with ID "+t,null),o[0]):null},e}();t.TriggerSetPicker=n}(t.ViewElements||(t.ViewElements={}))}(e.View||(e.View={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM,n=e.AnimationHelper,o=function(){function t(e){this.interactionModel=e,this.keyframeSelectorStack=[],this.keyframeMap=this.extractKeyframeData(),this.allKeyframes=Obj.values(this.keyframeMap),this.keyframeCount=this.allKeyframes.length}return t.prototype.setEvaluator=function(e){this.expressionEvaluator=e},t.prototype.getKeyframe=function(e){return this.keyframeMap[e]},t.prototype.pushSelectors=function(e,t){this.keyframeSelectorStack.push({keyframeSelectors:e,inheritedKeyFrameId:t})},t.prototype.popSelectors=function(){return this.keyframeSelectorStack.pop()},t.prototype.getActionSubjects=function(e,t){var o=this,r=[];return n.measurePerformance(n.PerfMeasureNames.GetActionSubjects,function(){var a=e.getKeyframeTarget();a===i.KeyframeTarget.NotSpecified&&(a=t.getKeyframeTarget()),a===i.KeyframeTarget.NotSpecified&&(a=i.KeyframeTarget.TransitionSource);var s=e.getKeyframeSelectorName();switch(s&&""!==s.trim()&&(a=i.KeyframeTarget.Select),a){case i.KeyframeTarget.TransitionSource:r.push(o.keyframeMap[t.getSourceKeyframeId()]);break;case i.KeyframeTarget.TransitionTarget:r.push(o.keyframeMap[t.getTargetKeyframeId()]);break;case i.KeyframeTarget.Inherit:var l=o.keyframeSelectorStack.length;if(l>0){var u=o.keyframeSelectorStack[l-1].inheritedKeyFrameId;u?r.push(o.keyframeMap[u]):n.log(n.AnimationLogLabels.storyboard,function(){return"Storyboard: "+t.getStoryboardName()+" action inherited a null keyframe.  Ignoring action."})}break;default:var d=o.getKeyframeSelectorContext(e);d.keyframeSelectors.length&&(r=o.selectKeyframes(t,d))}!r.length&&(e instanceof i.IfAction||e instanceof i.SetSymbol)&&r.push(null)},t.getStoryboardName()+"."+i.StructType[e.structType]),r},t.prototype.extractKeyframeData=function(){for(var t={},n=this.interactionModel.keyFrames.getCollection().filter(function(t){var i=t.layoutElements.getCollection().first();if(!i)throw e.RethrowLogger.createError("Keyframe id: '"+t.id+"' Type: '"+t.getType()+"' does not have a backing layout element.");return!i.getParentProjection}),o=0,r=n;o<r.length;o++){var a=(p=r[o]).layoutElements.getCollection().first(),s=p.getMetaData();s||(s=new i.KeyframeMetaData,e.Utilities.weblog("animation","Keyframe id: '"+p.id+"' Type: '"+p.getType()+"' does not have any meta data."));var l=s.getKeyframeFlags();l||(l=new Flags(i.KeyframeFlags,0));var u={id:p.id,layoutElementId:a.id,keyframeType:p.getType(),left:a.position.getLeft(),top:a.position.getTop(),width:a.position.getWidth(),height:a.position.getHeight(),zOrder:a.getZOrder(),contentId:a.getContentId(),parentId:s.getParentKeyframeId(),croppedChildImageKeyframeId:s.getCroppedChildImageKeyframeId(),locationX:s.getLocationX(),locationY:s.getLocationY(),locationZ:s.getLocationZ(),rotation2D:s.getRotation2D(),scaleX2D:s.getScaleX2D(),scaleY2D:s.getScaleY2D(),lod:s.getLod(),rowIndex:s.getRowIndex(),gridRow:s.getGridRow(),gridRowCount:s.getGridRowCount(),flags:l,parentKeyframeType:"",childrenIds:[],transformIndices:s.transformIndices.getCollection()};t[p.id]=u}for(var d=0,c=n;d<c.length;d++){var p=c[d];if((u=t[p.id]).parentId){var g=t[u.parentId];g&&(u.parentKeyframeType=g.keyframeType,g.childrenIds.push(u.id))}}return t},t.prototype.getKeyframeSelectorContext=function(e){var t={keyframeSelectors:[],inheritedKeyFrameId:null},n=this.keyframeSelectorStack.length,o=e.getKeyframeSelector();if(o&&o.getInitialKeyframe()===i.KeyframeTarget.Inherit&&n)t.inheritedKeyFrameId=this.keyframeSelectorStack[n-1].inheritedKeyFrameId;else if(!o){var r=e.getKeyframeSelectorName(),a=this.keyframeSelectorStack.firstOrDefault(function(e){return!!(o=e.keyframeSelectors.firstOrDefault(function(e){return e.getName()===r}))});a&&(t.inheritedKeyFrameId=a.inheritedKeyFrameId)}return o&&t.keyframeSelectors.push(o),t},t.prototype.selectKeyframes=function(t,n){var o=this,r=this.getInitialKeyframe(n,t),a=null===r?this.allKeyframes:[r],s=n.keyframeSelectors[0];return s.selectionDirectives.getCollection().forEach(function(n){var r=n.getIncludeSelf()?a:[];r=ArrayExtensions.unique(r.concat(o.handleAppliesTo(a,n.getAppliesTo())),function(e){return e.id}),a=o.handleDirective(n,r,t);var l=n.getComputedIndex();if(l){if(l.getPropertyType()!==i.ComputedValueType.Integer)throw e.RethrowLogger.createError("Unsupported type for keyframe selector computed value '"+l.getPropertyType()+"'. Only Integer is supported.");var u=o.expressionEvaluator.evaluate(l).result;u>0&&u<a.length&&(a=[a[u]])}s.getUseCroppedChild()&&(a=a.filter(function(e){return!!e.croppedChildImageKeyframeId}).map(function(e){return o.keyframeMap[e.croppedChildImageKeyframeId]})),a.length&&(s.getUseFirstResult()?a=[a[0]]:s.getUseLastResult()&&(a=[a[a.length-1]]))}),a},t.prototype.handleDirective=function(e,t,n){if(e instanceof i.ByKeyframeType){var o=e.getKeyframeTypes().split(",").filter(function(e){return!!e});if(o.length)return t.filter(function(e){return ArrayExtensions.contains(o,e.keyframeType)})}else if(e instanceof i.MatchingKeyframe)return this.handleMatchingKeyframe(e,t,n);return t},t.prototype.handleMatchingKeyframe=function(e,t,n){var o=e.getMatchTo()===i.KeyframeTarget.TransitionTarget?this.keyframeMap[n.getTargetKeyframeId()]:this.keyframeMap[n.getSourceKeyframeId()],r=e.getMatchMethod()===i.MatchMethod.ByLod?function(e){return e.lod===o.lod}:function(e){return e.contentId===o.contentId},a=e.getMatchOperation()===i.MatchOperation.InEquality;return t.filter(function(e){var t=r(e);return a?!t:t})},t.prototype.handleAppliesTo=function(e,t){var n=this,o=null;switch(t){case i.AppliesTo.Children:o=e.mapmany(function(e){return e.childrenIds}).map(function(e){return n.keyframeMap[e]});break;case i.AppliesTo.Descendants:o=e.mapmany(function(e){return n.getDescendants(e)});break;case i.AppliesTo.Parent:o=e.map(function(e){return n.keyframeMap[e.parentId]}).filter(function(e){return!!e});break;case i.AppliesTo.Siblings:var r=e.map(function(e){return e.id});o=this.handleAppliesTo(this.handleAppliesTo(e,i.AppliesTo.Parent),i.AppliesTo.Children).filter(function(e){return!ArrayExtensions.contains(r,e.id)});break;case i.AppliesTo.Ancestors:o=e.mapmany(function(e){return n.getAncestors(e)})}return o||(o=e),o},t.prototype.getAncestors=function(e){for(var t=[],i=e.parentId;i;)e=this.keyframeMap[i],t.push(e),i=e.parentId;return t},t.prototype.getDescendants=function(e){var t=this,i=[];i.length=this.keyframeCount;var n=this.getDescendantsWorker(e.id,i,0);return i.length=n,i.map(function(e){return t.keyframeMap[e]})},t.prototype.getDescendantsWorker=function(e,t,i){t[i++]=e;for(var n=0,o=this.keyframeMap[e].childrenIds;n<o.length;n++){var r=o[n];i=this.getDescendantsWorker(r,t,i)}return i},t.prototype.getInitialKeyframe=function(e,t){var n=e.keyframeSelectors[0].getInitialKeyframe(),o=e.inheritedKeyFrameId;if(n===i.KeyframeTarget.NotSpecified)return null;switch(n){case i.KeyframeTarget.TransitionSource:o=t.getSourceKeyframeId();break;case i.KeyframeTarget.TransitionTarget:o=t.getTargetKeyframeId()}return this.keyframeMap[o]},t}();t.KeyframeProvider=o}(e.StoryboardProcessing||(e.StoryboardProcessing={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM,n=e.AnimationHelper,o=function(o){function r(e,i){var r=o.call(this,e)||this;return n.measurePerformance(n.PerfMeasureNames.StoryboardProcessorInitialization,function(){r.hydratedAnimations={},r.computedOnCompleteFunctions={},r.keyframeProvider=new t.KeyframeProvider(i),r.symbolManager=new t.SymbolManager(r.keyframeProvider,i),r.actionHandlers=t.ActionHandlers.createActionHandlerMapping(),r.helpers={runActions:r.runActions.bind(r),addComputedSymbol:r.symbolManager.addComputedSymbol.bind(r.symbolManager),evaluateComputeValue:r.symbolManager.evaluate.bind(r.symbolManager)},r.storyboardMap=ArrayExtensions.toDictionary(i.renderModel.renderModelRoot.getStoryboards().getCollection(),function(e,t){t[r.createStoryboardLookupId(e.getScope(),e.getName())]=e})}),r}return __extends(r,o),r.prototype.hydrateAnimationSequence=function(e,i){void 0===i&&(i=!1);for(var o=e.animations.getCollection(),r=new t.AnimationTiming,a=this,s=0;s<o.length;s++)!function(t){var s=o[t],l=s.storyboardExecutionContexts.getCollection();if(l.length>0){var u=a.hydratedAnimations[s.id];u||(n.log(n.AnimationLogLabels.storyboard,function(){return(i?"(look ahead) ":"")+"Processing storyboards forAnimation ID: "+s.id+", Sequence ID: "+e.id+"\n\tName: "+s.name}),a.hydrateAnimation(s,l,i,r),u=s),e.replaceAnimation(u,t)}}(s);r.maxDuration!==t.infiniteDuration&&(this.computedOnCompleteFunctions[e.id]=t.AnimationTiming.createDelayFunction(r,r.maxDuration));var l=this.computedOnCompleteFunctions[e.id];l&&(t.StoryboardValidator.compareAnimationsCompleteFunctions(l,e.animationsCompleteFunction,e),e.animationsCompleteFunction=l)},r.prototype.hydrateAnimation=function(i,o,r,a){var s=this,l={animationFunctions:[],functionCount:0};l.animationFunctions.length=500;for(var u=[],d=t.StoryboardValidator.createActionDataFromAnimation(i),c=0,p=o;c<p.length;c++)!function(i){n.measurePerformance(n.PerfMeasureNames.ProcessStoryboard,function(){var o=s.createStoryboardLookupId(i.getStoryboardScope(),i.getStoryboardName()),c=s.storyboardMap[o];if(!c)throw e.RethrowLogger.createError("Could not find storyboard. Scope: '"+i.getStoryboardScope()+"'  Name: '"+i.getStoryboardName()+"'");n.log(n.AnimationLogLabels.storyboard,function(){return(r?"(look ahead) ":"")+"Processing storyboard ID: "+o}),s.resetExpressionEvaluator(),s.keyframeProvider.pushSelectors(c.keyframeSelectors.getCollection(),null),i.getResetTiming()&&(a=new t.AnimationTiming),s.executeActions(c.actions.getCollection(),i,new t.StoryboardActionChecker(i,u),a,l),t.StoryboardValidator.markGeneratedActions(u,d,i.getStoryboardName(),i.getSalt()),s.keyframeProvider.popSelectors()},i.getStoryboardName())}(p[c]);l.animationFunctions.length=l.functionCount,t.StoryboardValidator.checkForUnhandledActions(d),t.StoryboardValidator.compareGeneratedAnimations(l.animationFunctions,i.animationFunctions.collection),i.animationFunctions.collection=l.animationFunctions,i.hydrated=!0,this.hydratedAnimations[i.id]=i},r.prototype.runActions=function(e,t,i,n,o,r,a){this.keyframeProvider.pushSelectors(t,n?n.id:null),this.executeActions(e,i,o,r,a),this.keyframeProvider.popSelectors()},r.prototype.executeActions=function(t,o,r,a,s){for(var l=this,u=0;u<t.length;u++)!function(u){for(var d=t[u],c=l.keyframeProvider.getActionSubjects(d,o),p=0,g=0;g<c.length;g++)!function(t){var u=c[t],g=d.structType,h=null;if(n.log(n.AnimationLogLabels.storyboardVerbose,function(){return"Invoking Action: "+i.StructType[g]+" from Storyboard: "+o.getStoryboardName()+" Subject Type: "+(u?u.keyframeType:"null")+" ElementId: "+(u?u.layoutElementId:"null")+" KeyframeSelectorName: "+d.getKeyframeSelectorName()+"\n"}),r.isAnimationAction(g)&&!(h=r.checkAction(d,g,u)))return"continue";l.symbolManager.supplySymbols(c,t,o);var y={subject:u,storyboardContext:o,action:d,helpers:l.helpers,actionChecker:r,timingValues:e.AnimationHelper.getTimingValues(d,o,l.symbolManager),timing:a,generatedAnimations:s};p=y.timingValues.duration+y.timingValues.delay,l.invokeActionHandler(g,h,y)}(g);d.getAdvanceTimeBase()&&a.addDelay(p)}(u)},r.prototype.invokeActionHandler=function(t,o,r){var a=this.actionHandlers[t];if(!a)throw e.RethrowLogger.createError("Unable to locate a handler for storyboard action "+i.StructType[t]);var s;if(n.measurePerformance(n.PerfMeasureNames.HandleStoryboardAction,function(){return s=a(r)},i.StructType[t]),s)for(var l=0,u=s;l<u.length;l++){var d=u[l];d.actionData=o,o.needsMerge?e.AnimationHelper.mergeFunctionExpressions(r.generatedAnimations.animationFunctions,d):(r.generatedAnimations.animationFunctions[r.generatedAnimations.functionCount++]=d,r.generatedAnimations.functionCount%500==0&&(r.generatedAnimations.animationFunctions.length+=500))}},r.prototype.resetExpressionEvaluator=function(){this.symbolManager.clearSymbols()},r.prototype.createStoryboardLookupId=function(e,t){return e+"."+t},r}(Disposable);t.StoryboardProcessor=o}(e.StoryboardProcessing||(e.StoryboardProcessing={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t;!function(e){e[e.Glanced=0]="Glanced",e[e.Quick=1]="Quick",e[e.Deep=2]="Deep"}(t=e.Grade||(e.Grade={}));var i=function(){function e(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.glancedGradeCount=e,this.quickGradeCount=t,this.deepGradeCount=i}return e.prototype.incrementGrade=function(e){e===t.Glanced?this.glancedGradeCount++:e===t.Deep?this.deepGradeCount++:this.quickGradeCount++},e.prototype.getLoggingObject=function(){return{"Glanced grade count":this.glancedGradeCount,"Quick grade count":this.quickGradeCount,"Deep grade count":this.deepGradeCount}},e.prototype.calculateOverallGrade=function(){var e=(this.quickGradeCount+2*this.deepGradeCount)/(this.glancedGradeCount+this.quickGradeCount+this.deepGradeCount);return e=isFinite(e)?e:0},e.prototype.addGradeCounter=function(e,t){void 0===t&&(t=1),this.glancedGradeCount+=e.glancedGradeCount*t,this.quickGradeCount+=e.quickGradeCount*t,this.deepGradeCount+=e.deepGradeCount*t},e}();e.GradeCounter=i}(e.Analytics||(e.Analytics={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t=function(){function e(){}return e}();e.GroupInteractableComponent=t}(e.Analytics||(e.Analytics={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t=function(){function e(){}return e}();e.GroupInteractableContainer=t}(e.Analytics||(e.Analytics={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t=function(){function e(){}return e}();e.MediaInteractable=t}(e.Analytics||(e.Analytics={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(e){var t=function(){function t(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0),this.timeSpent=0,this.id=i,this.startPoint=n,this.endPoint=o,this.quickGradeTimeThreshold=e,this.deepGradeTimeThreshold=t}return t.prototype.getId=function(){return this.id},t.prototype.isOnScreen=function(e,t){return this.isReadIndexOnScreen(e,t)||this.isReadIndexOnTopBoundaryOfScreen(e,t)||this.isReadIndexOnBottomBoundaryOfScreen(e,t)},t.prototype.incrementTimeSpent=function(e){this.timeSpent+=e},t.prototype.getTimeSpent=function(){return this.timeSpent},t.prototype.generateGrade=function(){return this.timeSpent<this.quickGradeTimeThreshold?e.Grade.Glanced:this.timeSpent<this.deepGradeTimeThreshold?e.Grade.Quick:e.Grade.Deep},t.prototype.isReadIndexOnScreen=function(e,t){return this.startPoint>=e&&this.endPoint<=t},t.prototype.isReadIndexOnTopBoundaryOfScreen=function(e,t){return this.startPoint<=e&&this.endPoint>=e},t.prototype.isReadIndexOnBottomBoundaryOfScreen=function(e,t){return this.startPoint<=t&&this.endPoint>=t},t}();e.ReadIndex=t}(e.Analytics||(e.Analytics={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM,n=function(){function e(n,o){var r=this;this.quickReadIndexThreshold=CommonSettings.AnalyticsQuickReadIndexThresholdInMilliseconds,this.deepReadIndexThreshold=CommonSettings.AnalyticsDeepReadIndexThresholdInMilliseconds,this.percentOfMediaRequiredForDeep=.95,this.mediaInteractedWith=[],this.groupInteractableContainers=[],this.comparisonsInSway=[],this.comparisonsInteractedWith=[],this.createGraderCounterFunc=o,this.totalMediaElementsInSway=n.filter(function(t){return t&&(t.getType()===e.videoKeyFrameId||t.getType()===e.audioKeyFrameId)}).length;var a=n[0];switch(this.scrollability=a?a.getScrollability():0,this.lastNavigationTime=Date.now(),this.currentViewport=new BaseRect(0,0,window.innerWidth,window.innerHeight),this.scrollability){case i.LayoutScrollability.Horizontal:var s=a.getSnapPointsHorizontal().getCollection();this.readIndexes=s.map(function(e){return new t.ReadIndex(r.quickReadIndexThreshold,r.deepReadIndexThreshold,e.getId(),e.getStartPoint(),e.getEndPoint())});break;case i.LayoutScrollability.Vertical:var l=a.getSnapPointsVertical().getCollection();this.readIndexes=l.map(function(e){return new t.ReadIndex(r.quickReadIndexThreshold,r.deepReadIndexThreshold,e.getId(),e.getStartPoint(),e.getEndPoint())});break;case i.LayoutScrollability.None:var u=n.filter(function(t){return t&&e.slideKeyFrameTypes.indexOf(t.getType())>=0});this.readIndexes=u.map(function(e){return new t.ReadIndex(r.quickReadIndexThreshold,r.deepReadIndexThreshold,e.id)});break;default:StoryLog.TraceTag(596464516,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"ReadRatioGrader was initialized with a keyframe with scrollablity that it did not understand."),this.readIndexes=[]}this.currentReadIndexId=this.readIndexes[0]?this.readIndexes[0].getId():"",n.filter(function(t){return t&&e.loggedFSMContainers.indexOf(t.getType())>=0}).forEach(function(e){if(e.layoutElements.getCollection()[0]instanceof i.ContainerLayoutElement){var t=e.layoutElements.getCollection()[0],n=r.findAllChildrenOfLoggedKeyFrameType(t);n.length>0?r.groupInteractableContainers.push({id:e.layoutElements.getCollection()[0].id,keyFrameType:e.getType(),components:n,currentVisibleComponent:n[0].id}):StoryLog.TraceTag(596456091,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,t.getKeyFrameType())}})}return e.prototype.getScrollability=function(){return this.scrollability},e.prototype.recordScrollMovement=function(e){var t,n,o=this,r=Date.now();this.scrollability==i.LayoutScrollability.Vertical?(t=this.currentViewport.top,n=this.currentViewport.bottom):this.scrollability==i.LayoutScrollability.Horizontal&&(t=this.currentViewport.left,n=this.currentViewport.right),this.readIndexes.filter(function(e){return e.isOnScreen(t,n)}).forEach(function(e){e.incrementTimeSpent(r-o.lastNavigationTime)}),this.currentViewport=e,this.lastNavigationTime=r},e.prototype.recordSlideMovement=function(e){var t=this;if(null!=this.readIndexes.firstOrDefault(function(t){return t.getId()===e})){var i=Date.now();this.readIndexes.firstOrDefault(function(e){return e.getId()===t.currentReadIndexId}).incrementTimeSpent(i-this.lastNavigationTime),this.currentReadIndexId=e,this.lastNavigationTime=i}},e.prototype.getPercentageOfReadIndexesSeen=function(){var e=this.readIndexes.filter(function(e){return e.getTimeSpent()>0}).length/this.readIndexes.length;return isFinite(e)?e:0},e.prototype.recordInteraction=function(t,i){if(e.loggedFSMNodes.indexOf(i)>=0){var n=!1;this.groupInteractableContainers.forEach(function(e){var i=e.components.firstOrDefault(function(e){return e.id===t});null!=i&&(e.currentVisibleComponent=t,i.viewed=!0,n=!0)}),n||StoryLog.TraceTag(596460246,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"No component was found when searching for a group container to record user interaction")}},e.prototype.registerComparisonInteractable=function(e){this.comparisonsInSway.addunique(e)},e.prototype.recordComparisonInteraction=function(e){this.comparisonsInSway.indexOf(e)>=0&&this.comparisonsInteractedWith.addunique(e)},e.prototype.recordMediaPlay=function(e,t,i){var n=this.mediaInteractedWith.firstOrDefault(function(t){return t.id===e});n||(n={id:e,lastPlayedTime:0,totalPlayTime:0,mediaDuration:t,canCapturePauseEvents:i,lastEventWasPlay:!0},this.mediaInteractedWith.push(n)),n.lastPlayedTime=Date.now(),n.lastEventWasPlay=!0},e.prototype.recordMediaPause=function(e,t,i){var n=this.mediaInteractedWith.firstOrDefault(function(t){return t.id===e});n?(n.lastEventWasPlay&&(n.totalPlayTime+=Date.now()-n.lastPlayedTime),n.lastEventWasPlay=!1):StoryLog.TraceTag(596461667,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"ReadRatioGrader attempted to record a media pause event without a corresponding play event")},e.prototype.calculateGrade=function(){var e=this,t=this.calculateReadIndexGrade(),i=this.createGraderCounterFunc();this.groupInteractableContainers.forEach(function(t){i.incrementGrade(e.calculateInteractableGrade(t))}),StoryLog.StructuredTraceTag(596443983,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Generated interactable grade",i.getLoggingObject());var n=this.createGraderCounterFunc();this.mediaInteractedWith.forEach(function(t){n.incrementGrade(e.calculateMediaInteractableGrade(t))});var o=this.totalMediaElementsInSway-this.mediaInteractedWith.length;o>=0?n.glancedGradeCount+=o:StoryLog.TraceTag(596460166,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"ReadRatioGrader is reporting interacting with "+this.mediaInteractedWith.length+" media elements when there are only "+this.totalMediaElementsInSway+" total number of media elements"),StoryLog.StructuredTraceTag(596443984,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Generated media grade",n.getLoggingObject());var r=this.createGraderCounterFunc();r.deepGradeCount+=this.comparisonsInteractedWith.length,r.glancedGradeCount+=this.comparisonsInSway.length-this.comparisonsInteractedWith.length,StoryLog.StructuredTraceTag(596443985,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Generated comparison grade",r.getLoggingObject());var a=this.createGraderCounterFunc();a.addGradeCounter(t),a.addGradeCounter(i,2),a.addGradeCounter(n,2),a.addGradeCounter(r,2);var s=a.calculateOverallGrade();return StoryLog.StructuredTraceTag(596443986,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Generated overall grade",a.getLoggingObject()),s},e.prototype.calculateReadIndexGrade=function(){var e=this.createGraderCounterFunc();return this.scrollability===i.LayoutScrollability.Horizontal||this.scrollability===i.LayoutScrollability.Vertical?this.recordScrollMovement(this.currentViewport):this.recordSlideMovement(this.currentReadIndexId),this.readIndexes.forEach(function(t){e.incrementGrade(t.generateGrade())}),StoryLog.StructuredTraceTag(596443987,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Generated snappoint grade",e.getLoggingObject()),e},e.prototype.findAllChildrenOfLoggedKeyFrameType=function(t){var n=this,o=[];return t.children.getCollection().forEach(function(t){if(e.loggedFSMNodes.indexOf(t.getKeyFrameType())>-1){var r={viewed:!1,id:t.id,keyFrameType:t.getKeyFrameType()};o.push(r)}else t instanceof i.ContainerLayoutElement&&(o=o.concat(n.findAllChildrenOfLoggedKeyFrameType(t)))}),o},e.prototype.calculateInteractableGrade=function(e){var i=e.components.length,n=e.components.filter(function(e){return e.viewed}).length;return 0===n?t.Grade.Glanced:i===n?t.Grade.Deep:t.Grade.Quick},e.prototype.calculateMediaInteractableGrade=function(e){e.lastEventWasPlay&&(e.totalPlayTime+=Date.now()-e.lastPlayedTime);var i=1e3*e.mediaDuration;return!e.canCapturePauseEvents||e.totalPlayTime>=i*this.percentOfMediaRequiredForDeep?t.Grade.Deep:t.Grade.Quick},e.loggedFSMContainers=["PhotoStack.Deck","SlideShow"],e.loggedFSMNodes=["PhotoStack.Clip","SlideShow.Clip"],e.slideKeyFrameTypes=["Story","Chapter","Section"],e.videoKeyFrameId="VideoThumbnail",e.audioKeyFrameId="AudioClip",e}();t.ReadRatioGrader=n}(e.Analytics||(e.Analytics={}))}(StoryApp||(StoryApp={}));var StoryApp;!function(e){!function(t){var i=e.Model.RM,n=function(){function n(t){var i=this;this.sessionAbandonTime=18e5,this.sessionAbandonCheckInterval=6e4,this.inSession=!0,this.uploadAnalytics=function(){if(i.storyAnalyticsEnabled&&i.inSession)if(i.args.dialogManager&&i.args.dialogManager.getCurrentDialog())StoryLog.TraceTag(596115474,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Analytics upload in AnalyticsLogger was blocked due to a dialog showing");else{var t=e.Common.UrlHelper.getInstance().storyAnalyticsUrl(i.lookupId),n=i.calculateAnalytics();if(i.analyticsLogDataAreEqual(i.lastUploadedData,n))StoryLog.TraceTag(595870369,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Analytics upload in AnalyticsLogger was blocked due to already uploading identical data");else{i.lastUploadedData=n;var o=!e.Utilities.browser.isIE;try{$.ajax(t+"?"+jQuery.param(n),{async:o,type:"POST",contentType:e.RequestManager.JsonContentType,description:"Submit Sway analytics",dataType:"json",error:function(e,t){StoryLog.TraceTag(596129874,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Analytics upload in AnalyticsLogger failed with status code: "+t)}})}catch(e){StoryLog.TraceTag(596460001,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Analytics upload in AnalyticsLogger failed: "+e.message)}}}},this.args=t,this.lookupId=t.lookupId,this.storyAnalyticsEnabled=t.analyticsUploadEnabled&&!t.isEditMode&&!StoryPageSettings.EditTokenRetrievalId,this.activityMonitor=t.activityMonitor,this.keyFrames=t.keyFrames,this.highestScrollPercentage=0,this.highestReadRatioGrade=0,this.consumptionStartTime=this.args.now(),this.onStoryOpened(),e.Utilities.addUnloadEventListener(function(){return i.onStoryClosed()},!1),window.addEventListener("blur",this.uploadAnalytics),this.timeOutIntervalCheckerId=this.args.setInterval(function(){i.uploadIfAbandoned()},this.sessionAbandonCheckInterval)}return n.prototype.updateKeyFrames=function(e){this.uploadAnalytics.call(this),this.keyFrames=e,this.readRatioGrader=new t.ReadRatioGrader(e,function(){return new t.GradeCounter})},n.prototype.onStoryOpened=function(){this.inSession=!0,this.didUploadAtEnd=!1,this.readRatioGrader=new t.ReadRatioGrader(this.keyFrames,function(){return new t.GradeCounter}),this.periodicUploadId=this.args.setInterval(this.uploadAnalytics,this.args.periodicUploadInterval)},n.prototype.onStoryScrolled=function(e,t){this.readRatioGrader.recordScrollMovement(t),e>this.highestScrollPercentage&&(this.highestScrollPercentage=e>1?1:e),1!=this.highestScrollPercentage||this.didUploadAtEnd||(this.uploadAnalytics.call(this),this.didUploadAtEnd=!0)},n.prototype.onMediaPlayed=function(e,t,i){this.readRatioGrader.recordMediaPlay(e,t,i)},n.prototype.onMediaPaused=function(e,t,i){this.readRatioGrader.recordMediaPause(e,t,i)},n.prototype.onFSMNodeChanged=function(e){this.readRatioGrader.recordSlideMovement(e.id);var t=e.layoutElements.getCollection()[0].id;this.readRatioGrader.recordInteraction(t,e.getType())},n.prototype.registerComparisonGroup=function(e){this.readRatioGrader.registerComparisonInteractable(e)},n.prototype.onComparisonInteractedWith=function(e){this.readRatioGrader.recordComparisonInteraction(e)},n.prototype.onStoryClosed=function(){this.uploadAnalytics.call(this),this.inSession=!1,this.args.clearInterval(this.timeOutIntervalCheckerId),this.args.clearInterval(this.periodicUploadId)},n.prototype.calculateAnalytics=function(){var e=this.activityMonitor.getTotalActiveTime(),t=this.calculateActiveTime();StoryLog.StructuredTraceTag(596129876,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"AnalyticsLogger time spent in session",{TimeSpent:t,InactiveTime:this.activityMonitor.getTotalInactiveTime(),ConsumptionStartTime:this.consumptionStartTime,Now:this.args.now(),ActivityMonitorActiveTime:e});var n=this.readRatioGrader.getScrollability()==i.LayoutScrollability.None?this.readRatioGrader.getPercentageOfReadIndexesSeen():this.highestScrollPercentage;return this.highestReadRatioGrade=Math.max(this.highestReadRatioGrade,this.readRatioGrader.calculateGrade()),{timeSpent:this.activityMonitor.getTotalActiveTime(),scrollDepth:n>1?1:n,readRatioGrade:this.highestReadRatioGrade}},n.prototype.calculateActiveTime=function(){return Math.max(0,this.args.now()-this.consumptionStartTime-Math.round(this.activityMonitor.getTotalInactiveTime()))},n.prototype.uploadIfAbandoned=function(){var e=this;this.activityMonitor&&this.activityMonitor.getMillisecondsSinceActive()>=this.sessionAbandonTime&&(this.onStoryClosed(),this.timeOutIntervalCheckerId=this.args.setInterval(function(){e.restartSessionIfActive()},this.sessionAbandonCheckInterval))},n.prototype.restartSessionIfActive=function(){var e=this;CommonSettings.ConsumerAnalyticsSessionReactivateEnabled&&this.activityMonitor&&this.activityMonitor.getMillisecondsSinceActive()<this.sessionAbandonTime&&(this.onStoryOpened(),this.args.clearInterval(this.timeOutIntervalCheckerId),this.timeOutIntervalCheckerId=this.args.setInterval(function(){e.uploadIfAbandoned()},this.sessionAbandonCheckInterval))},n.prototype.analyticsLogDataAreEqual=function(e,t){return void 0!==e&&void 0!=t&&(!(Math.abs(e.timeSpent-t.timeSpent)>1e4)&&(e.scrollDepth===t.scrollDepth&&e.readRatioGrade===t.readRatioGrade))},n}();t.AnalyticsLogger=n}(e.Analytics||(e.Analytics={}))}(StoryApp||(StoryApp={}));var StoryPageMain;!function(e){function t(t,a,s){if(CommonSettings&&(!StoryApp.Utilities||StoryApp.Utilities.checkDebugState(StoryApp.Utilities.DebugState.InitializeApplication))){var l;t&&(l=__assign({},t)),UX.LoadingBarrier.show();var u=new DeferredTask,d=new n(StoryApp.Preload.resourceFactory),c=StoryApp.Preload.driver;return i.NavigationContext.InitialType!==i.NavigationContextType.Unknown&&i.NavigationContext.InitialType!==i.NavigationContextType.Story&&(c=StoryApp.Preload.differentialDriver),c.queueOnLoad().then(function(){e.destroy().then(function(){StoryApp.RethrowLogger.logIfError(function(){var t=Task.fromResult(!0);i.NavigationContext.LandingPageDestroy&&(t=i.NavigationContext.LandingPageDestroy()),t.then(function(){i.NavigationContext.HomePageDestroy&&(t=i.NavigationContext.HomePageDestroy()),t.then(function(){l&&(i.SinglePageAppHelper.updateTransientCommonSettings(l.CommonSettings),s||i.SinglePageAppHelper.updatePersistentCommonSettings(l.CommonSettings),StoryPageSettings=l.StoryPageSettings),StoryApp.Utilities.isTeams&&(StoryPageSettings.EnableTraversalHistory=!1);var t=new StoryApp.Common.GlobalExceptionHandler;t.register(),o.ServiceSwitches=new r,o.ServiceSwitches.SetupSwitchesFromTransportFormat(CommonSettings.InitialWatchableSwitches),o.ServiceSwitches.siteDisabled.getValue()?window.location.href=StoryApp.Common.UrlHelper.getInstance().siteDisabledUrl():Function.prototype.bind?(e.initialize(t,d,l,a).then(function(e){return u.resolve(e)}),StoryApp.Preload.resourceLoaderFactory.setOnlineRegistration({isClientOnline:function(){return StoryApp.Common.Environment.getInstance().isClientOnline()},waitUntilClientIsOnline:function(){return StoryApp.Common.Environment.getInstance().waitUntilClientIsOnline()}})):window.location.href=StoryApp.Common.UrlHelper.getInstance().unsupportedBrowserUrl()})})})})}),u}}var i=StoryApp.Common,n=i.WatchableResourceFactory,o=StoryApp.Settings,r=StoryApp.Settings.WatchableSwitches;UnitTestMode||NoRunOnLoad||(CommonSettings.AuthoringFromLandingPageContextEnabled&&(i.NavigationContext.StoryPageInitialize=t,i.NavigationContext.StoryPageDestroy=function(){return e.destroy()}),i.NavigationContext.InitialType!==i.NavigationContextType.Unknown&&i.NavigationContext.InitialType!==i.NavigationContextType.Story||t(null,null,!1).then(function(e){i.NavigationContext.InitialType===i.NavigationContextType.Story&&(HistoryManager.getHistoryManagerInstance().navigate(location.href,function(e,i){return t(e,i,!0)},e,document.title,!0),StoryApp.Preload.differentialDriver.loadResources(function(){return!!i.NavigationContext.HomePageInitialize}))}))}(StoryPageMain||(StoryPageMain={})),StoryLog.BufferedTraceTag(596444821,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize");var StoryPageMain;!function(e){function t(){var e=StoryAudience[StoryPageSettings.StoryAudience],t=StoryAudience[StoryPageSettings.StoryDefaultAudience],i=StoryPageSettings.HasPassword,n=StoryPageSettings.PasswordScope;return new I.SharingManager(new I.SharingManagerApi,e,t,i,n)}function i(e,i,o,r,a,s,l,u,d){if(StoryLog.BufferedTraceTag(596444822,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel",{pageId:s}),null===e.getValue())return StoryLog.TraceTag(596476374,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Error attempting to call GetStory."),StoryApp.Utilities.checkDebugState(StoryApp.Utilities.DebugState.None)&&StoryApp.Utilities.tryRefreshOnce("ModelLoadFailed_Consumer"),!1;if(StoryApp.Utilities.query.has(StoryApp.Common.UrlHelper.URLParamRetry))try{window.history.replaceState(null,"",window.location.pathname+StoryApp.Utilities.query.erase(StoryApp.Common.UrlHelper.URLParamRetry))}catch(e){StoryLog.StructuredTraceTag(596476375,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Failed to remove retry parameter from URL.",{message:e.message},e.stack)}if(!StoryApp.Utilities.checkDebugState(StoryApp.Utilities.DebugState.CreateChrome))return StoryLog.BufferedTraceTag(596444823,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel end early (CreateChrome)",{pageId:s}),!1;StoryLog.BufferedTraceTag(596444824,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel creating args",{pageId:s}),C.RenderModel=e;var c=o,p=TDB.watchableTag(596476376,null,!1),g=_.PageRootScenario[_.PageRootScenario.OpenStory_View],h=t();StoryLog.BufferedTraceTag(596444825,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel creating Args before viewModelArgs",{pageId:s});var y={createView:function(e){StoryLog.BufferedTraceTag(596444826,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel createView",{pageId:s});var t=new b.CurrentStory(StoryPageSettings,C.RenderModel,r),i=StoryApp.RethrowLogger.logIfError(function(){return new _.StoryPageVE(e,{userState:I.UserState.getInstance(),currentStory:t,sharingManager:h,resourceFactory:l,scrollPositionTelemetry:_.ScrollPositionTelemetry.getInstance(),historyClientId:d})});return _.ViewModel=i,StoryLog.BufferedTraceTag(596444827,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel createView end",{pageId:s}),i},initializeView:function(){StoryLog.BufferedTraceTag(596444828,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel initializeView",{pageId:s}),_.ViewModel.setup(StoryPageSettings.Mode,i,p,c),u&&u(_.ViewModel.fullScreenManager),StoryLog.BufferedTraceTag(596444829,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel initializeView end",{pageId:s})},parentElement:$(StoryApp.Utilities.eventWrapperSelector)[0],scenario:g,creationPolicy:a,pageId:s};return StoryLog.BufferedTraceTag(596444830,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel createAndAttach",{pageId:s}),_.PageRootVE.createAndAttach(y),StoryApp.Common.MessageBus.getInstance().fireMessage(StoryApp.Common.MessageType.StoryPageReady),StoryLog.BufferedTraceTag(596444831,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel Embedded check",{pageId:s}),StoryPageSettings.Mode===StoryViewMode.Embedded&&StoryApp.Common.UrlHelper.getInstance().supportsNotifications(document.referrer)&&(StoryLog.BufferedTraceTag(596444832,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel Embedded supportsNotifications",{pageId:s}),_.DomEventRegister.getInstance().enableFocusNotificationInEmbed(),window.parent.postMessage("StoryLoaded","*")),n(!1),v(),null!=StoryPageSettings.JoinResult&&StoryPageSettings.JoinResult!==StoryJoinResult.CanJoin&&P.createAndShow(StoryPageSettings.LookupId,StoryPageSettings.JoinResult),StoryApp.Utilities.checkDebugState(StoryApp.Utilities.DebugState.None)&&_.NavigationHelper.hasContentOverflow()&&A.StoryFirstRunHelper.triggerPlayEntered(),(h.getCurrentSharingLevel()!==StoryAudience.AnyoneWithLink||StoryPageSettings.IsOwner)&&(StoryPageSettings.IsOwner?A.FirstRunTriggers.digitalPrintEntryPoint():A.FirstRunTriggers.shareSwayAADRecipients()),StoryLog.BufferedTraceTag(596444833,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::setupRenderModel end",{pageId:s}),!0}function n(e){if(window&&window.PageExecutionBegin){var t=Date.now()-window.PageExecutionBegin.getTime();StoryLog.StructuredTraceTag(596465045,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Loading screen hidden",{ms:t,fm:StoryPageSettings.EnableFirstModel?1:0,authoring:e?1:0})}}function o(e){if(StoryLog.BufferedTraceTag(596444834,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::commonInitializePrePageAttach",{pageId:e}),StoryLog.setupForStoryPage(StoryPageSettings.StoryId,StoryPageSettings.LookupId,StoryPageSettings.Mode),StoryApp.RequestManager.CommonRequestHeaders.addCommonHeader(StoryApp.Common.CommonRequestHeaders.StoryIdHeader,StoryPageSettings.StoryId),StoryApp.RequestManager.CommonRequestHeaders.addCommonHeader(StoryApp.Common.CommonRequestHeaders.LookupIdHeader,StoryPageSettings.LookupId),StoryApp.RequestManager.CommonRequestHeaders.addCommonHeader(StoryApp.Common.CommonRequestHeaders.WebClientVersionHeader,StoryPageSettings.ClientVersion.toString()),StoryApp.View.Common.modernFontLoaderAvailable()?StoryApp.View.Common.currentFontLoader().set(e,new StoryApp.View.Common.ApiFontLoader):StoryApp.View.Common.currentFontLoader().set(e,new StoryApp.View.Common.PollingFontLoader),CommonSettings.ContextualFirstRunEnabled){var t=StoryPageSettings.Mode;A.StoryFirstRunHelper.initializeSessionCount(t),A.initializeFirstRunManager(t,A.StoryFirstRunHelper.getFREVisibility(t,StoryPageSettings.EmbedHostMode)),A.getCalloutManager().setup()}Cookie.setCookie("CDNFailureCount","0",{}),StoryApp.Utilities.RemoveMruRefQueryParam(),StoryApp.Utilities.removeQueryParams(StoryApp.Common.UrlHelper.URLParamAuthPvr,StoryApp.Common.UrlHelper.URLParamAuthUpn,StoryApp.Common.UrlHelper.URLParamV1),StoryLog.BufferedTraceTag(596444835,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::commonInitializePrePageAttach end",{pageId:e})}function r(e){StoryLog.BufferedTraceTag(596444864,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::commonInitializePostPageAttach",{pageId:e}),window.performance&&window.performance.now&&!isFinite(window.performance.now())&&StoryLog.TraceTag(596129222,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"performance.now returned a non-finite value");var t={activityMonitor:_.DomEventRegister.getInstance().getActivityMonitor(),actions:StoryApp.Identity.getActions(),setInterval:function(e,t){return platform.setInterval(e,t)},clearInterval:function(e){return clearInterval(e)},commonSettings:CommonSettings,allowAuthRenewalForIdleUsers:StoryApp.Common.Environment.getInstance().allowAuthRenewalForIdleUsers()},i=new StoryApp.Identity.PeriodicTokenRenewer(t);StoryApp.Identity.currentPeriodicTokenRenewer().set(e,i),i.start()}function a(e){if(StoryLog.BufferedTraceTag(596444865,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::commonConsumptionInitialize",{pageId:e}),_&&_.ViewModel&&_.ViewModel.getWorldId()&&_.ViewModel.getLayoutStyleId()){var t=_.PageRootScenario[_.PageRootScenario.OpenStory_View];ActionLogger.RecordClientAction(new ClientAction.PageLoadActionData(t,I.PIIHelper.obscureEmailPII(document.referrer),_.ViewModel.getWorldId().toString(),_.ViewModel.getLayoutStyleId().toString()))}}function s(e){StoryLog.BufferedTraceTag(596444866,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::commonDestroyStart",{pageId:e}),UX.LoadingBarrier.show(),StoryApp.View.Common.DialogManager.getInstance().closeCurrentDialog()}function l(e){StoryLog.BufferedTraceTag(596444867,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::commonDestroyEnd - start",{pageId:e}),StoryApp.Utilities.invokeNondestructiveHandlersOnPageDestruction(),PlatformPolyFill.Timing.clearIntervals(),PlatformPolyFill.Timing.clearTimeouts(),StoryLog.BufferedTraceTag(596444868,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::commonDestroyEnd - end",{pageId:e})}function u(t,n,s,l){if(I.NavigationContext.CurrentType=I.NavigationContextType.Story,s&&s.StoryPageEditSettings&&e.useStoryEditPage)return e.useStoryEditPage(!0),e.initialize(t,n,s,l);I.NavigationContext.IsConsumption=!0;var u=I.PageCompartmentManager.getInstance().createNewPageCompartment();StoryLog.BufferedTraceTag(596444869,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::initializeImpl",{pageId:u}),E=function(){return d(u)},o(u);var c=T=new e.RenderModelManager(n);return T.onApplyingRenderModel(function(e){b.IframeLoadingManager.getInstance().logRenderModelUpdate(e)}),T.initialize().then(function(e){StoryLog.BufferedTraceTag(596444870,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::initializeImpl - RM initialized",{pageId:u}),b.LayoutElementLogger.getInstance().blockCompletion(),platform.setImmediate(function(){if(T===c){var t=i(e,T.waitingForUpdate,T.shouldHidePreviewPane,T,new b.CreationPolicy,u,n,function(){T.fullScreenManager=_.ViewModel.fullScreenManager},l);if(b.LayoutElementLogger.getInstance().allowCompletion(),t){a(u);var o=StoryPerformance.PerformanceManager.getInstance();if(o.isPerformanceSupported()){var s=o.buildTTFVPerformanceReport("viewStory","viewStory");o.clearAll(),StoryLog.StructuredTraceTag(19248129,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Consumption performance report",s),StoryApp.Utilities.weblog("performance",JSON.stringify(s))}r(u)}else StoryLog.TraceTag(596476379,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Exiting initialization early because setupRenderModel failed.")}})}),StoryLog.BufferedTraceTag(596444871,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::initializeImpl end",{pageId:u}),Task.fromResult({CommonSettings:CommonSettings,StoryPageSettings:StoryPageSettings})}function d(e){StoryLog.BufferedTraceTag(596444873,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::destroyImpl",{pageId:e});var t=new DeferredTask;return CommonSettings.AuthoringFromLandingPageContextEnabled&&I.NavigationContext.CurrentType===I.NavigationContextType.Story?(s(e),platform.setImmediate(function(){StoryLog.BufferedTraceTag(596444874,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::destroyImpl - start destroying",{pageId:e}),A.deleteCalloutManager(),StoryApp.View.Common.IframeLoadingManager.releaseInstance(),T=void 0,StoryApp.Common.Environment.clearInstance(),StoryApp.Utilities.resetResizeCallbacks(),I.NavigationContext.CurrentType=I.NavigationContextType.None,StoryLog.resetForStoryPage(),platform.setImmediate(function(){l(e),TDB.ViewElementUpdater.clean(),I.PageCompartmentManager.getInstance().removePageCompartment(e),StoryApp.View.ViewElements.ViewModel=null,StoryApp.Model.RenderModel=null,StoryApp.Common.MessageBus.getInstance().fireMessage(StoryApp.Common.MessageType.StoryPageDispose),t.resolve(!0)})})):t.resolve(!0),StoryLog.BufferedTraceTag(596444875,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::destroyImpl end",{pageId:e}),t}function c(e){f()&&p(!0)}function p(t){void 0===t&&(t=!1),StoryLog.BufferedTraceTag(596444876,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::getUpdatedRenderModel"),_&&_.ViewModel&&(_.ViewModel.getViewElement().previewVE.setRestoreState(),void 0===T&&(T=new e.RenderModelManager),T.getUpdatedRenderModel(t),StoryLog.BufferedTraceTag(596444877,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::getUpdatedRenderModel end"))}function g(){_&&_.ViewModel&&_.ViewModel.getViewElement().previewVE.getRootVE().fireBackNavigationRequest()}function h(){_&&_.ViewModel&&_.ViewModel.getViewElement().previewVE.getRootVE().fireForwardNavigationRequest()}function y(e){_&&_.ViewModel&&_.ViewModel.getViewElement().previewVE.getRootVE().fireToCNavigationRequest(_.actionStringToToCActionType(e))}function m(){_&&_.ViewModel&&_.ViewModel.getViewElement().previewVE.getRootVE().fireHomeNavigationRequest()}function f(){StoryLog.BufferedTraceTag(596444878,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::canOverrideViewOptions");var e=!1,t=!1,i=_.ViewModel.viewOptionOverridesWatchable,n=i.getValue();return StoryPageSettings.ConsumptionWorldSwitchFeatureEnabled&&_.ViewModel.consumptionWorldSwitchAllowed.getValue()?(n.getConsumptionWorldId()||(n.setConsumptionWorldId(b.LayoutUtilities.getDefaultWorldId(C.RenderModel.getValue())),t=!0),e=!0):n.getConsumptionWorldId()&&(StoryLog.TraceTag(596476380,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Attempted to change world of story, but feature is disabled."),n.setConsumptionWorldId(b.LayoutUtilities.getCurrentWorldId(C.RenderModel.getValue())),t=!0),t&&TDB.applyUpdate(function(){return i.notify()}),StoryLog.BufferedTraceTag(596444879,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::canOverrideViewOptions end"),e}function v(){CommonSettings.AuthoringFromLandingPageContextEnabled?UX.LoadingBarrier.hide():($(".loading-barrier").addClass("done").one("transitionend webkitTransitionEnd",S),platform.setTimeout(S,1500))}function S(){$(".loading-barrier").remove()}function w(t){void 0===t&&(t=!1),StoryLog.BufferedTraceTag(596444880,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::useStoryPage"),!t&&e.initialize||(e.initialize=u,e.destroy=function(){return E()},e.overrideViewOptions=c),StoryLog.BufferedTraceTag(596444881,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize::useStoryPage end")}var T,C=StoryApp.Model,_=StoryApp.View.ViewElements,b=StoryApp.View.Common,A=StoryApp.View.Common.FRE,P=_.AuthorJoinFailDialog,I=StoryApp.Common;e.createSharingManager=t,e.setupRenderModel=i,e.recordTimeForLoadingScreenToHide=n,e.commonInitializePrePageAttach=o,e.commonInitializePostPageAttach=r,e.commonConsumptionInitialize=a,e.commonDestroyStart=s,e.commonDestroyEnd=l;var E=function(){return Task.fromResult(!0)};e.getUpdatedRenderModel=p,e.fireBackNavigationRequest=g,e.fireForwardNavigationRequest=h,e.fireToCNavigationRequest=y,e.fireHomeNavigationRequest=m,e.canOverrideViewOptions=f,e.clearBarrier=v,e.useStoryPage=w,w()}(StoryPageMain||(StoryPageMain={})),StoryLog.BufferedTraceTag(596444882,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"StoryPage::Initialize end");var StoryPageMain;!function(e){var t=StoryApp.Model.Store,i=StoryApp.Model.RM,n=StoryApp.View.ViewElements,o=MathUtils.BandwidthCalculator,r=StoryApp.Model.WP,a=StoryApp.Common,s=function(){function s(t){this.updateNotifier=TDB.notifierTag(596461074,this),this.resourceFactory=t,this.bandwidthCalculator=new o,this.layoutElementLogger=StoryApp.View.Common.LayoutElementLogger.createInstance(),this.performanceManager=StoryPerformance.PerformanceManager.getInstance(),this.urlHelper=a.UrlHelper.getInstance(),this.environment=a.Environment.getInstance();var i=this.environment.getWindowSize();this.dataArgs=new e.RenderModelDataArgsFactory,this.events=new e.RenderModelEventManager(this),this.perfLogger=new e.RenderModelPerformanceMetricsLogger(this.bandwidthCalculator,this.environment),this.downloader=new e.RenderModelDownloader(this,this.perfLogger,this.layoutElementLogger,this.urlHelper,this.performanceManager,this.dataArgs,this.events),this.currentRenderModel=TDB.watchableTag(596476370,this,null),this.shouldHidePreviewPane=TDB.watchableTag(596476371,this,!1),this.waitingForUpdate=TDB.watchableTag(596476372,this,!1),this.skipNextResize=!1,this.resizeDeltaRequired=1,this.onApplyingRenderModelHandlers=[],this.modelWidth=i.w,this.modelHeight=i.h,ActionLogger.CreateClientCounter(ClientAction.AggregationCounter[ClientAction.AggregationCounter.ConsumptionRenderModels]),ActionLogger.CreateClientCounter(ClientAction.AggregationCounter[ClientAction.AggregationCounter.ConsumptionRenderModelSwaps])}return s.prototype.initialize=function(){var e=this;return this.events.registerResizeEvent(),this.initialDeferred=$.Deferred(),this.getAndApplyNewRenderModel(!1),this.initialDeferred.then(function(){return e.initialDeferred=void 0,e.currentRenderModel})},s.prototype.watchForUpdate=function(e){e&&e.watch(this.updateNotifier)},s.prototype.getUpdatedRenderModel=function(e){this.waitForUpdate(),this.getAndApplyNewRenderModel(e)},s.prototype.startWaiting=function(){var e=this;if(this.canSkipResize())return $.Deferred().reject();this.initialDeferred&&this.downloader.cancelDownload();var t=function(){e.waitForUpdate()};return n.ViewModel?n.ViewModel.getVideoPlayerManager().whenNoVideosPlaying().then(t):$.Deferred().resolve().then(t)},s.prototype.waitForUpdate=function(){var e=this;this.waitingForUpdate.getValue()||TDB.applyUpdate(function(){e.waitingForUpdate.setValue(!0),StoryApp.Utilities.ios7()&&e.shouldHidePreviewPane.setValue(!0)})},s.prototype.getAndApplyNewRenderModel=function(e){var t=this,i=this.environment.getWindowSizeFromDOM(),n=i.w,o=i.h;this.downloader.getRenderModel(n,o,e).then(function(e){t.beforeApplyingRenderModel(e),t.modelWidth=n,t.modelHeight=o,t.overridesForCurrentModel=t.dataArgs.getDataArgs(n,o).viewOptionOverrides,t.applyRenderModel(e),t.initialDeferred&&t.initialDeferred.resolve()}).fail(function(e){StoryLog.TraceTag(596476373,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"xhr failed with code "+e),swayConsumptionFirstModel=void 0,t.getAndApplyNewRenderModel(!1)})},s.prototype.beforeApplyingRenderModel=function(e){var n=e?new StoryApp.Model.RM.RenderModel(new t(i.RenderModel.RootId,e)):void 0;this.onApplyingRenderModelHandlers.forEach(function(e){return e(n)})},s.prototype.onApplyingRenderModel=function(e){this.onApplyingRenderModelHandlers.push(e)},s.prototype.applyRenderModel=function(e){var n=this;TDB.applyUpdate(function(){if(n.waitingForUpdate.setValue(!1),e){if(ActionLogger.IncrementClientCounter(ClientAction.AggregationCounter[ClientAction.AggregationCounter.ConsumptionRenderModelSwaps]),n.layoutElementLogger.start(),n.store)n.store.updatePropBags(e,!0);else{n.store=new t(i.RenderModel.RootId,e);var o=new StoryApp.Model.RM.RenderModel(n.store);n.currentRenderModel.setValue(o.renderModelRoot)}n.updateNotifier.notify()}StoryApp.Utilities.ios7()&&TDB.applyUpdate(function(){return n.shouldHidePreviewPane.setValue(!1)},TDB.Justification.InitialConversion)})},s.prototype.processRenderModelResponse=function(e){var t,n=this,o=this.perfLogger.removeAndSavePerformanceMetricsFromRenderModelResponse(e);return this.performanceManager.measurePerformance("fetchRenderModelHelper",function(){o&&o.StoryDiff&&(StoryApp.Utilities.checkDebugState(StoryApp.Utilities.DebugState.CreateRenderModel)?(ActionLogger.IncrementClientCounter(ClientAction.AggregationCounter[ClientAction.AggregationCounter.ConsumptionRenderModels]),t=r.StoryDiff.Flatten(o.StoryDiff,i.RenderModel.PropSerializer)):n.renderModelResponse=o)}),t},s.prototype.canSkipResize=function(e){if(void 0===e&&(e=!0),!1===e)return!1;if(State.PauseUpdates)return!0;var t=StoryApp.View.Common.DialogManager.getInstance();if(t.getCurrentDialog()&&t.getCurrentDialog().visible.getValue())return!0;if(this.fullScreenManager&&this.fullScreenManager.isExternalFullScreen())return this.skipNextResize=!0,!0;if(this.skipNextResize)return this.skipNextResize=void 0,!0;var i=this.environment.getWindowSizeFromDOM(),n=i.w,o=i.h;return Math.abs(n-this.modelWidth)+Math.abs(o-this.modelHeight)<=this.resizeDeltaRequired?this.dataArgs.getDataArgs(n,o).viewOptionOverrides===this.overridesForCurrentModel:!(!StoryApp.Utilities.ios||+(this.modelWidth>this.modelHeight)^+(n>o)||void 0===window.amp)},s.FirstModelWeblogTag="firstModel",s}();e.RenderModelManager=s}(StoryPageMain||(StoryPageMain={}));var SharingUiInit;!function(e){function t(){var e=new a.GlobalExceptionHandler;return e.register(),e}function i(i){t();var n=$("#share-root");if(1===n.length){var s,l=a.PageCompartmentManager.getInstance().createNewPageCompartment();s=void 0!==e.CreateAuthorSharingFrame?e.CreateAuthorSharingFrame(i,l):r(i),o(n[0],s,l)}}function n(){window.parent.postMessage(JSON.stringify({name:"share_dismiss"}),CommonSettings.SiteRootUrl)}function o(e,t,i){document.title=Resources.ProductNameShort;var n=l.PageRootScenario[l.PageRootScenario.SharingUi],o=void 0,r={createView:function(e){return o=t(e)},parentElement:e,scenario:n,creationPolicy:new s.Common.CreationPolicy,pageId:i};l.PageRootVE.createAndAttach(r),ActionLogger.RecordClientAction(new ClientAction.PageLoadActionData(n,document.referrer,null,null)),l.watchFrameForPositionChanges(o,function(e){window.parent.postMessage(JSON.stringify({name:"share_resize",height:e.height,width:e.width}),CommonSettings.SiteRootUrl)}),window.parent.postMessage(JSON.stringify({name:"share_ready"}),CommonSettings.SiteRootUrl)}function r(e){var t={closeMenu:n,contentArgs:{titleWatcher:TDB.immutableWatchable(e),lookupId:StoryPageSettings.LookupId,storyViewMode:StoryViewMode.Preview,embedCode:void 0,sharingManager:StoryPageMain.createSharingManager(),visualLinkMode:VisualLinkMode.Disabled,useCDN:StoryPageSettings.UseCDN}};return function(e){return new l.SocialFrameVE(e,t)}}var a=StoryApp.Common,s=StoryApp.View,l=s.ViewElements;e.initialize=i,e.closeMenu=n}(SharingUiInit||(SharingUiInit={}));